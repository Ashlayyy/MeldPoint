var lu=Object.defineProperty;var $s=e=>{throw TypeError(e)};var uu=(e,t,a)=>t in e?lu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Oe=(e,t,a)=>uu(e,typeof t!="symbol"?t+"":t,a),Fs=(e,t,a)=>t.has(e)||$s("Cannot "+a);var Ne=(e,t,a)=>(Fs(e,t,"read from private field"),a?a.call(e):t.get(e)),$a=(e,t,a)=>t.has(e)?$s("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),In=(e,t,a,n)=>(Fs(e,t,"write to private field"),n?n.call(e,a):t.set(e,a),a);import{aY as bt,bt as qt,br as Sn,bq as Ta,aZ as ct,g as Se,W,a9 as be,c as ie,o as T,bu as va,w as h,a as c,ba as Te,E as X,aR as Pt,e as z,t as j,aS as Re,al as we,bh as Mt,bv as Nt,f as ge,ae as Dt,_ as dt,bw as du,bx as cu,a3 as kt,X as wt,b1 as _i,V as yt,N as q,O as Ae,P as We,b as qe,by as fu,d as p,bz as Rr,am as ia,an as oe,a1 as Ci,ap as Jo,a0 as vt,J as et,u as se,ah as mu,b4 as gt,a_ as or,S as te,v as ka,z as pa,bg as fo,bj as ar,bk as _a,bl as Ca,bm as xa,$ as Qr,Q as hn,bA as mn,bi as qo,bn as ja,bB as Rn,ac as Aa,b0 as jn,bC as pu,bD as vu,bo as it,b3 as Ot,bE as hu,ag as xi,bf as Si,bF as ea,aa as Mn,Y as gu,b2 as yu,bG as Es,bH as Ns,bI as Rs,bp as bu,aW as mo,aX as Fa,bJ as To,bK as wu,bd as Ko,aK as Yo,aL as oa,aO as Zr,aP as sa,a4 as _u,a7 as Xr,b5 as At,bL as jr,bM as Cu,bN as xu,bO as Su,bP as Du,bQ as Qo,T as po,bR as st,bS as Di,aJ as ki,bc as ku,bT as Ai,Z as $o,y as er,G as tr,I as Tn,bU as sr,bV as js,bW as Au,bX as Ms,bY as Pu,bZ as Iu,b_ as Tu,b$ as Cr,c0 as $u,c1 as Fu,c2 as Eu,c3 as Nu,c4 as Ru,c5 as ju,c6 as Mu,c7 as Ou,c8 as Os,c9 as Vs,ca as Bs,cb as Vu,cc as Bu,cd as Uu,ce as zu,cf as Lu,cg as Hu,ch as Gu,R as Wu,ci as Ju,cj as qu,ck as Pi,s as Zo,ak as Jn,cl as qn}from"./index-5wn-0GR-.js";import{G as Ku,u as Kt,D as Yu,U as Qu,_ as Tr}from"./melding_store-kQBpTtOC.js";import{a as ha,u as ga}from"./status_store-D-AYfpW7.js";import{u as Dn}from"./project_store-yqnzPO6Z.js";import{u as eo}from"./projectleider_store-CuDCyUgM.js";import{u as to}from"./task_store-Djeon91P.js";import{c as ao}from"./createVueComponent-CKxNTOnQ.js";import{u as Zu}from"./department_store-Pqw-lHPr.js";import{u as Xu}from"./pageStore-nxijD_tr.js";function Ma(e){return Array.isArray?Array.isArray(e):$i(e)==="[object Array]"}function ed(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function td(e){return e==null?"":ed(e)}function Da(e){return typeof e=="string"}function Ii(e){return typeof e=="number"}function ad(e){return e===!0||e===!1||nd(e)&&$i(e)=="[object Boolean]"}function Ti(e){return typeof e=="object"}function nd(e){return Ti(e)&&e!==null}function ta(e){return e!=null}function vo(e){return!e.trim().length}function $i(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const rd="Incorrect 'index' type",od=e=>`Invalid value for key ${e}`,sd=e=>`Pattern length exceeds max of ${e}.`,id=e=>`Missing ${e} property in key`,ld=e=>`Property 'weight' in key '${e}' must be a positive integer`,Us=Object.prototype.hasOwnProperty;class ud{constructor(t){this._keys=[],this._keyMap={};let a=0;t.forEach(n=>{let r=Fi(n);this._keys.push(r),this._keyMap[r.id]=r,a+=r.weight}),this._keys.forEach(n=>{n.weight/=a})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Fi(e){let t=null,a=null,n=null,r=1,o=null;if(Da(e)||Ma(e))n=e,t=zs(e),a=Fo(e);else{if(!Us.call(e,"name"))throw new Error(id("name"));const s=e.name;if(n=s,Us.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(ld(s));t=zs(s),a=Fo(s),o=e.getFn}return{path:t,id:a,weight:r,src:n,getFn:o}}function zs(e){return Ma(e)?e:e.split(".")}function Fo(e){return Ma(e)?e.join("."):e}function dd(e,t){let a=[],n=!1;const r=(o,s,i)=>{if(ta(o))if(!s[i])a.push(o);else{let d=s[i];const g=o[d];if(!ta(g))return;if(i===s.length-1&&(Da(g)||Ii(g)||ad(g)))a.push(td(g));else if(Ma(g)){n=!0;for(let f=0,l=g.length;f<l;f+=1)r(g[f],s,i+1)}else s.length&&r(g,s,i+1)}};return r(e,Da(t)?t.split("."):t,0),n?a:a[0]}const cd={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},fd={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},md={location:0,threshold:.6,distance:100},pd={useExtendedSearch:!1,getFn:dd,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Pe={...fd,...cd,...md,...pd};const vd=/[^ ]+/g;function hd(e=1,t=3){const a=new Map,n=Math.pow(10,t);return{get(r){const o=r.match(vd).length;if(a.has(o))return a.get(o);const s=1/Math.pow(o,.5*e),i=parseFloat(Math.round(s*n)/n);return a.set(o,i),i},clear(){a.clear()}}}class Xo{constructor({getFn:t=Pe.getFn,fieldNormWeight:a=Pe.fieldNormWeight}={}){this.norm=hd(a,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((a,n)=>{this._keysMap[a.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Da(this.docs[0])?this.docs.forEach((t,a)=>{this._addString(t,a)}):this.docs.forEach((t,a)=>{this._addObject(t,a)}),this.norm.clear())}add(t){const a=this.size();Da(t)?this._addString(t,a):this._addObject(t,a)}removeAt(t){this.records.splice(t,1);for(let a=t,n=this.size();a<n;a+=1)this.records[a].i-=1}getValueForItemAtKeyId(t,a){return t[this._keysMap[a]]}size(){return this.records.length}_addString(t,a){if(!ta(t)||vo(t))return;let n={v:t,i:a,n:this.norm.get(t)};this.records.push(n)}_addObject(t,a){let n={i:a,$:{}};this.keys.forEach((r,o)=>{let s=r.getFn?r.getFn(t):this.getFn(t,r.path);if(ta(s)){if(Ma(s)){let i=[];const d=[{nestedArrIndex:-1,value:s}];for(;d.length;){const{nestedArrIndex:g,value:f}=d.pop();if(ta(f))if(Da(f)&&!vo(f)){let l={v:f,i:g,n:this.norm.get(f)};i.push(l)}else Ma(f)&&f.forEach((l,u)=>{d.push({nestedArrIndex:u,value:l})})}n.$[o]=i}else if(Da(s)&&!vo(s)){let i={v:s,n:this.norm.get(s)};n.$[o]=i}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ei(e,t,{getFn:a=Pe.getFn,fieldNormWeight:n=Pe.fieldNormWeight}={}){const r=new Xo({getFn:a,fieldNormWeight:n});return r.setKeys(e.map(Fi)),r.setSources(t),r.create(),r}function gd(e,{getFn:t=Pe.getFn,fieldNormWeight:a=Pe.fieldNormWeight}={}){const{keys:n,records:r}=e,o=new Xo({getFn:t,fieldNormWeight:a});return o.setKeys(n),o.setIndexRecords(r),o}function xr(e,{errors:t=0,currentLocation:a=0,expectedLocation:n=0,distance:r=Pe.distance,ignoreLocation:o=Pe.ignoreLocation}={}){const s=t/e.length;if(o)return s;const i=Math.abs(n-a);return r?s+i/r:i?1:s}function yd(e=[],t=Pe.minMatchCharLength){let a=[],n=-1,r=-1,o=0;for(let s=e.length;o<s;o+=1){let i=e[o];i&&n===-1?n=o:!i&&n!==-1&&(r=o-1,r-n+1>=t&&a.push([n,r]),n=-1)}return e[o-1]&&o-n>=t&&a.push([n,o-1]),a}const pn=32;function bd(e,t,a,{location:n=Pe.location,distance:r=Pe.distance,threshold:o=Pe.threshold,findAllMatches:s=Pe.findAllMatches,minMatchCharLength:i=Pe.minMatchCharLength,includeMatches:d=Pe.includeMatches,ignoreLocation:g=Pe.ignoreLocation}={}){if(t.length>pn)throw new Error(sd(pn));const f=t.length,l=e.length,u=Math.max(0,Math.min(n,l));let m=o,x=u;const F=i>1||d,C=F?Array(l):[];let D;for(;(D=e.indexOf(t,x))>-1;){let O=xr(t,{currentLocation:D,expectedLocation:u,distance:r,ignoreLocation:g});if(m=Math.min(O,m),x=D+f,F){let w=0;for(;w<f;)C[D+w]=1,w+=1}}x=-1;let L=[],$=1,_=f+l;const S=1<<f-1;for(let O=0;O<f;O+=1){let w=0,y=_;for(;w<y;)xr(t,{errors:O,currentLocation:u+y,expectedLocation:u,distance:r,ignoreLocation:g})<=m?w=y:_=y,y=Math.floor((_-w)/2+w);_=y;let M=Math.max(1,u-y+1),E=s?l:Math.min(u+y,l)+f,R=Array(E+2);R[E+1]=(1<<O)-1;for(let P=E;P>=M;P-=1){let A=P-1,v=a[e.charAt(A)];if(F&&(C[A]=+!!v),R[P]=(R[P+1]<<1|1)&v,O&&(R[P]|=(L[P+1]|L[P])<<1|1|L[P+1]),R[P]&S&&($=xr(t,{errors:O,currentLocation:A,expectedLocation:u,distance:r,ignoreLocation:g}),$<=m)){if(m=$,x=A,x<=u)break;M=Math.max(1,2*u-x)}}if(xr(t,{errors:O+1,currentLocation:u,expectedLocation:u,distance:r,ignoreLocation:g})>m)break;L=R}const k={isMatch:x>=0,score:Math.max(.001,$)};if(F){const O=yd(C,i);O.length?d&&(k.indices=O):k.isMatch=!1}return k}function wd(e){let t={};for(let a=0,n=e.length;a<n;a+=1){const r=e.charAt(a);t[r]=(t[r]||0)|1<<n-a-1}return t}const Mr=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class Ni{constructor(t,{location:a=Pe.location,threshold:n=Pe.threshold,distance:r=Pe.distance,includeMatches:o=Pe.includeMatches,findAllMatches:s=Pe.findAllMatches,minMatchCharLength:i=Pe.minMatchCharLength,isCaseSensitive:d=Pe.isCaseSensitive,ignoreDiacritics:g=Pe.ignoreDiacritics,ignoreLocation:f=Pe.ignoreLocation}={}){if(this.options={location:a,threshold:n,distance:r,includeMatches:o,findAllMatches:s,minMatchCharLength:i,isCaseSensitive:d,ignoreDiacritics:g,ignoreLocation:f},t=d?t:t.toLowerCase(),t=g?Mr(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const l=(m,x)=>{this.chunks.push({pattern:m,alphabet:wd(m),startIndex:x})},u=this.pattern.length;if(u>pn){let m=0;const x=u%pn,F=u-x;for(;m<F;)l(this.pattern.substr(m,pn),m),m+=pn;if(x){const C=u-pn;l(this.pattern.substr(C),C)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:a,ignoreDiacritics:n,includeMatches:r}=this.options;if(t=a?t:t.toLowerCase(),t=n?Mr(t):t,this.pattern===t){let F={isMatch:!0,score:0};return r&&(F.indices=[[0,t.length-1]]),F}const{location:o,distance:s,threshold:i,findAllMatches:d,minMatchCharLength:g,ignoreLocation:f}=this.options;let l=[],u=0,m=!1;this.chunks.forEach(({pattern:F,alphabet:C,startIndex:D})=>{const{isMatch:L,score:$,indices:_}=bd(t,F,C,{location:o+D,distance:s,threshold:i,findAllMatches:d,minMatchCharLength:g,includeMatches:r,ignoreLocation:f});L&&(m=!0),u+=$,L&&_&&(l=[...l,..._])});let x={isMatch:m,score:m?u/this.chunks.length:1};return m&&r&&(x.indices=l),x}}class cn{constructor(t){this.pattern=t}static isMultiMatch(t){return Ls(t,this.multiRegex)}static isSingleMatch(t){return Ls(t,this.singleRegex)}search(){}}function Ls(e,t){const a=e.match(t);return a?a[1]:null}class _d extends cn{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const a=t===this.pattern;return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class Cd extends cn{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class xd extends cn{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const a=t.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class Sd extends cn{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const a=!t.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,t.length-1]}}}class Dd extends cn{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const a=t.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class kd extends cn{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const a=!t.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,t.length-1]}}}class Ri extends cn{constructor(t,{location:a=Pe.location,threshold:n=Pe.threshold,distance:r=Pe.distance,includeMatches:o=Pe.includeMatches,findAllMatches:s=Pe.findAllMatches,minMatchCharLength:i=Pe.minMatchCharLength,isCaseSensitive:d=Pe.isCaseSensitive,ignoreDiacritics:g=Pe.ignoreDiacritics,ignoreLocation:f=Pe.ignoreLocation}={}){super(t),this._bitapSearch=new Ni(t,{location:a,threshold:n,distance:r,includeMatches:o,findAllMatches:s,minMatchCharLength:i,isCaseSensitive:d,ignoreDiacritics:g,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class ji extends cn{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let a=0,n;const r=[],o=this.pattern.length;for(;(n=t.indexOf(this.pattern,a))>-1;)a=n+o,r.push([n,a-1]);const s=!!r.length;return{isMatch:s,score:s?0:1,indices:r}}}const Eo=[_d,ji,xd,Sd,kd,Dd,Cd,Ri],Hs=Eo.length,Ad=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Pd="|";function Id(e,t={}){return e.split(Pd).map(a=>{let n=a.trim().split(Ad).filter(o=>o&&!!o.trim()),r=[];for(let o=0,s=n.length;o<s;o+=1){const i=n[o];let d=!1,g=-1;for(;!d&&++g<Hs;){const f=Eo[g];let l=f.isMultiMatch(i);l&&(r.push(new f(l,t)),d=!0)}if(!d)for(g=-1;++g<Hs;){const f=Eo[g];let l=f.isSingleMatch(i);if(l){r.push(new f(l,t));break}}}return r})}const Td=new Set([Ri.type,ji.type]);class $d{constructor(t,{isCaseSensitive:a=Pe.isCaseSensitive,ignoreDiacritics:n=Pe.ignoreDiacritics,includeMatches:r=Pe.includeMatches,minMatchCharLength:o=Pe.minMatchCharLength,ignoreLocation:s=Pe.ignoreLocation,findAllMatches:i=Pe.findAllMatches,location:d=Pe.location,threshold:g=Pe.threshold,distance:f=Pe.distance}={}){this.query=null,this.options={isCaseSensitive:a,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:o,findAllMatches:i,ignoreLocation:s,location:d,threshold:g,distance:f},t=a?t:t.toLowerCase(),t=n?Mr(t):t,this.pattern=t,this.query=Id(this.pattern,this.options)}static condition(t,a){return a.useExtendedSearch}searchIn(t){const a=this.query;if(!a)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:o}=this.options;t=r?t:t.toLowerCase(),t=o?Mr(t):t;let s=0,i=[],d=0;for(let g=0,f=a.length;g<f;g+=1){const l=a[g];i.length=0,s=0;for(let u=0,m=l.length;u<m;u+=1){const x=l[u],{isMatch:F,indices:C,score:D}=x.search(t);if(F){if(s+=1,d+=D,n){const L=x.constructor.type;Td.has(L)?i=[...i,...C]:i.push(C)}}else{d=0,s=0,i.length=0;break}}if(s){let u={isMatch:!0,score:d/s};return n&&(u.indices=i),u}}return{isMatch:!1,score:1}}}const No=[];function Fd(...e){No.push(...e)}function Ro(e,t){for(let a=0,n=No.length;a<n;a+=1){let r=No[a];if(r.condition(e,t))return new r(e,t)}return new Ni(e,t)}const Or={AND:"$and",OR:"$or"},jo={PATH:"$path",PATTERN:"$val"},Mo=e=>!!(e[Or.AND]||e[Or.OR]),Ed=e=>!!e[jo.PATH],Nd=e=>!Ma(e)&&Ti(e)&&!Mo(e),Gs=e=>({[Or.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Mi(e,t,{auto:a=!0}={}){const n=r=>{let o=Object.keys(r);const s=Ed(r);if(!s&&o.length>1&&!Mo(r))return n(Gs(r));if(Nd(r)){const d=s?r[jo.PATH]:o[0],g=s?r[jo.PATTERN]:r[d];if(!Da(g))throw new Error(od(d));const f={keyId:Fo(d),pattern:g};return a&&(f.searcher=Ro(g,t)),f}let i={children:[],operator:o[0]};return o.forEach(d=>{const g=r[d];Ma(g)&&g.forEach(f=>{i.children.push(n(f))})}),i};return Mo(e)||(e=Gs(e)),n(e)}function Rd(e,{ignoreFieldNorm:t=Pe.ignoreFieldNorm}){e.forEach(a=>{let n=1;a.matches.forEach(({key:r,norm:o,score:s})=>{const i=r?r.weight:null;n*=Math.pow(s===0&&i?Number.EPSILON:s,(i||1)*(t?1:o))}),a.score=n})}function jd(e,t){const a=e.matches;t.matches=[],ta(a)&&a.forEach(n=>{if(!ta(n.indices)||!n.indices.length)return;const{indices:r,value:o}=n;let s={indices:r,value:o};n.key&&(s.key=n.key.src),n.idx>-1&&(s.refIndex=n.idx),t.matches.push(s)})}function Md(e,t){t.score=e.score}function Od(e,t,{includeMatches:a=Pe.includeMatches,includeScore:n=Pe.includeScore}={}){const r=[];return a&&r.push(jd),n&&r.push(Md),e.map(o=>{const{idx:s}=o,i={item:t[s],refIndex:s};return r.length&&r.forEach(d=>{d(o,i)}),i})}class xn{constructor(t,a={},n){this.options={...Pe,...a},this.options.useExtendedSearch,this._keyStore=new ud(this.options.keys),this.setCollection(t,n)}setCollection(t,a){if(this._docs=t,a&&!(a instanceof Xo))throw new Error(rd);this._myIndex=a||Ei(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ta(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const a=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];t(o,n)&&(this.removeAt(n),n-=1,r-=1,a.push(o))}return a}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:a=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:s,ignoreFieldNorm:i}=this.options;let d=Da(t)?Da(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Rd(d,{ignoreFieldNorm:i}),o&&d.sort(s),Ii(a)&&a>-1&&(d=d.slice(0,a)),Od(d,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const a=Ro(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:o,i:s,n:i})=>{if(!ta(o))return;const{isMatch:d,score:g,indices:f}=a.searchIn(o);d&&r.push({item:o,idx:s,matches:[{score:g,value:o,norm:i,indices:f}]})}),r}_searchLogical(t){const a=Mi(t,this.options),n=(i,d,g)=>{if(!i.children){const{keyId:l,searcher:u}=i,m=this._findMatches({key:this._keyStore.get(l),value:this._myIndex.getValueForItemAtKeyId(d,l),searcher:u});return m&&m.length?[{idx:g,item:d,matches:m}]:[]}const f=[];for(let l=0,u=i.children.length;l<u;l+=1){const m=i.children[l],x=n(m,d,g);if(x.length)f.push(...x);else if(i.operator===Or.AND)return[]}return f},r=this._myIndex.records,o={},s=[];return r.forEach(({$:i,i:d})=>{if(ta(i)){let g=n(a,i,d);g.length&&(o[d]||(o[d]={idx:d,item:i,matches:[]},s.push(o[d])),g.forEach(({matches:f})=>{o[d].matches.push(...f)}))}}),s}_searchObjectList(t){const a=Ro(t,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach(({$:s,i})=>{if(!ta(s))return;let d=[];n.forEach((g,f)=>{d.push(...this._findMatches({key:g,value:s[f],searcher:a}))}),d.length&&o.push({idx:i,item:s,matches:d})}),o}_findMatches({key:t,value:a,searcher:n}){if(!ta(a))return[];let r=[];if(Ma(a))a.forEach(({v:o,i:s,n:i})=>{if(!ta(o))return;const{isMatch:d,score:g,indices:f}=n.searchIn(o);d&&r.push({score:g,key:t,value:o,idx:s,norm:i,indices:f})});else{const{v:o,n:s}=a,{isMatch:i,score:d,indices:g}=n.searchIn(o);i&&r.push({score:d,key:t,value:o,norm:s,indices:g})}return r}}xn.version="7.1.0";xn.createIndex=Ei;xn.parseIndex=gd;xn.config=Pe;xn.parseQuery=Mi;Fd($d);async function Vd(e){if(!e)throw new Error("Data is required");if((e==null?void 0:e.Faalkosten)<0)throw new Error("Faalkosten cannot be less than 0");if((e==null?void 0:e.Faalkosten)>1e6)throw new Error("Faalkosten cannot be more than 1000000");const t=await bt.post("undefined/correctief",e);return qt.clear(),{status:t.status,data:t.data.data}}async function Ws(e,t){if(!e||!t)throw new Error("ID and data are required");const a=await bt.patch(`undefined/correctief/${e}`,t);return qt.remove(`correctief-${e}`),{status:a.status,data:a.data.data}}const Sr=Ta.global.t,Dr=ct(),es=Sn("correctief",{state:()=>({correctiefItems:[],isLoading:!1,error:null}),actions:{async fetchCorrectief(){this.isLoading=!0;try{const e=await Ku();if(e.status===200)return this.correctiefItems=e.data.filter(t=>{var a,n,r,o,s;return t.Type==="Melding"&&t.Archived===!1&&((a=t.Correctief)==null?void 0:a.AkoordOPS)===!0&&((r=(n=t.Correctief)==null?void 0:n.Status)==null?void 0:r.StatusNaam)!=="Afgerond"&&((o=t.Correctief)==null?void 0:o.Deadline)!==void 0&&((s=t.Correctief)==null?void 0:s.Deadline)!==null}),e.data;throw new Error(JSON.stringify(e))}catch(e){Dr.error({message:Sr("errors.fetch_error",{error:e})})}finally{this.isLoading=!1}},async updateCorrectief(e,t){try{const a=await Ws(e,t);if((a==null?void 0:a.status)===200)return await this.fetchCorrectief(),a;throw new Error(JSON.stringify(a))}catch(a){Dr.error({message:Sr("errors.save_error",{error:a})})}},async createCorrectief(e){try{const t=await Vd(e);if(t.status===200)return await this.fetchCorrectief(),t.data;throw new Error(JSON.stringify(t))}catch(t){Dr.error({message:Sr("errors.save_error",{error:t})})}},async schedulePDCA(e){try{const t=await Ws(e,{TIMER:Date.now()+6048e5,OnlyTimer:!0});if(t.status===200)return t.data;throw new Error(JSON.stringify(t))}catch(t){Dr.error({message:Sr("errors.save_error",{error:t})})}}},getters:{getCorrectieById:e=>t=>e.correctiefItems.find(a=>a.id===t)}}),Oi=Sn("filter",{state:()=>({expandedPanel:!1,loginFilterActive:!1,voorMijFilterActive:!1,filters:{project:null,projectNaam:null,volgNummer:null,deelorder:null,actiehouderCorrectief:null,actiehouderPreventief:null,projectleider:null,statusCorrectief:null,statusPreventief:null,akoord:null,title:null,PDCA_status:null,department:null,filterMode:"OR"}}),actions:{setFilters(e){this.filters=e},clearFilters(){this.filters={project:null,projectNaam:null,volgNummer:null,deelorder:null,actiehouderCorrectief:null,actiehouderPreventief:null,projectleider:null,statusCorrectief:null,statusPreventief:null,akoord:null,title:null,PDCA_status:null,department:null,filterMode:"OR"}},togglePanel(e){this.expandedPanel=e},applyFilterLogin(e,t){e&&this.voorMijFilterActive&&(this.filters.actiehouderCorrectief=e,this.filters.actiehouderPreventief=e,this.filters.filterMode="OR"),t&&this.voorMijFilterActive&&(this.filters.projectleider=t,this.filters.filterMode="OR")}},persist:!0}),Bd=Se({__name:"dialog",props:{modelValue:{type:Boolean,default:!1},title:{type:String},maxWidth:{type:[String,Number],default:800},contentClass:{type:String,default:""},scrim:{type:Boolean,default:!0},showActions:{type:Boolean,default:!1},showConfirm:{type:Boolean,default:!1},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},editingButton:{type:Boolean,default:!1},closeOnConfirm:{type:Boolean,default:!0},confirmFormat:{type:String,default:"text"},persistent:{type:Boolean,default:!1},showChat:{type:Boolean,default:!1},showClone:{type:Boolean,default:!1}},emits:["update:modelValue","confirm"],setup(e,{emit:t}){const a=e,n=t,r=W(a.modelValue),o=W(!1);be(()=>{var d;return(d=document.querySelector(".helpdesk-drawer"))==null?void 0:d.getAttribute("aria-hidden")},d=>{o.value=d==="false"}),be(()=>a.modelValue,d=>{r.value=d}),be(r,d=>{a.modelValue!==d&&n("update:modelValue",d)});const s=()=>{r.value=!1},i=()=>{n("confirm"),a.closeOnConfirm&&s()};return(d,g)=>(T(),ie(va,{modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=f=>r.value=f),"max-width":e.maxWidth,persistent:e.persistent,scrim:e.scrim,class:"scrollable-dialog","retain-focus":!1},{default:h(()=>[c(Te,null,{default:h(()=>[e.title&&e.title.length>0?(T(),ie(Pt,{key:0,class:"bg-secondary text-white pa-4"},{default:h(()=>[z(j(e.title),1)]),_:1})):X("",!0),c(Re,{class:we(["contentClass","no-top-padding"])},{default:h(()=>[Mt(d.$slots,"default",{},void 0,!0)]),_:3}),e.showActions||e.showConfirm?(T(),ie(Nt,{key:1},{default:h(()=>[e.showActions===!0?(T(),ie(ge,{key:0,color:"grey darken-1",variant:"text",onClick:s},{default:h(()=>[z(j(e.cancelText),1)]),_:1})):X("",!0),c(Dt),e.showActions===!0||e.showConfirm===!0?(T(),ie(ge,{key:1,color:"primary",variant:e.confirmFormat??"text",onClick:i},{default:h(()=>[z(j(e.confirmText),1)]),_:1},8,["variant"])):X("",!0)]),_:1})):X("",!0)]),_:3})]),_:3},8,["modelValue","max-width","persistent","scrim"]))}}),pr=dt(Bd,[["__scopeId","data-v-5a0bbf37"]]);async function ho(){const e="preventief-list",t=qt.get(e);if(t)return{status:200,data:t};const a=await bt.get("undefined/preventief");return qt.set(e,a.data.data,{ttl:2*60*1e3}),{status:a.status,data:a.data.data}}async function Ud(e){if(!e)throw new Error("ID is required");const t=`preventief-${e}`,a=qt.get(t);if(a)return{status:200,data:a};const n=await bt.get(`undefined/preventief/${e}`);return qt.set(t,n.data.data,{ttl:5*60*1e3}),{status:n.status,data:n.data.data}}async function zd(e){if(!e)throw new Error("Data is required");const t=await bt.post("undefined/preventief",e);return{status:t.status,data:t.data.data}}async function kr(e,t){if(!e)throw new Error("ID is required");if(!t)throw new Error("Data is required");try{const a=await bt.patch(`undefined/preventief/${e}`,{data:t});if(qt.remove(`preventief-${e}`),a.status===200)return{status:a.status,data:a.data.data};throw new Error(JSON.stringify(a))}catch(a){throw a}}async function Ld(e,t){if(!e||!t)throw new Error("Both meldingID and correspondence are required");const a=await bt.patch(`undefined/preventief/correspondence/${e}`,{correspondence:t});return qt.remove(`preventief-${e}`),{status:a.status,data:a.data.data}}async function Hd(e,t){if(!e||!t)throw new Error("Both preventiefID and correspondenceID are required");const a=await bt.delete(`undefined/preventief/correspondence/${e}/${t}`);return qt.remove(`preventief-${e}`),{status:a.status,data:a.data.data}}const ua=Ta.global.t,da=ct(),Qt=cu(),ca="ðŸ›¡ï¸ [PreventiefStore]",fa={request:"color: #2196F3",cache:"color: #4CAF50",error:"color: #F44336",info:"color: #9C27B0"},kn=Sn("preventief",{state:()=>({preventief:null,preventieven:null,loading:{single:!1,all:!1},initialized:!1,preventiefCache:new Map,initializationPromise:null,standardData:{Teamleden:null,CorrespondenceIDs:null,Smart:{Specifiek:{Text:"",Behaald:"",Toelichting:""},Meetbaar:{Text:"",Behaald:"",Toelichting:""},Haalbaar:{Text:"",Behaald:"",Toelichting:""},Relevant:{Text:"",Behaald:"",Toelichting:""},Tijdgebonden:{Text:"",Behaald:"",Toelichting:""}},Steps:{Obstakel:{Finished:!1,Deadline:null},Plan:{Finished:!1,Deadline:null},Do:{Finished:!1,Deadline:null},Check:{Finished:!1,Deadline:null},Act:{Finished:!1,Deadline:null},Finished:{Finished:!1,Deadline:null}},FailureAnalysis:null,NewPDCAPlanning:null,Documentation:null,TrainingNeeded:!1,TrainingNeededType:null,Monitoring:null,FollowUpDate:null,Responsible:null,TodoItems:[],id:"",Kernoorzaak:null,Why:null,Deadline:null,Title:null,Strategie:{KPI:null,Comments:null},Conclusie:null,PDCAStatus:null,ActJSON:null,StatusID:null,BegeleiderID:null,Begeleider:null,CreatedAt:"",UpdatedAt:"",User:null,Status:null}}),actions:{async initialize(){if(!this.initialized)return this.initializationPromise?this.initializationPromise:(this.initializationPromise=Qt.executeRequest("preventief","initialization",async()=>{this.loading.all=!0;try{const e=await ho();return e.status===200&&(this.preventieven=e.data||null),this.initialized=!0,e}catch(e){throw console.error(`${ca} %c Initialization failed`,fa.error,e),da.error({message:ua("errors.fetch_error",{error:e})}),e}finally{this.initializationPromise=null,this.loading.all=!1}}),this.initializationPromise)},refreshData:du.debounce(async function(){return this.initialized?Qt.executeRequest("preventief","refresh",async()=>{const e=await ho();e.status===200&&(this.preventieven=e.data||null)}):this.initialize()},1e3),async updatePreventief(e,t){return Qt.executeRequest("preventief",`updatePreventief-${e}`,async()=>{this.loading.single=!0;try{const a=await kr(e,t);if(a.status===200)return this.preventief=a.data||null,this.preventiefCache.set(e,a.data),{status:a.status,data:a.data};throw new Error(JSON.stringify(a))}catch(a){console.error(`${ca} %c Update failed`,fa.error,a),da.error({message:ua("errors.save_error",{error:a})})}finally{this.loading.single=!1}})},async updatePreventiefAutoSave(e,t){return Qt.executeRequest("preventief",`autoSave-${e}`,async()=>{try{const a=await kr(e,t);if(a.status===200)return this.preventiefCache.set(e,a.data),{status:a.status,data:a.data};throw new Error(JSON.stringify(a))}catch(a){console.error(`${ca} %c AutoSave failed`,fa.error,a),da.error({message:ua("errors.save_error",{error:a})})}})},async getSinglePreventief(e){return Qt.executeRequest("preventief",`getSingle-${e}`,async()=>{this.loading.single=!0;try{if(this.preventiefCache.has(e))return this.preventief=this.preventiefCache.get(e),{status:200,data:this.preventief};const t=await Ud(e);if(t.status===200)return this.preventief=t.data||null,this.preventiefCache.set(e,t.data),{status:t.status,data:t.data};throw new Error(JSON.stringify(t))}catch(t){console.error(`${ca} %c Fetch single failed`,fa.error,t),da.error({message:ua("errors.fetch_error",{error:t})})}finally{this.loading.single=!1}})},async getAllPreventief(){return this.initialized?Qt.executeRequest("preventief","getAll",async()=>{this.loading.all=!0;try{const e=await ho();if(e.status===200)return this.preventieven=e.data||null,{status:e.status,data:e.data};throw new Error(JSON.stringify(e))}catch(e){console.error(`${ca} %c Fetch all failed`,fa.error,e),da.error({message:ua("errors.fetch_error",{error:e})})}finally{this.loading.all=!1}}):this.initialize()},async linkStatus(e,t){return Qt.executeRequest("preventief",`linkStatus-${e}`,async()=>{this.loading.single=!0;try{const a=await kr(e,{StatusID:t});if(a.status===200)return this.preventiefCache.set(e,a.data),{status:a.status,data:a.data};throw new Error(JSON.stringify(a))}catch(a){console.error(`${ca} %c Link status failed`,fa.error,a),da.error({message:ua("errors.save_error",{error:a})})}finally{this.loading.single=!1}})},async linkActiehouder(e,t){return Qt.executeRequest("preventief",`linkActiehouder-${e}`,async()=>{this.loading.single=!0;try{const a=await kr(e,{User:{id:t}});if(a.status===200)return this.preventiefCache.set(e,a.data),{status:a.status,data:a.data};throw new Error(JSON.stringify(a))}catch(a){console.error(`${ca} %c Link actiehouder failed`,fa.error,a),da.error({message:ua("errors.save_error",{error:a})})}finally{this.loading.single=!1}})},async addCorrespondence(e,t){return Qt.executeRequest("preventief",`addCorrespondence-${e}`,async()=>{this.loading.single=!0;try{const a=await Ld(e,t);if(a.status===200)return this.preventiefCache.set(e,a.data),a.data;throw new Error(JSON.stringify(a))}catch(a){console.error(`${ca} %c Add correspondence failed`,fa.error,a),da.error({message:ua("errors.save_error",{error:a})})}finally{this.loading.single=!1}})},async createPreventief(e){return Qt.executeRequest("preventief","create",async()=>{var t;this.loading.single=!0;try{const a=await zd({...JSON.parse(JSON.stringify(this.standardData)),...e});if(a.status===201)return this.preventief=a.data||null,(t=a.data)!=null&&t.id&&this.preventiefCache.set(a.data.id,a.data),a;throw new Error(JSON.stringify(a))}catch(a){console.error(`${ca} %c Create failed`,fa.error,a),da.error({message:ua("errors.save_error",{error:a})})}finally{this.loading.single=!1}})},async removeCorrespondence(e,t){return Qt.executeRequest("preventief",`removeCorrespondence-${e}-${t}`,async()=>{this.loading.single=!0;try{const a=await Hd(e,t);if(a.status===200)return this.preventiefCache.set(e,a.data),{status:a.status,data:a.data};throw new Error(JSON.stringify(a))}catch(a){console.error(`${ca} %c Remove correspondence failed`,fa.error,a),da.error({message:ua("errors.save_error",{error:a})})}finally{this.loading.single=!1}})},async getPreventiefById(e){return Qt.executeRequest("preventief",`getById-${e}`,async()=>{var t;return this.preventief=JSON.parse(JSON.stringify(this.standardData)),await this.getAllPreventief(),this.preventief={...this.preventief,...this.preventieven.find(a=>a.id===e)},(t=this.preventief)!=null&&t.id&&this.preventiefCache.set(e,this.preventief),this.preventief})},async schedulePDCA(e){return Qt.executeRequest("preventief",`schedulePDCA-${e}`,async()=>{this.loading.single=!0;try{this.loading.single=!1}catch(t){console.error(`${ca} %c Schedule PDCA failed`,fa.error,t),da.error({message:ua("errors.save_error",{error:t})}),this.loading.single=!1}})},clearCache(){this.preventiefCache.clear()}}}),Gd={class:"preview-section"},Wd={key:0,class:"file-preview"},Jd={key:1,class:"file-icon-preview"},qd={class:"text-truncate font-weight-medium"},Kd={class:"text-caption text-medium-emphasis"},Yd=Se({__name:"showFiles",props:{PDCA:{required:!1,type:Boolean},files:{type:Array,required:!1},clickedItem:{type:Object,required:!1},setup:{type:Boolean,required:!1,default:!1}},emits:["openImageGallery","update","updateFiles"],setup(e,{emit:t}){const{t:a}=kt(),n=W(!0),r=W([]),o=W(0),s=Kt(),i=kn(),d=ct(),g=e,f=t,l=W([]),u=W(g.clickedItem),m=async()=>{var _,S,k,O,w,y,M,E,R,I;n.value=!0;try{g.files?l.value=g.files:u.value?g.PDCA===!0?(k=(S=(_=u.value)==null?void 0:_.Preventief)==null?void 0:S.CorrespondenceIDs)!=null&&k.IDs?l.value=JSON.parse((y=(w=(O=u.value)==null?void 0:O.Preventief)==null?void 0:w.CorrespondenceIDs)==null?void 0:y.IDs):l.value=[]:(E=(M=u.value)==null?void 0:M.CorrespondenceIDs)!=null&&E.IDs?l.value=JSON.parse((I=(R=u.value)==null?void 0:R.CorrespondenceIDs)==null?void 0:I.IDs):l.value=[]:l.value=[]}catch{d.error({message:"Error loading files"})}finally{setTimeout(()=>{n.value=!1},200)}};be(()=>g.clickedItem,async _=>{u.value=_,await m()},{deep:!0}),wt(async()=>{await m()});const x=_=>{var S,k,O,w,y,M,E,R,I,P,A,v,b,V,B,J,H;g.PDCA===!0?((w=JSON.parse((O=(k=(S=u.value)==null?void 0:S.Preventief)==null?void 0:k.CorrespondenceIDs)==null?void 0:O.IDs)[0])==null?void 0:w.length)>1?r.value=JSON.parse((E=(M=(y=u.value)==null?void 0:y.Preventief)==null?void 0:M.CorrespondenceIDs)==null?void 0:E.IDs)[0].filter(N=>N.type.startsWith("image/")):r.value=JSON.parse((P=(I=(R=u.value)==null?void 0:R.Preventief)==null?void 0:I.CorrespondenceIDs)==null?void 0:P.IDs).filter(N=>N.type.startsWith("image/")):((b=JSON.parse((v=(A=u.value)==null?void 0:A.CorrespondenceIDs)==null?void 0:v.IDs)[0])==null?void 0:b.length)>1?r.value=JSON.parse((B=(V=u.value)==null?void 0:V.CorrespondenceIDs)==null?void 0:B.IDs)[0].filter(N=>N.type.startsWith("image/")):r.value=JSON.parse((H=(J=u.value)==null?void 0:J.CorrespondenceIDs)==null?void 0:H.IDs).filter(N=>N.type.startsWith("image/")),o.value=r.value.findIndex(N=>N.key===_.key),f("openImageGallery",[o,r])},F=_=>{window.open(_.url,"_blank")},C=async _=>{var S;d.promise({message:"Deleting file..."});try{if(await s.removeCorrespondence((S=u.value)==null?void 0:S.id,_.key)&&u.value){const O=await s.getReportById(u.value.id);O&&(u.value=O),f("update",[!0,!0]),d.resolvePromise({message:a("notifications.delete_success")})}else d.rejectPromise({message:a("errors.delete_error")})}catch(k){d.rejectPromise({message:a("errors.delete_error",{error:k})})}},D=async _=>{d.promise({message:"Deleting file..."});try{if(await Yu(_.key)){const k=l.value.filter(O=>O.key!==_.key);l.value=k,f("updateFiles",k),d.resolvePromise({message:a("notifications.delete_success")})}else d.rejectPromise({message:a("errors.delete_error")})}catch(S){d.rejectPromise({message:a("errors.delete_error",{error:S})})}},L=async _=>{var S,k;d.promise({message:"Deleting file..."});try{if(await i.removeCorrespondence((k=(S=u.value)==null?void 0:S.Preventief)==null?void 0:k.id,_.key)&&u.value){const w=await s.getReportById(u.value.id);w&&(u.value=w),f("update",[!0,!0]),d.resolvePromise({message:a("notifications.delete_success")})}else d.rejectPromise({message:a("errors.delete_error")})}catch(O){d.rejectPromise({message:a("errors.delete_error",{error:O})})}},$=_=>{if(_===0)return"0 Bytes";const S=1024,k=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(_)/Math.log(S));return parseFloat((_/Math.pow(S,O)).toFixed(2))+" "+k[O]};return(_,S)=>{var k;return T(),ie(_i,{fluid:"",key:(k=u.value)==null?void 0:k.id},{default:h(()=>[n.value?(T(),ie(yt,{key:0},{default:h(()=>[(T(),q(Ae,null,We(4,O=>c(qe,{key:O,cols:"12",sm:"6",md:"6",lg:"6",class:"pa-2"},{default:h(()=>[c(Te,{class:"file-card",elevation:"1"},{default:h(()=>[c(fu,{type:"image, article",height:"200"})]),_:1})]),_:2},1024)),64))]),_:1})):l.value.length>0?(T(),ie(yt,{key:1},{default:h(()=>[(T(!0),q(Ae,null,We(l.value,O=>(T(),ie(qe,{key:O==null?void 0:O.key,cols:"12",sm:"6",md:"6",lg:"6",class:"pa-2"},{default:h(()=>[O?(T(),ie(Te,{key:0,class:"file-card",elevation:"1"},{default:h(()=>{var w,y;return[p("div",Gd,[(w=O==null?void 0:O.type)!=null&&w.startsWith("image/")?(T(),q("div",Wd,[e.setup===!1?(T(),ie(Rr,{key:0,src:O==null?void 0:O.url,height:200,width:400,onClick:M=>x(O),class:"image-preview"},{placeholder:h(()=>[c(yt,{class:"fill-height ma-0",align:"center",justify:"center"},{default:h(()=>[c(ia,{indeterminate:"",color:"primary"})]),_:1})]),_:2},1032,["src","onClick"])):(T(),ie(Rr,{key:1,src:O==null?void 0:O.url,height:200,width:400,class:"image-preview"},{placeholder:h(()=>[c(yt,{class:"fill-height ma-0",align:"center",justify:"center"},{default:h(()=>[c(ia,{indeterminate:"",color:"primary"})]),_:1})]),_:2},1032,["src"]))])):(T(),q("div",Jd,[c(oe,{icon:(O==null?void 0:O.type)==="application/pdf"?"mdi-file-pdf-box":(y=O==null?void 0:O.type)!=null&&y.startsWith("video/")?"mdi-file-video":"mdi-file-question",size:"64",color:"error"},null,8,["icon"])]))]),c(Re,{class:"file-info pa-3"},{default:h(()=>[p("div",qd,j(O.name),1),p("div",Kd,j($(O.size)),1)]),_:2},1024),c(Nt,{class:"pa-3 pt-0 card-actions"},{default:h(()=>[c(ge,{variant:"text",density:"comfortable",size:"small",color:"primary","prepend-icon":"mdi-eye",onClick:M=>F(O)},{default:h(()=>S[0]||(S[0]=[z(" View ")])),_:2,__:[0]},1032,["onClick"]),c(ge,{variant:"text",density:"comfortable",size:"small",color:"error","prepend-icon":"mdi-delete",onClick:M=>e.PDCA?L(O):e.setup?D(O):C(O)},{default:h(()=>S[1]||(S[1]=[z(" Delete ")])),_:2,__:[1]},1032,["onClick"])]),_:2},1024)]}),_:2},1024)):X("",!0)]),_:2},1024))),128))]),_:1})):(T(),ie(yt,{key:2},{default:h(()=>[c(qe,{cols:"12",class:"text-center pa-8"},{default:h(()=>[c(oe,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:h(()=>S[2]||(S[2]=[z("mdi-file-upload-outline")])),_:1,__:[2]}),S[3]||(S[3]=p("div",{class:"text-h6 text-grey"},"No files uploaded yet",-1))]),_:1,__:[3]})]),_:1}))]),_:1})}}}),Oo=dt(Yd,[["__scopeId","data-v-599adb70"]]);async function Qd(e){if(!e)throw new Error("ID is required");const t=`chat-messages-${e}`,a=qt.get(t);if(a)return{status:200,data:a};const n=await bt.get(`undefined/chat/${e}`);return qt.set(t,n.data.data,{ttl:30*1e3}),{status:n.status,data:n.data.data}}async function Zd(e,t,a){if(!e||!t||!a)throw new Error("ID, message and user are required");const n=await bt.post(`undefined/chat/message/${e}`,{message:t,user:a});return qt.remove(`chat-messages-${e}`),{status:n.status,data:n.data.data}}async function Xd(e){const t=await bt.post("undefined/chat/chatroom",{meldingId:e});return{status:t.status,data:t.data.data}}const Kn=Ta.global.t,go=ct(),Vi=Sn("chat",{state:()=>({messages:[],currentChatRoom:null,loading:!1,error:null}),actions:{resetState(){this.messages=[],this.currentChatRoom=null,this.loading=!1,this.error=null},async fetchMessages(){this.loading=!0;try{if(!this.currentChatRoom){this.messages=[];return}const e=await Qd(this.currentChatRoom);if(e!=null&&e.data)this.messages=e.data;else throw this.messages=[],new Error(JSON.stringify(e))}catch(e){go.error({message:Kn("errors.fetch_error",{error:e.message})}),this.messages=[]}finally{this.loading=!1}},async createChatRoom(e){try{if(this.currentChatRoom)return{id:this.currentChatRoom};const t=await Xd(e);if(t.status===201)return await Qu(e,{ChatRoomID:t.data.id}),this.currentChatRoom=t.data.id,t.data;throw new Error(JSON.stringify(t))}catch(t){return go.error({message:Kn("errors.save_error",{error:t.message})}),null}},async sendMessage(e,t,a){try{if(!(e!=null&&e.trim())||!a||!(t!=null&&t.trim()))throw new Error(Kn("errors.required_parameters"));if(!this.currentChatRoom){const r=await this.createChatRoom(t);if(!(r!=null&&r.id))throw new Error(Kn("errors.no_chatroom_found"))}const n=await Zd(this.currentChatRoom,e,a);if(n.status===201)return await this.fetchMessages(),n==null?void 0:n.data;throw new Error(JSON.stringify(n))}catch(n){go.error({message:Kn("errors.save_error",{error:n.message})})}},setCurrentChatRoom(e){e&&(this.currentChatRoom=e)}}}),ec={class:"customHeight"},tc={class:"d-sm-flex align-center gap-3 pa-4"},ac={class:"d-flex gap-2 align-center"},nc={class:"text-h5 mb-n1"},rc={key:0,class:"text-center my-4"},oc={class:"d-flex align-center gap-2 mb-1"},sc={class:"font-weight-medium"},ic={class:"text-body-1 message-content"},lc={class:"text-medium-emphasis"},uc={class:"chat-input pa-4 bg-surface"},dc=Se({__name:"CommunicationTab",setup(e){const t=Kt(),a=Vi(),n=Ci(),r=W([]),o=W(""),s=W(!1),i=W(null),d=()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)},g=async()=>{var u;if(!((u=o.value)!=null&&u.trim())||s.value)return;s.value=!0;const l=o.value;o.value="";try{const m=t.getReportById(t.selectedFormId);m!=null&&m.ChatRoomID&&a.setCurrentChatRoom(m.ChatRoomID),await a.sendMessage(l,t.selectedFormId,n.user.id),r.value=a.messages,setTimeout(d,100)}catch(m){console.error("Error in chat message handling:",m),o.value=l}finally{s.value=!1}},f=l=>{l.key==="Enter"&&(l.shiftKey||(l.preventDefault(),g()))};return be(()=>a.messages,l=>{l!=null&&l.length&&(r.value=l,setTimeout(d,100))},{deep:!0}),wt(async()=>{var l;if(t.selectedFormId){const u=t.getReportById(t.selectedFormId);(l=u==null?void 0:u.ChatRoom)!=null&&l.id&&(a.setCurrentChatRoom(u.ChatRoom.id),await a.fetchMessages(),r.value=a.messages,setTimeout(d,100))}}),(l,u)=>(T(),q("div",ec,[p("div",tc,[p("div",ac,[c(Jo,null,{default:h(()=>[c(oe,{size:"24"},{default:h(()=>u[1]||(u[1]=[z("mdi-account")])),_:1,__:[1]})]),_:1}),p("div",null,[p("h5",nc,j(l.$t("verbeterplein.dialog.chat")),1)])])]),c(vt),p("div",{class:"chat-messages pa-5",ref_key:"chatContainer",ref:i},[(T(!0),q(Ae,null,We(r.value,(m,x)=>(T(),q("div",{class:"wrapper",key:m.id},[x===0||new Date(r.value[r.value.length>1?x-1:x].createdAt).toLocaleDateString()!==new Date(m.createdAt).toLocaleDateString()?(T(),q("div",rc,[c(et,{size:"small",class:"text-medium-emphasis"},{default:h(()=>[z(j(new Date(m.createdAt).toLocaleDateString()),1)]),_:2},1024)])):X("",!0),p("div",{class:we(["d-flex",{"justify-end":(m==null?void 0:m.user.id)===se(n).user.id||!1}])},[c(mu,{class:we(["rounded-md pa-3 mb-1",(m==null?void 0:m.user.id)===se(n).user.id?"bg-lightprimary":"bg-lightsecondary"]),"max-width":"80%"},{default:h(()=>[p("div",oc,[p("span",sc,j(m==null?void 0:m.user.Name),1)]),p("p",ic,j(m==null?void 0:m.content),1),p("small",lc,j(new Date(m==null?void 0:m.createdAt).toLocaleTimeString()),1)]),_:2},1032,["class"])],2)]))),128))],512),p("div",uc,[c(gt,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=m=>o.value=m),rows:"3","no-resize":"","hide-details":"",density:"comfortable",variant:"outlined",placeholder:"Type your message here...",class:"mb-2",onKeydown:f},{append:h(()=>[c(ge,{color:"primary",icon:"",variant:"text",onClick:g,disabled:!o.value},{default:h(()=>[c(oe,null,{default:h(()=>u[2]||(u[2]=[z("mdi-send")])),_:1,__:[2]})]),_:1},8,["disabled"])]),_:1},8,["modelValue"])])]))}}),cc=dt(dc,[["__scopeId","data-v-6ea40b55"]]);async function fc(e,t,a){const n=`history-${e}-${t}-${a}`,r=qt.get(n);if(r)return{status:200,data:r};const o=new URL(`undefined/systemLog/melding/${e}/${t}/${a}/history`);try{const s=await bt.get(o.toString());return qt.set(n,s.data.data,{ttl:2*60*1e3}),{status:s.status,data:s.data.data}}catch(s){if(s.status===404)return[];throw console.error(s),s}}async function mc(e,t,a){return fc(...[e,t||void 0,a||void 0])}function nr(e,t){const a=[],n=[...new Set([...Object.keys(e),...Object.keys(t)])];for(const r of n){const o=e[r],s=t[r];if(!(o===void 0&&s===void 0)&&!(o===null&&s===null))if(typeof o=="object"&&typeof s=="object")if(Array.isArray(o)&&Array.isArray(s)){const i=JSON.stringify(o),d=JSON.stringify(s);i!==d&&a.push({field:r,oldValue:o,newValue:s})}else o!==null&&s!==null?nr(o,s).length>0&&a.push({field:r,oldValue:o,newValue:s}):o!==s&&a.push({field:r,oldValue:o,newValue:s});else o!==s&&a.push({field:r,oldValue:o,newValue:s})}return a}const ba=Ta.global.t,pc=ct(),Bi=Sn("history",{state:()=>({currentHistory:[],loading:!1}),actions:{async getHistory(e,t,a){this.loading=!0;try{if(!e){this.currentHistory=[];return}const n=await mc(e,t,a);if(n.status===200)return this.currentHistory=n.data.filter(r=>!["GET_SYSTEM_LOGS","GET_SINGLE_REPORT","GET_SINGLE_REPORT_BY_VOLGNUMMER","GET_SINGLE_PREVENTIEF","GET_SINGLE_CORRECTIEF"].some(s=>r.action.includes(s))).map(r=>({id:r.id,userId:r.userId,userEmail:r.userEmail,userName:r.userName,userRole:r.userRole,department:r.department,ipAddress:r.ipAddress,userAgent:r.userAgent,action:r.action,resourceType:r.resourceType,resourceId:r.resourceId,success:r.success,endpoint:r.endpoint,method:r.method,previousState:r.previousState,newState:r.newState,changedFields:r.changedFields,metadata:r.metadata,errorMessage:r.errorMessage,sessionId:r.sessionId,requestBody:r.requestBody,requestQuery:r.requestQuery,requestParams:r.requestParams,timestamp:r.timestamp,color:this.getActionColor(r.action)})),this.currentHistory;if((n==null?void 0:n.status)===404||n.length===0)return this.currentHistory=[],this.currentHistory;throw new Error(JSON.stringify(n))}catch(n){pc.error({message:ba("errors.fetch_error",{error:n})}),this.currentHistory=[]}finally{this.loading=!1}},getActionColor(e){const t={CREATE:"primary",UPDATE:"info",DELETE:"error",ARCHIVE:"warning",STATUS_CHANGE:"success",ADD_CORRESPONDENCE:"secondary",REMOVE_CORRESPONDENCE:"error",ADD_COMMENT:"info",default:"grey"};return Object.keys(t).find(n=>e.includes(n))?t[Object.keys(t).find(n=>e.includes(n))]:t.default},getActionDetails(e){var a,n;const t=r=>{if(r===""||r==null)return ba("verbeterplein.showItem.timeline.details.empty");if(typeof r=="boolean")return ba(r?"general.yes":"general.no");if(typeof r=="object"&&r!==null)return r.Name?r.Name:r.ID?r.ID:r.id?r.id:JSON.stringify(r);if(typeof r=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})?$/.test(r))try{const i=new Date(r);if(!isNaN(i.getTime())){const g={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return i.toLocaleString(void 0,g)}}catch(i){console.warn("Could not parse potential date string:",r,i)}return r};if(e.action.toLowerCase().includes("correspondence"))try{if(e.newState){const r=JSON.parse(e.newState);if(((a=r.CorrespondenceIDs)==null?void 0:a.IDs)==="[]"&&e.action.toLowerCase().includes("remove"))return ba("verbeterplein.showItem.timeline.details.removed_all");const o=JSON.parse((n=r.CorrespondenceIDs)==null?void 0:n.IDs);if(o.length>0){const s=o.map(i=>i.Name||i.name).filter(Boolean);if(e.action.toLowerCase().includes("add"))return`${ba("verbeterplein.showItem.timeline.details.added")}: ${s.join(", ")}`;if(e.action.toLowerCase().includes("remove"))return`${ba("verbeterplein.showItem.timeline.details.removed")}: ${s.join(", ")}`}}}catch(r){console.error("Error parsing correspondence details:",r)}if(e.changedFields)try{const r=JSON.parse(e.changedFields);if(Array.isArray(r)&&r.length>0&&r[0].key&&r[0].newValue!==void 0)return r.map(o=>{const s=o.displayName||o.key||"Unknown Field",i=t(o.newValue);return`${s}: ${i}`}).join(`
`)}catch(r){console.warn("Could not parse changedFields as JSON:",e.changedFields,r)}if(e.errorMessage)return`${ba("verbeterplein.showItem.timeline.details.error")}: ${e.errorMessage}`;if(e.previousState&&e.newState)try{const r=nr(JSON.parse(e.previousState),JSON.parse(e.newState));if(r.length>0)return r.filter(o=>o.field!=="UpdatedAt"&&o.field!=="CreatedAt"&&o.field!=="id"&&o.oldValue!==o.newValue&&o.oldValue!==null&&o.newValue!==void 0).map(o=>{const s=o.field.replace(/([A-Z][a-z])/g," $1").trim(),i=t(o.oldValue),d=t(o.newValue);return`${s}: ${i} â†’ ${d}`}).join(`
`)}catch{return ba("verbeterplein.showItem.timeline.details.unable_to_parse")}return""}}}),Js=e=>!(new Date(e).toString()==="Invalid Date"||new Date(e).toString().includes("Invalid")||Number.isNaN(new Date(e).valueOf())),aa=e=>{if(!e)return"N/A";const t=new Date(e);return`${t.getDate()} - ${t.getMonth()+1} - ${t.getFullYear()}`},qs=e=>`${e.getDate()} - ${e.getMonth()+1} - ${e.getFullYear()} - ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`,vc={class:"history-container"},hc={class:"history-header"},gc={class:"history-title"},yc={class:"history-stats"},bc={key:0,class:"history-list"},wc={class:"d-flex align-center"},_c={class:"history-card-title"},Cc={class:"history-card-content"},xc={class:"history-card-user"},Sc={key:0,class:"department-tag ml-1"},Dc={key:0,class:"request-info-bar"},kc={key:0,class:"request-info-item"},Ac={key:1,class:"request-info-item"},Pc={class:"resource-type"},Ic={key:2,class:"request-info-item ml-auto"},Tc={key:1,class:"history-card-changes"},$c=["onClick"],Fc={key:0,class:"history-changes-details"},Ec={class:"correspondence-files"},Nc={class:"correspondence-heading"},Rc={class:"d-flex align-center"},jc={class:"file-name ml-2"},Mc={class:"file-details"},Oc={class:"file-size"},Vc={class:"file-type ml-2"},Bc={key:0,class:"file-actions mt-1"},Uc=["href"],zc={key:2,class:"history-card-changes"},Lc=["onClick"],Hc={key:0,class:"history-changes-details"},Gc={class:"change-field"},Wc={class:"change-values"},Jc={class:"change-value-old"},qc={class:"change-label"},Kc={class:"change-text"},Yc={class:"change-value-new"},Qc={class:"change-label"},Zc={class:"change-text"},Xc={key:0,class:"history-card-expanded-content"},ef={key:0,class:"history-metadata-section"},tf={class:"history-metadata-heading"},af={class:"info-panel"},nf={key:0,class:"info-row"},rf={class:"info-label"},of={class:"info-value"},sf={key:1,class:"info-row"},lf={class:"info-label"},uf={class:"info-value"},df={key:2,class:"info-row"},cf={class:"info-label"},ff={class:"info-value"},mf={key:1,class:"history-metadata-section"},pf={class:"history-metadata-heading"},vf={class:"code-panel"},hf={key:0,class:"endpoint-display"},gf={class:"endpoint-path"},yf={class:"d-flex align-center"},bf={class:"text-subtitle-2"},wf={class:"technical-details-grid"},_f={class:"tech-detail-section"},Cf={class:"tech-section-title"},xf={key:0,class:"info-row"},Sf={class:"info-label"},Df={class:"info-value mono"},kf={key:1,class:"info-row"},Af={class:"info-label"},Pf={class:"info-value mono"},If={key:2,class:"info-row"},Tf={class:"info-label"},$f={class:"info-value"},Ff={key:3,class:"info-row"},Ef={class:"info-label"},Nf={class:"info-value mono"},Rf={key:4,class:"info-row"},jf={class:"info-label"},Mf={class:"info-value mono"},Of={key:5,class:"info-row"},Vf={class:"info-label"},Bf={class:"info-value mono"},Uf={key:6,class:"info-row"},zf={class:"info-label"},Lf={class:"info-value"},Hf={class:"tech-detail-section"},Gf={class:"tech-section-title"},Wf={key:0,class:"info-row"},Jf={class:"info-label"},qf={class:"info-value"},Kf={key:1,class:"info-row"},Yf={class:"info-label"},Qf={class:"info-value"},Zf={key:2,class:"info-row"},Xf={class:"info-label"},em={class:"info-value"},tm={key:3,class:"info-row"},am={class:"info-label"},nm={class:"info-value"},rm={key:4,class:"info-row"},om={class:"info-label"},sm={class:"info-value"},im={class:"tech-detail-section"},lm={class:"tech-section-title"},um={key:0,class:"info-row"},dm={class:"info-label"},cm={class:"info-value mono"},fm={key:1,class:"info-row"},mm={class:"info-label"},pm={class:"info-value"},vm={key:2,class:"info-row"},hm={class:"info-label"},gm={class:"info-value"},ym={key:3,class:"info-row"},bm={class:"info-label"},wm={class:"info-value mono"},_m={key:4,class:"info-row"},Cm={class:"info-label"},xm={class:"info-value user-agent"},Sm={key:2,class:"history-metadata-section"},Dm={class:"history-metadata-heading"},km={class:"info-panel"},Am={class:"info-row"},Pm={class:"info-label"},Im={class:"info-value"},Tm={key:0,class:"info-row"},$m={class:"info-label"},Fm={class:"info-value"},Em={key:1,class:"history-empty"},Nm={class:"history-empty-text"},Rm=Se({__name:"HistoryTab",props:{item:{type:Object,default:()=>({})}},setup(e){const t=Bi(),a=ha(),n=W({}),r=W({}),o=W({}),s=or({}),{t:i}=kt(),d=e,g=te(()=>t.currentHistory.map(v=>({id:v.id,date:qs(new Date(v.timestamp)),event:v.action.toLowerCase(),person:v.userName||v.userEmail||"System",details:t.getActionDetails(v),color:v.success?v.color:"error",metadata:v.metadata,success:v.success,endpoint:v.endpoint,method:v.method,resourceType:v.resourceType,timestamp:v.timestamp,correlationID:v.correlationID,resourceId:v.resourceId,userId:v.userId,userEmail:v.userEmail,ipAddress:v.ipAddress,sessionId:v.sessionId,userAgent:v.userAgent,changesData:v.changesData,changeCount:v.changeCount,changedFieldNames:v.changedFieldNames,errorStack:v.errorStack,errorCode:v.errorCode,action:v.action}))),f=v=>{n.value[v]=!n.value[v]},l=v=>{r.value[v]=!r.value[v]},u=v=>{o.value[v]=!o.value[v]},m=v=>{if(!v)return i("verbeterplein.showItem.history.unknown_time");const b=new Date,V=new Date(v),B=b.getTime()-V.getTime(),J=Math.floor(B/(1e3*60)),H=Math.floor(B/(1e3*60*60)),N=Math.floor(B/(1e3*60*60*24));return N<1?H<1?i("verbeterplein.showItem.history.minutes_ago",{minutes:J}):i("verbeterplein.showItem.history.hours_ago",{hours:H}):N===1?i("verbeterplein.showItem.history.yesterday"):qs(V)},x=v=>v?new Date(v).toLocaleString():i("verbeterplein.showItem.history.unknown_time"),F=v=>{const b={create:"mdi-plus-circle",update:"mdi-pencil",delete:"mdi-delete",archive:"mdi-archive",status_change:"mdi-refresh",add_correspondence:"mdi-file-plus",remove_correspondence:"mdi-file-remove",add_comment:"mdi-comment-plus",get_system_logs:"mdi-database-search",get_single_report:"mdi-file-document",default:"mdi-history"};for(const V in b)if(v.includes(V))return b[V];return b.default},C=v=>v>=200&&v<300?"success":v>=300&&v<400?"info":v>=400&&v<500?"warning":v>=500?"error":"grey",D=v=>({GET:"info",POST:"success",PUT:"warning",PATCH:"secondary",DELETE:"error"})[v]||"grey",L=v=>v?`method-${v.toLowerCase()}`:"method-unknown",$=v=>!!(v.endpoint||v.method||v.metadata&&(v.metadata.endpoint||v.metadata.method||v.metadata.statusCode||v.metadata.executionTime||v.metadata.environment||v.metadata.version)),_=v=>{var b,V,B,J;return!!((b=v.metadata)!=null&&b.environment||(V=v.metadata)!=null&&V.version||(B=v.metadata)!=null&&B.executionTime||(J=v.metadata)!=null&&J.statusCode)},S=v=>{var b;return!!(v.method||v.resourceType||(b=v.metadata)!=null&&b.statusCode)},k=v=>!!v.details&&v.details.includes("â†’"),O=v=>{var b;return!!(v.event.toLowerCase().includes("correspondence")&&((b=v.metadata)!=null&&b.correspondence)&&Array.isArray(v.metadata.correspondence)&&v.metadata.correspondence.length>0)},w=v=>O(v)?v.metadata.correspondence:[],y=v=>v?v.includes("pdf")?"mdi-file-pdf-box":v.includes("image")||v.includes("png")||v.includes("jpg")||v.includes("jpeg")?"mdi-file-image":v.includes("word")||v.includes("doc")?"mdi-file-word":v.includes("excel")||v.includes("sheet")||v.includes("xls")?"mdi-file-excel":v.includes("presentation")||v.includes("powerpoint")||v.includes("ppt")?"mdi-file-powerpoint":v.includes("zip")||v.includes("compressed")?"mdi-file-zip":"mdi-file-outline":"mdi-file-outline",M=v=>v?v.includes("pdf")?"red":v.includes("image")||v.includes("png")||v.includes("jpg")||v.includes("jpeg")?"green":v.includes("word")||v.includes("doc")?"blue":v.includes("excel")||v.includes("sheet")||v.includes("xls")?"green":v.includes("presentation")||v.includes("powerpoint")||v.includes("ppt")?"orange":"grey":"grey",E=v=>{if(!v)return"0 B";const b=["B","KB","MB","GB"];let V=v,B=0;for(;V>=1024&&B<b.length-1;)V/=1024,B++;return`${V.toFixed(V<10&&B>0?1:0)} ${b[B]}`},R=async v=>{if(!v||!/^[a-f\d]{24}$/i.test(v))return v;if(s[v])return s[v];s[v]="Loading...",a.initialized||await a.initialize();const b=a.statusListCorrectief.find(V=>V.id===v);return b?(s[v]=b.StatusNaam,b.StatusNaam):(s[v]="[ID]","[ID]")},I=v=>{if(!v)return[];const b=[],V=/^([^:]+):\s*(.+?)\s*â†’\s*(.+?)(?=\n[^:]+:|$)/gms;let B;for(;B=V.exec(v);){const J=B[1].trim();let H=B[2].trim(),N=B[3].trim();if(J==="StatusID")continue;const G=J.toLowerCase().includes("status"),K=/^[a-f\d]{24}$/i.test(H),Z=/^[a-f\d]{24}$/i.test(N);if(J.toLowerCase()!=="id"){if(G&&(K||Z))K&&(H=s[H]||"Loading...",H==="Loading..."&&R(B[2].trim())),Z&&(N=s[N]||"Loading...",N==="Loading..."&&R(B[3].trim()));else if(J.toLowerCase().includes("id")||K||Z)continue;b.push({field:J,oldValue:H,newValue:N})}}return b.length===0&&v.trim()?[{field:v.trim(),oldValue:"",newValue:""}]:b},P=v=>!!(v.correlationID||v.resourceId||v.userId||v.userEmail||v.ipAddress||v.sessionId||v.userAgent||v.metadata&&(v.metadata.responseTime||v.metadata.contentLength||v.metadata.resultCount||v.metadata.apiVersion||v.metadata.preventiefId||v.metadata.correctiefId)),A=v=>{if(!v)return"0 B";const b=["B","KB","MB","GB"];let V=v,B=0;for(;V>=1024&&B<b.length-1;)V/=1024,B++;return`${V.toFixed(V<10&&B>0?1:0)} ${b[B]}`};return wt(async()=>{var v,b,V,B,J;(v=d.item)!=null&&v.id&&(await t.getHistory(d.item.id,(V=(b=d.item)==null?void 0:b.Preventief)==null?void 0:V.id,(J=(B=d.item)==null?void 0:B.Correctief)==null?void 0:J.id),a.initialized||await a.initialize(),g.value.forEach((H,N)=>{if(O(H)&&(o.value[N]=!0),H.details){const G=/^([^:]+):\s*(.+?)\s*â†’\s*(.+?)(?=\n[^:]+:|$)/gms;let K;for(;K=G.exec(H.details);){const Z=K[1].trim(),le=K[2].trim(),ye=K[3].trim();Z.toLowerCase().includes("status")&&(/^[a-f\d]{24}$/i.test(le)&&R(le),/^[a-f\d]{24}$/i.test(ye)&&R(ye))}}}))}),(v,b)=>{var V,B,J,H;return T(),q("div",vc,[p("div",hc,[p("h3",gc,j(v.$t("verbeterplein.showItem.tabs.history")),1),p("div",yc,[c(et,{size:"small",color:"primary",class:"mr-2"},{default:h(()=>[z(j(g.value.length)+" "+j(v.$t("verbeterplein.showItem.history.events_count")),1)]),_:1}),(B=(V=e.item)==null?void 0:V.Correctief)!=null&&B.id?(T(),ie(et,{key:0,size:"small",color:"info",class:"mr-2"},{default:h(()=>[z(j(v.$t("verbeterplein.showItem.history.correctief")),1)]),_:1})):X("",!0),(H=(J=e.item)==null?void 0:J.Preventief)!=null&&H.id?(T(),ie(et,{key:1,size:"small",color:"secondary"},{default:h(()=>[z(j(v.$t("verbeterplein.showItem.history.preventief")),1)]),_:1})):X("",!0)])]),g.value.length>0?(T(),q("div",bc,[(T(!0),q(Ae,null,We(g.value,(N,G)=>(T(),ie(Te,{key:G,class:we(["history-card mb-3",{"history-card-expanded":n.value[G]}])},{default:h(()=>{var K,Z;return[p("div",{class:we(["history-card-header",{"history-error":!N.success}])},[p("div",wc,[c(Jo,{size:"32",color:N.color,class:"mr-3"},{default:h(()=>[c(oe,{color:"white"},{default:h(()=>[z(j(F(N.event)),1)]),_:2},1024)]),_:2},1032,["color"]),p("div",null,[p("div",_c,j(v.$t(`verbeterplein.showItem.history.actions.${N.event}`)),1),c(ka,{location:"bottom"},{activator:h(({props:le})=>[p("div",pa({class:"history-card-subtitle"},{ref_for:!0},le),j(m(N.timestamp)),17)]),default:h(()=>[z(" "+j(x(N.timestamp)),1)]),_:2},1024)])]),c(ge,{icon:"",onClick:le=>f(G),size:"small"},{default:h(()=>[c(oe,null,{default:h(()=>[z(j(n.value[G]?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)]),_:2},1032,["onClick"])],2),p("div",Cc,[p("div",xc,[c(oe,{size:"small",color:"grey",class:"mr-2"},{default:h(()=>b[0]||(b[0]=[z("mdi-account")])),_:1,__:[0]}),z(" "+j(v.$t("verbeterplein.showItem.history.by_user",{name:N.person}))+" ",1),(K=N.metadata)!=null&&K.department?(T(),q("span",Sc," ("+j(N.metadata.department)+") ",1)):X("",!0)]),S(N)?(T(),q("div",Dc,[N.method?(T(),q("div",kc,[c(et,{size:"x-small",color:D(N.method),class:"mr-1"},{default:h(()=>[z(j(N.method),1)]),_:2},1032,["color"])])):X("",!0),N.resourceType?(T(),q("div",Ac,[p("span",Pc,j(N.resourceType),1)])):X("",!0),(Z=N.metadata)!=null&&Z.statusCode?(T(),q("div",Ic,[c(et,{size:"x-small",color:C(N.metadata.statusCode)},{default:h(()=>[z(j(N.metadata.statusCode),1)]),_:2},1032,["color"])])):X("",!0)])):X("",!0),O(N)?(T(),q("div",Tc,[p("div",{onClick:le=>u(G),class:"history-changes-toggle"},[c(oe,{size:"small",class:"mr-1"},{default:h(()=>[z(j(o.value[G]?"mdi-chevron-down":"mdi-chevron-right"),1)]),_:2},1024),z(" "+j(v.$t("verbeterplein.showItem.history.view_files")||"View Files"),1)],8,$c),c(fo,null,{default:h(()=>[o.value[G]?(T(),q("div",Fc,[p("div",Ec,[p("div",Nc,[c(oe,{size:"small",color:"primary",class:"mr-2"},{default:h(()=>b[1]||(b[1]=[z("mdi-file-document-outline")])),_:1,__:[1]}),z(" "+j(v.$t("verbeterplein.showItem.history.correspondence_files")||"Correspondence Files"),1)]),(T(!0),q(Ae,null,We(w(N),(le,ye)=>(T(),q("div",{key:ye,class:"correspondence-file"},[p("div",Rc,[c(oe,{size:"small",color:M(le==null?void 0:le.type)},{default:h(()=>[z(j(y(le==null?void 0:le.type)),1)]),_:2},1032,["color"]),p("div",jc,j(le==null?void 0:le.name),1)]),p("div",Mc,[p("span",Oc,j(E(le==null?void 0:le.size)),1),p("span",Vc,j(le==null?void 0:le.type),1)]),le!=null&&le.url&&N.method!=="DELETE"?(T(),q("div",Bc,[p("a",{href:le==null?void 0:le.url,target:"_blank",class:"file-link"},[c(oe,{size:"x-small",class:"mr-1"},{default:h(()=>b[2]||(b[2]=[z("mdi-open-in-new")])),_:1,__:[2]}),z(" "+j(v.$t("verbeterplein.showItem.history.view_file")||"View File"),1)],8,Uc)])):X("",!0)]))),128))])])):X("",!0)]),_:2},1024)])):X("",!0),k(N)?(T(),q("div",zc,[p("div",{onClick:le=>l(G),class:"history-changes-toggle"},[c(oe,{size:"small",class:"mr-1"},{default:h(()=>[z(j(r.value[G]?"mdi-chevron-down":"mdi-chevron-right"),1)]),_:2},1024),z(" "+j(v.$t("verbeterplein.showItem.history.view_changes")),1)],8,Lc),c(fo,null,{default:h(()=>[r.value[G]?(T(),q("div",Hc,[(T(!0),q(Ae,null,We(I(N.details),(le,ye)=>(T(),q("div",{key:ye,class:"change-item"},[p("div",Gc,j(le.field),1),p("div",Wc,[p("div",Jc,[p("div",qc,j(v.$t("verbeterplein.showItem.history.before"))+":",1),p("div",Kc,j(le.oldValue||v.$t("verbeterplein.showItem.history.empty")),1)]),c(oe,{class:"change-arrow"},{default:h(()=>b[3]||(b[3]=[z("mdi-arrow-right")])),_:1,__:[3]}),p("div",Yc,[p("div",Qc,j(v.$t("verbeterplein.showItem.history.after"))+":",1),p("div",Zc,j(le.newValue||v.$t("verbeterplein.showItem.history.empty")),1)])])]))),128))])):X("",!0)]),_:2},1024)])):X("",!0),c(fo,null,{default:h(()=>{var le,ye,Ce,Ie,Ve,Ke;return[n.value[G]?(T(),q("div",Xc,[c(vt,{class:"my-3"}),_(N)?(T(),q("div",ef,[p("div",tf,[c(oe,{size:"small",color:"primary",class:"mr-2"},{default:h(()=>b[4]||(b[4]=[z("mdi-information-outline")])),_:1,__:[4]}),z(" "+j(v.$t("verbeterplein.showItem.history.request_info")),1)]),p("div",af,[(le=N.metadata)!=null&&le.environment?(T(),q("div",nf,[p("div",rf,j(v.$t("verbeterplein.showItem.history.environment")),1),p("div",of,j(N.metadata.environment),1)])):X("",!0),(ye=N.metadata)!=null&&ye.version?(T(),q("div",sf,[p("div",lf,j(v.$t("verbeterplein.showItem.history.version")),1),p("div",uf,j(N.metadata.version),1)])):X("",!0),(Ce=N.metadata)!=null&&Ce.executionTime?(T(),q("div",df,[p("div",cf,j(v.$t("verbeterplein.showItem.history.execution_time")),1),p("div",ff,j(N.metadata.executionTime)+"ms",1)])):X("",!0)])])):X("",!0),$(N)?(T(),q("div",mf,[p("div",pf,[c(oe,{size:"small",color:"primary",class:"mr-2"},{default:h(()=>b[5]||(b[5]=[z("mdi-code-tags")])),_:1,__:[5]}),z(" "+j(v.$t("verbeterplein.showItem.history.technical_details")),1)]),p("div",vf,[N.endpoint||(Ie=N.metadata)!=null&&Ie.endpoint?(T(),q("div",hf,[p("div",{class:we(["endpoint-method",L(N.method||"")])},j(N.method),3),p("div",gf,j(N.endpoint||((Ve=N.metadata)==null?void 0:Ve.endpoint)),1)])):X("",!0),P(N)?(T(),ie(ar,{key:1,class:"mt-2"},{default:h(()=>[c(_a,{class:"technical-details-panel"},{default:h(()=>[c(Ca,{class:"py-2"},{default:h(()=>[p("div",yf,[c(oe,{size:"small",color:"primary",class:"mr-2"},{default:h(()=>b[6]||(b[6]=[z("mdi-information-outline")])),_:1,__:[6]}),p("span",bf,j(v.$t("verbeterplein.showItem.history.advanced_details")),1)])]),_:1}),c(xa,null,{default:h(()=>{var He,It,_t,Ge,rt,Ue,Be,Ye,ot,Qe;return[p("div",wf,[p("div",_f,[p("div",Cf,[c(oe,{size:"small",color:"primary",class:"mr-1"},{default:h(()=>b[7]||(b[7]=[z("mdi-send-outline")])),_:1,__:[7]}),z(" "+j(v.$t("verbeterplein.showItem.history.request_details")),1)]),N.id?(T(),q("div",xf,[p("div",Sf,j(v.$t("verbeterplein.showItem.history.id")),1),p("div",Df,j(N.id),1)])):X("",!0),N.correlationID?(T(),q("div",kf,[p("div",Af,j(v.$t("verbeterplein.showItem.history.correlation_id")),1),p("div",Pf,j(N.correlationID),1)])):X("",!0),(He=N.metadata)!=null&&He.apiVersion?(T(),q("div",If,[p("div",Tf,j(v.$t("verbeterplein.showItem.history.api_version")),1),p("div",$f,j(N.metadata.apiVersion),1)])):X("",!0),(It=N.metadata)!=null&&It.preventiefId?(T(),q("div",Ff,[p("div",Ef,j(v.$t("verbeterplein.showItem.history.preventief_id")),1),p("div",Nf,j(N.metadata.preventiefId),1)])):X("",!0),(_t=N.metadata)!=null&&_t.correctiefId?(T(),q("div",Rf,[p("div",jf,j(v.$t("verbeterplein.showItem.history.correctief_id")),1),p("div",Mf,j(N.metadata.correctiefId),1)])):X("",!0),N.resourceId?(T(),q("div",Of,[p("div",Vf,j(v.$t("verbeterplein.showItem.history.resource_id")),1),p("div",Bf,j(N.resourceId),1)])):X("",!0),N.resourceType?(T(),q("div",Uf,[p("div",zf,j(v.$t("verbeterplein.showItem.history.resource_type")),1),p("div",Lf,[c(et,{size:"x-small",color:"primary",variant:"flat",class:"text-uppercase"},{default:h(()=>[z(j(N.resourceType),1)]),_:2},1024)])])):X("",!0)]),p("div",Hf,[p("div",Gf,[c(oe,{size:"small",color:"primary",class:"mr-1"},{default:h(()=>b[8]||(b[8]=[z("mdi-reply-outline")])),_:1,__:[8]}),z(" "+j(v.$t("verbeterplein.showItem.history.response_details")),1)]),(Ge=N.metadata)!=null&&Ge.responseStatus||(rt=N.metadata)!=null&&rt.statusCode?(T(),q("div",Wf,[p("div",Jf,j(v.$t("verbeterplein.showItem.history.status_code")),1),p("div",qf,[c(et,{size:"x-small",color:C(N.metadata.responseStatus||N.metadata.statusCode),variant:"flat"},{default:h(()=>[z(j(N.metadata.responseStatus||N.metadata.statusCode),1)]),_:2},1032,["color"])])])):X("",!0),(Ue=N.metadata)!=null&&Ue.responseTime||(Be=N.metadata)!=null&&Be.executionTimeMs?(T(),q("div",Kf,[p("div",Yf,j(v.$t("verbeterplein.showItem.history.response_time")),1),p("div",Qf,[c(oe,{size:"x-small",color:"grey-darken-1",class:"mr-1"},{default:h(()=>b[9]||(b[9]=[z("mdi-clock-outline")])),_:1,__:[9]}),z(" "+j(N.metadata.responseTime||N.metadata.executionTimeMs)+"ms ",1)])])):X("",!0),(Ye=N.metadata)!=null&&Ye.contentLength?(T(),q("div",Zf,[p("div",Xf,j(v.$t("verbeterplein.showItem.history.content_length")),1),p("div",em,[c(oe,{size:"x-small",color:"grey-darken-1",class:"mr-1"},{default:h(()=>b[10]||(b[10]=[z("mdi-file-outline")])),_:1,__:[10]}),z(" "+j(A(N.metadata.contentLength)),1)])])):X("",!0),((ot=N.metadata)==null?void 0:ot.resultCount)!==void 0?(T(),q("div",tm,[p("div",am,j(v.$t("verbeterplein.showItem.history.result_count")),1),p("div",nm,[c(oe,{size:"x-small",color:"grey-darken-1",class:"mr-1"},{default:h(()=>b[11]||(b[11]=[z("mdi-format-list-numbered")])),_:1,__:[11]}),z(" "+j(N.metadata.resultCount),1)])])):X("",!0),(Qe=N.metadata)!=null&&Qe.executionTime?(T(),q("div",rm,[p("div",om,j(v.$t("verbeterplein.showItem.history.execution_time")),1),p("div",sm,[c(oe,{size:"x-small",color:"grey-darken-1",class:"mr-1"},{default:h(()=>b[12]||(b[12]=[z("mdi-timer-outline")])),_:1,__:[12]}),z(" "+j(N.metadata.executionTime.toFixed(2))+"ms ",1)])])):X("",!0)]),p("div",im,[p("div",lm,[c(oe,{size:"small",color:"primary",class:"mr-1"},{default:h(()=>b[13]||(b[13]=[z("mdi-account-outline")])),_:1,__:[13]}),z(" "+j(v.$t("verbeterplein.showItem.history.user_details")),1)]),N.userId?(T(),q("div",um,[p("div",dm,j(v.$t("verbeterplein.showItem.history.user_id")),1),p("div",cm,j(N.userId),1)])):X("",!0),N.userEmail?(T(),q("div",fm,[p("div",mm,j(v.$t("verbeterplein.showItem.history.user_email")),1),p("div",pm,j(N.userEmail),1)])):X("",!0),N.ipAddress?(T(),q("div",vm,[p("div",hm,j(v.$t("verbeterplein.showItem.history.ip_address")),1),p("div",gm,[c(et,{size:"x-small",color:"grey",variant:"flat"},{default:h(()=>[z(j(N.ipAddress),1)]),_:2},1024)])])):X("",!0),N.sessionId?(T(),q("div",ym,[p("div",bm,j(v.$t("verbeterplein.showItem.history.session_id")),1),p("div",wm,j(N.sessionId),1)])):X("",!0),N.userAgent?(T(),q("div",_m,[p("div",Cm,j(v.$t("verbeterplein.showItem.history.user_agent")),1),p("div",xm,j(N.userAgent),1)])):X("",!0)])])]}),_:2},1024)]),_:2},1024)]),_:2},1024)):X("",!0)])])):X("",!0),N.timestamp?(T(),q("div",Sm,[p("div",Dm,[c(oe,{size:"small",color:"primary",class:"mr-2"},{default:h(()=>b[14]||(b[14]=[z("mdi-clock-outline")])),_:1,__:[14]}),z(" "+j(v.$t("verbeterplein.showItem.history.timing")),1)]),p("div",km,[p("div",Am,[p("div",Pm,j(v.$t("verbeterplein.showItem.history.timestamp")),1),p("div",Im,j(x(N.timestamp)),1)]),(Ke=N.metadata)!=null&&Ke.requestedAt?(T(),q("div",Tm,[p("div",$m,j(v.$t("verbeterplein.showItem.history.requested_at")),1),p("div",Fm,j(x(N.metadata.requestedAt)),1)])):X("",!0)])])):X("",!0)])):X("",!0)]}),_:2},1024)])]}),_:2},1032,["class"]))),128))])):(T(),q("div",Em,[c(oe,{size:"64",color:"grey-lighten-2"},{default:h(()=>b[15]||(b[15]=[z("mdi-history")])),_:1,__:[15]}),p("div",Nm,j(v.$t("verbeterplein.showItem.history.no_history")),1)]))])}}}),jm=dt(Rm,[["__scopeId","data-v-4355b135"]]);function Ks(e){const t=e.toLowerCase();return console.log(t),{get_system_logs:"view",get_single_report:"view",get_single_report_by_volgnummer:"open_url",get_single_correctief:"view",get_single_preventief:"check_pdca",create_report:"create",create_preventief:"create_preventief",update_report:"update",update_correctief:"update",update_preventief:"update_preventief"}[t]??"other"}const An=(e,t,a,n)=>`/engagement/${t}/${a||"null"}/${n||"null"}/${e}`,Mm=async(e,t,a)=>{if(!e)throw new Error("meldingId is required for GetTimelineData");const n=An("timeline",e,t,a);return console.log(`Calling API: GET ${n}`),(await bt.get(n)).data},Om=async(e,t,a)=>{if(!e)throw new Error("meldingId is required for GetDepartmentViewsData");const n=An("department-views",e,t,a);return console.log(`Calling API: GET ${n}`),(await bt.get(n)).data},Vm=async(e,t,a)=>{if(!e)throw new Error("meldingId is required for GetEventTypesData");const n=An("event-types",e,t,a);return console.log(`Calling API: GET ${n}`),(await bt.get(n)).data},Bm=async(e,t,a)=>{if(!e)throw new Error("meldingId is required for GetTopUsersData");const n=An("top-users",e,t,a);return console.log(`Calling API: GET ${n}`),(await bt.get(n)).data},Um=async(e,t,a)=>{if(!e)throw new Error("meldingId is required for GetActivityTimeData");const n=An("activity-time",e,t,a);return console.log(`Calling API: GET ${n}`),(await bt.get(n)).data},zm=async(e,t,a)=>{if(!e)throw new Error("meldingId is required for GetActivityDayData");const n=An("activity-day",e,t,a);return console.log(`Calling API: GET ${n}`),(await bt.get(n)).data},Lm=async(e,t,a)=>{if(!e)throw new Error("meldingId is required for GetTrendData");const n=An("trend",e,t,a);return console.log(`Calling API: GET ${n}`),(await bt.get(n)).data},Rt=Ta.global.t,Ui=Sn("engagement",{state:()=>({timeline:null,departmentViews:null,eventTypes:null,topUsers:null,activityTime:null,activityDay:null,trend:null,currentMeldingId:null,loading:!1,error:null,lastNotificationMessage:null}),getters:{hasData(e){return!!e.timeline||!!e.departmentViews||!!e.eventTypes||!!e.topUsers||!!e.activityTime||!!e.activityDay||!!e.trend}},actions:{async fetchAnalyticsData(e,t,a){if(this.loading||!Qr([{action:"MANAGE",resourceType:"ALL"}]))return;this.currentMeldingId=e,console.log("Fetching all analytics data for:",e,t,a),this.loading=!0,this.error=null,this.resetData();const n=t||void 0,r=a||void 0;try{const o=await Promise.allSettled([Mm(e,n,r),Om(e,n,r),Vm(e,n,r),Bm(e,n,r),Um(e,n,r),zm(e,n,r),Lm(e,n,r)]);let s=null;if(o.forEach((i,d)=>{var g,f;if(i.status==="fulfilled"){console.log("Result:",i);const l=i.value.data;try{switch(d){case 0:{const E=l,R={},I=new Set,P=new Set;E.forEach(V=>{I.add(V.date),P.add(V.type),R[V.date]||(R[V.date]={}),R[V.date][V.type]=(R[V.date][V.type]||0)+V.count});const A=Array.from(I).sort(),b=Array.from(P).sort().map(V=>{const B=`verbeterplein.showItem.engagement.eventTypes.${Ks(V)}`;return{name:Rt(B),data:A.map(J=>{var H;return((H=R[J])==null?void 0:H[V])||0})}});this.timeline={series:b,categories:A};break}case 1:const u=l;this.departmentViews={series:u.map(E=>E.count),labels:u.map(E=>E.department)};break;case 2:const m=l,x=m.map(E=>{const R=`verbeterplein.showItem.engagement.eventTypes.${Ks(E.type)}`;return Rt(R)});this.eventTypes={series:m.map(E=>E.count),labels:x};break;case 3:const F=l;this.topUsers={series:[{name:Rt("general.events"),data:F.map(E=>E.count)}],categories:F.map(E=>E.name)};break;case 4:const C=l,D=new Map;C.forEach(E=>D.set(E.hour,E.count));const L=[],$=[];for(let E=0;E<24;E++)L.push(D.get(E)||0),$.push(`${E.toString().padStart(2,"0")}:00`);this.activityTime={series:[{name:Rt("analytics.activity_time_series_name"),data:L}],categories:$};break;case 5:const _=l,S=[Rt("days.sun"),Rt("days.mon"),Rt("days.tue"),Rt("days.wed"),Rt("days.thu"),Rt("days.fri"),Rt("days.sat")],k=new Map;_.forEach(E=>k.set(E.dayOfWeek,E.count));const O=[],w=[],y=[2,3,4,5,6,7,1];for(const E of y)O.push(k.get(E)||0),w.push(S[E-1]);this.activityDay={series:[{name:Rt("analytics.activity_day_series_name"),data:O}],categories:w};break;case 6:const M=l;this.trend={series:[{name:Rt("analytics.trend_series_name"),data:M.map(E=>E.count)}],categories:M.map(E=>E.date)};break}}catch(u){if(console.error(`Error transforming data for endpoint ${d}:`,u),!s){const m=typeof(u==null?void 0:u.message)=="string"?u.message:JSON.stringify(u);s=Rt("errors.data_transform_error",{index:d,error:m})}}}else if(console.error(`Error fetching analytics data (Endpoint ${d}):`,i.reason),!s){const l=i.reason,u=((f=(g=l==null?void 0:l.response)==null?void 0:g.data)==null?void 0:f.message)||(l==null?void 0:l.message);s=typeof u=="string"?u:JSON.stringify(i.reason)}}),s){this.error=s;const i=ct(),d=typeof this.error=="string"?this.error:JSON.stringify(this.error);this.lastNotificationMessage!==d&&(i.error({message:d}),this.lastNotificationMessage=d)}}catch(o){console.error("Critical error fetching analytics data:",o);const s=o.message||o.toString();this.error=Rt("errors.fetch_error",{error:s});const i=ct();this.lastNotificationMessage!==this.error&&(i.error({message:this.error}),this.lastNotificationMessage=this.error)}finally{this.loading=!1}},resetData(){this.timeline=null,this.departmentViews=null,this.eventTypes=null,this.topUsers=null,this.activityTime=null,this.activityDay=null,this.trend=null},resetState(){this.resetData(),this.loading=!1,this.error=null,this.lastNotificationMessage=null,this.currentMeldingId=null}}}),Hm={class:"engagement-container pa-4"},Gm={key:0,class:"text-center pt-6"},Wm={class:"mt-2 text-disabled"},Jm={key:1,class:"text-center text-error pt-6"},qm={class:"mt-2"},Km={key:2,class:"text-center text-disabled pt-6"},Ym={class:"mt-2"},Qm={key:3},Zm={class:"mb-1 text-h6 font-weight-medium text-center"},Xm={class:"text-center pa-4 text-disabled"},ep={class:"text-center pa-4 text-disabled"},tp={class:"text-center pa-4 text-disabled"},ap={class:"text-center pa-4 text-disabled"},np={class:"text-center pa-4 text-disabled"},rp={class:"text-center pa-4 text-disabled"},op={class:"text-center pa-4 text-disabled"},sp=Se({__name:"EngagementTab",props:{item:{type:Object,required:!0}},setup(e){const t=Ui(),{t:a}=kt(),n=te(()=>{var f;return{chart:{type:"bar",height:350,stacked:!0,toolbar:{show:!0},zoom:{enabled:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"60%"}},xaxis:{categories:((f=t.timeline)==null?void 0:f.categories)||[],title:{text:a("verbeterplein.showItem.history.timestamp")}},yaxis:{title:{text:a("verbeterplein.showItem.engagement.total_events")},min:0,forceNiceScale:!0},legend:{position:"bottom",offsetY:10},colors:["#2196F3","#00BCD4","#FFC107","#4CAF50","#9E9E9E"],tooltip:{shared:!1,intersect:!0,y:{formatter:function(l,{seriesIndex:u,w:m}){const x=m.globals.seriesNames[u];return`${l} ${x||""}`}}},dataLabels:{enabled:!1},grid:{borderColor:"#f1f1f1"},noData:{text:a("verbeterplein.showItem.engagement.no_data")}}}),r=te(()=>{var l,u,m;const f=(u=(l=t.departmentViews)==null?void 0:l.series)==null?void 0:u.some(x=>x>0);return{chart:{type:"donut",height:300},labels:((m=t.departmentViews)==null?void 0:m.labels)||[],title:{text:a("verbeterplein.showItem.engagement.charts.views_by_department_title"),align:"center"},legend:{position:"bottom"},tooltip:{y:{formatter:x=>`${x} ${a(x===1?"general.view":"general.views")}`}},noData:{text:a("verbeterplein.showItem.engagement.no_data")},dataLabels:{enabled:!!f}}}),o=te(()=>{var l,u,m;const f=(u=(l=t.eventTypes)==null?void 0:l.series)==null?void 0:u.some(x=>x>0);return{chart:{type:"pie",height:300},labels:((m=t.eventTypes)==null?void 0:m.labels)||[],title:{text:a("verbeterplein.showItem.engagement.charts.event_type_distribution_title"),align:"center"},legend:{position:"bottom"},tooltip:{y:{formatter:x=>`${x} ${a(x===1?"general.event":"general.events")}`}},noData:{text:a("verbeterplein.showItem.engagement.no_data")},dataLabels:{enabled:!!f}}}),s=te(()=>{var f;return{chart:{type:"bar",height:300},plotOptions:{bar:{horizontal:!0,barHeight:"70%",distributed:!0}},xaxis:{categories:((f=t.topUsers)==null?void 0:f.categories)||[],title:{text:a("verbeterplein.showItem.engagement.total_events")}},yaxis:{labels:{maxWidth:150}},legend:{show:!1},title:{text:a("verbeterplein.showItem.engagement.charts.top_users_title"),align:"center"},tooltip:{y:{formatter:l=>`${l} ${a(l===1?"general.event":"general.events")}`}},dataLabels:{enabled:!1},noData:{text:a("verbeterplein.showItem.engagement.no_data")}}}),i=te(()=>{var f,l;return{chart:{type:"area",height:300,zoom:{enabled:!0,type:"x"},toolbar:{show:!0}},xaxis:{type:"datetime",categories:((f=t.trend)==null?void 0:f.categories)||[],title:{text:a("verbeterplein.showItem.history.timestamp")}},yaxis:{title:{text:a("verbeterplein.showItem.engagement.total_events")},min:0},stroke:{curve:"smooth"},dataLabels:{enabled:!1},markers:{size:4,hover:{sizeOffset:2}},tooltip:{x:{format:"dd MMM yyyy"},y:{formatter:u=>`${u} ${a(u===1?"general.event":"general.events")}`}},title:{text:a("verbeterplein.showItem.engagement.charts.engagement_trend_title"),align:"center"},annotations:((l=t.trend)==null?void 0:l.annotations)||{},noData:{text:a("verbeterplein.showItem.engagement.no_data")}}}),d=te(()=>{var f;return{chart:{type:"bar",height:300},plotOptions:{bar:{horizontal:!1,columnWidth:"70%",distributed:!0}},xaxis:{categories:((f=t.activityTime)==null?void 0:f.categories)||[]},yaxis:{title:{text:a("verbeterplein.showItem.engagement.total_events")},min:0},legend:{show:!1},title:{text:a("verbeterplein.showItem.engagement.charts.activity_by_hour_title"),align:"center"},tooltip:{x:{formatter:l=>`${a("general.time_hour")} ${l}`},y:{formatter:l=>`${l} ${a(l===1?"general.event":"general.events")}`}},dataLabels:{enabled:!1},noData:{text:a("verbeterplein.showItem.engagement.no_data")}}}),g=te(()=>{var f;return{chart:{type:"bar",height:300},plotOptions:{bar:{horizontal:!1,columnWidth:"70%",distributed:!0}},xaxis:{categories:((f=t.activityDay)==null?void 0:f.categories)||[],title:{text:a("general.day_of_week")}},yaxis:{title:{text:a("verbeterplein.showItem.engagement.total_events")},min:0},legend:{show:!1},title:{text:a("verbeterplein.showItem.engagement.charts.activity_by_day_title"),align:"center"},tooltip:{x:{formatter:l=>`${a("general.day")} ${l}`},y:{formatter:l=>`${l} ${a(l===1?"general.event":"general.events")}`}},dataLabels:{enabled:!1},noData:{text:a("verbeterplein.showItem.engagement.no_data")}}});return(f,l)=>{const u=hn("client-only");return T(),q("div",Hm,[se(t).loading?(T(),q("div",Gm,[c(se(ia),{indeterminate:"",color:"primary"}),p("p",Wm,j(f.$t("verbeterplein.showItem.engagement.loading")),1)])):se(t).error?(T(),q("div",Jm,[c(se(oe),{size:"large",color:"error"},{default:h(()=>l[0]||(l[0]=[z("mdi-alert-circle-outline")])),_:1,__:[0]}),p("p",qm,j(se(t).error),1)])):se(t).hasData?(T(),q("div",Qm,[se(t).timeline?(T(),ie(se(Te),{key:0,elevation:"1",class:"pa-2 mb-6"},{default:h(()=>[p("h3",Zm,j(f.$t("verbeterplein.showItem.engagement.charts.activity_timeline_title")),1),c(u,null,{fallback:h(()=>[p("div",Xm,j(f.$t("general.fallback.loading")),1)]),default:h(()=>{var m;return[c(se(mn),{type:"bar",height:"350",options:n.value,series:((m=se(t).timeline)==null?void 0:m.series)??[]},null,8,["options","series"])]}),_:1})]),_:1})):X("",!0),c(se(yt),{class:"mt-4"},{default:h(()=>[se(t).departmentViews?(T(),ie(se(qe),{key:0,cols:"12",md:"6"},{default:h(()=>[c(se(Te),{elevation:"1",class:"pa-2 fill-height"},{default:h(()=>[c(u,null,{fallback:h(()=>[p("div",ep,j(f.$t("general.fallback.loading")),1)]),default:h(()=>{var m;return[c(se(mn),{type:"donut",height:"300",options:r.value,series:((m=se(t).departmentViews)==null?void 0:m.series)??[]},null,8,["options","series"])]}),_:1})]),_:1})]),_:1})):X("",!0),se(t).eventTypes?(T(),ie(se(qe),{key:1,cols:"12",md:"6"},{default:h(()=>[c(se(Te),{elevation:"1",class:"pa-2 fill-height"},{default:h(()=>[c(u,null,{fallback:h(()=>[p("div",tp,j(f.$t("general.fallback.loading")),1)]),default:h(()=>{var m;return[c(se(mn),{type:"pie",height:"300",options:o.value,series:((m=se(t).eventTypes)==null?void 0:m.series)??[]},null,8,["options","series"])]}),_:1})]),_:1})]),_:1})):X("",!0)]),_:1}),c(se(yt),{class:"mt-4"},{default:h(()=>[se(t).topUsers?(T(),ie(se(qe),{key:0,cols:"12",md:"6"},{default:h(()=>[c(se(Te),{elevation:"1",class:"pa-2 fill-height"},{default:h(()=>[c(u,null,{fallback:h(()=>[p("div",ap,j(f.$t("general.fallback.loading")),1)]),default:h(()=>{var m;return[c(se(mn),{type:"bar",height:"300",options:s.value,series:((m=se(t).topUsers)==null?void 0:m.series)??[]},null,8,["options","series"])]}),_:1})]),_:1})]),_:1})):X("",!0),se(t).trend?(T(),ie(se(qe),{key:1,cols:"12",md:"6"},{default:h(()=>[c(se(Te),{elevation:"1",class:"pa-2 fill-height"},{default:h(()=>[c(u,null,{fallback:h(()=>[p("div",np,j(f.$t("general.fallback.loading")),1)]),default:h(()=>{var m;return[c(se(mn),{type:"area",height:"300",options:i.value,series:((m=se(t).trend)==null?void 0:m.series)??[]},null,8,["options","series"])]}),_:1})]),_:1})]),_:1})):X("",!0)]),_:1}),c(se(yt),{class:"mt-4"},{default:h(()=>[se(t).activityTime?(T(),ie(se(qe),{key:0,cols:"12",md:"6"},{default:h(()=>[c(se(Te),{elevation:"1",class:"pa-2 fill-height"},{default:h(()=>[c(u,null,{fallback:h(()=>[p("div",rp,j(f.$t("general.fallback.loading")),1)]),default:h(()=>{var m;return[c(se(mn),{type:"bar",height:"300",options:d.value,series:((m=se(t).activityTime)==null?void 0:m.series)??[]},null,8,["options","series"])]}),_:1})]),_:1})]),_:1})):X("",!0),se(t).activityDay?(T(),ie(se(qe),{key:1,cols:"12",md:"6"},{default:h(()=>[c(se(Te),{elevation:"1",class:"pa-2 fill-height"},{default:h(()=>[c(u,null,{fallback:h(()=>[p("div",op,j(f.$t("general.fallback.loading")),1)]),default:h(()=>{var m;return[c(se(mn),{type:"bar",height:"300",options:g.value,series:((m=se(t).activityDay)==null?void 0:m.series)??[]},null,8,["options","series"])]}),_:1})]),_:1})]),_:1})):X("",!0)]),_:1})])):(T(),q("div",Km,[c(se(oe),{size:"64"},{default:h(()=>l[1]||(l[1]=[z("mdi-chart-bar-off")])),_:1,__:[1]}),p("p",Ym,j(f.$t("verbeterplein.showItem.engagement.no_data")),1)]))])}}}),ip=dt(sp,[["__scopeId","data-v-0e4dd1cb"]]),Ys={getCachedData(e){const t=localStorage.getItem("generatedTitles");return t?JSON.parse(t)[e]||{titles:[],selectedIndex:-1}:{titles:[],selectedIndex:-1}},getCachedTitles(e){return this.getCachedData(e).titles},saveTitleToCache(e,t){const a=localStorage.getItem("generatedTitles"),n=a?JSON.parse(a):{};n[e]||(n[e]={titles:[],selectedIndex:-1}),n[e].titles.push(t),localStorage.setItem("generatedTitles",JSON.stringify(n))},saveSelectedIndex(e,t){const a=localStorage.getItem("generatedTitles"),n=a?JSON.parse(a):{};n[e]&&(n[e].selectedIndex=t,localStorage.setItem("generatedTitles",JSON.stringify(n)))},saveCategoryToCache(e,t){const a=`category_${e}`,r=[...this.getCachedCategories(e)||[],t];return localStorage.setItem(a,JSON.stringify(r)),r},getCachedCategories(e){const t=`category_${e}`,a=localStorage.getItem(t);return a?JSON.parse(a):null}};class lp{async sendMessage(t){const a=[{role:"system",content:"Je bent een hulpverlener voor de Intal Verbeterplein applicatie. Antwoord in het Nederlands. Gebruik geen Engelse woorden."},{role:"user",content:t}];try{return(await bt.post("/ai/response",{messages:a})).data.response}catch(n){throw n}}}const ts=new lp,as=ct();async function up(e){const t=`Maak een korte titel (maximaal 100 karakters) die dit obstakel samenvat: "${e}". 
                 De titel moet duidelijk en professioneel zijn. Antwoord in het Nederlands.`;try{return await ts.sendMessage(t)}catch(a){throw as.error({message:Ta.global.t("errors.ai_generate_error",{error:a})}),a}}async function dp(e){const t=`Analyseer dit obstakel en categoriseer het volgens de volgende structuur. 
                 Kies exact Ã©Ã©n woord uit elke categorie en verbind ze met streepjes (-).

                 Product categorie (kies Ã©Ã©n):
                 - Kozijn
                 - Vliesgevel
                 - Schuifpuien
                 - Dekkappen
                 - Schroeflijsten
                 - Glas
                 - Panelen
                 - Glaslat
                 - Rubber
                 - Bevestigingsmateriaal
                 - Zetwerk
                 - Overig

                 Probleem type (kies Ã©Ã©n):
                 - Manco
                 - Beschadigd
                 - Fout

                 Fase (kies Ã©Ã©n):
                 - Fabriekslevering
                 - Bouwlevering
                 - Montage
                 - Productie

                 Obstakel: "${e}"
                 
                 Antwoord in exact dit format: [product] - [probleem] - [fase]
                 Bijvoorbeeld: overig - fout - productie`;try{return await ts.sendMessage(t)}catch(a){throw as.error({message:Ta.global.t("errors.ai_generate_error",{error:a})}),a}}async function cp(e){const t=`Je bent een expert in root cause analysis voor productieproblemen in een aluminium kozijnenfabriek. 
                 Analyseer de volgende input en geef een gestructureerde kernoorzaak analyse:
                 
                 Obstakel + Gebruiker analyse: ${e}
                 
                 Analyseer de input en geef een gecombineerde kernoorzaak analyse. 
                 Voorkom dat je zelf antwoorden verzint op de Waarom-vragen die niet door de gebruiker zijn ingevuld. 
                 Gebruik de 5-why methode als basis. Houdt het antwoord kort, onder de 50 woorden.
                 Antwoord in het Nederlands.`;try{return await ts.sendMessage(t)}catch(a){throw as.error({message:Ta.global.t("errors.ai_generate_error",{error:a})}),a}}const fp=["click"],rr=[],mp={instances:rr,beforeMount:Qs,updated:(e,t)=>{JSON.stringify(t.value)!==JSON.stringify(t.oldValue)&&Qs(e,t)},unmounted:zi};function Qs(e,{value:t}){zi(e);const a=t,n=typeof a=="function";if(!n&&typeof a!="object"||a.isActive===!1)return;const r=n?a:a.handler,o=pp({el:e,handler:r});o.eventHandlers.forEach(({event:s,handler:i})=>setTimeout(()=>document.addEventListener(s,i,!1),0)),rr.push(o)}function zi(e){const t=rr.findIndex(a=>a.el===e);t!==-1&&(rr[t].eventHandlers.forEach(({event:a,handler:n})=>document.removeEventListener(a,n,!1)),rr.splice(t,1))}function pp({el:e,handler:t}){return{el:e,eventHandlers:fp.map(a=>({event:a,handler:n=>vp({event:n,el:e,handler:t})}))}}function vp({event:e,el:t,handler:a}){const n=e.path||(e.composedPath?e.composedPath():void 0);if(n?n.indexOf(t)<0:!t.contains(e.target))return a&&a(e,t)}const hp=Se({name:"IconView",props:{height:{type:[String,Number],default:"16"},width:{type:[String,Number],default:"16"},color:{type:String,default:"black"},customClass:{type:String,required:!1,default:""}},setup(){return{}}}),Un=(e,t)=>{const a=e.__vccOpts||e;for(const[n,r]of t)a[n]=r;return a},gp=["height","width"],yp=["fill"];function bp(e,t,a,n,r,o){return T(),q("span",{class:we(e.customClass)},[(T(),q("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:e.height,width:e.width,role:"img","aria-hidden":"true","data-icon":"calendarAlt"},[p("path",{fill:e.color,d:"M400 64h-48V12c0-6.6-5.4-12-12-12h-8c-6.6 0-12 5.4-12 12v52H128V12c0-6.6-5.4-12-12-12h-8c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM48 96h352c8.8 0 16 7.2 16 16v48H32v-48c0-8.8 7.2-16 16-16zm352 384H48c-8.8 0-16-7.2-16-16V192h384v272c0 8.8-7.2 16-16 16zM148 320h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm96 0h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm96 0h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-96 96h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-96 0h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm192 0h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12z"},null,8,yp)],8,gp))],2)}const wp=Un(hp,[["render",bp]]),$e=(e,t=!1)=>t?e.getUTCFullYear():e.getFullYear(),nt=(e,t=!1)=>t?e.getUTCMonth():e.getMonth(),Xt=(e,t=!1)=>t?e.getUTCDate():e.getDate(),wa=(e,t=!1)=>t?e.getUTCDay():e.getDay(),Vo=(e,t,a=!1)=>a?e.setUTCFullYear(t):e.setFullYear(t),Li=(e,t,a=!1)=>a?e.setUTCMonth(t):e.setMonth(t),$r=(e,t,a=!1)=>a?e.setUTCDate(t):e.setDate(t),Ar=(e,t,a=!1)=>{const n=new Date(e.getTime()),r=new Date(t.getTime());return a?(n.setUTCHours(0,0,0,0),r.setUTCHours(0,0,0,0)):(n.setHours(0,0,0,0),r.setHours(0,0,0,0)),n.getTime()===r.getTime()},_p=e=>Object.prototype.toString.call(e)!=="[object Date]"?!1:!Number.isNaN(e.getTime()),no=(e,t)=>{if(typeof e!="object")throw TypeError("Invalid Type");return t[wa(e)]},ir=(e,t)=>{if(!t)throw Error("missing 2nd parameter Months array");if(typeof e=="object")return t[nt(e)];if(typeof e=="number")return t[e];throw TypeError("Invalid type")},ro=(e,t)=>{if(!t)throw Error("missing 2nd paramter Months array");if(typeof e=="object")return t[nt(e)];if(typeof e=="number")return t[e];throw TypeError("Invalid type")},Cp=(e,t)=>/8|3|5|10/.test(t)?30:t===1?!(e%4)&&e%100||!(e%400)?29:28:31,xp=e=>{switch(e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},Sp=(e,t,a)=>{const n=$e(e),r=nt(e)+1,o=Xt(e);return t.replace(/dd/,`0${o}`.slice(-2)).replace(/d/,o).replace(/yyyy/,n).replace(/yy/,String(n).slice(2)).replace(/MMMM/,ir(nt(e),a.months)).replace(/MMM/,ro(nt(e),a.monthsAbbr)).replace(/MM/,`0${r}`.slice(-2)).replace(/M(?!a|Ã¤|e)/,r.toString()).replace(/su/,xp(Xt(e))).replace(/D(?!e|Ã©|i)/,no(e,a.days))},Dp=e=>e===null||e instanceof Date||typeof e=="string"||typeof e=="number",Pa=e=>typeof e=="string"?new Date(e):e,kp=Se({name:"DateInput",components:{IconView:wp},props:{selectedDate:{type:[Date,String],default:null},resetTypedDate:{type:[Date],default:new Date},format:{type:[String,Function]},translation:{type:Object},inline:{type:Boolean},id:{type:String},name:{type:String},openDate:{type:Date},placeholder:{type:String},inputClass:{type:[String,Object,Array]},clearButton:{type:Boolean},clearButtonIcon:{type:String},calendarButton:{type:Boolean},calendarButtonIcon:{type:String},calendarButtonIconContent:{type:String},disabled:{type:Boolean},required:{type:Boolean},typeable:{type:Boolean},addBootstrapClass:{type:Boolean,default:!1,required:!1},useUtc:{type:Boolean},minimumView:{type:String,default:"day"},maximumView:{type:String,default:"year"},hideInput:{type:Boolean,default:!0},fullMonthName:{type:Boolean,default:!1},iconColor:{default:"black",type:String},iconHeight:{default:16,type:[String,Number]},iconWidth:{default:16,type:[String,Number]},theme:{default:"green",type:String}},emits:["show-calendar","typed-date","clear-date","close-calendar"],setup(e,{emit:t}){const a=W(),n=W(null),r=te(()=>e.addBootstrapClass?typeof e.inputClass=="string"?[e.inputClass,"form-control"].join(" "):{"form-control":!0,...e.inputClass}:e.inputClass),o=te(()=>{var f,l;if(!e.selectedDate)return null;if(a.value)return a.value;const u=Pa(e.selectedDate);let m=typeof e.format=="function"?e.format(u):Sp(u,e.format,e.translation);if(e.minimumView===e.maximumView){const[,x,F]=m.split(" ");if(e.maximumView==="month"){if(e.fullMonthName){const C=(f=e.translation)==null?void 0:f.monthsAbbr.indexOf(x);return(l=e.translation)==null?void 0:l.months[C]}m=x}else e.maximumView==="year"&&(m=F)}return m});be(()=>e.resetTypedDate,()=>{a.value=""});function s(){t("show-calendar")}function i(f){if([27,13].includes(f.keyCode)&&n.value.blur(),e.typeable){const{value:l}=n.value,u=Date.parse(l);Number.isNaN(u)||(a.value=l,t("typed-date",new Date(u)))}}function d(){t("clear-date")}function g(){e.typeable&&Number.isNaN(Date.parse(n.value.value))&&(d(),n.value.value=null,a.value=""),t("close-calendar",!0)}return{typedDate:a,computedInputClass:r,formattedValue:o,showCalendar:s,parseTypedDate:i,inputBlurred:g,inputRef:n,clearDate:d}}}),Ap={key:0},Pp={key:1,style:{position:"relative"}},Ip={key:0},Tp=["type","name","id","value","open-date","placeholder","clear-button","disabled","required","readonly"],$p={key:0,class:"vuejs3-datepicker__value"},Fp={class:"vuejs3-datepicker__icon"},Ep={key:0,class:"vuejs3-datepicker__content"},Np={key:1,class:"vuejs3-datepicker__content"},Rp={key:0};function jp(e,t,a,n,r,o){const s=hn("IconView");return T(),q("div",{class:we([e.addBootstrapClass?"input-group":""])},[e.calendarButton?(T(),q("span",{key:0,class:we(["vuejs3-datepicker__calendar-button",{"input-group-prepend":e.addBootstrapClass,"cursor-na":e.disabled}]),onClick:t[0]||(t[0]=(...i)=>e.showCalendar&&e.showCalendar(...i))},[p("span",{class:we({"input-group-text":e.addBootstrapClass})},[p("i",{class:we(e.calendarButtonIcon)},[z(j(e.calendarButtonIconContent)+" ",1),e.calendarButtonIcon?X("",!0):(T(),q("span",Ap,"â€¦"))],2)],2)],2)):X("",!0),e.typeable||!e.hideInput?(T(),q("div",Pp,[e.inline?X("",!0):(T(),q("span",Ip,[c(s,{customClass:"vuejs3-datepicker__typeablecalendar",color:e.iconColor,width:e.iconWidth,height:e.iconHeight},null,8,["color","width","height"])])),p("input",{type:e.inline?"hidden":"text",class:we([e.computedInputClass,"vuejs3-datepicker__inputvalue"]),name:e.name,ref:"inputRef",id:e.id,value:e.formattedValue,"open-date":e.openDate,placeholder:e.placeholder,"clear-button":e.clearButton,disabled:e.disabled,required:e.required,readonly:!e.typeable,onClick:t[1]||(t[1]=(...i)=>e.showCalendar&&e.showCalendar(...i)),onKeyup:t[2]||(t[2]=(...i)=>e.parseTypedDate&&e.parseTypedDate(...i)),onBlur:t[3]||(t[3]=(...i)=>e.inputBlurred&&e.inputBlurred(...i)),autocomplete:"off"},null,42,Tp)])):(T(),q("div",{key:2,onClick:t[4]||(t[4]=(...i)=>e.showCalendar&&e.showCalendar(...i)),id:"calendar-div"},[e.inline?X("",!0):(T(),q("div",$p,[p("span",Fp,[c(s,{color:e.iconColor,width:e.iconWidth,height:e.iconHeight},null,8,["color","width","height"])]),e.formattedValue?(T(),q("div",Ep,j(e.formattedValue),1)):(T(),q("div",Np,j(e.placeholder),1))]))])),e.clearButton&&e.selectedDate?(T(),q("span",{key:3,class:we(["vuejs3-datepicker__clear-button",{"input-group-append":e.addBootstrapClass}]),onClick:t[5]||(t[5]=i=>e.clearDate())},[p("span",{class:we({"input-group-text":e.addBootstrapClass})},[p("i",{class:we(e.clearButtonIcon)},[e.clearButtonIcon?X("",!0):(T(),q("span",Rp,"Ã—"))],2)],2)],2)):X("",!0),Mt(e.$slots,"belowDate",{},void 0,!0)],2)}const Mp=Un(kp,[["render",jp],["__scopeId","data-v-09a6219c"]]),Op=Se({name:"PickerDay",props:{showDayView:{type:Boolean},selectedDate:{type:[String,Date],required:!1,default:null},pageDate:{type:Date,default:new Date},fullMonthName:{type:Boolean},allowedToShowView:{type:Function,required:!0},dayCellContent:{type:Function,default:e=>e.date},disabledDates:{type:Object},highlighted:{type:Object},calendarClass:{type:[String,Object,Array]},calendarStyle:{type:Object},translation:{type:Object},isRtl:{type:Boolean},mondayFirst:{type:Boolean},useUtc:{type:Boolean},minimumView:{type:String,default:"day"},maximumView:{type:String,default:"year"},preventDisableDateSelection:{type:Boolean,default:!0},theme:{default:"green",type:String}},emits:["show-year-calendar","changed-month","show-month-calendar","selected-disabled","select-date"],setup(e,{emit:t}){function a(I){I.isDisabled?(t("selected-disabled",I),e.preventDisableDateSelection||t("select-date",I)):t("select-date",I)}function n(){t("show-month-calendar")}function r(){t("show-year-calendar")}function o(I){const P=e.pageDate;Li(P,nt(P)+I),t("changed-month",P)}function s(){const I=e.disabledDates;if(!I||!I.to)return!1;const P=e.pageDate;return nt(I.to)>=nt(P)&&$e(I.to)>=$e(P)}function i(){s()||o(-1)}function d(){const I=e.disabledDates;if(!I||!I.from)return!1;const P=e.pageDate;return nt(I.from)<=nt(P)&&$e(I.from)<=$e(P)}function g(){d()||o(1)}function f(I){const P=Pa(e.selectedDate);return e.selectedDate?Ar(P,I):!1}function l(I){let P=!1;const A=e.disabledDates;return A?typeof A>"u"?!1:(typeof A.dates<"u"&&A.dates.forEach(v=>{Ar(I,v)&&(P=!0)}),typeof A.to<"u"&&A.to&&I<A.to&&(P=!0),typeof A.from<"u"&&A.from&&I>A.from&&(P=!0),typeof A.days<"u"&&A.days.indexOf(wa(I))!==-1&&(P=!0),typeof A.daysOfMonth<"u"&&A.daysOfMonth.indexOf(Xt(I))!==-1&&(P=!0),typeof A.customPredictor=="function"&&A.customPredictor(I)&&(P=!0),P):P}function u(I){return typeof I<"u"&&I}function m(I){const P=e.highlighted;if(!(P&&P.includeDisabled)&&l(I))return!1;let A=!1;return typeof P>"u"?!1:(typeof P.dates<"u"&&P.dates.forEach(v=>{Ar(I,v)&&(A=!0)}),u(P.from)&&u(P.to)&&(A=I>=P.from&&I<=P.to),typeof P.days<"u"&&P.days.indexOf(wa(I))!==-1&&(A=!0),typeof P.daysOfMonth<"u"&&P.daysOfMonth.indexOf(Xt(I))!==-1&&(A=!0),typeof P.customPredictor=="function"&&P.customPredictor(I)&&(A=!0),A)}function x(I){return{selected:I.isSelected,disabled:I.isDisabled,highlighted:I.isHighlighted,today:I.isToday,weekend:I.isWeekend,sat:I.isSaturday,sun:I.isSunday,"highlight-start":I.isHighlightStart,"highlight-end":I.isHighlightEnd}}function F(I){const P=e.highlighted;return P?m(I)&&P.from instanceof Date&&$e(P.from)===$e(I)&&nt(P.from)===nt(I)&&Xt(P.from)===Xt(I):!1}function C(I){const P=e.highlighted;return P?m(I)&&P.to instanceof Date&&$e(P.to)===$e(I)&&nt(P.to)===nt(I)&&Xt(P.to)===Xt(I):!1}const D=te(()=>{if(e.mondayFirst){const I=e.translation&&e.translation.days&&e.translation.days.slice();return I.push(I.shift()),I}return e.translation&&e.translation.days}),L=te(()=>{const I=e.pageDate,P=e.useUtc?new Date(Date.UTC(I.getUTCFullYear(),I.getUTCMonth(),1)):new Date(I.getFullYear(),I.getMonth(),1,I.getHours(),I.getMinutes());return e.mondayFirst?wa(P)>0?wa(P)-1:6:wa(P)}),$=te(()=>{const I=e.pageDate,P=[],A=e.useUtc?new Date(Date.UTC(I.getUTCFullYear(),I.getUTCMonth(),1)):new Date(I.getFullYear(),I.getMonth(),1,I.getHours(),I.getMinutes()),v=Cp($e(A),nt(A));for(let b=0;b<v;b+=1)P.push({date:Xt(A),timestamp:A.getTime(),isSelected:f(A),isDisabled:l(A),isHighlighted:m(A),isHighlightStart:F(A),isHighlightEnd:C(A),isToday:Ar(A,new Date),isWeekend:wa(A)===0||wa(A)===6,isSaturday:wa(A)===6,isSunday:wa(A)===0}),$r(A,Xt(A)+1);return P}),_=te(()=>{const I=e.fullMonthName?e.translation&&e.translation.months:e.translation&&e.translation.monthsAbbr;return ro(nt(e.pageDate),I)}),S=te(()=>{const I=e.translation&&e.translation.months;return ir(nt(e.pageDate),I)}),k=te(()=>{const I=e.translation&&e.translation.yearSuffix;return`${$e(e.pageDate)}${I}`}),O=te(()=>(e.translation&&e.translation.ymd&&e.translation&&e.translation.ymd)===!0),w=te(()=>e.isRtl?d():s()),y=te(()=>e.isRtl?s():d()),M=te(()=>{const I=Pa(e.selectedDate);return e.selectedDate?no(I,e.translation&&e.translation.daysNames):null}),E=te(()=>{const I=Pa(e.selectedDate);return e.selectedDate?Xt(I):null}),R=te(()=>!(e.minimumView===e.maximumView&&(e.minimumView!=="day"||e.maximumView!=="day")));return{isDefined:u,showMonthCalendar:n,daysOfWeek:D,blankDays:L,isYmd:O,days:$,currMonthName:_,currYearName:k,isLeftNavDisabled:w,isRightNavDisabled:y,selectDate:a,previousMonth:i,nextMonth:g,dayClasses:x,monthName:S,getDayName:M,getDisplayDate:E,showYearCalendar:r,isNextMonthDisabled:d,ifDifferentViews:R,isSelectedDate:f,isDisabledDate:l,isHighlightedDate:m,isHighlightStart:F,isHighlightEnd:C}}}),Vp={key:0,class:"vuejs3-datepicker__calendar-topbar"},Bp={key:0,class:"vuejs3-datepicker__calendar-topbar-day"},Up={class:"vuejs3-datepicker__calendar-actionarea"},zp=["innerHTML","onClick"];function Lp(e,t,a,n,r,o){return ja((T(),q("div",{class:we(["vuejs3-datepicker__calendar",`vuejs3-${e.theme}`,e.calendarClass]),style:jn(e.calendarStyle),onMousedown:t[4]||(t[4]=Aa(()=>{},["prevent"]))},[Mt(e.$slots,"customCalendarHeader"),e.ifDifferentViews&&e.selectedDate?(T(),q("section",Vp,[p("p",{class:"vuejs3-datepicker__calendar-topbar-year",onClick:t[0]||(t[0]=(...s)=>e.showYearCalendar&&e.showYearCalendar(...s))},j(e.currYearName),1),Mt(e.$slots,"formatDateTopBar",{},()=>[e.selectedDate?(T(),q("p",Bp,j(e.getDayName)+" "+j(e.getDisplayDate)+" "+j(e.monthName),1)):X("",!0)])])):X("",!0),p("div",Up,[p("header",null,[p("span",{onClick:t[1]||(t[1]=s=>e.isRtl?e.nextMonth():e.previousMonth()),class:we(["prev",{disabled:e.isLeftNavDisabled}])},"<",2),p("span",{class:we(["day__month_btn",e.allowedToShowView("month")?"up":""]),onClick:t[2]||(t[2]=(...s)=>e.showMonthCalendar&&e.showMonthCalendar(...s))},j(e.isYmd?e.currYearName:e.currMonthName)+" "+j(e.isYmd?e.currMonthName:e.currYearName),3),p("span",{onClick:t[3]||(t[3]=s=>e.isRtl?e.previousMonth():e.nextMonth()),class:we(["next",{disabled:e.isRightNavDisabled}])},">",2)]),p("div",{class:we(e.isRtl?"flex-rtl":"")},[(T(!0),q(Ae,null,We(e.daysOfWeek,s=>(T(),q("span",{class:"cell day-header",key:s.timestamp},j(s),1))),128)),e.blankDays>0?(T(!0),q(Ae,{key:0},We(e.blankDays,s=>(T(),q("span",{class:"cell day blank",key:s.timestamp}))),128)):X("",!0),(T(!0),q(Ae,null,We(e.days,s=>(T(),q("span",{class:we(["cell day",e.dayClasses(s)]),key:s.timestamp,innerHTML:e.dayCellContent(s),onClick:i=>e.selectDate(s)},null,10,zp))),128))],2)])],38)),[[Rn,e.showDayView]])}const Hp=Un(Op,[["render",Lp]]),Gp=Se({name:"PickerMonth",props:{showMonthView:{type:Boolean},selectedDate:{type:[String,Date],required:!1,default:null},pageDate:{type:Date,default:new Date},disabledDates:{type:Object},calendarClass:{type:[String,Object,Array]},calendarStyle:{type:Object},translation:{type:Object},isRtl:{type:Boolean},allowedToShowView:{type:Function,required:!0},useUtc:{type:Boolean},fullMonthName:{type:Boolean},minimumView:{type:String,default:"day"},maximumView:{type:String,default:"year"},theme:{default:"green",type:String}},setup(e,{emit:t}){function a(S){S.isDisabled||t("select-month",S)}function n(S){const k=e.pageDate;Vo(k,$e(k)+S),t("changed-year",k)}function r(){const S=e.disabledDates;return!S||!S.to?!1:$e(S.to)>=$e(e.pageDate)}function o(){r()||n(-1)}function s(){const S=e.disabledDates;return!S||!S.from?!1:$e(S.from)<=$e(e.pageDate)}function i(){s()||n(1)}function d(){t("show-year-calendar")}function g(S){const k=Pa(e.selectedDate);return k&&$e(k)===$e(S)&&nt(k)===nt(S)}function f(S){let k=!1;const O=e.disabledDates;return!O||typeof O>"u"?!1:(typeof O.to<"u"&&O.to&&(nt(S)<nt(O.to)&&$e(S)<=$e(O.to)||$e(S)<$e(O.to))&&(k=!0),typeof O.from<"u"&&O.from&&(nt(S)>nt(O.from)&&$e(S)>=$e(O.from)||$e(S)>$e(O.from))&&(k=!0),typeof O.customPredictor=="function"&&O.customPredictor(S)&&(k=!0),k)}const l=te(()=>{const S=e.pageDate,k=[],O=e.useUtc?new Date(Date.UTC(S.getUTCFullYear(),0,S.getUTCDate())):new Date(S.getFullYear(),0,S.getDate(),S.getHours(),S.getMinutes());for(let w=0;w<12;w+=1)k.push({month:ir(w,e.translation&&e.translation.months),timestamp:O.getTime(),isSelected:g(O),isDisabled:f(O)}),Li(O,nt(O)+1);return k}),u=te(()=>{const S=e.translation&&e.translation.yearSuffix;return`${$e(e.pageDate)}${S}`}),m=te(()=>e.isRtl?s():r()),x=te(()=>e.isRtl?r():s()),F=te(()=>{const S=e.translation&&e.translation.months;return ir(nt(e.pageDate),S)}),C=te(()=>{const S=Pa(e.selectedDate);return e.selectedDate?Xt(S):null}),D=te(()=>{const S=Pa(e.selectedDate);return e.selectedDate?no(S,e.translation&&e.translation.daysNames):null}),L=te(()=>{const S=e.translation&&e.translation.yearSuffix;return`${$e(e.pageDate)}${S}`}),$=te(()=>{const S=e.fullMonthName?e.translation&&e.translation.months:e.translation&&e.translation.monthsAbbr;return ro(nt(e.pageDate),S)}),_=te(()=>!(e.minimumView===e.maximumView&&(e.minimumView!=="day"||e.maximumView!=="day")));return{isRightNavDisabled:x,isLeftNavDisabled:m,pageYearName:u,months:l,selectMonth:a,previousYear:o,nextYear:i,currYearName:L,getDisplayDate:C,monthName:F,showYearCalendar:d,getDayName:D,currMonthName:$,ifDifferentViews:_,isSelectedMonth:g,isDisabledMonth:f}}}),Wp={key:0,class:"vuejs3-datepicker__calendar-topbar"},Jp={key:0,class:"vuejs3-datepicker__calendar-topbar-day"},qp={class:"vuejs3-datepicker__calendar-actionarea"},Kp=["onClick"];function Yp(e,t,a,n,r,o){return ja((T(),q("div",{class:we(["vuejs3-datepicker__calendar",`vuejs3-${e.theme}`,e.calendarClass]),style:jn(e.calendarStyle),onMousedown:t[4]||(t[4]=Aa(()=>{},["prevent"]))},[Mt(e.$slots,"customCalendarHeader"),e.ifDifferentViews?(T(),q("section",Wp,[p("p",{class:"vuejs3-datepicker__calendar-topbar-year",onClick:t[0]||(t[0]=(...s)=>e.showYearCalendar&&e.showYearCalendar(...s))},j(e.currYearName),1),Mt(e.$slots,"formatDateTopBar",{},()=>[e.selectedDate?(T(),q("p",Jp,j(e.getDayName)+" "+j(e.getDisplayDate)+" "+j(e.monthName),1)):X("",!0)])])):X("",!0),p("div",qp,[p("header",null,[p("span",{onClick:t[1]||(t[1]=s=>e.isRtl?e.nextYear():e.previousYear()),class:we(["prev",{disabled:e.isLeftNavDisabled}])},"<",2),p("span",{class:we(["month__year_btn",e.allowedToShowView("year")?"up":""]),onClick:t[2]||(t[2]=(...s)=>e.showYearCalendar&&e.showYearCalendar(...s))},j(e.pageYearName),3),p("span",{onClick:t[3]||(t[3]=s=>e.isRtl?e.previousYear():e.nextYear()),class:we(["next",{disabled:e.isRightNavDisabled}])},">",2)]),(T(!0),q(Ae,null,We(e.months,s=>(T(),q("span",{class:we(["cell month",{selected:s.isSelected,disabled:s.isDisabled}]),key:s.timestamp,onClick:Aa(i=>e.selectMonth(s),["stop"])},j(s.month),11,Kp))),128))])],38)),[[Rn,e.showMonthView]])}const Qp=Un(Gp,[["render",Yp]]),Zp=Se({name:"PickerYear",props:{showYearView:{type:Boolean},selectedDate:{type:[String,Date],required:!1,default:null},pageDate:{type:Date,default:new Date},disabledDates:{type:Object},highlighted:{type:Object},calendarClass:{type:[String,Object,Array]},calendarStyle:{type:Object},translation:{type:Object},isRtl:{type:Boolean},allowedToShowView:{type:Function,required:!0},useUtc:{type:Boolean},fullMonthName:{type:Boolean},minimumView:{type:String,default:"day"},maximumView:{type:String,default:"year"},theme:{default:"green",type:String}},emits:["select-year","changed-decade"],setup(e,{emit:t}){function a(_){_.isDisabled||t("select-year",_)}function n(_){const S=e.pageDate;Vo(S,$e(S)+_),t("changed-decade",S)}function r(){const _=e.disabledDates;if(!_||!_.to)return!1;const S=$e(_.to),k=Math.floor($e(e.pageDate)/10)*10-1;return S>k}function o(){r()||n(-10)}function s(){const _=e.disabledDates;if(!_||!_.from)return!1;const S=$e(_.from),k=Math.ceil($e(e.pageDate)/10)*10;return S<=k}function i(){s()||n(10)}function d(_){const S=Pa(e.selectedDate);return e.selectedDate?$e(S)===$e(_):!1}function g(_){let S=!1;return typeof e.disabledDates>"u"||!e.disabledDates?!1:(typeof e.disabledDates.to<"u"&&e.disabledDates.to&&$e(_)<$e(e.disabledDates.to)&&(S=!0),typeof e.disabledDates.from<"u"&&e.disabledDates.from&&$e(_)>$e(e.disabledDates.from)&&(S=!0),typeof e.disabledDates.customPredictor=="function"&&(S=e.disabledDates.customPredictor(_)),S)}const f=te(()=>{const _=e.pageDate,S=[],k=e.useUtc?new Date(Date.UTC(Math.floor(_.getUTCFullYear()/10)*10,_.getUTCMonth(),_.getUTCDate())):new Date(Math.floor(_.getFullYear()/10)*10,_.getMonth(),_.getDate(),_.getHours(),_.getMinutes());for(let O=0;O<10;O+=1)S.push({year:$e(k),timestamp:k.getTime(),isSelected:d(k),isDisabled:g(k)}),Vo(k,$e(k)+1);return S}),l=te(()=>{const _=Math.floor($e(e.pageDate)/10)*10,S=_+9,k=e.translation&&e.translation.yearSuffix;return`${_} - ${S}${k}`}),u=te(()=>e.isRtl?s():r()),m=te(()=>e.isRtl?r():s()),x=te(()=>{const _=Pa(e.selectedDate);return e.selectedDate?no(_,e.translation&&e.translation.daysNames):null}),F=te(()=>{const _=e.translation&&e.translation.months;return ir(nt(e.pageDate),_)}),C=te(()=>{const _=Pa(e.selectedDate);return e.selectedDate?Xt(_):null}),D=te(()=>{const _=e.translation&&e.translation.yearSuffix;return`${$e(e.pageDate)}${_}`}),L=te(()=>{const _=e.fullMonthName?e.translation&&e.translation.months:e.translation&&e.translation.monthsAbbr;return ro(nt(e.pageDate),_)}),$=te(()=>!(e.minimumView===e.maximumView&&(e.minimumView!=="day"||e.maximumView!=="day")));return{isRightNavDisabled:m,isLeftNavDisabled:u,getPageDecade:l,years:f,nextDecade:i,previousDecade:o,selectYear:a,getDayName:x,monthName:F,getDisplayDate:C,currYearName:D,currMonthName:L,ifDifferentViews:$,isNextDecadeDisabled:s,isPreviousDecadeDisabled:r,isDisabledYear:g}}}),Xp={key:0,class:"vuejs3-datepicker__calendar-topbar"},ev={class:"vuejs3-datepicker__calendar-topbar-year"},tv={key:0,class:"vuejs3-datepicker__calendar-topbar-day"},av={class:"vuejs3-datepicker__calendar-actionarea"},nv=["onClick"];function rv(e,t,a,n,r,o){return ja((T(),q("div",{class:we(["vuejs3-datepicker__calendar",`vuejs3-${e.theme}`,e.calendarClass]),style:jn(e.calendarStyle),onMousedown:t[2]||(t[2]=Aa(()=>{},["prevent"]))},[Mt(e.$slots,"customCalendarHeader"),e.ifDifferentViews&&e.selectedDate?(T(),q("section",Xp,[p("p",ev,j(e.currYearName),1),Mt(e.$slots,"formatDateTopBar",{},()=>[e.selectedDate?(T(),q("p",tv,j(e.getDayName)+" "+j(e.getDisplayDate)+" "+j(e.monthName),1)):X("",!0)])])):X("",!0),p("div",av,[p("header",null,[p("span",{onClick:t[0]||(t[0]=s=>e.isRtl?e.nextDecade():e.previousDecade()),class:we(["prev",{disabled:e.isLeftNavDisabled}])},"<",2),p("span",null,j(e.getPageDecade),1),p("span",{onClick:t[1]||(t[1]=s=>e.isRtl?e.previousDecade():e.nextDecade()),class:we(["next",{disabled:e.isRightNavDisabled}])},">",2)]),(T(!0),q(Ae,null,We(e.years,s=>(T(),q("span",{class:we(["cell year",{selected:s.isSelected,disabled:s.isDisabled}]),key:s.timestamp,onClick:Aa(i=>e.selectYear(s),["stop"])},j(s.year),11,nv))),128))])],38)),[[Rn,e.showYearView]])}const ov=Un(Zp,[["render",rv]]),sv=()=>{const e="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©";return{months:["ÙƒØ§Ù†ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ","Ø´Ø¨Ø§Ø·","Ø¢Ø°Ø§Ø±","Ù†ÙŠØ³Ø§Ù†","Ø§ÙŠØ§Ø±","Ø­Ø²ÙŠØ±Ø§Ù†","ØªÙ…ÙˆØ²","Ø¢Ø¨","Ø£ÙŠÙ„ÙˆÙ„","ØªØ´Ø±ÙŠÙ† Ø§Ù„Ø§ÙˆÙ„","ØªØ´Ø±ÙŠÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ","ÙƒØ§Ù†ÙˆÙ† Ø§Ù„Ø§ÙˆÙ„"],monthsAbbr:["ÙƒØ§Ù†ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ","Ø´Ø¨Ø§Ø·","Ø¢Ø°Ø§Ø±","Ù†ÙŠØ³Ø§Ù†","Ø§ÙŠØ§Ø±","Ø­Ø²ÙŠØ±Ø§Ù†","ØªÙ…ÙˆØ²","Ø¢Ø¨","Ø£ÙŠÙ„ÙˆÙ„","ØªØ´Ø±ÙŠÙ† Ø§Ù„Ø§ÙˆÙ„","ØªØ´Ø±ÙŠÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ","ÙƒØ§Ù†ÙˆÙ† Ø§Ù„Ø§ÙˆÙ„"],days:["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"],language:e,yearSuffix:"",ymd:!1,rtl:!0,langName:e,daysNames:["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"]}},iv=()=>{const e="Afrikaans",t=["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember"],a=["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],n=["So.","Ma.","Di.","Wo.","Do.","Vr.","Sa."];return{months:t,monthsAbbr:a,days:n,yearSuffix:"",ymd:!1,rtl:!1,language:e,langName:e,daysNames:n}},lv=()=>{const e="German";return{months:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsAbbr:["Jan","Feb","MÃ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],days:["So","Mo","Di","Mi","Do","Fr","Sa"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]}},uv=()=>{const e="English";return{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},dv=()=>{const e="EspaÃ±ol";return{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsAbbr:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],days:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Domingo","Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado"]}},cv=()=>{const e="FranÃ§ais";return{months:["Janvier","FÃ©vrier","Mars","Avril","Mai","Juin","Juillet","AoÃ»t","Septembre","Octobre","Novembre","DÃ©cembre"],monthsAbbr:["Jan","FÃ©v","Mar","Avr","Mai","Jui","Juil","AoÃ»","Sep","Oct","Nov","DÃ©c"],days:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"]}},fv=()=>{const e="Hindi";return{months:["à¤œà¤¨à¤µà¤°à¥€","à¤«à¤¼à¤°à¤µà¤°à¥€","à¤®à¤¾à¤°à¥à¤š","à¤…à¤ªà¥à¤°à¥ˆà¤²","à¤®à¤ˆ","à¤œà¥‚à¤¨","à¤œà¥à¤²à¤¾à¤ˆ","à¤…à¤—à¤¸à¥à¤¤","à¤¸à¤¿à¤¤à¤‚à¤¬à¤°","à¤…à¤•à¥à¤Ÿà¥‚à¤¬à¤°","à¤¨à¤µà¤‚à¤¬à¤°","à¤¦à¤¿à¤¸à¤‚à¤¬à¤°"],monthsAbbr:["à¤œà¤¨","à¤«à¤¼à¤°","à¤®à¤¾à¤°à¥à¤š","à¤…à¤ªà¥à¤°à¥ˆ","à¤®à¤ˆ","à¤œà¥‚à¤¨","à¤œà¥à¤²à¤¾","à¤…à¤—à¤¸à¥à¤¤","à¤¸à¤¿à¤¤à¤‚","à¤…à¤•à¥à¤Ÿà¥‚","à¤¨à¤µà¤‚","à¤¦à¤¿à¤¸à¤‚"],days:["à¤°à¤µà¤¿","à¤¸à¥‹à¤®","à¤®à¤‚à¤—à¤²","à¤¬à¥à¤§","à¤—à¥à¤°à¥","à¤¶à¥à¤•à¥à¤°","à¤¶à¤¨à¤¿"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["à¤°à¤µà¤¿à¤µà¤¾à¤°","à¤¸à¥‹à¤®à¤µà¤¾à¤°","à¤®à¤‚à¤—à¤²à¤µà¤¾à¤°","à¤¬à¥à¤§à¤µà¤¾à¤°","à¤—à¥à¤°à¥à¤µà¤¾à¤°","à¤¶à¥à¤•à¥à¤°à¤µà¤¾à¤°","à¤¶à¤¨à¤¿à¤µà¤¾à¤°"]}},mv=()=>{const e="Japanese";return{months:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],monthsAbbr:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],days:["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["æ—¥æ›œæ—¥","æœˆæ›œæ—¥","ç«æ›œæ—¥","æ°´æ›œæ—¥","æœ¨æ›œæ—¥","é‡‘æ›œæ—¥","åœŸæ›œæ—¥"]}},pv=()=>{const e="Dutch",t=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],a=["jan.","feb.","mrt.","apr.","mei","juni","juli","aug.","sep.","okt.","nov.","dec."],n=["zo.","ma.","di.","wo.","do.","vr.","za."];return{months:t,monthsAbbr:a,days:n,yearSuffix:"",ymd:!1,rtl:!1,langName:e,language:e,daysNames:n}},vv=()=>{const e="PortuguÃªs";return{months:["Janeiro","Fevereiro","MarÃ§o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsAbbr:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],days:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Domingo","Segunda-Feira","TerÃ§a-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","SÃ¡bado"]}},hv=()=>{const e="Italian";return{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsAbbr:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],days:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Domenica","LunedÃ¬","MartedÃ¬","MercoledÃ¬","Gioved","VenerdÃ¬","Sabato"]}},gv=()=>{const e="Polish";return{months:["StyczeÅ„","Luty","Marzec","KwiecieÅ„","Maj","Czerwiec","Lipiec","SierpieÅ„","WrzesieÅ„","PaÅºdziernik","Listopad","GrudzieÅ„"],monthsAbbr:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","PaÅº","Lis","Gru"],days:["Nd","Pn","Wt","Åšr","Cz","Pt","So"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Niedziela","PoniedziaÅ‚ek","Wtorek","Åšroda","Czwartek","PiÄ…tek","Sobota"]}},yv=()=>{const e="Russian";return{months:["Ð¯Ð½Ð²Ð°Ñ€ÑŒ","Ð¤ÐµÐ²Ñ€Ð°Ð»ÑŒ","ÐœÐ°Ñ€Ñ‚","ÐÐ¿Ñ€ÐµÐ»ÑŒ","ÐœÐ°Ð¹","Ð˜ÑŽÐ½ÑŒ","Ð˜ÑŽÐ»ÑŒ","ÐÐ²Ð³ÑƒÑÑ‚","Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€ÑŒ","ÐžÐºÑ‚ÑÐ±Ñ€ÑŒ","ÐÐ¾ÑÐ±Ñ€ÑŒ","Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ"],monthsAbbr:["Ð¯Ð½Ð².","Ð¤ÐµÐ².","ÐœÐ°Ñ€.","ÐÐ¿Ñ€.","ÐœÐ°Ð¹","Ð˜ÑŽÐ½.","Ð˜ÑŽÐ».","ÐÐ²Ð³.","Ð¡ÐµÐ½.","ÐžÐºÑ‚.","ÐÐ¾Ñ.","Ð”ÐµÐº."],days:["Ð’Ñ","ÐŸÐ½","Ð’Ñ‚","Ð¡Ñ€","Ð§Ñ‚","ÐŸÑ‚","Ð¡Ð±"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Ð’Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ","ÐŸÐ¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº","Ð’Ñ‚Ð¾Ñ€Ð½Ð¸Ðº","Ð¡Ñ€ÐµÐ´Ð°","Ð§ÐµÑ‚Ð²ÐµÑ€Ð³","ÐŸÑÑ‚Ð½Ð¸Ñ†Ð°","Ð¡ÑƒÐ±Ð±Ð¾Ñ‚Ð°"]}},bv=()=>{const e="TÃ¼rkÃ§e";return{months:["Ocak","Åžubat","Mart","Nisan","MayÄ±s","Haziran","Temmuz","AÄŸustos","EylÃ¼l","Ekim","KasÄ±m","AralÄ±k"],monthsAbbr:["Oca","Åžub","Mar","Nis"," May","Haz","Tem","AÄŸu","Eyl","Eki","Kas","Ara"],days:["Pzt","Sal","Ã‡ar","Per","Cum","Cmt","Pzr"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Pazartesi","SalÄ±","Ã‡arÅŸamba","PerÅŸembe","Cuma","Cumartesi","Pazar"]}},wv=()=>{const e="Vietnamese";return{months:["ThÃ¡ng 1","ThÃ¡ng 2","ThÃ¡ng 3","ThÃ¡ng 4","ThÃ¡ng 5","ThÃ¡ng 6","ThÃ¡ng 7","ThÃ¡ng 8","ThÃ¡ng 9","ThÃ¡ng 10","ThÃ¡ng 11","ThÃ¡ng 12"],monthsAbbr:["ThÃ¡ng 1","ThÃ¡ng 2","ThÃ¡ng 3","ThÃ¡ng 4","ThÃ¡ng 5","ThÃ¡ng 6","ThÃ¡ng 7","ThÃ¡ng 8","ThÃ¡ng 9","ThÃ¡ng 10","ThÃ¡ng 11","ThÃ¡ng 12"],days:["CN","H","B","T","N","S","B"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["CN","Thá»© Hai","Thá»© Ba","Thá»© TÆ°","Thá»© NÄƒm","Thá»© SÃ¡u","Thá»© Báº£y"]}},_v=()=>{const e="Bulgarian";return{months:["Ð¯Ð½ÑƒÐ°Ñ€Ð¸","Ð¤ÐµÐ²Ñ€ÑƒÐ°Ñ€Ð¸","ÐœÐ°Ñ€Ñ‚","ÐÐ¿Ñ€Ð¸Ð»","ÐœÐ°Ð¹","Ð®Ð½Ð¸","Ð®Ð»Ð¸","ÐÐ²Ð³ÑƒÑÑ‚","Ð¡ÐµÐ¿Ñ‚ÐµÐ¼Ð²Ñ€Ð¸","ÐžÐºÑ‚Ð¾Ð¼Ð²Ñ€Ð¸","ÐÐ¾ÐµÐ¼Ð²Ñ€Ð¸","Ð”ÐµÐºÐµÐ¼Ð²Ñ€Ð¸"],monthsAbbr:["Ð¯Ð½Ñƒ","Ð¤ÐµÐ²","ÐœÐ°Ñ€","ÐÐ¿Ñ€","ÐœÐ°Ð¹","Ð®Ð½Ð¸","Ð®Ð»Ð¸","ÐÐ²Ð³","Ð¡ÐµÐ¿","ÐžÐºÑ‚","ÐÐ¾Ðµ","Ð”ÐµÐº"],days:["ÐÐ´","ÐŸÐ½","Ð’Ñ‚","Ð¡Ñ€","Ð§Ñ‚","ÐŸÑ‚","Ð¡Ð±"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["ÐÐµÐ´ÐµÐ»Ñ","ÐŸÐ¾Ð½ÐµÐ´ÐµÐ»Ð½Ð¸Ðº","Ð’Ñ‚Ð¾Ñ€Ð½Ð¸Ðº","Ð¡Ñ€ÑÐ´Ð°","Ð§ÐµÑ‚Ð²ÑŠÑ€Ñ‚ÑŠÐº","ÐŸÐµÑ‚ÑŠÐº","Ð¡ÑŠÐ±Ð¾Ñ‚Ð°"]}},Cv=()=>{const e="Arabic-Tunisia",t=["Ø¬Ø§Ù†ÙÙŠ","ÙÙŠÙØ±ÙŠ","Ù…Ø§Ø±Ø³","Ø£ÙØ±ÙŠÙ„","Ù…Ø§ÙŠ","Ø¬ÙˆØ§Ù†","Ø¬ÙˆÙŠÙ„ÙŠØ©","Ø£ÙˆØª","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"];return{months:t,monthsAbbr:t,days:["Ø£Ø­Ø¯","Ø£Ø«Ù†ÙŠÙ†","Ø«Ù„Ø§Ø«Ø§Ø¡","Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø®Ù…ÙŠØ³","Ø¬Ù…Ø¹Ø©","Ø³Ø¨Øª"],language:e,yearSuffix:"",ymd:!1,rtl:!0,langName:e,daysNames:["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"]}},xv=()=>{const e="Indonesia";return{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember"],monthsAbbr:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nop","Des"],days:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]}},Sv=()=>{const e="kr";return{months:["1ì›”","2ì›”","3ì›”","4ì›”","5ì›”","6ì›”","7ì›”","8ì›”","9ì›”","10ì›”","11ì›”","12ì›”"],monthsAbbr:["1ì›”","2ì›”","3ì›”","4ì›”","5ì›”","6ì›”","7ì›”","8ì›”","9ì›”","10ì›”","11ì›”","12ì›”"],days:["ì›”ìš”ì¼","í™”ìš”ì¼","ìˆ˜ìš”ì¼","ëª©ìš”ì¼","ê¸ˆìš”ì¼","í† ìš”ì¼","ì¼ìš”ì¼"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["ì›”ìš”ì¼","í™”ìš”ì¼","ìˆ˜ìš”ì¼","ëª©ìš”ì¼","ê¸ˆìš”ì¼","í† ìš”ì¼","ì¼ìš”ì¼"]}},Dv=()=>{const e="ç¹é«”ä¸­æ–‡";return{months:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],monthsAbbr:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],days:["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["æ˜ŸæœŸæ—¥","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"]}},kv=()=>{const e="Czech";return{months:["Leden","Ãšnor","BÅ™ezen","Duben","SmÄ›t","ÄŒerven","ÄŒervenec","Srpen","ZÃ¡Å™Ã­","Å˜Ã­jen","Listopad","Prosinec"],monthsAbbr:["Led","Ãšno","BÅ™e","Dub","SmÄ›","ÄŒen","ÄŒec","Srp","ZÃ¡Å™","Å˜Ã­j","Lis","Pro"],days:["Ne","Po","Ãšt","St","ÄŒt","PÃ¡","So"],language:e,yearSuffix:"",ymd:!1,rtl:!1,langName:e,daysNames:["NedÄ›le","PondÄ›lÃ­","ÃšterÃ½","StÅ™eda","ÄŒtvrtek","PÃ¡tek","Sobota"]}},Av={ar:sv(),af:iv(),arTn:Cv(),hi:fv(),ja:mv(),de:lv(),en:uv(),es:dv(),fr:cv(),nl:pv(),pt:vv(),it:hv(),pl:gv(),ru:yv(),tr:bv(),zh_TW:Dv(),vn:wv(),bg:_v(),kr:Sv(),id:xv(),cs:kv()},Pv=Se({name:"Datepicker",components:{DateInput:Mp,PickerDay:Hp,PickerMonth:Qp,PickerYear:ov},directives:{clickoutside:mp},props:{modelValue:{type:[Date,String,Number]},value:{type:[Date,String,Number]},format:{type:[String,Function],default:"dd MMM yyyy"},language:{type:String,default:"en"},openDate:{validator:e=>Dp(e),type:Date,default:new Date},minimumView:{type:String,default:"day"},maximumView:{type:String,default:"year"},name:{type:String},id:{type:String},dayCellContent:{type:Function},fullMonthName:{type:Boolean},disabledDates:{type:Object},highlighted:{type:Object},placeholder:{type:String},inline:{type:Boolean},calendarClass:{type:[String,Object,Array]},inputClass:{type:[String,Object,Array]},wrapperClass:{type:[String,Object,Array]},mondayFirst:{type:Boolean},clearButton:{type:Boolean},clearButtonIcon:{type:String},calendarButton:{type:Boolean},calendarButtonIcon:{type:String},calendarButtonIconContent:{type:String},addBootstrapClass:{type:Boolean},initialView:{type:String},disabled:{type:Boolean},required:{type:Boolean},typeable:{type:Boolean},useUtc:{type:Boolean},hideInput:{type:Boolean,default:!0},preventDisableDateSelection:{type:Boolean,default:!0},iconColor:{default:"black",type:String},iconHeight:{default:16,type:[String,Number]},iconWidth:{default:16,type:[String,Number]},theme:{default:"green",type:String}},emits:["input","cleared","update:modelValue","closed","changed-month","changed-year","changed-day","selected","selected-disabled"],setup(e,{emit:t}){const a=new Date(e.modelValue),n=W(0),r=W(null);e.modelValue&&_p(a)&&(n.value=a.getTime(),r.value=a),e.openDate&&(n.value=$r(new Date(e.openDate),1));const o=W(!1),s=W(!1),i=W(!1),d=W(0),g=W(new Date),f=te(()=>e.initialView?e.initialView:e.minimumView),l=te(()=>new Date(n.value)),u=te(()=>Av[e.language]),m=te(()=>!!e.inline),x=te(()=>({position:m.value?"static":void 0})),F=te(()=>o.value||s.value||i.value),C=te(()=>u.value&&u.value.rtl===!0);function D(J){J||(e.openDate?J=new Date(e.openDate):J=new Date),n.value=$r(new Date(J),1)}function L(J){const H=["day","month","year"],N=H.indexOf(e.minimumView),G=H.indexOf(e.maximumView),K=H.indexOf(J);return K>=N&&K<=G}function $(J){o.value=!1,s.value=!1,i.value=!1,m.value||J&&t("closed")}function _(){return L("day")?($(),o.value=!0,!0):!1}function S(){return L("month")?($(),s.value=!0,!0):!1}function k(){return L("year")?($(),i.value=!0,!0):!1}function O(){const J=f.value;if(!L(J))throw new Error(`initialView '${J}' cannot be rendered based on minimum '${e.minimumView}' and maximum '${e.maximumView}'`);switch(J){case"year":k();break;case"month":S();break;default:_();break}}function w(){return e.disabled||m.value?!1:F.value?$(!0):(O(),!0)}function y(J){const H=new Date(J);r.value=H,D(H),t("selected",H),t("update:modelValue",H),t("input",H)}function M(){r.value=null,D(),t("selected",null),e.modelValue?t("update:modelValue",null):t("input",null),t("cleared")}function E(J){y(J.timestamp),m.value||$(!0),g.value=new Date}function R(J){t("selected-disabled",J)}function I(J){const H=new Date(J.timestamp);L("day")?(D(H),_()):E(J),t("changed-month",J)}function P(J){const H=new Date(J.timestamp);L("month")?(D(H),S()):E(J),t("changed-year",J)}function A(J){let H=J;if(typeof J=="string"||typeof J=="number"){const N=new Date(J);H=Number.isNaN(N.valueOf())?"":N}if(!H){D(),r.value=null;return}r.value=H,D(J)}function v(J){D(J),t("changed-month",J)}function b(J){y(J.getTime())}function V(){e.value&&A(e.value),m.value&&O()}function B(){$()}return be(()=>e.modelValue,J=>{A(J)}),be(()=>e.value,J=>{A(J)}),be(()=>e.openDate,()=>{D()}),be(()=>e.initialView,()=>{O()}),V(),{pageTimestamp:n,selectedDate:r,showDayView:o,showMonthView:s,showYearView:i,calendarHeight:d,resetTypedDate:g,pageDate:l,translation:u,calendarStyle:x,isOpen:F,isInline:m,isRtl:C,setTypedDate:b,handleChangedMonthFromDayPicker:v,selectYear:P,selectMonth:I,selectDisabledDate:R,clearDate:M,showCalendar:w,close:$,allowedToShowView:L,showYearCalendar:k,showMonthCalendar:S,setPageDate:D,selectDate:E,closeOnClickOutside:B,showDayCalendar:_,computedInitialView:f,setDate:$r,setDate1:y,setValue:A}}});function Iv(e,t,a,n,r,o){const s=hn("date-input"),i=hn("picker-day"),d=hn("picker-month"),g=hn("picker-year"),f=qo("clickoutside");return ja((T(),q("div",{class:we(["vuejs3-datepicker",[e.isRtl?"rtl":"",`vuejs3-${e.theme}`,e.wrapperClass]])},[c(s,{selectedDate:e.selectedDate,resetTypedDate:e.resetTypedDate,format:e.format,translation:e.translation,inline:e.inline,id:e.id,name:e.name,fullMonthName:e.fullMonthName,openDate:e.openDate,placeholder:e.placeholder,inputClass:e.inputClass,typeable:e.typeable,clearButton:e.clearButton,clearButtonIcon:e.clearButtonIcon,calendarButton:e.calendarButton,calendarButtonIcon:e.calendarButtonIcon,calendarButtonIconContent:e.calendarButtonIconContent,disabled:e.disabled,required:e.required,addBootstrapClass:e.addBootstrapClass,"use-utc":e.useUtc,onShowCalendar:e.showCalendar,onCloseCalendar:e.close,onTypedDate:e.setTypedDate,onClearDate:e.clearDate,minimumView:e.minimumView,maximumView:e.maximumView,hideInput:e.hideInput,iconWidth:e.iconWidth,iconHeight:e.iconHeight,iconColor:e.iconColor,theme:e.theme},{belowDate:h(()=>[Mt(e.$slots,"belowDate")]),_:3},8,["selectedDate","resetTypedDate","format","translation","inline","id","name","fullMonthName","openDate","placeholder","inputClass","typeable","clearButton","clearButtonIcon","calendarButton","calendarButtonIcon","calendarButtonIconContent","disabled","required","addBootstrapClass","use-utc","onShowCalendar","onCloseCalendar","onTypedDate","onClearDate","minimumView","maximumView","hideInput","iconWidth","iconHeight","iconColor","theme"]),e.allowedToShowView("day")?(T(),ie(i,{key:0,pageDate:e.pageDate,selectedDate:e.selectedDate,showDayView:e.showDayView,fullMonthName:e.fullMonthName,allowedToShowView:e.allowedToShowView,disabledDates:e.disabledDates,highlighted:e.highlighted,calendarClass:e.calendarClass,calendarStyle:e.calendarStyle,translation:e.translation,pageTimestamp:e.pageTimestamp,isRtl:e.isRtl,mondayFirst:e.mondayFirst,dayCellContent:e.dayCellContent,onChangedMonth:e.handleChangedMonthFromDayPicker,onSelectDate:e.selectDate,onShowMonthCalendar:e.showMonthCalendar,onSelectedDisabled:e.selectDisabledDate,onShowYearCalendar:e.showYearCalendar,minimumView:e.minimumView,maximumView:e.maximumView,preventDisableDateSelection:e.preventDisableDateSelection,theme:e.theme},{customCalendarHeader:h(()=>[Mt(e.$slots,"customCalendarHeader")]),formatDateTopBar:h(()=>[Mt(e.$slots,"formatDateTopBar")]),_:3},8,["pageDate","selectedDate","showDayView","fullMonthName","allowedToShowView","disabledDates","highlighted","calendarClass","calendarStyle","translation","pageTimestamp","isRtl","mondayFirst","dayCellContent","onChangedMonth","onSelectDate","onShowMonthCalendar","onSelectedDisabled","onShowYearCalendar","minimumView","maximumView","preventDisableDateSelection","theme"])):X("",!0),e.allowedToShowView("month")?(T(),ie(d,{key:1,pageDate:e.pageDate,selectedDate:e.selectedDate,showMonthView:e.showMonthView,allowedToShowView:e.allowedToShowView,disabledDates:e.disabledDates,calendarClass:e.calendarClass,calendarStyle:e.calendarStyle,translation:e.translation,isRtl:e.isRtl,"use-utc":e.useUtc,fullMonthName:e.fullMonthName,onSelectMonth:e.selectMonth,onShowYearCalendar:e.showYearCalendar,onChangedYear:e.setPageDate,minimumView:e.minimumView,maximumView:e.maximumView,theme:e.theme},{customCalendarHeader:h(()=>[Mt(e.$slots,"customCalendarHeader")]),formatDateTopBar:h(()=>[Mt(e.$slots,"formatDateTopBar")]),_:3},8,["pageDate","selectedDate","showMonthView","allowedToShowView","disabledDates","calendarClass","calendarStyle","translation","isRtl","use-utc","fullMonthName","onSelectMonth","onShowYearCalendar","onChangedYear","minimumView","maximumView","theme"])):X("",!0),e.allowedToShowView("year")?(T(),ie(g,{key:2,pageDate:e.pageDate,selectedDate:e.selectedDate,showYearView:e.showYearView,allowedToShowView:e.allowedToShowView,disabledDates:e.disabledDates,calendarClass:e.calendarClass,calendarStyle:e.calendarStyle,translation:e.translation,isRtl:e.isRtl,"use-utc":e.useUtc,onSelectYear:e.selectYear,onChangedDecade:e.setPageDate,fullMonthName:e.fullMonthName,minimumView:e.minimumView,maximumView:e.maximumView,theme:e.theme},{customCalendarHeader:h(()=>[Mt(e.$slots,"customCalendarHeader")]),formatDateTopBar:h(()=>[Mt(e.$slots,"formatDateTopBar")]),_:3},8,["pageDate","selectedDate","showYearView","allowedToShowView","disabledDates","calendarClass","calendarStyle","translation","isRtl","use-utc","onSelectYear","onChangedDecade","fullMonthName","minimumView","maximumView","theme"])):X("",!0)],2)),[[f,{handler:e.inline?null:e.closeOnClickOutside}]])}const vr=Un(Pv,[["render",Iv]]),Tv={class:"d-flex flex-column mt-0"},$v={class:"d-flex align-center justify-space-between mt-8 mb-4"},Fv={class:"d-flex align-center"},Ev={class:"d-flex align-center"},Nv={class:"text-h5"},Rv={class:"d-flex align-center gap-4 mt-4"},jv={class:"d-flex flex-column gap-4 mt-4"},Mv={class:"d-flex align-center gap-4"},Ov={class:"d-flex align-center gap-4"},Vv={class:"flex-grow-1"},Bv={class:"position-relative"},Uv={key:0},zv={key:1},Lv={class:"text-center"},Hv={key:0},Gv=Se({__name:"TodoTable",props:{item:{},id:{},type:{},title:{}},emits:["update","tasksUpdated","task-created"],setup(e,{emit:t}){const a=ct(),n=ga(),r=to(),o=W(!1),s=W(0),i=e,d=t,{t:g}=kt(),f=W(!1),l=W(null),u=W(!1),m=W({description:"",userId:null,deadline:"",finished:!1,id:null}),x=te(()=>m.value.description&&m.value.userId&&m.value.deadline),F=te(()=>{var v,b,V,B;let P=null;return i.type==="correctief"&&((b=(v=i.item)==null?void 0:v.Correctief)!=null&&b.Deadline)?P=i.item.Correctief.Deadline:i.type==="preventief"&&((B=(V=i.item)==null?void 0:V.Preventief)!=null&&B.Deadline)&&(P=i.item.Preventief.Deadline),`Deadline tussen vandaag en ${P?aa(P):"onbepaald"}`}),C=te(()=>{var A,v,b,V;let P=null;return i.type==="correctief"&&((v=(A=i.item)==null?void 0:A.Correctief)!=null&&v.Deadline)?P=i.item.Correctief.Deadline:i.type==="preventief"&&((V=(b=i.item)==null?void 0:b.Preventief)!=null&&V.Deadline)&&(P=i.item.Preventief.Deadline),{from:P?new Date(P):null,to:new Date(Date.now()-24*60*60*1e3)}}),D=P=>P?P.split(" ").map(A=>A[0]).join("").toUpperCase():"",L=W([]),$=W(!1),_=async()=>{if(!i.item)return;let P=[];if(i.type==="correctief"){if(!i.item.Correctief)return;P=await r.fetchTasksByCorrectief(i.item.Correctief.id)}else if(i.type==="preventief"){if(!i.item.Preventief)return;P=await r.fetchTasksByPreventief(i.item.Preventief.id)}L.value=P.filter(A=>A.actionType==="task")};be(()=>[i.type,i.item],async()=>{$.value=!0;try{_()}finally{$.value=!1}},{immediate:!0});const S=P=>{m.value={description:P.action,userId:P.userId,deadline:P.deadline,finished:P.finished||!1,id:P.id},o.value=!0},k=()=>{m.value={description:"",userId:null,deadline:"",finished:!1,id:null},o.value=!0},O=async(P,A)=>{try{a.promise({message:g("notifications.updating_status")}),console.log("updateTaskFinished",P,A),await r.updateTask(P,i.type,{completedAt:A?new Date:null,finished:A||!1}),a.resolvePromise({message:g("notifications.status_updated")})}catch{a.rejectPromise({message:g("errors.status_update_failed")})}},w=P=>P.length>50,y=async()=>{var P,A,v,b;if(!(!x.value||!((A=(P=i.item)==null?void 0:P.Correctief)!=null&&A.id))){u.value=!0;try{a.promise({message:m.value.id?"Actie wordt bijgewerkt...":"Actie wordt opgeslagen..."});let V=m.value.deadline;if(V&&typeof V=="object"&&"toISOString"in V&&(V=V.toISOString()),!m.value.userId){ea.error({message:g("errors.user_not_found")});return}if(m.value.id)await r.updateTask(m.value.id,i.type,{action:m.value.description,userId:m.value.userId,deadline:V});else{if(!i.type||!["correctief","preventief"].includes(i.type)){ea.error({message:"Deze actie kan niet worden opgeslagen, er is iets fout gegaan."});return}i.type==="correctief"?s.value=0:i.type==="preventief"&&((b=(v=i.item)==null?void 0:v.Preventief)==null?void 0:b.rootCauseLevel)===1?s.value=1:i.type==="preventief"?s.value=2:s.value=0,await r.createTask({message:m.value.description,userId:m.value.userId,action:m.value.description,level:s.value,actionType:"task",category:i.type,targetId:i.id,url:window.location.origin+M(),deadline:V,finished:m.value.finished}),d("task-created")}_(),d("tasksUpdated"),o.value=!1,m.value={description:"",userId:null,deadline:"",finished:!1,id:null},a.resolvePromise({message:m.value.id?"Actie succesvol bijgewerkt":"Actie succesvol opgeslagen"})}catch{a.rejectPromise({message:"Er is een fout opgetreden bij het opslaan van de actie"})}finally{u.value=!1}}},M=()=>{var P;return(P=i.item)!=null&&P.VolgNummer?`/verbeterplein/melding/${i.item.VolgNummer}`:null},E=async P=>{l.value=P,f.value=!0},R=async()=>{if(l.value)try{a.promise({message:g("notifications.deleting_action")}),await r.deleteTask(l.value.id,i.type),a.resolvePromise({message:g("notifications.action_deleted")}),_(),d("tasksUpdated")}catch{a.rejectPromise({message:g("errors.delete_failed")})}finally{f.value=!1,l.value=null}},I=te(()=>!1);return(P,A)=>(T(),q(Ae,null,[p("div",Tv,[p("div",$v,[p("div",Fv,[c(oe,{color:"primary",size:"24",class:"mr-2"},{default:h(()=>A[7]||(A[7]=[z("mdi-format-list-checks")])),_:1,__:[7]}),p("div",Ev,[p("div",Nv,j(P.title),1)])]),I.value?(T(),ie(ka,{key:0,text:"De PLAN-fase van de PDCA moet eerst ingevuld zijn.",location:"top"},{activator:h(({props:v})=>[p("div",pu(vu(v)),[c(ge,{color:"primary",variant:"outlined",size:"small","prepend-icon":"mdi-plus",class:"attachment-add-btn",disabled:""},{default:h(()=>A[8]||(A[8]=[z(" Actie toevoegen ")])),_:1,__:[8]})],16)]),_:1})):(T(),ie(ge,{key:1,color:"primary",variant:"tonal",size:"small","prepend-icon":"mdi-plus",onClick:k,class:"attachment-add-btn"},{default:h(()=>A[9]||(A[9]=[z(" Actie toevoegen ")])),_:1,__:[9]}))]),c(va,{modelValue:o.value,"onUpdate:modelValue":A[4]||(A[4]=v=>o.value=v),"max-width":"500px","min-height":"600px"},{default:h(()=>[c(Te,null,{default:h(()=>[c(Pt,{class:we(["text-h4",m.value.id?"bg-secondary":"bg-primary"])},{default:h(()=>[z(j(m.value.id?"Actie bewerken":"Nieuwe Actie"),1)]),_:1},8,["class"]),c(Re,{class:"pa-4"},{default:h(()=>[p("div",Rv,[c(oe,{color:"primary",size:"24"},{default:h(()=>A[10]||(A[10]=[z("mdi-account-outline")])),_:1,__:[10]}),c(it,{modelValue:m.value.userId,"onUpdate:modelValue":A[0]||(A[0]=v=>m.value.userId=v),items:se(n).actiehouders,"item-title":"Name","item-value":"id",label:"Actiehouder",variant:"outlined",density:"compact","hide-details":"auto",class:"flex-grow-1",placeholder:"Selecteer een actiehouder"},null,8,["modelValue","items"])]),p("div",jv,[p("div",Mv,[c(oe,{color:"primary",size:"24"},{default:h(()=>A[11]||(A[11]=[z("mdi-text-box-outline")])),_:1,__:[11]}),c(gt,{modelValue:m.value.description,"onUpdate:modelValue":A[1]||(A[1]=v=>m.value.description=v),label:"Actie",variant:"outlined",density:"compact","hide-details":"auto",class:"flex-grow-1",rows:"3",placeholder:"Beschrijf de actie die uitgevoerd moet worden"},null,8,["modelValue"])]),p("div",Ov,[c(oe,{color:"primary",size:"24"},{default:h(()=>A[12]||(A[12]=[z("mdi-calendar-outline")])),_:1,__:[12]}),p("div",Vv,[p("div",Bv,[c(se(vr),{modelValue:m.value.deadline,"onUpdate:modelValue":A[2]||(A[2]=v=>m.value.deadline=v),mondayFirst:!0,enableTimePicker:!1,"disabled-dates":C.value,format:"dd-MM-yyyy",class:"date-picker-field",placeholder:"Kies een deadline"},{trigger:h(()=>[c(Ot,{"model-value":m.value.deadline?se(aa)(m.value.deadline):"",label:"Deadline",variant:"outlined",density:"comfortable","hide-details":"auto",readonly:"",placeholder:"Kies een deadline",hint:F.value,"persistent-hint":""},null,8,["model-value","hint"])]),_:1},8,["modelValue","disabled-dates"])])])])])]),_:1}),c(Nt,{class:"pa-4 pt-0"},{default:h(()=>[c(Dt),c(ge,{variant:"text",onClick:A[3]||(A[3]=v=>o.value=!1),disabled:u.value},{default:h(()=>A[13]||(A[13]=[z(" Annuleren ")])),_:1,__:[13]},8,["disabled"]),c(ge,{color:m.value.id?"secondary":"primary",variant:"flat",onClick:y,loading:u.value,disabled:!x.value},{default:h(()=>[z(j(m.value.id?"Bijwerken":"Opslaan"),1)]),_:1},8,["color","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),$.value?(T(),q("div",Uv,[c(ia,{indeterminate:""})])):(T(),q("div",zv,[c(hu,{density:"compact",class:"action-table"},{default:h(()=>[A[15]||(A[15]=p("thead",null,[p("tr",null,[p("th",{class:"column-who"},"Wie"),p("th",{class:"column-action"},"Actie"),p("th",{class:"column-deadline"},"Deadline"),p("th",{class:"column-actions"},"Acties")])],-1)),p("tbody",null,[(T(!0),q(Ae,null,We(L.value,v=>{var b;return T(),q("tr",{key:v.id},[p("td",null,[c(ka,{text:(b=v.user)==null?void 0:b.Name,location:"top"},{activator:h(({props:V})=>{var B;return[p("span",pa({ref_for:!0},V,{class:"initials"}),j(D((B=v.user)==null?void 0:B.Name)||"N/A"),17)]}),_:2},1032,["text"])]),p("td",null,[c(xi,{"close-on-content-click":!1,location:"top",disabled:!w(v.action),"max-width":"300"},{activator:h(({props:V})=>[p("div",pa({ref_for:!0},V,{class:["action-text",{"finished-task":v.finished}],style:{cursor:w(v.action)?"pointer":"default"}}),j(v.action),17)]),default:h(()=>[c(Te,{class:"action-popover"},{default:h(()=>[c(Re,{class:we(["action-popover-content",{"finished-task":v.finished}])},{default:h(()=>[z(j(v.action),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["disabled"])]),p("td",{class:we({"finished-task":v.finished})},j(se(aa)(v.deadline)),3),p("td",Lv,[c(ka,{text:"Actie voltooien",location:"top"},{activator:h(({props:V})=>[c(Si,pa({ref_for:!0},V,{modelValue:v.finished,"onUpdate:modelValue":[B=>v.finished=B,B=>O(v.id,B)],density:"compact","hide-details":""}),null,16,["modelValue","onUpdate:modelValue"])]),_:2},1024),c(ge,{icon:"mdi-pencil",variant:"text",density:"compact",size:"small",onClick:V=>S(v)},null,8,["onClick"]),c(ge,{icon:"mdi-delete",variant:"text",density:"compact",size:"small",color:"error",onClick:V=>E(v)},null,8,["onClick"])])])}),128)),L.value.length===0?(T(),q("tr",Hv,A[14]||(A[14]=[p("td",{colspan:"5",class:"text-center text-medium-emphasis"},"Nog geen acties toegevoegd",-1)]))):X("",!0)])]),_:1,__:[15]})]))]),A[20]||(A[20]=p("br",null,null,-1)),c(va,{modelValue:f.value,"onUpdate:modelValue":A[6]||(A[6]=v=>f.value=v),"max-width":"400"},{default:h(()=>[c(Te,null,{default:h(()=>[c(Pt,{class:"text-h5 bg-error text-white pa-4"},{default:h(()=>A[16]||(A[16]=[z(" Actie verwijderen ")])),_:1,__:[16]}),c(Re,{class:"pa-4 pt-6"},{default:h(()=>A[17]||(A[17]=[p("p",null,"Weet je zeker dat je deze actie wilt verwijderen?",-1),p("p",{class:"text-caption mt-2"},"Deze actie kan niet ongedaan worden gemaakt.",-1)])),_:1,__:[17]}),c(Nt,{class:"pa-4"},{default:h(()=>[c(Dt),c(ge,{variant:"text",onClick:A[5]||(A[5]=v=>f.value=!1)},{default:h(()=>A[18]||(A[18]=[z(" Annuleren ")])),_:1,__:[18]}),c(ge,{color:"error",variant:"flat",onClick:R},{default:h(()=>A[19]||(A[19]=[z(" Verwijderen ")])),_:1,__:[19]})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Bo=dt(Gv,[["__scopeId","data-v-e78bdb44"]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wv=ao("outline","archive","IconArchive",[["path",{d:"M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10",key:"svg-1"}],["path",{d:"M10 12l4 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jv=ao("outline","arrow-back","IconArrowBack",[["path",{d:"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qv=ao("outline","device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kv=ao("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);const Yv=[{title:"Logistieke bewegingen geminimaliseerd",value:"logistics_minimized",category:"Operationeel"},{title:"Continu verbeteren in DNA",value:"continuous_improvement",category:"Cultuur",description:"Intal is een showcase in continu verbeteren, dagelijks in het DNA van iedere Intalist"},{title:"Voorspelbare flowproductie",value:"predictable_flow",category:"Productie",description:"Voorspelbare flowproductie, vaste takt en doorlooptijden"},{title:"Hoge mate van automatisering",value:"automation_level",category:"Technologie",description:"Software en standaarden"},{title:"Product traceerbaarheid",value:"product_traceability",category:"Kwaliteit"},{title:"Volledige schuifpuien serie",value:"sliding_doors_complete",category:"Product"},{title:"80% Brandwerende puien in Intal systemen",value:"fire_resistant_doors",category:"Product"},{title:"Product terugname & hergebruik",value:"product_recycling",category:"Duurzaamheid",description:"Producten zijn te traceren en lokaliseren gericht op terugname of nieuwe inzetbaarheid"},{title:"Duurzame materialen",value:"sustainable_materials",category:"Duurzaamheid",description:"Producten bevatten louter gerecyclede en duurzame materialen"},{title:"Employer Branding voorloper",value:"employer_branding",category:"HR"},{title:"Eigenaarschap & teamcultuur",value:"ownership_culture",category:"Cultuur",description:"Intalisten voelen zich eigenaar van Intal en hun team, communiceren in Wij, zijn Open, assertief en correct"},{title:"Balans structuur en cultuur",value:"structure_culture_balance",category:"Organisatie"},{title:"Ijdema en Thermal Breaks integratie",value:"company_integration",category:"Organisatie"},{title:"Naams- en productbekendheid",value:"brand_awareness",category:"Marketing",description:"Hoge naams- en productbekendheid bij architecten en grotere ontwikkelaars"},{title:"A-label status",value:"a_label_status",category:"Marketing",description:'Intal staat als A-label "top of mind"'},{title:"Voorkeursmerk architecten",value:"architect_preference",category:"Marketing",description:"Architectenbureaus schrijven Intal voor"},{title:"Koploper circulaire profielsystemen",value:"circular_systems_leader",category:"Innovatie"},{title:"Volledig circulair businessmodel",value:"circular_business_model",category:"Strategie"}];function Qv(e,t){const a=to(),n=W(!1);be([e,t,()=>a.preventiefTasks],()=>{r()},{deep:!0,immediate:!0});function r(){const l=e.value;if(!l||!t.value){n.value=!1;return}switch(l){case"obstacle":n.value=i();break;case"plan":n.value=s();break;case"do":n.value=d();break;case"check":n.value=g();break;case"act":n.value=f();break;case"finished":n.value=!0;break;default:n.value=!1}}function o(l,u=1){return!!l&&l.trim().length>=u}function s(){var C,D,L,$,_,S;const l=t.value;if(!l||!l.Smart||!l.Steps||!l.Strategie)return!1;const u=Object.entries(l.Smart).every(([k,O])=>O&&o(O.Text)),m=!!l.User||!!l.Begeleider,x=l.Strategie&&o(l.Strategie.KPI,1)&&o(l.Strategie.Comments),F=((D=(C=l.Steps)==null?void 0:C.Do)==null?void 0:D.Deadline)&&(($=(L=l.Steps)==null?void 0:L.Check)==null?void 0:$.Deadline)&&((S=(_=l.Steps)==null?void 0:_.Act)==null?void 0:S.Deadline);return!!(u&&m&&x&&F)}function i(){const l=t.value;return l?o(l.Kernoorzaak):!1}function d(){const l=t.value;if(!l)return!1;const u=Array.from(a.preventiefTasks.values()).filter(x=>x.preventiefId===l.id&&x.actionType==="task");return u.length===0?!1:u.every(x=>x.userId&&o(x.action,1)&&x.deadline)}function g(){var S,k,O,w;const l=t.value;if(!l||!l.Smart)return!1;const u=!!((S=l.Smart.Specifiek)!=null&&S.Behaald),m=o((k=l.Smart.Specifiek)==null?void 0:k.Toelichting,1),x=!!((O=l.Smart.Meetbaar)!=null&&O.Behaald),F=o((w=l.Smart.Meetbaar)==null?void 0:w.Toelichting,1),C=u&&m&&x&&F,L=Array.from(a.preventiefTasks.values()).filter(y=>y.preventiefId===l.id&&y.actionType==="task").every(y=>y.data&&o(y.data.effectiviteit,1)&&o(y.data.impact,1)&&o(y.data.comments,1)),$=o(l.Conclusie),_=!!l.PDCAStatus;return C&&L&&$&&_}function f(){const l=t.value;if(!l)return!1;if(l.PDCAStatus==="Niet"){const u=o(l.FailureAnalysis),m=o(l.NewPDCAPlanning);return u&&m}else{const u=o(l.Documentation),m=!l.TrainingNeeded||l.TrainingNeeded&&o(l.TrainingNeededType,1),x=o(l.Monitoring)&&!!l.FollowUpDate&&!!l.Responsible;return u&&m&&x}}return n}const Zv={class:"d-flex align-center justify-space-between"},Xv={class:"d-flex align-center flex-grow-1"},eh={class:"flex-grow-1"},th={class:"d-flex align-center"},ah={class:"text-subtitle-1 font-weight-medium"},nh={class:"text-caption text-medium-emphasis"},rh={class:"d-flex align-center ml-4"},oh={class:"d-flex align-center justify-space-between mt-2"},sh={class:"d-flex align-center project-info"},ih={class:"text-caption text-medium-emphasis"},lh={class:"text-caption text-medium-emphasis"},uh={class:"text-caption text-medium-emphasis"},dh={key:0},ch={key:1},fh={class:"pdca-circle"},mh={class:"connection-paths",viewBox:"0 0 300 300"},ph=["onClick"],vh={class:"node-content"},hh={class:"node-title"},gh={class:"drawer-container"},yh={class:"text-h4"},bh={class:"root-cause-container"},wh={class:"obstacle-info-box mb-8"},_h={class:"generating-text"},Ch={key:0,class:"ai-text",style:{color:"rgb(var(--v-theme-secondary))"}},xh={key:1,class:"ai-text",style:{color:"rgb(var(--v-theme-secondary))"}},Sh={class:"ai-tooltip-content"},Dh={class:"why-analysis"},kh={class:"d-flex align-center mb-2"},Ah={class:"text-body-2"},Ph={class:"d-flex justify-end mb-4"},Ih={class:"text-subtitle-2"},Th={class:"d-flex align-center"},$h={class:"d-flex align-center justify-space-between"},Fh={class:"d-flex align-center"},Eh={class:"d-flex align-center justify-space-between"},Nh={class:"d-flex align-center"},Rh={class:"smart-section"},jh={class:"d-flex align-center"},Mh={class:"d-flex align-center"},Oh={class:"d-flex flex-column"},Vh={class:"text-subtitle-1 mb-2"},Bh={class:"text-caption text-medium-emphasis mb-4"},Uh={class:"actielijst-table mx-4"},zh={class:"d-flex align-center"},Lh={key:0,class:"text-center pa-4"},Hh={class:"d-flex justify-space-between align-start mb-4"},Gh={class:"text-subtitle-1 font-weight-bold"},Wh={class:"text-caption"},Jh={class:"d-flex gap-4 mt-4"},qh={class:"d-flex align-center"},Kh={class:"smart-evaluation mb-4"},Yh={class:"d-flex flex-column gap-4"},Qh={class:"original-goal pa-3",style:{background:"rgb(var(--v-theme-primary_lighten_5))"}},Zh={class:"evaluation"},Xh={class:"d-flex flex-column gap-4"},eg={class:"original-goal pa-3",style:{background:"rgb(var(--v-theme-primary_lighten_5))"}},tg={class:"evaluation"},ag={class:"act-phase-container"},ng={class:"text-h6"},rg={class:"text-body-2"},og={class:"d-flex gap-4"},sg={class:"root-cause-container"},ig={class:"obstacle-info-box mb-8"},lg={class:"text-body-1"},ug={class:"text-caption"},dg={class:"text-subtitle-1 font-weight-bold text-capitalize"},cg={class:"text-body-2"},fg={key:0,class:"mb-2"},mg={key:1,class:"mb-2"},pg={key:2,class:"mb-2"},vg={key:0,class:"mb-2"},hg={class:"mt-1"},gg={key:1},yg={key:0,class:"mb-2"},bg={class:"ml-2"},wg={key:0,class:"mt-1"},_g={key:0,class:"text-body-2 mt-1"},Cg={key:1,class:"mb-2"},xg={key:2,class:"mb-2"},Sg={key:0,class:"mb-2"},Dg={key:1,class:"mb-2"},kg={key:0,class:"mb-2"},Ag={key:1,class:"mb-2"},Pg={key:1,class:"d-flex flex-column justify-center align-center h-100 w-100"},Ig=5e3,Tg=Se({__name:"meldingPDCA",setup(e){const{t}=kt(),a=Kt(),n=ga(),r=kn(),o=to(),s=ct(),i=ha(),d=W({}),g=W([]),f=W([]),l=W({}),u={Text:"",Behaald:"",Toelichting:""},m={Finished:!1,Deadline:null},x=W(null),F=W(!1),C=W({Teamleden:null,CorrespondenceIDs:null,Smart:{Specifiek:{...u},Meetbaar:{...u},Haalbaar:{...u},Relevant:{...u},Tijdgebonden:{...u}},Steps:{Obstakel:{...m},Plan:{...m},Do:{...m},Check:{...m},Act:{...m},Finished:{...m}},FailureAnalysis:null,NewPDCAPlanning:null,Documentation:null,TrainingNeeded:!1,TrainingNeededType:null,Monitoring:null,FollowUpDate:null,Responsible:null,TodoItems:[],id:"",Kernoorzaak:null,Why:null,Deadline:null,Title:null,Strategie:{KPI:null,Comments:null},Conclusie:null,PDCAStatus:null,ActJSON:null,StatusID:null,BegeleiderID:null,Begeleider:null,CreatedAt:"",UpdatedAt:"",User:null,Status:null}),D=W([]),L=W([]),$=W(null),_=W(!1),S=W(null),k=()=>{console.log("[AutoSave Debug] Resetting autosave timer."),$.value&&window.clearTimeout($.value),$.value=window.setTimeout(async()=>{A.value&&!_.value&&(await B(),S.value=new Date,_.value=!1)},Ig)},O=()=>{setTimeout(()=>{be([()=>C.value,()=>l.value],([ee,U],[de,ce])=>{console.log("[AutoSave Debug] Watcher triggered."),U&&Object.keys(U).length>0&&(console.log("[AutoSave Debug] Task evaluations changed, resetting timer."),k()),JSON.stringify(ee)!==JSON.stringify(de)&&(console.log("[AutoSave Debug] Preventief data changed, resetting timer."),k())},{deep:!0,immediate:!1})},1e3)},w=async ee=>{if(_.value){ee.preventDefault();return}A.value&&(ee.preventDefault(),_.value=!0,await J(A.value),_.value=!1)};Mn(()=>{window.removeEventListener("beforeunload",w),$.value&&(window.clearTimeout($.value),$.value=null)}),wt(async()=>{var ee,U,de,ce,fe,ve,_e,pe,ke,Le,ht;if(a.selectedFormId){(((ee=r.preventieven)==null?void 0:ee.length)===0||r.preventieven===null||r.loading.all==!0||r.loading.single==!0)&&await r.getAllPreventief(),(((U=n.actiehouders)==null?void 0:U.length)===0||n.actiehouders===null||n.loading.all==!0||n.loading.single==!0)&&await n.fetchActiehouders(),d.value=a.getReportById(a.selectedFormId),g.value=n.actiehouders,f.value=g.value,D.value=g.value,L.value=g.value,i.initialized||await i.initialize();const $t=await r.getSinglePreventief((ce=(de=d.value)==null?void 0:de.Preventief)==null?void 0:ce.id);if($t!=null&&$t.data){const at=$t.data;(ve=(fe=d.value)==null?void 0:fe.Preventief)!=null&&ve.id&&await o.fetchTasksByPreventief(d.value.Preventief.id),o.preventiefTasks.size>0&&Array.from(o.preventiefTasks.values()).forEach(ut=>{var ue,xe,Me;l.value[ut.id]||(l.value[ut.id]={effectiviteit:((ue=ut.data)==null?void 0:ue.effectiviteit)||"",impact:((xe=ut.data)==null?void 0:xe.impact)||"",comments:((Me=ut.data)==null?void 0:Me.comments)||""})}),at.Smart?Object.keys(at.Smart).forEach(Yt=>{at.Smart[Yt].Toelichting||(at.Smart[Yt].Toelichting="")}):at.Smart={Specifiek:{...u},Meetbaar:{...u},Haalbaar:{...u},Relevant:{...u},Tijdgebonden:{...u}},at.Strategie||(at.Strategie={KPI:null,Comments:null}),at.Steps?(R.value="obstacle",(_e=at.Steps.Obstakel)!=null&&_e.Finished&&(v.value.add("obstacle"),R.value="obstacle"),(pe=at.Steps.Plan)!=null&&pe.Finished&&(v.value.add("plan"),R.value="plan"),(ke=at.Steps.Do)!=null&&ke.Finished&&(v.value.add("do"),R.value="do"),(Le=at.Steps.Check)!=null&&Le.Finished&&(v.value.add("check"),R.value="check"),(ht=at.Steps.Act)!=null&&ht.Finished&&(v.value.add("act"),R.value="act"),N({id:R.value,label:R.value.toUpperCase(),title:K(R.value).title,description:K(R.value).description,status:v.value.has(R.value)?"Completed":"Not Started"})):at.Steps={Obstakel:{...m},Plan:{...m},Do:{...m},Check:{...m},Act:{...m},Finished:{...m}},C.value=at,x.value=JSON.parse(JSON.stringify(at)),O(),window.addEventListener("beforeunload",w)}}}),Mn(()=>{window.removeEventListener("beforeunload",w),$.value&&(window.clearTimeout($.value),$.value=null)});const y=te({get:()=>{var fe,ve,_e,pe,ke,Le;const ee=(ve=(fe=C.value.Steps)==null?void 0:fe.Do)==null?void 0:ve.Deadline,U=(pe=(_e=C.value.Steps)==null?void 0:_e.Check)==null?void 0:pe.Deadline,de=(Le=(ke=C.value.Steps)==null?void 0:ke.Act)==null?void 0:Le.Deadline;if(!ee&&!U&&!de)return"";let ce="";return ee&&(ce+=`DO fase wordt afgerond op ${Ye(ee)}. `),U&&(ce+=`CHECK fase wordt afgerond op ${Ye(U)}. `),de&&(ce+=`ACT fase wordt afgerond op ${Ye(de)}.`),ce.trim()},set:ee=>{var U,de;(de=(U=C.value)==null?void 0:U.Smart)!=null&&de.Tijdgebonden&&(C.value.Smart.Tijdgebonden.Text=ee)}}),M=te({get:()=>{var ce,fe;const ee=(ce=C.value.Strategie)==null?void 0:ce.KPI,U=(fe=C.value.Strategie)==null?void 0:fe.Comments;if(!ee&&!U)return"";let de="";return ee&&(de+=`Dit draagt bij aan KPI: ${ee}. `),U&&(de+=U),de.trim()},set:ee=>{var U,de;(de=(U=C.value)==null?void 0:U.Smart)!=null&&de.Relevant&&(C.value.Smart.Relevant.Text=ee)}});be([()=>{var ee;return(ee=C.value.Strategie)==null?void 0:ee.KPI},()=>{var ee;return(ee=C.value.Strategie)==null?void 0:ee.Comments}],()=>{var ee,U;(U=(ee=C.value)==null?void 0:ee.Smart)!=null&&U.Relevant&&(C.value.Smart.Relevant.Text=M.value)}),be([()=>{var ee,U;return(U=(ee=C.value.Steps)==null?void 0:ee.Do)==null?void 0:U.Deadline},()=>{var ee,U;return(U=(ee=C.value.Steps)==null?void 0:ee.Check)==null?void 0:U.Deadline},()=>{var ee,U;return(U=(ee=C.value.Steps)==null?void 0:ee.Act)==null?void 0:U.Deadline}],()=>{var ee,U;(U=(ee=C.value)==null?void 0:ee.Smart)!=null&&U.Tijdgebonden&&(C.value.Smart.Tijdgebonden.Text=y.value)});const E=["obstacle","plan","do","check","act","finished"],R=W("obstacle"),I=W(!1),P=W(!1),A=W(null),v=W(new Set),b=ee=>{if(!G(ee.id))return;const U=K(ee.id);A.value={...ee,title:U.title,description:U.description,status:ee.status||"Not Started"},I.value=!0,P.value=!0},V=ee=>{switch(ee.id){case"obstacle":C.value.Steps.Obstakel.Finished=!0;break;case"plan":C.value.Steps.Plan.Finished=!0;break;case"do":C.value.Steps.Do.Finished=!0;break;case"check":C.value.Steps.Check.Finished=!0;break;case"act":C.value.Steps.Act.Finished=!0;break}},B=async()=>{var ee,U,de;if(console.log(`[AutoSave Debug] handleAutoSave started. isSaving: ${_.value}`),_.value){console.log("[AutoSave Debug] Already saving, exiting handleAutoSave.");return}_.value=!0;try{console.log("[AutoSave Debug] Kernoorzaak before currentState:",C.value.Kernoorzaak);const ce=JSON.parse(JSON.stringify(C.value)),fe=nr(x.value||{},ce);if(console.log("[detectChanges Debug] Detected changes (comparing against original):",fe),o.preventiefTasks.size>0){const ve=Array.from(o.preventiefTasks.values());for(const _e of ve){const pe=l.value[_e.id]||{effectiviteit:"",impact:"",comments:""},ke=((ee=_e.data)==null?void 0:ee.effectiviteit)||((U=_e.data)==null?void 0:U.impact)||((de=_e.data)==null?void 0:de.comments);(pe.effectiviteit||pe.impact||pe.comments||ke&&JSON.stringify(pe)!==JSON.stringify(_e.data))&&(console.log(`[AutoSave Debug] Updating task ${_e.id} with data:`,pe),await o.updateTask(_e.id,"preventief",{data:pe}))}console.log("[AutoSave Debug] Refreshing tasks after updates."),await o.fetchTasksByPreventief(d.value.Preventief.id)}if(fe.length>0){const ve=fe.reduce((pe,ke)=>{var Le;return((Le=A.value)==null?void 0:Le.id)==="check"&&ke.field==="Smart"?{...pe,Smart:ce.Smart}:{...pe,[ke.field]:ke.newValue}},{});console.log("[AutoSave Debug] Calling updatePreventiefAutoSave with updates:",ve);const _e=await r.updatePreventiefAutoSave(d.value.Preventief.id,ve);(_e==null?void 0:_e.status)===200?(console.log("[AutoSave Debug] Autosave successful."),S.value=new Date,x.value=JSON.parse(JSON.stringify(ce))):console.error("[AutoSave Debug] Autosave failed:",_e)}else console.log("[AutoSave Debug] No changes detected, skipping API call.")}catch(ce){console.error("[AutoSave Debug] Error during autosave:",ce)}finally{_.value=!1,console.log(`[AutoSave Debug] handleAutoSave finished. isSaving: ${_.value}`)}},J=async ee=>{var U,de;if(!_.value){_.value=!0;try{He.value&&(V(ee),v.value.add(ee.id),N(ee)),await B(),ee.id==="act"&&He.value&&(de=(U=C.value.Steps)==null?void 0:U.Act)!=null&&de.Finished&&await H()}finally{_.value=!1}}},H=async()=>{var de;i.initialized||await i.initializeData();const ee=i.getStatusByName("Afgerond"),U=(de=C.value)==null?void 0:de.id;if(!U){console.warn("Preventief ID not found when trying to auto-set status to Afgerond from PDCA.");return}if(!(ee!=null&&ee.id)){console.warn('Status "Afgerond" not found.');return}if(C.value.StatusID===ee.id){console.log("Preventief status is already Afgerond.");return}console.log(`PDCA ACT complete: Auto-setting status for Preventief ${U} to "Afgerond" (${ee.id}).`);try{const ce=await r.updatePreventiefAutoSave(U,{StatusID:ee.id});(ce==null?void 0:ce.status)===200?(console.log(`Successfully auto-updated status for Preventief ${U} to Afgerond from PDCA.`),C.value.StatusID=ee.id):console.error("Failed to auto-update preventief status to Afgerond from PDCA:",ce)}catch(ce){console.error("Error auto-updating preventief status to Afgerond from PDCA:",ce)}},N=ee=>{if(!v.value.has(ee.id))return;const U=E.indexOf(ee.id);if(U<E.length-1){const de=E[U+1];if(v.value.has(ee.id)&&(R.value=de,I.value)){const ce={id:de,label:de.toUpperCase(),title:K(de).title,description:K(de).description,status:v.value.has(de)?"Completed":"Not Started"};A.value=ce}}else ee.id==="act"&&v.value.has("act")&&(R.value="finished",I.value=!1)},G=ee=>{const U=E.indexOf(R.value),de=E.indexOf(ee);return!!(de===U||de<U&&v.value.has(ee))},K=ee=>({obstacle:{title:"ONDERZOEK KERNOORZAAK",description:"Identify and describe the current obstacle"},plan:{title:"PLAN FASE",description:"Create an action plan to address the obstacle"},do:{title:"DO FASE",description:"Implement the planned actions"},check:{title:"CHECK FASE",description:"Analyze the results of the actions"},act:{title:"ACT FASE",description:"Make improvements based on evaluation"},finished:{title:"Completed",description:"PDCA cycle completed"}})[ee],Z=W(!1),le=W(0),ye=W(null),Ce=W(["","","","",""]),Ie=["Waarom is dit probleem nu een obstakel voor ons?","Waarom bestaat deze situatie en wat houdt het in stand?","Waarom hebben bestaande maatregelen dit niet voorkomen?","Waarom zijn we dit niet eerder tegengekomen of hebben we dit niet eerder opgelost?","Waarom zijn de onderliggende systemen of processen niet toereikend?"],Ve=["Beschrijf het directe probleem...","Ga een niveau dieper...","Onderzoek de onderliggende factoren...","Kijk naar processen en systemen...","Identificeer de fundamentele oorzaak..."],Ke=async()=>{if(A.value){Z.value=!0,le.value=0,ye.value=window.setInterval(()=>{le.value++},0);try{const ee=Ce.value.filter(ce=>ce.trim()).map((ce,fe)=>`${fe+1}. ${ce}`).join(`
`),U=`
      Obstakel: ${d.value.Obstakel||"Geen obstakel beschreven"}

      5x Waarom Analyse:
      ${ee}
    `,de=await cp(U);C.value.Kernoorzaak=de}catch(ee){console.error("Failed to generate root cause:",ee)}finally{Z.value=!1,ye.value&&(clearInterval(ye.value),ye.value=null)}}},He=Qv(te(()=>{var ee;return((ee=A.value)==null?void 0:ee.id)||""}),C),It=te(()=>He.value),_t=ee=>{switch(ee){case"obstacle":return"PLAN";case"plan":return"DO";case"do":return"CHECK";case"check":return"ACT";case"act":return"FINISH";default:return""}},Ge=W(!1),rt=te(()=>{var ce,fe,ve,_e;if(!((ce=C.value)!=null&&ce.Smart))return 0;let ee=0;return["Specifiek","Meetbaar","Haalbaar"].forEach(pe=>{var ke,Le;((Le=(ke=C.value.Smart[pe])==null?void 0:ke.Text)==null?void 0:Le.length)>1&&ee++}),(fe=C.value.Strategie)!=null&&fe.KPI&&((_e=(ve=C.value.Strategie)==null?void 0:ve.Comments)==null?void 0:_e.length)>1&&ee++,C.value.Steps.Do.Deadline&&C.value.Steps.Check.Deadline&&C.value.Steps.Act.Deadline&&ee++,ee}),Ue=ee=>C.value.Steps[ee].Deadline?"success":"grey",Be={Do:"Uitvoeren van de geplande acties",Check:"Evalueren van de resultaten",Act:"Borgen van de verbeteringen"},Ye=ee=>new Date(ee).toLocaleDateString("nl-NL",{day:"2-digit",month:"2-digit",year:"numeric"}),ot=W({smartEvaluation:{Specifiek:{status:null,notes:""},Meetbaar:{status:null,notes:""},Haalbaar:{status:null,notes:""},Relevant:{status:null,notes:""},Tijdgebonden:{status:null,notes:""}},actionEvaluation:{},conclusion:"",overallStatus:null});C.value.TodoItems.forEach(ee=>{ot.value.actionEvaluation[ee.id]={effectiveness:null,impact:null,learnings:""}});const Qe=[{title:"Zeer Effectief",value:"Zeer"},{title:"Redelijk Effectief",value:"Redelijk"},{title:"Weinig Effectief",value:"Weinig"}],Ct=[{title:"Grote Impact",value:"Groot"},{title:"Gemiddelde Impact",value:"Gemiddeld"},{title:"Kleine Impact",value:"Klein"}],Fe=W({implementationStatus:{improvements:[],deviations:"",unexpectedOutcomes:""},standardization:{actions:[],documentation:"",trainingNeeded:!1,trainingNotes:""},sustainability:{monitoringPlan:"",followUpDate:null,responsiblePerson:null},learnings:{points:[],futureRecommendations:""},completionConfidence:0});W(!1),W(!1),te(()=>Fe.value.implementationStatus.improvements.length>0&&Fe.value.standardization.documentation&&Fe.value.sustainability.monitoringPlan&&Fe.value.learnings.points.length>0&&Fe.value.completionConfidence!==null);const ze=te(()=>{const U=v.value.size;return Math.round(U/5*100)}),mt=W({do:!1,check:!1,act:!1}),Bt=te(()=>{switch(C.value.PDCAStatus){case"Wel":return"success";case"Deels":return"warning";case"Niet":return"error";default:return"info"}}),ya=te(()=>{switch(C.value.PDCAStatus){case"Wel":return"Succesvol Afgerond";case"Deels":return"Deels Succesvol";case"Niet":return"Niet Succesvol";default:return"Status Onbekend"}}),lt=te(()=>{switch(C.value.PDCAStatus){case"Wel":return"De verbetering is succesvol. Laten we dit borgen in het proces.";case"Deels":return"Er zijn positieve resultaten, maar verdere verbetering is mogelijk.";case"Niet":return"De doelstellingen zijn niet behaald. Een nieuwe PDCA-cyclus is nodig.";default:return"Bepaal eerst de status in de CHECK-fase."}});function tt(ee){const U={online:{icon:"mdi-circle",color:"success"},away:{icon:"mdi-circle",color:"warning"},busy:{icon:"mdi-circle",color:"error"},offline:{icon:"mdi-circle",color:"grey"},default:{icon:"mdi-circle",color:"grey"}};return!ee||typeof ee!="string"?U.default:U[ee==null?void 0:ee.toLowerCase()]||U.default}const pt=async ee=>{if(!ee){const U=nr(x.value||{},C.value);if(U.length>0){const de=U.reduce((fe,ve)=>({...fe,[ve.field]:ve.newValue}),{}),ce=await r.updatePreventief(d.value.Preventief.id,de);if((ce==null?void 0:ce.status)===200){const fe=ce==null?void 0:ce.data;fe&&(fe.Smart?Object.keys(fe.Smart).forEach(ve=>{fe.Smart[ve].Toelichting||(fe.Smart[ve].Toelichting="")}):fe.Smart={Specifiek:{...u},Meetbaar:{...u},Haalbaar:{...u},Relevant:{...u},Tijdgebonden:{...u}},fe.Strategie||(fe.Strategie={KPI:null,Comments:null}),fe.Steps||(fe.Steps={Obstakel:{...m},Plan:{...m},Do:{...m},Check:{...m},Act:{...m},Finished:{...m}}),fe.TodoItems===null&&(fe.TodoItems=[]),setTimeout(()=>{C.value=JSON.parse(JSON.stringify(fe)),x.value=JSON.parse(JSON.stringify(fe))},25))}else console.error("[handleDialogClose Debug] Error saving data:",ce)}I.value=!1}},Y=()=>{I.value=!0,A.value={id:"finished",label:"Completed",title:"PDCA Cycle Completed",description:"Continuous improvement journey milestone reached",status:"Completed"}},Q=te(()=>S.value?S.value.toLocaleTimeString():""),ne=async()=>{var _e,pe;if(!A.value||!window.confirm("Weet je zeker dat je deze fase wilt resetten?"))return;const U=A.value.id,de={obstacle:"Obstakel",plan:"Plan",do:"Do",check:"Check",act:"Act"},ce=E.indexOf(U),fe=E.slice(ce),ve={Steps:{...C.value.Steps}};fe.forEach(ke=>{if(ke!=="finished"&&ke in de){const Le=de[ke];ve.Steps[Le]={...m}}}),(U==="obstacle"||fe.includes("obstacle"))&&(ve.Kernoorzaak=null,ve.Why=null),(U==="plan"||fe.includes("plan"))&&(ve.Smart={Specifiek:{...u},Meetbaar:{...u},Haalbaar:{...u},Relevant:{...u},Tijdgebonden:{...u}},ve.Strategie={KPI:null,Comments:null},ve.Begeleider=null,ve.Teamleden=null),(U==="do"||fe.includes("do"))&&(ve.TodoItems=[]),(U==="check"||fe.includes("check"))&&(ve.Smart={...ve.Smart||C.value.Smart,Meetbaar:{...u},Specifiek:{...(_e=C.value.Smart)==null?void 0:_e.Specifiek,Behaald:"",Toelichting:""}},ve.Conclusie=null,ve.PDCAStatus=null),(U==="act"||fe.includes("act"))&&(ve.PDCAStatus=null,ve.Documentation=null,ve.Monitoring=null,ve.FailureAnalysis=null,ve.NewPDCAPlanning=null,ve.TrainingNeeded=!1,ve.TrainingNeededType=null,ve.FollowUpDate=null,ve.Responsible=null),s.promise({message:t("notifications.resetting_phase")});try{const ke=await r.updatePreventief(d.value.Preventief.id,ve);if((ke==null?void 0:ke.status)===200)C.value={...C.value,...ve},v.value.clear(),E.some(Le=>{var ht;return Le===U?!0:((ht=C.value.Steps[de[Le]])!=null&&ht.Finished&&v.value.add(Le),!1)}),R.value=U,A.value&&(A.value.status="Not Started"),s.resolvePromise({message:t("notifications.phase_reset_success")});else throw new Error(((pe=ke==null?void 0:ke.data)==null?void 0:pe.message)||"Unknown error")}catch(ke){s.rejectPromise({message:t("errors.phase_reset_failed",{error:ke})})}},re=async()=>{!A.value||!It.value||await J({...A.value,status:"Completed"})},ae=te(()=>Qr([{action:"manage",resourceType:"preventief"}])),me=te(()=>{var U,de,ce;if(!((ce=(de=(U=d.value)==null?void 0:U.Preventief)==null?void 0:de.Teamleden)!=null&&ce.IDs))return[];const ee=d.value.Preventief.Teamleden.IDs.map(fe=>n.getActiehouderById(fe));return ee.length===0?[]:ee.filter(fe=>!!fe).map(fe=>fe==null?void 0:fe.Name)}),De=ee=>{var U,de,ce;if(!l.value[ee]){const fe=o.preventiefTasks.get(ee);l.value[ee]={effectiviteit:((U=fe==null?void 0:fe.data)==null?void 0:U.effectiviteit)||"",impact:((de=fe==null?void 0:fe.data)==null?void 0:de.impact)||"",comments:((ce=fe==null?void 0:fe.data)==null?void 0:ce.comments)||""}}return l.value[ee]},Ee=te(()=>Array.from(o.preventiefTasks.values()).filter(ee=>ee.actionType==="task"&&ee.preventiefId===d.value.Preventief.id)),Ze=async()=>{var fe;s.promise({message:t("notifications.saving_pdca")});const U=nr(x.value||{},C.value).reduce((ve,_e)=>({...ve,[_e.field]:_e.newValue}),{}),de=await r.updatePreventief(d.value.Preventief.id,U);if((de==null?void 0:de.status)!==200){s.rejectPromise({message:t("errors.pdca_error",{error:((fe=de==null?void 0:de.data)==null?void 0:fe.message)||"Unknown error"})});return}const ce=de==null?void 0:de.data;ce&&(ce.Smart?Object.keys(ce.Smart).forEach(ve=>{ce.Smart[ve].Toelichting||(ce.Smart[ve].Toelichting="")}):ce.Smart={Specifiek:{...u},Meetbaar:{...u},Haalbaar:{...u},Relevant:{...u},Tijdgebonden:{...u}},ce.Strategie||(ce.Strategie={KPI:null,Comments:null}),ce.Steps||(ce.Steps={Obstakel:{...m},Plan:{...m},Do:{...m},Check:{...m},Act:{...m},Finished:{...m}})),C.value=JSON.parse(JSON.stringify(ce||C.value)),x.value=JSON.parse(JSON.stringify(ce||C.value)),s.resolvePromise({message:t("notifications.pdca_saved")}),I.value=!1,P.value=!1};return be(()=>C.value.Kernoorzaak,async ee=>{var U,de,ce;if(console.log("[Kernoorzaak Watcher] Triggered. New:",ee,"Original:",(U=x.value)==null?void 0:U.Kernoorzaak),x.value&&ee!==x.value.Kernoorzaak&&!F.value&&((de=C.value)!=null&&de.id)){console.log("[Kernoorzaak Watcher] Conditions met for status update.");const fe=i.getStatusByName("In behandeling"),ve=i.getStatusByName("Open");if(fe&&ve&&C.value.StatusID===ve.id){console.log(`[Kernoorzaak Watcher] Current StatusID: ${C.value.StatusID} (Open), Target StatusID: ${fe.id}. Updating...`);try{const _e={StatusID:fe.id},pe=await r.updatePreventiefAutoSave(C.value.id,_e);if((pe==null?void 0:pe.status)===200)console.log(`[Kernoorzaak Watcher] Status successfully updated to 'In behandeling' (ID: ${fe.id})`),F.value=!0,C.value.StatusID=fe.id,x.value&&(x.value.StatusID=fe.id);else throw new Error(`Autosave failed with status: ${pe==null?void 0:pe.status}`)}catch(_e){console.error("[Kernoorzaak Watcher] Failed to update preventief status:",_e),s.error({message:"Kon PDCA status niet bijwerken."})}}else console.log(`[Kernoorzaak Watcher] Update skipped. Target Status: ${fe?fe.id:"Not Found"}, Current Status: ${C.value.StatusID} (Not 'Open' or required statuses not found)`)}else console.log(`[Kernoorzaak Watcher] Conditions not met. Original loaded: ${!!x.value}, Changed: ${x.value?ee!==x.value.Kernoorzaak:"N/A"}, Triggered: ${F.value}, Preventief ID: ${(ce=C.value)==null?void 0:ce.id}`)},{deep:!1}),(ee,U)=>{var ce,fe,ve,_e;const de=hn("VueDatePicker");return!se(r).loading.single&&!se(r).loading.all&&C.value.id?(T(),q("div",{class:"pdca-container",key:C.value.id},[p("div",{class:we(["pdca-content",{"shift-left":I.value}])},[c(Te,{variant:"outlined",class:"info-card mb-2"},{default:h(()=>[c(Re,{class:"pa-4"},{default:h(()=>{var pe,ke,Le,ht;return[p("div",Zv,[p("div",Xv,[c(Jo,{color:"primary",size:"40",class:"mr-3"},{default:h(()=>[c(oe,{color:"white"},{default:h(()=>U[25]||(U[25]=[z("mdi-account-group")])),_:1,__:[25]})]),_:1}),p("div",eh,[p("div",th,[p("span",ah,j(((ke=(pe=d.value.Preventief)==null?void 0:pe.User)==null?void 0:ke.Name)||"Niet toegewezen"),1),c(et,{size:"x-small",class:"ml-2",color:"primary",variant:"flat"},{default:h(()=>U[26]||(U[26]=[z("Actiehouder")])),_:1,__:[26]})]),p("div",nh,j(me.value.length>0?`Team: ${me.value.join(", ")}`:"Geen teamleden toegewezen"),1)])]),p("div",rh,[c(ia,{"model-value":ze.value,color:ze.value===100?"success":"primary",size:60,width:5},{default:h(()=>[z(j(ze.value)+"% ",1)]),_:1},8,["model-value","color"])])]),p("div",oh,[p("div",sh,[c(oe,{size:"16",color:"medium-emphasis",class:"mr-2"},{default:h(()=>U[27]||(U[27]=[z("mdi-folder-outline")])),_:1,__:[27]}),p("span",ih,j(((Le=d.value.Project)==null?void 0:Le.ProjectNaam)||"N/A"),1),c(vt,{vertical:"",class:"mx-2",style:{height:"12px"}}),c(oe,{size:"16",color:"medium-emphasis",class:"mr-2"},{default:h(()=>U[28]||(U[28]=[z("mdi-calendar-outline")])),_:1,__:[28]}),p("span",lh,j((ht=d.value.Preventief)!=null&&ht.Deadline?new Date(d.value.Preventief.Deadline).toLocaleDateString("nl-NL",{day:"2-digit",month:"2-digit",year:"numeric"}):"Geen deadline"),1),c(vt,{vertical:"",class:"mx-2",style:{height:"12px"}}),p("span",uh,[_.value?(T(),q("span",dh,"Opslaan...")):S.value?(T(),q("span",ch,"Laatst opgeslagen om "+j(Q.value),1)):X("",!0)])]),v.value.has("act")?(T(),ie(ge,{key:0,color:"success",variant:"tonal",density:"comfortable",size:"small","prepend-icon":"mdi-file-document-check",onClick:Y},{default:h(()=>U[29]||(U[29]=[z(" Bekijk rapport ")])),_:1,__:[29]})):X("",!0)])]}),_:1})]),_:1}),p("div",fh,[(T(),q("svg",mh,[p("path",{class:we({active:R.value==="plan"&&v.value.has("obstacle"),"cycle-complete":R.value==="finished"||v.value.has("plan"),hidden:R.value==="obstacle"||!v.value.has("obstacle")&&R.value==="plan"}),d:"M 150 110 L 150 40",style:{"--delay":"0s"}},null,2),p("path",{class:we({active:R.value==="do"&&v.value.has("plan"),"cycle-complete":R.value==="finished"||v.value.has("do"),hidden:!v.value.has("plan")&&R.value==="do"}),d:"M 190 40 Q 260 40 260 110",style:{"--delay":"0s"}},null,2),p("path",{class:we({active:R.value==="check"&&v.value.has("do"),"cycle-complete":R.value==="finished"||v.value.has("check"),hidden:!v.value.has("do")&&R.value==="check"}),d:"M 260 190 Q 260 260 190 260",style:{"--delay":"0.5s"}},null,2),p("path",{class:we({active:R.value==="act"&&v.value.has("check"),"cycle-complete":R.value==="finished",hidden:!v.value.has("check")&&R.value==="act"}),d:"M 110 260 Q 40 260 40 190",style:{"--delay":"1s"}},null,2),p("path",{class:we({active:R.value==="finished"&&v.value.has("act"),"cycle-complete":R.value==="finished",hidden:!v.value.has("act")&&R.value==="finished"}),d:"M 40 110 Q 40 40 110 40",style:{"--delay":"1.5s"}},null,2)])),p("div",{class:we(["node obstacle",{completed:((ce=A.value)==null?void 0:ce.id)==="obstacle"&&((fe=A.value)==null?void 0:fe.status)==="Completed"||v.value.has("obstacle")}]),onClick:U[0]||(U[0]=pe=>b({id:"obstacle",label:"Obstakel",title:"Obstakel",description:"Identify and address obstacles",status:v.value.has("obstacle")?"Completed":"Not Started"}))},[U[30]||(U[30]=p("div",{class:"node-content"},[p("div",{class:"node-title"},"Oorzaak")],-1)),((ve=A.value)==null?void 0:ve.id)==="obstacle"&&((_e=A.value)==null?void 0:_e.status)==="Completed"||v.value.has("obstacle")?(T(),ie(oe,{key:0,class:"checkmark-icon",icon:"mdi-check-circle",color:"success"})):X("",!0)],2),(T(),q(Ae,null,We(["plan","do","check","act"],(pe,ke)=>{var Le,ht,$t,at;return p("div",{key:pe,class:we(["node",[pe,{disabled:!G(pe)},{active:R.value===pe},{completed:((Le=A.value)==null?void 0:Le.id)===pe&&((ht=A.value)==null?void 0:ht.status)==="Completed"||v.value.has(pe)}]]),onClick:Yt=>b({id:pe,label:pe.toUpperCase(),title:`${pe.charAt(0).toUpperCase()+pe.slice(1)}ing Phase`,description:K(pe).description,status:v.value.has(pe)?"Completed":"Not Started"})},[p("div",vh,[p("div",hh,j(pe.toUpperCase()),1)]),(($t=A.value)==null?void 0:$t.id)===pe&&((at=A.value)==null?void 0:at.status)==="Completed"||v.value.has(pe)?(T(),ie(oe,{key:0,class:"checkmark-icon",icon:"mdi-check-circle",color:"success"})):X("",!0),G(pe)?X("",!0):(T(),ie(oe,{key:1,class:"lock-icon",icon:"mdi-lock-outline",color:"secondary"}))],10,ph)}),64))])],2),ja(p("div",gh,[c(gu,{"model-value":I.value,"onUpdate:modelValue":pt,location:"right",width:"670",temporary:!0,scrim:!0,class:"node-drawer"},{default:h(()=>[c(Te,{flat:"",class:"d-flex flex-column",style:{height:"100%"}},{default:h(()=>{var pe,ke,Le,ht,$t,at,Yt,ut;return[((pe=A.value)==null?void 0:pe.id)==="finished"?(T(),ie(Pt,{key:0,class:"d-flex align-center pb-2"},{default:h(()=>[c(oe,{color:"success",class:"mr-2"},{default:h(()=>U[31]||(U[31]=[z("mdi-check-circle")])),_:1,__:[31]}),U[32]||(U[32]=z(" PDCA Voltooid - Eindrapport ")),c(ge,{icon:"mdi-close",size:"small",variant:"text",class:"ml-auto",onClick:U[1]||(U[1]=ue=>I.value=!1)})]),_:1,__:[32]})):(T(),ie(Pt,{key:1,class:"d-flex align-center justify-space-between pa-4"},{default:h(()=>{var ue;return[p("div",yh,[U[33]||(U[33]=p("img",{src:Tr,class:"mr-2 mt-1",width:"15",height:"15"},null,-1)),z(" "+j((ue=A.value)==null?void 0:ue.title),1)]),c(ka,{location:"bottom",text:"Opslaan"},{activator:h(({props:xe})=>[p("div",pa(xe,{class:"ml-auto cursor-pointer",onClick:Ze,style:{display:"inline-flex","align-items":"center","justify-content":"center"}}),[c(se(qv),{size:24,style:{color:"var(--v-theme-primary)"}})],16)]),_:1})]}),_:1})),c(vt),((ke=A.value)==null?void 0:ke.id)==="obstacle"?(T(),ie(Re,{key:2},{default:h(()=>[p("div",bh,[p("div",wh,[U[34]||(U[34]=p("h1",{class:"text-h4"},"OBSTAKEL",-1)),p("p",null,j(d.value.Obstakel),1)]),A.value?(T(),ie(gt,{key:0,loading:Z.value,modelValue:C.value.Kernoorzaak,"onUpdate:modelValue":U[2]||(U[2]=ue=>C.value.Kernoorzaak=ue),label:"Kernoorzaak",placeholder:"Hoe heeft dit obstakel kunnen gebeuren?",class:"font-futura mb-4 mt-4",variant:"outlined",rows:"10",hint:'Tip: Gebruik de "5x Waarom-methode" om tot de kernoorzaak te komen',"persistent-hint":""},null,8,["loading","modelValue"])):X("",!0),p("div",{class:we(["generating-pill ai-analysis-btn",{"is-generating":Z.value}]),onClick:Ke},[c(ka,{location:"top","open-delay":200,"content-class":"ai-tooltip"},{activator:h(({props:ue})=>[p("div",pa(ue,{class:"pill-content"}),[p("span",_h,[Z.value?(T(),q("span",Ch,"Genereren")):X("",!0),Z.value?X("",!0):(T(),q("span",xh,"IntalAI"))]),U[35]||(U[35]=p("div",{class:"sparkle"},null,-1))],16)]),default:h(()=>[p("div",Sh,[c(oe,{size:"small",color:"primary",class:"mr-1"},{default:h(()=>U[36]||(U[36]=[z("mdi-lightbulb-outline")])),_:1,__:[36]}),U[37]||(U[37]=z(" Klik voor een AI-suggestie "))])]),_:1})],2)]),c(ar,{class:"mt-4 mb-4"},{default:h(()=>[c(_a,{elevation:"0"},{default:h(()=>[c(Ca,{class:"text-primary"},{default:h(()=>[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[38]||(U[38]=[z("mdi-lightbulb-outline")])),_:1,__:[38]}),U[39]||(U[39]=z(" 5x Waarom Analyse Tool "))]),_:1,__:[39]}),c(xa,null,{default:h(()=>[p("div",Dh,[(T(!0),q(Ae,null,We(Ce.value,(ue,xe)=>(T(),q("div",{key:xe,class:"why-step"},[p("div",kh,[c(et,{color:"primary",size:"small",class:"mr-2",style:{"min-width":"80px"}},{default:h(()=>[z("Waarom "+j(xe+1),1)]),_:2},1024),p("span",Ah,j(Ie[xe]),1)]),c(Ot,{modelValue:Ce.value[xe],"onUpdate:modelValue":Me=>Ce.value[xe]=Me,placeholder:Ve[xe],variant:"outlined",density:"comfortable",class:"mb-4"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})):X("",!0),((Le=A.value)==null?void 0:Le.id)==="plan"?(T(),ie(Re,{key:3},{default:h(()=>[p("div",Ph,[c(ka,{location:"top"},{activator:h(({props:ue})=>[c(et,pa(ue,{color:rt.value>=4?"success":"warning",size:"small"}),{default:h(()=>[p("span",Ih,"SMART Score: "+j(rt.value)+"/5",1)]),_:2},1040,["color"])]),default:h(()=>[U[40]||(U[40]=z(" Score gebaseerd op alle ingevulde SMART-criteria "))]),_:1,__:[40]})]),c(yu,{modelValue:Ge.value,"onUpdate:modelValue":U[10]||(U[10]=ue=>Ge.value=ue),class:"plan-form"},{default:h(()=>[c(ar,{variant:"accordion",rounded:""},{default:h(()=>[c(_a,null,{default:h(()=>[c(Ca,{expanded:""},{default:h(()=>[p("div",Th,[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[41]||(U[41]=[z("mdi-account-group")])),_:1,__:[41]}),U[42]||(U[42]=p("div",{class:"text-h6"},"Team Toewijzing",-1))])]),_:1}),c(xa,null,{default:h(()=>[c(Es,{modelValue:C.value.User,"onUpdate:modelValue":U[3]||(U[3]=ue=>C.value.User=ue),label:"Actiehouder",items:D.value,"item-title":"Name","item-value":"id",variant:"outlined",density:"comfortable",placeholder:"Selecteer actiehouder","prepend-inner-icon":"mdi-account-tie","return-object":!0},null,8,["modelValue","items"]),c(Es,{modelValue:C.value.Begeleider,"onUpdate:modelValue":U[4]||(U[4]=ue=>C.value.Begeleider=ue),label:"Team begeleider",items:L.value,"item-title":"Name","item-value":"id",variant:"outlined",density:"comfortable",placeholder:"Selecteer begeleider","prepend-inner-icon":"mdi-shield-account",hint:"Verplicht indien teamleider geen belt heeft","persistent-hint":"","return-object":!0},null,8,["modelValue","items"])]),_:1})]),_:1}),c(_a,null,{default:h(()=>[c(Ca,null,{default:h(()=>[p("div",$h,[p("div",Fh,[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[43]||(U[43]=[z("mdi-lightbulb-on")])),_:1,__:[43]}),U[44]||(U[44]=p("div",{class:"text-h6"},"Doel",-1))])])]),_:1}),c(xa,null,{default:h(()=>[c(gt,{modelValue:C.value.Smart.Specifiek.Text,"onUpdate:modelValue":U[5]||(U[5]=ue=>C.value.Smart.Specifiek.Text=ue),label:"Wat willen we precies bereiken?",placeholder:"Beschrijf concreet wat er moet gebeuren",variant:"outlined",rows:"2","hide-details":"",class:"mt-8"},null,8,["modelValue"]),c(gt,{modelValue:C.value.Smart.Haalbaar.Text,"onUpdate:modelValue":U[6]||(U[6]=ue=>C.value.Smart.Haalbaar.Text=ue),label:"Is dit haalbaar?",placeholder:"Beschrijf waarom dit haalbaar is met beschikbare middelen",variant:"outlined",rows:"2","hide-details":"",class:"mt-8"},null,8,["modelValue"])]),_:1})]),_:1}),c(_a,null,{default:h(()=>[c(Ca,null,{default:h(()=>[p("div",Eh,[p("div",Nh,[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[45]||(U[45]=[z("mdi-chart-timeline")])),_:1,__:[45]}),U[46]||(U[46]=p("div",{class:"text-h6"},"Meetplan",-1))])])]),_:1}),c(xa,null,{default:h(()=>[p("div",Rh,[c(gt,{modelValue:C.value.Smart.Meetbaar.Text,"onUpdate:modelValue":U[7]||(U[7]=ue=>C.value.Smart.Meetbaar.Text=ue),label:"Hoe meten we het resultaat?",placeholder:"Definieer meetbare criteria voor succes",variant:"outlined",rows:"2","hide-details":"",class:"mt-2"},null,8,["modelValue"])])]),_:1})]),_:1}),c(_a,null,{default:h(()=>[c(Ca,null,{default:h(()=>[p("div",jh,[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[47]||(U[47]=[z("mdi-target")])),_:1,__:[47]}),U[48]||(U[48]=p("div",{class:"text-h6"},"Strategische Afstemming",-1))])]),_:1}),c(xa,null,{default:h(()=>[c(it,{modelValue:C.value.Strategie.KPI,"onUpdate:modelValue":U[8]||(U[8]=ue=>C.value.Strategie.KPI=ue),label:"Bedrijfs KPI",items:se(Yv),variant:"outlined",density:"comfortable",class:"mb-4 mt-4",placeholder:"Selecteer relevante KPI"},null,8,["modelValue","items"]),c(gt,{modelValue:C.value.Strategie.Comments,"onUpdate:modelValue":U[9]||(U[9]=ue=>C.value.Strategie.Comments=ue),label:"Waarom is dit obstakel een probleem?",variant:"outlined",rows:"3",placeholder:"Wat draagt het verbeteren van dit obstakel bij aan de bedrijfsdoelstelling?"},null,8,["modelValue"])]),_:1})]),_:1}),c(_a,null,{default:h(()=>[c(Ca,null,{default:h(()=>[p("div",Mh,[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[49]||(U[49]=[z("mdi-calendar-clock")])),_:1,__:[49]}),U[50]||(U[50]=p("div",{class:"text-h6"},"Planning",-1))])]),_:1}),c(xa,null,{default:h(()=>[c(Ns,{density:"comfortable"},{default:h(()=>[(T(),q(Ae,null,We(["Do","Check","Act"],ue=>c(Rs,{key:ue,"dot-color":Ue(ue),size:"small"},{default:h(()=>[c(Te,{variant:"outlined",class:"timeline-card"},{default:h(()=>[c(Re,null,{default:h(()=>[p("div",Oh,[p("div",Vh,j(ue)+" Fase",1),p("div",Bh,j(Be[ue]),1),c(xi,{modelValue:mt.value[ue],"onUpdate:modelValue":xe=>mt.value[ue]=xe,"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:h(({props:xe})=>[c(de,pa({class:"date-picker","prevent-min-max-navigation":"","ignore-time-validation":"","max-date":C.value.Deadline},{ref_for:!0},xe,{"model-type":"iso","auto-position":"top","enable-time-picker":!1,teleport:!0,modelValue:C.value.Steps[ue].Deadline,"onUpdate:modelValue":Me=>C.value.Steps[ue].Deadline=Me,label:`${ue.toUpperCase()} Deadline`,onClick:Me=>mt.value[ue]=!0}),null,16,["max-date","modelValue","onUpdate:modelValue","label","onClick"])]),default:h(()=>[c(bu,{modelValue:C.value.Steps[ue].Deadline,"onUpdate:modelValue":[xe=>C.value.Steps[ue].Deadline=xe,xe=>mt.value[ue]=!1]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["dot-color"])),64))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):X("",!0),((ht=A.value)==null?void 0:ht.id)==="do"?(T(),ie(Re,{key:4,class:"pa-0"},{default:h(()=>[p("div",Uh,[c(Bo,{item:d.value,id:C.value.id,type:"preventief",title:"Actiepunten"},null,8,["item","id"])])]),_:1})):X("",!0),(($t=A.value)==null?void 0:$t.id)==="check"?(T(),ie(Re,{key:5},{default:h(()=>[c(ar,null,{default:h(()=>[c(_a,null,{default:h(()=>[c(Ca,null,{default:h(()=>[p("div",zh,[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[51]||(U[51]=[z("mdi-clipboard-check")])),_:1,__:[51]}),U[52]||(U[52]=z(" Actiepunten Evaluatie "))])]),_:1}),c(xa,null,{default:h(()=>[se(o).preventiefTasks.size===0?(T(),q("div",Lh,[c(oe,{size:"large",color:"grey",class:"mb-2"},{default:h(()=>U[53]||(U[53]=[z("mdi-clipboard-text-off")])),_:1,__:[53]}),U[54]||(U[54]=p("div",{class:"text-subtitle-1 text-grey"},"Geen actiepunten gevonden",-1)),U[55]||(U[55]=p("div",{class:"text-caption text-grey"},"Er zijn nog geen actiepunten toegevoegd om te evalueren",-1))])):(T(!0),q(Ae,{key:1},We(Ee.value,ue=>(T(),q("div",{key:ue.id,class:"action-evaluation mb-4"},[c(Te,{variant:"outlined",class:"pa-4"},{default:h(()=>[c(Pt,null,{default:h(()=>{var xe;return[p("div",Hh,[p("div",null,[p("div",Gh,j(ue.action),1),p("div",Wh,[z(" Toegewezen aan: "+j((xe=f.value.find(Me=>Me.id===ue.userId))==null?void 0:xe.Name)+" ",1),U[56]||(U[56]=p("br",null,null,-1)),z(" Deadline: "+j(Ye(ue.deadline)),1)])])])]}),_:2},1024),c(vt,{class:"mb-4"}),p("div",Jh,[c(it,{"model-value":De(ue.id).effectiviteit,"onUpdate:modelValue":xe=>De(ue.id).effectiviteit=xe,label:"Effectiviteit",items:Qe,variant:"outlined",density:"compact","hide-details":"",class:"flex-grow-1"},null,8,["model-value","onUpdate:modelValue"]),c(it,{"model-value":De(ue.id).impact,"onUpdate:modelValue":xe=>De(ue.id).impact=xe,label:"Impact",items:Ct,variant:"outlined",density:"compact","hide-details":"",class:"flex-grow-1"},null,8,["model-value","onUpdate:modelValue"])]),c(gt,{"model-value":De(ue.id).comments,"onUpdate:modelValue":xe=>De(ue.id).comments=xe,label:"Leerpunten & Observaties",variant:"outlined",density:"comfortable",rows:"1",class:"mt-4","hide-details":""},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]))),128))]),_:1})]),_:1}),c(_a,null,{default:h(()=>[c(Ca,null,{default:h(()=>[p("div",qh,[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[57]||(U[57]=[z("mdi-target")])),_:1,__:[57]}),U[58]||(U[58]=z(" Doel & Meetplan Evaluatie "))])]),_:1}),c(xa,null,{default:h(()=>{var ue,xe;return[p("div",Kh,[U[61]||(U[61]=p("div",{class:"d-flex align-center mb-2"},null,-1)),p("div",Yh,[p("div",Qh,[U[59]||(U[59]=p("div",{class:"text-h5 mb-1"},"Doel:",-1)),p("div",null,j((xe=(ue=C.value.Smart)==null?void 0:ue.Specifiek)==null?void 0:xe.Text),1)]),p("div",Zh,[c(mo,{modelValue:C.value.Smart.Specifiek.Behaald,"onUpdate:modelValue":U[11]||(U[11]=Me=>C.value.Smart.Specifiek.Behaald=Me),class:"mt-0"},{default:h(()=>[c(Fa,{label:"Behaald",value:"achieved",color:"success"}),c(Fa,{label:"Deels Behaald",value:"partial",color:"warning"}),c(Fa,{label:"Niet Behaald",value:"not_achieved",color:"error"})]),_:1},8,["modelValue"]),c(gt,{modelValue:C.value.Smart.Specifiek.Toelichting,"onUpdate:modelValue":U[12]||(U[12]=Me=>C.value.Smart.Specifiek.Toelichting=Me),label:"Toelichting",variant:"outlined",density:"comfortable",rows:"1","hide-details":""},null,8,["modelValue"])])]),c(vt,{class:"my-8"}),p("div",Xh,[p("div",eg,[U[60]||(U[60]=p("div",{class:"text-h5 mb-1"},"Meetplan:",-1)),p("div",null,j(C.value.Smart.Meetbaar.Text),1)]),p("div",tg,[c(mo,{modelValue:C.value.Smart.Meetbaar.Behaald,"onUpdate:modelValue":U[13]||(U[13]=Me=>C.value.Smart.Meetbaar.Behaald=Me),class:"mt-0"},{default:h(()=>[c(Fa,{label:"Behaald",value:"achieved",color:"success"}),c(Fa,{label:"Deels Behaald",value:"partial",color:"warning"}),c(Fa,{label:"Niet Behaald",value:"not_achieved",color:"error"})]),_:1},8,["modelValue"]),c(gt,{modelValue:C.value.Smart.Meetbaar.Toelichting,"onUpdate:modelValue":U[14]||(U[14]=Me=>C.value.Smart.Meetbaar.Toelichting=Me),label:"Toelichting",variant:"outlined",density:"comfortable",rows:"1","hide-details":""},null,8,["modelValue"])])])])]}),_:1})]),_:1})]),_:1}),c(Te,{class:"mt-4",variant:"outlined"},{default:h(()=>[c(Pt,{class:"d-flex align-center"},{default:h(()=>[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[62]||(U[62]=[z("mdi-file-document-check")])),_:1,__:[62]}),U[63]||(U[63]=z(" Eindconclusie "))]),_:1,__:[63]}),c(Re,null,{default:h(()=>[c(gt,{modelValue:C.value.Conclusie,"onUpdate:modelValue":U[15]||(U[15]=ue=>C.value.Conclusie=ue),label:"Wat zeggen de uitkomsten van je meetplan?",variant:"outlined",rows:"4",placeholder:"Beschrijf de belangrijkste bevindingen en lessen..."},null,8,["modelValue"]),c(mo,{modelValue:C.value.PDCAStatus,"onUpdate:modelValue":U[16]||(U[16]=ue=>C.value.PDCAStatus=ue),class:"mt-4"},{default:h(()=>[U[64]||(U[64]=p("div",{class:"text-subtitle-1 mb-2"},"Status PDCA",-1)),c(Fa,{label:"Succesvol Afgerond",value:"Wel",color:"success"}),c(Fa,{label:"Deels Succesvol - Vervolgacties Nodig",value:"Deels",color:"warning"}),c(Fa,{label:"Niet Succesvol - Herziening Nodig",value:"Niet",color:"error"})]),_:1,__:[64]},8,["modelValue"])]),_:1})]),_:1})]),_:1})):X("",!0),((at=A.value)==null?void 0:at.id)==="act"?(T(),ie(Re,{key:6},{default:h(()=>[p("div",ag,[c(To,{color:Bt.value,variant:"tonal",class:"mb-6"},{prepend:h(()=>[c(oe,{icon:tt(C.value.PDCAStatus||"").icon},null,8,["icon"])]),default:h(()=>[p("div",ng,j(ya.value),1),p("div",rg,j(lt.value),1)]),_:1},8,["color"]),C.value.PDCAStatus!=="Niet"?(T(),q(Ae,{key:0},[c(Te,{variant:"outlined",class:"mb-6"},{default:h(()=>[c(Pt,{class:"d-flex align-center"},{default:h(()=>[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[65]||(U[65]=[z("mdi-shield-check")])),_:1,__:[65]}),U[66]||(U[66]=z(" Borging "))]),_:1,__:[66]}),c(Re,null,{default:h(()=>[c(gt,{modelValue:C.value.Documentation,"onUpdate:modelValue":U[17]||(U[17]=ue=>C.value.Documentation=ue),label:"Hoe ga je deze verbetering borgen in het proces?",placeholder:"Beschrijf de concrete stappen om deze verbetering permanent te maken...",variant:"outlined",rows:"3"},null,8,["modelValue"]),c(Si,{modelValue:C.value.TrainingNeeded,"onUpdate:modelValue":U[18]||(U[18]=ue=>C.value.TrainingNeeded=ue),label:"Is er training nodig voor medewerkers?",color:"primary"},null,8,["modelValue"]),C.value.TrainingNeeded?(T(),ie(gt,{key:0,modelValue:C.value.TrainingNeededType,"onUpdate:modelValue":U[19]||(U[19]=ue=>C.value.TrainingNeededType=ue),label:"Welke training is nodig?",variant:"outlined",rows:"2"},null,8,["modelValue"])):X("",!0)]),_:1})]),_:1}),c(Te,{variant:"outlined",class:"mb-6"},{default:h(()=>[c(Pt,{class:"d-flex align-center"},{default:h(()=>[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[67]||(U[67]=[z("mdi-calendar-check")])),_:1,__:[67]}),U[68]||(U[68]=z(" Vervolgacties "))]),_:1,__:[68]}),c(Re,null,{default:h(()=>[c(gt,{modelValue:C.value.Monitoring,"onUpdate:modelValue":U[20]||(U[20]=ue=>C.value.Monitoring=ue),label:"Hoe ga je het succes monitoren?",placeholder:"Beschrijf hoe je gaat controleren of de verbetering blijvend is...",variant:"outlined",rows:"3"},null,8,["modelValue"]),p("div",og,[c(Ot,{modelValue:C.value.FollowUpDate,"onUpdate:modelValue":U[21]||(U[21]=ue=>C.value.FollowUpDate=ue),label:"Evaluatiedatum",type:"date",variant:"outlined"},null,8,["modelValue"]),c(it,{modelValue:C.value.Responsible,"onUpdate:modelValue":U[22]||(U[22]=ue=>C.value.Responsible=ue),items:f.value,"item-title":"Name","item-value":"id",label:"Verantwoordelijke",variant:"outlined"},null,8,["modelValue","items"])])]),_:1})]),_:1})],64)):(T(),ie(Te,{key:1,variant:"outlined",class:"mb-6"},{default:h(()=>[c(Pt,{class:"d-flex align-center"},{default:h(()=>[c(oe,{color:"error",class:"mr-2"},{default:h(()=>U[69]||(U[69]=[z("mdi-alert-circle")])),_:1,__:[69]}),U[70]||(U[70]=z(" Analyse "))]),_:1,__:[70]}),c(Re,null,{default:h(()=>[c(gt,{modelValue:C.value.FailureAnalysis,"onUpdate:modelValue":U[23]||(U[23]=ue=>C.value.FailureAnalysis=ue),label:"Waarom is het niet gelukt?",placeholder:"Beschrijf de belangrijkste redenen waarom de doelstellingen niet zijn behaald...",variant:"outlined",rows:"4"},null,8,["modelValue"]),c(gt,{modelValue:C.value.NewPDCAPlanning,"onUpdate:modelValue":U[24]||(U[24]=ue=>C.value.NewPDCAPlanning=ue),label:"Hoe ga je dit verwerken in je nieuwe PDCA?",placeholder:"Beschrijf je plan voor een nieuwe PDCA-cyclus...",variant:"outlined",rows:"4"},null,8,["modelValue"])]),_:1})]),_:1}))])]),_:1})):X("",!0),((Yt=A.value)==null?void 0:Yt.id)==="finished"?(T(),ie(Re,{key:7},{default:h(()=>[p("div",sg,[p("div",ig,[U[71]||(U[71]=p("h1",{class:"text-h4"},"OBSTAKEL",-1)),p("p",null,j(d.value.Obstakel),1)]),c(Te,{variant:"outlined",class:"mb-4"},{default:h(()=>[c(Pt,{class:"d-flex align-center"},{default:h(()=>[c(oe,{color:"primary",class:"mr-2"},{default:h(()=>U[72]||(U[72]=[z("mdi-magnify")])),_:1,__:[72]}),U[73]||(U[73]=z(" Kernoorzaak Analyse "))]),_:1,__:[73]}),c(Re,null,{default:h(()=>[p("p",lg,j(C.value.Kernoorzaak||"Geen kernoorzaak gedefinieerd"),1)]),_:1})]),_:1})]),c(Ns,{density:"compact",class:"mt-6"},{default:h(()=>[(T(),q(Ae,null,We(["plan","do","check","act"],ue=>c(Rs,{key:ue,"dot-color":v.value.has(ue)?"success":"grey",size:"small"},{opposite:h(()=>{var xe;return[p("div",ug,j(((xe=C.value.Steps[ue.charAt(0).toUpperCase()+ue.slice(1)])==null?void 0:xe.Deadline)||"Geen datum"),1)]}),default:h(()=>{var xe,Me,Tt,Ut,zt,Lt,Ht,Gt,Wt,xt,la,Ba,Ua,za,La,Ha,Ga,Wa,Ja,qa,Ka,Ya,Qa,Za,Xa,en;return[p("div",dg,j(ue.toUpperCase()),1),p("div",cg,[ue==="plan"?(T(),q(Ae,{key:0},[(Me=(xe=C.value.Smart)==null?void 0:xe.Specifiek)!=null&&Me.Text?(T(),q("div",fg,[U[74]||(U[74]=p("strong",null,"Doel:",-1)),z(" "+j((Ut=(Tt=C.value.Smart)==null?void 0:Tt.Specifiek)==null?void 0:Ut.Text),1)])):X("",!0),(Lt=(zt=C.value.Smart)==null?void 0:zt.Meetbaar)!=null&&Lt.Text?(T(),q("div",mg,[U[75]||(U[75]=p("strong",null,"Meetplan:",-1)),z(" "+j((Gt=(Ht=C.value.Smart)==null?void 0:Ht.Meetbaar)==null?void 0:Gt.Text),1)])):X("",!0),(Wt=C.value.Strategie)!=null&&Wt.KPI?(T(),q("div",pg,[U[76]||(U[76]=p("strong",null,"KPI:",-1)),z(" "+j(C.value.Strategie.KPI),1)])):X("",!0)],64)):X("",!0),ue==="do"?(T(),q(Ae,{key:1},[(xt=C.value.TodoItems)!=null&&xt.length?(T(),q("div",vg,[U[77]||(U[77]=p("strong",null,"Uitgevoerde acties:",-1)),p("ul",hg,[(T(!0),q(Ae,null,We(C.value.TodoItems,St=>(T(),q("li",{key:St.id,class:"mb-1"},j(St.Actie)+" - "+j(St.Status),1))),128))])])):(T(),q("div",gg,"Geen acties geregistreerd"))],64)):X("",!0),ue==="check"?(T(),q(Ae,{key:2},[(la=C.value.Smart)!=null&&la.Meetbaar?(T(),q("div",yg,[U[78]||(U[78]=p("strong",null,"Meetplan resultaat:",-1)),p("div",bg,[p("div",null,j((Ua=(Ba=C.value.Smart)==null?void 0:Ba.Meetbaar)==null?void 0:Ua.Text),1),(La=(za=C.value.Smart)==null?void 0:za.Meetbaar)!=null&&La.Behaald?(T(),q("div",wg,[c(et,{size:"small",color:((Ga=(Ha=C.value.Smart)==null?void 0:Ha.Meetbaar)==null?void 0:Ga.Behaald)==="achieved"?"success":((Ja=(Wa=C.value.Smart)==null?void 0:Wa.Meetbaar)==null?void 0:Ja.Behaald)==="partial"?"warning":"error"},{default:h(()=>{var St,tn,an,Wn;return[z(j(((tn=(St=C.value.Smart)==null?void 0:St.Meetbaar)==null?void 0:tn.Behaald)==="achieved"?"Behaald":((Wn=(an=C.value.Smart)==null?void 0:an.Meetbaar)==null?void 0:Wn.Behaald)==="partial"?"Deels Behaald":"Niet Behaald"),1)]}),_:1},8,["color"]),(Ka=(qa=C.value.Smart)==null?void 0:qa.Meetbaar)!=null&&Ka.Toelichting?(T(),q("div",_g,j((Qa=(Ya=C.value.Smart)==null?void 0:Ya.Meetbaar)==null?void 0:Qa.Toelichting),1)):X("",!0)])):X("",!0)])])):X("",!0),(Za=C.value)!=null&&Za.Conclusie?(T(),q("div",Cg,[U[79]||(U[79]=p("strong",null,"Conclusie:",-1)),z(" "+j((Xa=C.value)==null?void 0:Xa.Conclusie),1)])):X("",!0),(en=C.value)!=null&&en.PDCAStatus?(T(),q("div",xg,[U[80]||(U[80]=p("strong",null,"Status:",-1)),z(" "+j(C.value.PDCAStatus),1)])):X("",!0)],64)):X("",!0),ue==="act"?(T(),q(Ae,{key:3},[C.value.PDCAStatus!=="Niet"?(T(),q(Ae,{key:0},[C.value.Documentation?(T(),q("div",Sg,[U[81]||(U[81]=p("strong",null,"Borging:",-1)),z(" "+j(C.value.Documentation),1)])):X("",!0),C.value.Monitoring?(T(),q("div",Dg,[U[82]||(U[82]=p("strong",null,"Monitoring:",-1)),z(" "+j(C.value.Monitoring),1)])):X("",!0)],64)):(T(),q(Ae,{key:1},[C.value.FailureAnalysis?(T(),q("div",kg,[U[83]||(U[83]=p("strong",null,"Analyse:",-1)),z(" "+j(C.value.FailureAnalysis),1)])):X("",!0),C.value.NewPDCAPlanning?(T(),q("div",Ag,[U[84]||(U[84]=p("strong",null,"Nieuwe PDCA planning:",-1)),z(" "+j(C.value.NewPDCAPlanning),1)])):X("",!0)],64))],64)):X("",!0)])]}),_:2},1032,["dot-color"])),64))]),_:1}),c(To,{color:"success",variant:"tonal",class:"mt-4",icon:"mdi-flag-checkered"},{default:h(()=>U[85]||(U[85]=[z(" PDCA cyclus succesvol afgerond ")])),_:1,__:[85]})]),_:1})):X("",!0),((ut=A.value)==null?void 0:ut.id)!=="finished"?(T(),ie(Nt,{key:8,class:"mt-auto pa-4"},{default:h(()=>[c(ge,{color:"error",variant:"outlined","prepend-icon":"mdi-refresh",onClick:ne,disabled:!A.value||!ae.value},{default:h(()=>{var ue;return[z(" Reset "+j((ue=A.value)==null?void 0:ue.label),1)]}),_:1},8,["disabled"]),c(Dt),c(ge,{color:"primary","prepend-icon":"mdi-arrow-right",onClick:re,disabled:!It.value},{default:h(()=>{var ue;return[z(j(_t(((ue=A.value)==null?void 0:ue.id)||"")),1)]}),_:1},8,["disabled"])]),_:1})):X("",!0)]}),_:1})]),_:1},8,["model-value"])],512),[[Rn,I.value]])])):(T(),q("div",Pg,[U[86]||(U[86]=p("h5",null,"Loading...",-1)),U[87]||(U[87]=p("br",null,null,-1)),c(ia,{indeterminate:"",color:"primary",size:"100"})]))}}}),$g=dt(Tg,[["__scopeId","data-v-77dbba3e"]]),Fg={class:"text-h5 ai-text-shimmer d-flex align-center"},Eg={class:"star-container"},Ng={class:"d-flex align-center"},Rg={key:0,class:"generating-pill"},jg={class:"original-text"},Mg={class:"actions-container ml-2",style:{position:"absolute",right:"30px"}},Og={key:0,class:"removing-indicator"},Vg={key:1,class:"d-flex align-center"},Bg={class:"star-container mr-2"},Ug={class:"title-container"},zg={key:0,class:"generating-pill"},Lg={class:"actions-container ml-2"},Hg={key:0,class:"removing-indicator"},Gg=Se({__name:"AIGenerator",props:{label:{type:String,required:!0},placeholder:{type:String,default:"No item generated"},generateFunction:{type:Function,required:!0},saveFunction:{type:Function,required:!0},showOriginal:{type:Boolean,default:!1},originalText:{type:String,default:""},initialValue:{type:String,default:""}},emits:["update"],setup(e,{emit:t}){const a=kt().t,n=ct(),r=e,o=t,s=W([]),i=W(0),d=W(!1),g=W(!1),f=W(!1),l=W(!1),u=W(null),m=W(!1),x=W("");wt(()=>{r.initialValue&&(s.value=[r.initialValue],i.value=0)}),be(()=>r.initialValue,$=>{$&&(!s.value.length||s.value[0]!==$)&&(s.value=[$],i.value=0)});const F=async()=>{d.value=!0,l.value=!1;try{const[$]=await Promise.all([r.generateFunction(),new Promise(_=>setTimeout(_,1500))]);await new Promise(_=>setTimeout(_,900)),s.value.push($),i.value=s.value.length-1,l.value=!0,setTimeout(()=>{l.value=!1},2e3)}catch($){n.rejectPromise({message:a("errors.ai_generate_error",{error:$})})}finally{C(),d.value=!1}};be(i,()=>{l.value=!1});const C=async()=>{if(!s.value.length||i.value<0)return;g.value=!0;const $=s.value[i.value];try{await new Promise(_=>setTimeout(_,1e3)),await r.saveFunction($),n.resolvePromise({message:a("notifications.item_saved")}),o("update",$)}catch(_){n.rejectPromise({message:a("errors.ai_generate_error",{error:_})})}finally{g.value=!1}},D=async()=>{if(!(!s.value.length||i.value<0)){f.value=!0,u.value=i.value;try{await new Promise($=>setTimeout($,300)),s.value.splice(u.value,1),n.resolvePromise({message:a("notifications.item_removed")}),i.value>=s.value.length&&(i.value=s.value.length-1),o("update",null)}catch($){n.rejectPromise({message:a("errors.ai_generate_error",{error:$})})}finally{f.value=!1,u.value=null}}};be(()=>m.value,$=>{$&&(x.value=s.value[i.value]||"")});const L=async()=>{if(x.value.trim())try{await r.saveFunction(x.value),s.value[i.value]=x.value,o("update",x.value),m.value=!1,n.resolvePromise({message:a("notifications.item_saved")})}catch{n.rejectPromise({message:a("errors.save_failed")})}};return($,_)=>(T(),q("div",null,[e.label?(T(),q(Ae,{key:0},[p("div",Fg,[z(j(e.label)+" ",1),p("div",Eg,[c(oe,{icon:"mdi-star-four-points",size:"x-small",class:we(["ml-0 mb-2 gemini-star",{"is-generating":d.value}])},null,8,["class"]),_[9]||(_[9]=p("div",{class:"generating-pill star-tooltip"},[p("span",{class:"generating-text"},[z("intal"),p("span",{style:{color:"rgb(var(--v-theme-secondary))"}},"AI")]),p("div",{class:"sparkle"})],-1))])]),p("div",Ng,[c(wu,{name:"fade",mode:"out-in"},{default:h(()=>[(T(),q("div",{class:"title-container",key:i.value},[d.value?(T(),q("div",Rg,_[10]||(_[10]=[p("span",{class:"generating-text"},"Genereren",-1),p("div",{class:"sparkle"},null,-1)]))):(T(),q("div",{key:1,class:we({"typewriter-container":l.value})},[r.showOriginal&&r.originalText?(T(),q(Ae,{key:0},[p("div",jg,j(r.originalText),1),c(vt,{class:"my-2 divider-style"})],64)):X("",!0),(T(!0),q(Ae,null,We(s.value[i.value]||e.placeholder,(S,k)=>(T(),q("span",{key:k,class:"typewriter-char"},j(S),1))),128))],2))]))]),_:1}),p("div",Mg,[c(oe,{icon:"mdi-pencil",size:"x-small",class:"mr-1 clickable action-icon",onClick:_[0]||(_[0]=S=>m.value=!0)}),c(oe,{icon:"mdi-close",size:"x-small",class:we(["mr-1 clickable action-icon",{"text-disabled":!s.value.length,"pulse-animation":f.value}]),onClick:D},{default:h(()=>[f.value?(T(),q("span",Og,"Removing...")):X("",!0)]),_:1},8,["class"]),c(oe,{icon:"mdi-arrow-left",size:"x-small",class:we(["mr-1 clickable",{"text-disabled":i.value<=0}]),onClick:_[1]||(_[1]=S=>i.value--)},null,8,["class"]),c(oe,{icon:"mdi-arrow-right",size:"x-small",class:we(["mr-1 clickable",{"text-disabled":i.value>=s.value.length-1}]),onClick:_[2]||(_[2]=S=>i.value++)},null,8,["class"]),c(oe,{icon:"mdi-refresh",size:"x-small",color:"primary",class:"clickable",onClick:F})])])],64)):(T(),q("div",Vg,[p("div",Bg,[c(oe,{icon:"mdi-star-four-points",size:"x-small",class:we(["gemini-star",{"is-generating":d.value}])},null,8,["class"]),_[11]||(_[11]=p("div",{class:"generating-pill star-tooltip"},[p("span",{class:"generating-text"},"intalAI"),p("div",{class:"sparkle"})],-1))]),p("div",Ug,[d.value?(T(),q("div",zg,_[12]||(_[12]=[p("span",{class:"generating-text"},"Genereren",-1),p("div",{class:"sparkle"},null,-1)]))):X("",!0)]),p("div",Lg,[c(oe,{icon:"mdi-pencil",size:"x-small",class:"mr-1 clickable action-icon",onClick:_[3]||(_[3]=S=>m.value=!0)}),c(oe,{icon:"mdi-close",color:"red",size:"x-small",class:we(["mr-1 clickable action-icon",{"text-disabled":!s.value.length,"pulse-animation":f.value}]),onClick:D},{default:h(()=>[f.value?(T(),q("span",Hg,"Removing...")):X("",!0)]),_:1},8,["class"]),c(oe,{icon:"mdi-arrow-left",size:"x-small",class:we(["mr-1 clickable",{"text-disabled":i.value<=0}]),onClick:_[4]||(_[4]=S=>i.value--)},null,8,["class"]),c(oe,{icon:"mdi-arrow-right",size:"x-small",class:we(["mr-1 clickable",{"text-disabled":i.value>=s.value.length-1}]),onClick:_[5]||(_[5]=S=>i.value++)},null,8,["class"]),c(oe,{icon:"mdi-refresh",size:"x-small",color:"primary",class:"clickable",onClick:F})])])),c(va,{modelValue:m.value,"onUpdate:modelValue":_[8]||(_[8]=S=>m.value=S),"max-width":"500px"},{default:h(()=>[c(Te,null,{default:h(()=>[c(Pt,null,{default:h(()=>[z(j(se(a)(`verbeterplein.showItem.edit.${e.label.toLowerCase()==="category"?"category":"summary"}`)),1)]),_:1}),c(Re,null,{default:h(()=>[c(Ot,{modelValue:x.value,"onUpdate:modelValue":_[6]||(_[6]=S=>x.value=S),label:e.label,variant:"outlined","hide-details":""},null,8,["modelValue","label"])]),_:1}),c(Nt,null,{default:h(()=>[c(Dt),c(ge,{color:"primary",variant:"text",onClick:_[7]||(_[7]=S=>m.value=!1)},{default:h(()=>[z(j(se(a)("common.cancel")),1)]),_:1}),c(ge,{color:"primary",onClick:L},{default:h(()=>[z(j(se(a)("common.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Zs=dt(Gg,[["__scopeId","data-v-e173bc0a"]]),Wg={class:"info-header",style:{"font-size":"1.2rem"}},Jg={class:"info-header__content"},qg={class:"info-header__primary"},Kg={class:"info-header__id"},Yg={class:"info-header__project flex-grow-1 d-flex justify-center"},Qg={key:0,class:"project-content"},Zg={key:0,class:"info-header__secondary"},Xg={class:"project-name"},e1={key:1,class:"project-content"},t1={class:"info-header__id"},a1={class:"info-header__project flex-grow-1 d-flex justify-center"},n1={key:0,class:"project-content"},r1={key:0,class:"info-header__secondary"},o1={class:"project-name"},s1={key:1,class:"project-content"},i1={class:"tabs-container"},l1={class:"tab-content"},u1={class:"d-flex align-start"},d1={class:"d-flex align-center"},c1={class:"ml-auto"},f1={class:"d-flex mt-9 gap-8"},m1={class:"flex-grow-1"},p1={class:"d-flex flex-column mb-4"},v1={class:"text-h5"},h1={class:"text-caption"},g1={class:"d-flex flex-column mt-4"},y1={class:"text-h5"},b1={class:"text-caption"},w1={class:"flex-grow-1"},_1={class:"d-flex flex-column mb-4"},C1={class:"text-h5"},x1={class:"text-caption"},S1={class:"d-flex flex-column mt-4"},D1={class:"text-h5"},k1={class:"text-caption"},A1={class:"d-flex flex-column mt-9 mb-5 gap-8"},P1={class:"d-flex flex-column mt-4 mr-0"},I1={class:"mt-6"},T1={class:"text-h5 mb-2"},$1={key:0,class:"gradient-overlay"},F1={class:"d-flex align-start"},E1={class:"d-flex align-center"},N1={class:"ml-auto"},R1={class:"d-flex align-center justify-space-between mt-3 mb-0"},j1={class:"d-flex flex-column"},M1={class:"text-h5 mt-5"},O1={class:"text-caption"},V1={class:"d-flex align-center justify-space-between mt-0 mb-4"},B1={class:"d-flex flex-column"},U1={class:"text-h5 mt-5"},z1={class:"text-caption"},L1={class:"d-flex flex-column"},H1={class:"text-h5 mt-5"},G1={class:"text-caption"},W1={class:"d-flex align-center justify-space-between mt-0 mb-2"},J1={class:"text-h5 mt-1"},q1={class:"d-flex align-center justify-space-between mt-0 mb-2"},K1={class:"d-flex flex-column"},Y1={class:"text-h5 mt-2"},Q1={key:0,class:"gradient-overlay"},Z1={class:"mt-auto"},X1={class:"d-flex align-center justify-space-between mb-4"},ey={class:"d-flex align-center"},ty={class:"text-h5"},ay={class:"d-flex align-start"},ny={class:"d-flex align-center"},ry={key:0,class:"ml-auto"},oy={key:0,class:"d-flex flex-column"},sy={class:"d-flex align-center justify-space-between mt-3 mb-0"},iy={class:"d-flex flex-column"},ly={class:"text-h5 mt-5"},uy={class:"text-caption"},dy={class:"d-flex align-center justify-space-between mt-0 mb-4"},cy={class:"d-flex flex-column"},fy={class:"text-h5 mt-5"},my={class:"text-caption"},py={class:"d-flex align-center justify-space-between mt-0 mb-4"},vy={class:"d-flex flex-column"},hy={class:"text-h5 mt-5"},gy={class:"text-caption"},yy={key:0,class:"d-flex flex-column"},by={class:"text-h5 mt-5"},wy={class:"text-caption"},_y={key:0,class:"d-flex flex-column"},Cy={class:"text-h5 mt-2"},xy={class:"text-caption"},Sy={key:1,class:"d-flex flex-column mt-5"},Dy={class:"text-h5"},ky={class:"text-caption"},Ay={class:"mt-auto"},Py={class:"d-flex align-center justify-space-between mb-4"},Iy={class:"d-flex align-center"},Ty={class:"text-h5"},$y={key:1},Fy={class:"empty-pdca-state"},Ey={class:"empty-state-content"},Ny={class:"icon-wrapper"},Ry={class:"text-body-1"},jy={class:"tab-content"},My={class:"tab-content chatWindow"},Oy={class:"tab-content"},Vy={class:"tab-content"},By=Se({__name:"meldingItem",props:{modelValue:Boolean,item:{type:Object,default:()=>({})},showCorrespondence:{type:Boolean,default:!1},showQuestions:{type:Boolean,default:!1},showEdit:{type:Boolean,default:!1},showOps:{type:Boolean,default:!1},showPdca:{type:Boolean,default:!1},showCorrectiefCorrespondence:{type:Boolean,default:!1},showPreventiefCorrespondence:{type:Boolean,default:!1},showPreventief:{type:Boolean,default:!0},showCorrectiefEdit:{type:Boolean,default:!1},initialTab:{type:String,default:"melding"},openedFromMode:{type:String,required:!1}},emits:["update:modelValue","update","open:correctiefEdit","open:correspondence","open:correspondence:pdca","open:pdca","open:openEditObstakel","open:editPdca","open:imageGallery","open:item","open:questions","open:edit","open:newAction","open:editAction"],setup(e,{emit:t}){const a=Ko(),n=es(),r=Kt(),o=Bi(),s=Ui(),i=ct(),d=Vi(),g=ga(),f=to(),l=kn(),u=ha(),{t:m}=kt(),x=Xr(),F=W(!1),C=W(!1),D=te(()=>{var Y,Q,ne;return(ne=(Q=(Y=H.item)==null?void 0:Y.Preventief)==null?void 0:Q.Teamleden)!=null&&ne.IDs?H.item.Preventief.Teamleden.IDs.map(re=>g.getActiehouderById(re)):[]}),L=W(!1),$=W(!1),_=W(!1),S=W("melding"),k=W(!1),O=W(!1),w=W(!1),y=W(!1),M=W(!1),E=W([]),R=W(0),I=W([]),P=W(0),A=W([]),v=te(()=>{var Q;return(((Q=H.item)==null?void 0:Q.Obstakel)||"").length>200}),b=te(()=>{var Q,ne;return(((ne=(Q=H.item)==null?void 0:Q.Correctief)==null?void 0:ne.Oplossing)||"").length>200}),V=te(()=>{var Y,Q,ne,re;return(Q=(Y=H.item)==null?void 0:Y.Preventief)!=null&&Q.Melding?(re=(ne=H.item)==null?void 0:ne.Preventief)==null?void 0:re.Melding:[]}),B=(Y,Q)=>{Q&&Q.stopPropagation(),b.value&&(!C.value&&Y==="hover"?(F.value=!0,C.value=!0):C.value&&Y==="click"&&(F.value=!F.value))},J=(Y,Q)=>{Q&&Q.stopPropagation(),v.value&&(!_.value&&Y==="hover"?($.value=!0,_.value=!0):_.value&&Y==="click"&&($.value=!$.value))},H=e,N=te(()=>a.global.current.value.dark),G=()=>{var re;const Y=((re=H.item)==null?void 0:re.id)||"",Q=Ys.getCachedTitles(Y)||[],ne=Ys.getCachedCategories(Y)||[];E.value=Q,R.value=Math.max(0,Q.length-1),I.value=ne,P.value=Math.max(0,ne.length-1)},K=async()=>{var ne,re;u.initialized||await u.initializeData();const Y=u.getStatusByName("Afgerond"),Q=(re=(ne=H.item)==null?void 0:ne.Preventief)==null?void 0:re.id;if(!Q){console.warn("Preventief ID not found when trying to mark PD as done.");return}if(!(Y!=null&&Y.id)){console.warn('Status "Afgerond" not found.');return}console.log(`Attempting to set status for Preventief ${Q} to "Afgerond" (${Y.id})`);try{const ae=await l.updatePreventief(Q,{StatusID:Y.id});(ae==null?void 0:ae.status)===200?(console.log(`Successfully updated status for Preventief ${Q} to Afgerond`),tt("update",[!0,!0])):console.error("Failed to update preventief status to Afgerond:",ae)}catch(ae){console.error("Error updating preventief status to Afgerond:",ae)}},Z=async Y=>await up(Y||"No obstacle description provided"),le=async Y=>{var Q;(Q=H.item)!=null&&Q.id&&await Ie(Y)},ye=async Y=>{var Q;(Q=H.item)!=null&&Q.id&&await Ve(Y)},Ce=W(!1),Ie=async Y=>{var Q;i.promise({message:m("notifications.saving_title")});try{y.value=!0,(Q=H.item)!=null&&Q.id&&(await r.updateReport(H.item.id,{Title:Y}),Ce.value=!0,i.resolvePromise({message:m("notifications.title_saved")}))}catch(ne){i.rejectPromise({message:m("errors.title_error",{error:ne})})}finally{y.value=!1}},Ve=async Y=>{var Q;i.promise({message:m("notifications.saving_category")});try{M.value=!0,(Q=H.item)!=null&&Q.id&&(await r.updateReport(H.item.id,{Category:Y}),Ce.value=!0,i.resolvePromise({message:m("notifications.category_saved")}))}catch(ne){i.rejectPromise({message:m("errors.category_error",{error:ne})})}finally{M.value=!1}},Ke=()=>{var Y,Q;(Q=(Y=H.item)==null?void 0:Y.CloneIds)!=null&&Q.IDs&&(A.value=r.reports.filter(ne=>{var re,ae;return(ae=(re=H.item)==null?void 0:re.CloneIds)==null?void 0:ae.IDs.includes(ne.id)}).map(ne=>ne.VolgNummer))},He={melding:"melding",chat:"communicatie",pdca:"pdca",history:"historie",engagement:"engagement"};be(()=>H.modelValue,async Y=>{var Q,ne,re,ae,me,De,Ee,Ze,ee,U,de,ce,fe,ve;if(w.value=Y,Y){const _e=(Q=H.initialTab)==null?void 0:Q.toLowerCase();if(_e==="pdca"){if(((re=(ne=H.item)==null?void 0:ne.Preventief)==null?void 0:re.rootCauseLevel)!==2&&((me=(ae=H.item)==null?void 0:ae.Preventief)==null?void 0:me.rootCauseLevel)!==null&&((Ee=(De=H.item)==null?void 0:De.Preventief)==null?void 0:Ee.rootCauseLevel)!==void 0){S.value="melding",ea.error({message:m("errors.no_pdca_available")});return}if(!((Ze=H.item)!=null&&Ze.PDCA)||!((U=(ee=H.item)==null?void 0:ee.Preventief)!=null&&U.id)){S.value="melding",ea.error({message:m("errors.no_pdca_available")});return}}if(_e==="engagement"&&!((de=H.item)!=null&&de.id)){S.value="melding",ea.error({message:m("errors.no_engagement_available")});return}if(_e==="historie"&&(!((ce=H.item)!=null&&ce.id)||!o.currentHistory.length)){S.value="melding",ea.error({message:m("errors.no_history_available")});return}_e&&He[_e]?S.value=He[_e]:S.value="melding",F.value=!1,$.value=!1,C.value=!1,_.value=!1,(ve=(fe=H.item)==null?void 0:fe.Correctief)!=null&&ve.id&&await f.fetchTasksByCorrectief(H.item.Correctief.id)}},{immediate:!0,deep:!0}),be(()=>H.item,async(Y,Q)=>{var ne,re,ae,me,De,Ee;if((Y==null?void 0:Y.id)!==(Q==null?void 0:Q.id)&&d.resetState(),Y)if(Ke(),G(),Y!=null&&Y.Correctief?(k.value=Y.Correctief.AkoordOPS,(ne=Y==null?void 0:Y.Correctief)!=null&&ne.id&&await f.fetchTasksByCorrectief(Y.Correctief.id),(re=Y==null?void 0:Y.Preventief)!=null&&re.id&&await f.fetchTasksByPreventief(Y.Preventief.id)):k.value=!1,Y!=null&&Y.id){const Ze=Y.id!==(Q==null?void 0:Q.id)||o.currentHistory.length===0,ee=Y.id!==s.currentMeldingId,U=[];Ze&&U.push(o.getHistory(Y.id,(ae=Y==null?void 0:Y.Preventief)==null?void 0:ae.id,(me=Y==null?void 0:Y.Correctief)==null?void 0:me.id)),ee&&U.push(s.fetchAnalyticsData(Y.id,(De=Y==null?void 0:Y.Preventief)==null?void 0:De.id,(Ee=Y==null?void 0:Y.Correctief)==null?void 0:Ee.id)),U.length>0&&await Promise.all(U)}else!(Y!=null&&Y.id)&&(Q!=null&&Q.id)&&(o.currentHistory=[],s.resetState());else G(),o.currentHistory=[],s.resetState()},{immediate:!0}),be(()=>{var Y,Q;return(Q=(Y=H.item)==null?void 0:Y.Correctief)==null?void 0:Q.AkoordOPS},Y=>{typeof Y=="boolean"&&O.value!==Y&&(O.value=Y)},{immediate:!0});const It=Y=>{L.value=!1,Y||(F.value=!1,$.value=!1,C.value=!1,_.value=!1,d.resetState(),Ce.value&&(tt("update",[!0,!0]),Ce.value=!1)),w.value=Y,tt("update:modelValue",Y)},_t=()=>{tt("open:correspondence")},Ge=()=>{tt("open:correspondence:pdca")},rt=()=>{tt("open:questions")},Ue=()=>{tt("open:edit")},Be=()=>{tt("open:openEditObstakel")},Ye=()=>{tt("open:editPdca")},ot=(Y,Q)=>{tt("open:imageGallery",[Y,Q])},Qe=()=>{tt("open:correctiefEdit")},Ct=async(Y,Q=!1)=>{if(tt("update:modelValue",!1),await new Promise(ne=>setTimeout(ne,100)),Q)tt("open:item",Y);else{const ne=r.getReportByVolgNummer(Y);ne?(r.setSelectedFormId(ne.id),r.setSelectedForm(ne),w.value=!1,await At(),await x.push({path:`/verbeterplein/melding/${Y}`,replace:!0})):ea.error({message:m("errors.report_not_found",{volgnummer:Y})})}},Fe=async()=>{var Y,Q,ne,re;if(i.promise({message:m("notifications.saving_ops")}),(Q=(Y=H.item)==null?void 0:Y.Correctief)!=null&&Q.id)try{const ae=O.value;if(!ae||((re=(ne=H.item)==null?void 0:ne.Correctief)==null?void 0:re.Faalkosten)>=0){const me=await n.updateCorrectief(H.item.Correctief.id,{AkoordOPS:ae});(me==null?void 0:me.status)===200?(O.value=ae,await Promise.all([r.fetchReports(!0),n.fetchCorrectief()]),tt("update",[!0,!0]),i.resolvePromise({message:m("notifications.ops_saved")})):(O.value=!ae,i.rejectPromise({message:m("errors.save_failed")}))}else O.value=!1,i.rejectPromise({message:m("errors.correctief_error_faalkosten")})}catch{O.value=!O.value,i.rejectPromise({message:m("errors.save_failed")})}else O.value=!1,i.rejectPromise({message:m("errors.correctief_not_found")})},ze=()=>{tt("open:pdca")},mt=async()=>{var Y;return await dp(((Y=H.item)==null?void 0:Y.Obstakel)||"No obstacle description provided")},Bt=()=>{var Y;return(Y=H.item)!=null&&Y.VolgNummer?`/verbeterplein/melding/${H.item.VolgNummer}`:null},ya=async()=>{const Y=Bt();if(Y)try{await navigator.clipboard.writeText(window.location.origin+Y),i.info({message:m("notifications.copied_to_clipboard")})}catch{i.error({message:m("errors.copy_failed")})}};be(()=>S.value,Y=>{var Q,ne,re,ae,me;if(Y==="pdca"&&((ne=(Q=H.item)==null?void 0:Q.Preventief)==null?void 0:ne.rootCauseLevel)!==2&&((re=H.item)==null?void 0:re.PDCA)===!1){S.value="melding",ea.error({message:m("errors.no_pdca_available")});return}if(Y==="communicatie"&&((ae=H.item)!=null&&ae.id)){r.selectedFormId=H.item.id;const De=r.getReportById(H.item.id);(me=De==null?void 0:De.ChatRoom)!=null&&me.id&&(d.setCurrentChatRoom(De.ChatRoom.id),d.fetchMessages())}Y==="engagement"&&!pt.value&&(S.value="melding",ea.error({message:m("errors.no_engagement_available")}))});const lt=async()=>{var re,ae,me,De,Ee,Ze;u.initialized||await u.initializeData();const Y=u.getStatusByName("In behandeling"),Q=u.getStatusByName("Open"),ne=(ae=(re=H.item)==null?void 0:re.Preventief)==null?void 0:ae.id;if(!ne){console.warn("Preventief ID not found when trying to update status.");return}if(!(Y!=null&&Y.id)){console.warn('Status "In behandeling" not found.');return}if(!Q||((De=(me=H.item)==null?void 0:me.Preventief)==null?void 0:De.StatusID)!==Q.id){console.log(`[handlePreventiveTaskCreated] Skipping status update. Current status ID: ${(Ze=(Ee=H.item)==null?void 0:Ee.Preventief)==null?void 0:Ze.StatusID} is not 'Open' (${Q==null?void 0:Q.id})`);return}console.log(`[handlePreventiveTaskCreated] Current Status is 'Open'. Updating Preventief ${ne} status to 'In behandeling' (${Y.id}).`);try{const ee=await l.updatePreventief(ne,{StatusID:Y.id});(ee==null?void 0:ee.status)===200?tt("update",[!0,!0]):console.error("Failed to update preventief status:",ee)}catch(ee){console.error("Error updating preventief status:",ee)}},tt=t,pt=te(()=>Qr([{action:"MANAGE",resourceType:"ALL"}]));return(Y,Q)=>(T(),ie(pr,{modelValue:w.value,"onUpdate:modelValue":[Q[10]||(Q[10]=ne=>w.value=ne),It],"max-width":1500,"show-actions":!1,editingButton:e.showEdit,onOpenEdit:Ue,persistent:!1},{default:h(()=>{var ne,re,ae,me,De,Ee,Ze,ee,U,de,ce,fe,ve,_e,pe,ke,Le,ht,$t,at,Yt;return[p("div",{class:"dialog-wrapper",onClick:Q[9]||(Q[9]=Aa(()=>{},["stop"]))},[p("div",Wg,[p("div",Jg,[p("div",qg,[e.openedFromMode!=="PDCA"?(T(),q(Ae,{key:0},[p("div",Kg,[Q[11]||(Q[11]=p("img",{src:Tr,class:"mr-2"},null,-1)),p("span",null,j(((ne=e.item)==null?void 0:ne.VolgNummer)||"N/A"),1)]),p("div",Yg,[((ae=(re=e.item)==null?void 0:re.Project)==null?void 0:ae.NumberID)!==1?(T(),q("div",Qg,[c(oe,{color:"primary",size:"small"},{default:h(()=>Q[12]||(Q[12]=[z("mdi-office-building-outline")])),_:1,__:[12]}),p("span",null,j((De=(me=e.item)==null?void 0:me.Project)==null?void 0:De.NumberID),1),p("span",null,"DO"+j(((Ee=e.item)==null?void 0:Ee.Deelorder)||"N/A"),1),(ee=(Ze=e.item)==null?void 0:Ze.Project)!=null&&ee.ProjectNaam?(T(),q("div",Zg,[p("span",Xg,j((de=(U=e.item)==null?void 0:U.Project)==null?void 0:de.ProjectNaam),1)])):X("",!0)])):(T(),q("div",e1,[c(oe,{color:"primary",size:"small"},{default:h(()=>Q[13]||(Q[13]=[z("mdi-information-outline")])),_:1,__:[13]}),Q[14]||(Q[14]=p("div",{class:"info-header__secondary"},[p("span",{class:"project-name"},"Algemene melding")],-1))]))])],64)):(T(),q(Ae,{key:1},[p("div",t1,[Q[15]||(Q[15]=p("img",{src:Tr,class:"mr-2"},null,-1)),p("span",null,"Melding: "+j(((ce=e.item)==null?void 0:ce.VolgNummer)||"N/A"),1)]),p("div",a1,[((ve=(fe=e.item)==null?void 0:fe.Project)==null?void 0:ve.NumberID)!==1?(T(),q("div",n1,[c(oe,{color:"primary",size:"small"},{default:h(()=>Q[16]||(Q[16]=[z("mdi-office-building-outline")])),_:1,__:[16]}),p("span",null,j((pe=(_e=e.item)==null?void 0:_e.Project)==null?void 0:pe.NumberID),1),p("span",null,"DO"+j(((ke=e.item)==null?void 0:ke.Deelorder)||"N/A"),1),(ht=(Le=e.item)==null?void 0:Le.Project)!=null&&ht.ProjectNaam?(T(),q("div",r1,[p("span",o1,j((at=($t=e.item)==null?void 0:$t.Project)==null?void 0:at.ProjectNaam),1)])):X("",!0)])):(T(),q("div",s1,[c(oe,{color:"primary",size:"small"},{default:h(()=>Q[17]||(Q[17]=[z("mdi-information-outline")])),_:1,__:[17]}),Q[18]||(Q[18]=p("div",{class:"info-header__secondary"},[p("span",{class:"project-name"},"Algemene melding")],-1))]))])],64)),c(ge,{icon:"mdi-share-variant",size:"small",variant:"text",color:"primary",onClick:ya,disabled:!((Yt=e.item)!=null&&Yt.VolgNummer)},null,8,["disabled"])])])]),p("div",i1,[c(Yo,{modelValue:S.value,"onUpdate:modelValue":Q[0]||(Q[0]=ut=>S.value=ut),centered:"",color:"primary","fixed-tabs":""},{default:h(()=>{var ut,ue,xe,Me,Tt;return[c(oa,{value:"melding"},{default:h(()=>[c(oe,{start:""},{default:h(()=>Q[19]||(Q[19]=[z("mdi-information-outline")])),_:1,__:[19]}),z(" "+j(Y.$t("verbeterplein.showItem.tabs.report")),1)]),_:1}),c(oa,{value:"pdca",disabled:!((ue=(ut=e.item)==null?void 0:ut.Preventief)!=null&&ue.id&&((Me=(xe=e.item)==null?void 0:xe.Preventief)==null?void 0:Me.rootCauseLevel)!==1&&((Tt=e.item)==null?void 0:Tt.PDCA)===!0)},{default:h(()=>[c(oe,{start:""},{default:h(()=>Q[20]||(Q[20]=[z("mdi-alpha-p-circle-outline ")])),_:1,__:[20]}),z(" "+j(Y.$t("verbeterplein.showItem.tabs.pdca")),1)]),_:1},8,["disabled"]),c(oa,{value:"communicatie",class:"position-relative"},{default:h(()=>[c(oe,{start:"",variant:"outline"},{default:h(()=>Q[21]||(Q[21]=[z("mdi-message-outline")])),_:1,__:[21]}),z(j(Y.$t("verbeterplein.showItem.tabs.communication")),1)]),_:1}),c(oa,{value:"historie",disabled:se(o).loading||!se(o).currentHistory.length||se(o).currentHistory.length===0},{default:h(()=>[c(oe,{start:""},{default:h(()=>Q[22]||(Q[22]=[z("mdi-history")])),_:1,__:[22]}),z(" "+j(Y.$t("verbeterplein.showItem.tabs.history"))+" ",1),se(o).loading?(T(),ie(ia,{key:0,indeterminate:"",size:"16",width:"2",color:"primary",class:"ml-2"})):X("",!0)]),_:1},8,["disabled"]),pt.value?(T(),ie(oa,{key:0,value:"engagement",disabled:se(s).loading||!!se(s).error||!se(s).hasData},{default:h(()=>[c(oe,{start:""},{default:h(()=>Q[23]||(Q[23]=[z("mdi-chart-line")])),_:1,__:[23]}),z(" "+j(Y.$t("verbeterplein.showItem.tabs.engagement"))+" ",1),se(s).loading?(T(),ie(ia,{key:0,indeterminate:"",size:"16",width:"2",color:"secondary",class:"ml-2"})):X("",!0)]),_:1},8,["disabled"])):X("",!0)]}),_:1},8,["modelValue"]),c(vt)]),c(Zr,{modelValue:S.value,"onUpdate:modelValue":Q[8]||(Q[8]=ut=>S.value=ut),class:"window-container",touch:!1},{default:h(()=>[c(sa,{value:"melding"},{default:h(()=>[p("div",l1,[c(yt,null,{default:h(()=>[c(qe,{cols:"12",md:"12",class:"d-flex"},{default:h(()=>[c(Te,{variant:"outlined",class:"card-hover-border bg-gray100 flex-grow-1"},{default:h(()=>[c(Re,null,{default:h(()=>{var ut;return[p("div",u1,[p("div",d1,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>Q[24]||(Q[24]=[z("mdi-office-building")])),_:1,__:[24]}),Q[25]||(Q[25]=p("h3",null,"OBSTAKELGEGEVENS",-1))]),p("div",c1,[c(ge,{icon:"mdi-pencil",variant:"text",density:"compact",size:"small",onClick:Be})])]),c(vt,{class:"mt-4 mb-4",thickness:"2"}),c(yt,null,{default:h(()=>[c(qe,{cols:"12",md:"6"},{default:h(()=>{var ue,xe,Me,Tt,Ut,zt,Lt,Ht,Gt,Wt,xt,la;return[p("div",f1,[p("div",m1,[p("div",p1,[p("div",v1,j(Y.$t("verbeterplein.showItem.fields.project_number")),1),p("div",h1,j((xe=(ue=e.item)==null?void 0:ue.Project)!=null&&xe.NumberID||((Tt=(Me=e.item)==null?void 0:Me.Project)==null?void 0:Tt.NumberID)===0?(zt=(Ut=e.item)==null?void 0:Ut.Project)==null?void 0:zt.NumberID:Y.$t("verbeterplein.showItem.placeholders.na")),1)]),p("div",g1,[p("div",y1,j(Y.$t("verbeterplein.showItem.fields.project_name")),1),p("div",b1,j(((Ht=(Lt=e.item)==null?void 0:Lt.Project)==null?void 0:Ht.ProjectNaam)||Y.$t("verbeterplein.showItem.placeholders.na")),1)])]),p("div",w1,[p("div",_1,[p("div",C1,j(Y.$t("verbeterplein.showItem.fields.sub_order")),1),p("div",x1,j(((Gt=e.item)==null?void 0:Gt.Deelorder)||Y.$t("verbeterplein.showItem.placeholders.na")),1)]),p("div",S1,[p("div",D1,j(Y.$t("verbeterplein.showItem.fields.project_team")),1),p("div",k1,j(((la=(xt=(Wt=e.item)==null?void 0:Wt.Project)==null?void 0:xt.ProjectLeider)==null?void 0:la.Name)||Y.$t("verbeterplein.showItem.placeholders.na")),1)])])])]}),_:1}),c(qe,{cols:"12",md:"6"},{default:h(()=>{var ue,xe;return[p("div",A1,[c(Zs,{label:Y.$t("verbeterplein.showItem.fields.summary"),placeholder:Y.$t("verbeterplein.showItem.placeholders.no_summary"),"generate-function":()=>{var Me;return Z((Me=e.item)==null?void 0:Me.Obstakel)},"save-function":Ie,onUpdate:le,"show-original":!0,"initial-value":(ue=e.item)==null?void 0:ue.Title},null,8,["label","placeholder","generate-function","initial-value"])]),p("div",P1,[c(Zs,{label:Y.$t("verbeterplein.showItem.fields.category"),placeholder:Y.$t("verbeterplein.showItem.placeholders.no_category"),"generate-function":mt,"save-function":Ve,onUpdate:ye,"initial-value":(xe=e.item)==null?void 0:xe.Category},null,8,["label","placeholder","initial-value"])])]}),_:1})]),_:1}),p("div",I1,[p("div",T1,j(Y.$t("verbeterplein.showItem.fields.obstacle")),1),p("div",{class:"text-caption expandable-text",onClick:Q[1]||(Q[1]=ue=>J("click",ue)),onMouseenter:Q[2]||(Q[2]=ue=>J("hover",ue)),style:jn({maxHeight:v.value?$.value?"none":"100px":"none",overflow:v.value?"hidden":"visible",position:"relative",cursor:_.value?"pointer":"default"})},[z(j(((ut=e.item)==null?void 0:ut.Obstakel)||Y.$t("verbeterplein.showItem.placeholders.no_obstacle"))+" ",1),v.value&&!$.value?(T(),q("div",$1)):X("",!0)],36)])]}),_:1})]),_:1})]),_:1})]),_:1}),Q[40]||(Q[40]=p("div",{class:"d-flex justify-center align-center mt-8 mb-5"},[p("img",{src:Tr,class:"mr-2"}),p("h3",null,"VERBETERINGEN")],-1)),c(yt,{class:"d-flex flex-row"},{default:h(()=>{var ut,ue,xe;return[(ut=e.item)!=null&&ut.Correctief?(T(),ie(qe,{key:0,cols:"12",md:"6",class:"d-flex"},{default:h(()=>[c(Te,{variant:"outlined",class:"card-hover-border bg-lightprimary flex-grow-1"},{default:h(()=>[c(Re,{class:"d-flex flex-column justify-space-between"},{default:h(()=>{var Me,Tt,Ut,zt,Lt,Ht,Gt,Wt,xt,la,Ba,Ua,za,La,Ha,Ga,Wa,Ja,qa,Ka,Ya,Qa,Za,Xa,en;return[p("div",null,[p("div",F1,[p("div",E1,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>Q[26]||(Q[26]=[z("mdi-flash")])),_:1,__:[26]}),Q[27]||(Q[27]=p("h3",null,"CORRECTIEF",-1))]),p("div",N1,[c(ge,{size:"medium",variant:"text",onClick:Qe},{default:h(()=>[c(oe,null,{default:h(()=>Q[28]||(Q[28]=[z("mdi-pencil")])),_:1,__:[28]})]),_:1})])]),c(vt,{class:"mt-4 mb-0",thickness:"2"}),p("div",R1,[p("div",j1,[p("div",M1,j(Y.$t("verbeterplein.showItem.fields.action_holder")),1),p("div",O1,j(((Ut=(Tt=(Me=e.item)==null?void 0:Me.Correctief)==null?void 0:Tt.User)==null?void 0:Ut.Name)||"N/A"),1)]),(Ht=(Lt=(zt=e.item)==null?void 0:zt.Correctief)==null?void 0:Lt.Status)!=null&&Ht.StatusNaam?(T(),ie(et,{key:0,class:"mt-0",color:((xt=(Wt=(Gt=e.item)==null?void 0:Gt.Correctief)==null?void 0:Wt.Status)==null?void 0:xt.StatusColor)??"grey",dark:"",elevation:"1",density:"comfortable"},{default:h(()=>{var St,tn,an;return[p("p",{class:we({blacktext:!N.value,whitetext:N.value})},j((an=(tn=(St=e.item)==null?void 0:St.Correctief)==null?void 0:tn.Status)==null?void 0:an.StatusNaam),3)]}),_:1},8,["color"])):(T(),ie(et,{key:1,color:"grey",dark:"",density:"comfortable"},{default:h(()=>Q[29]||(Q[29]=[z(" N/A ")])),_:1,__:[29]}))]),p("div",V1,[p("div",B1,[p("div",U1,j(Y.$t("verbeterplein.showItem.fields.deadline")),1),p("div",z1,j((Ba=(la=e.item)==null?void 0:la.Correctief)!=null&&Ba.Deadline?se(aa)((za=(Ua=e.item)==null?void 0:Ua.Correctief)==null?void 0:za.Deadline):"N/A"),1)]),p("div",L1,[p("div",H1,j(Y.$t("verbeterplein.showItem.fields.fail_costs")),1),p("div",G1,j(((Ha=(La=e.item)==null?void 0:La.Correctief)==null?void 0:Ha.Faalkosten)===0||(Wa=(Ga=e.item)==null?void 0:Ga.Correctief)!=null&&Wa.Faalkosten&&((qa=(Ja=e.item)==null?void 0:Ja.Correctief)==null?void 0:qa.Faalkosten)>=0?`â‚¬ ${Number((Ya=(Ka=e.item)==null?void 0:Ka.Correctief)==null?void 0:Ya.Faalkosten)}`:Y.$t("verbeterplein.showItem.placeholders.na")),1)])]),p("div",W1,[p("div",J1,j(Y.$t("verbeterplein.showItem.fields.approval")),1),c(_u,{modelValue:O.value,"onUpdate:modelValue":Q[3]||(Q[3]=St=>O.value=St),label:O.value?Y.$t("verbeterplein.showItem.fields.approval_yes"):Y.$t("verbeterplein.showItem.fields.approval_no"),color:"success","hide-details":"",onChange:Fe},null,8,["modelValue","label"])])]),p("div",q1,[p("div",K1,[p("div",Y1,j(Y.$t("verbeterplein.showItem.fields.solution")),1),p("div",{class:"text-caption expandable-text",onClick:Q[4]||(Q[4]=St=>B("click",St)),onMouseenter:Q[5]||(Q[5]=St=>B("hover",St)),style:jn({maxHeight:b.value?F.value?"none":"100px":"none",overflow:b.value?"hidden":"visible",position:"relative",cursor:C.value?"pointer":"default"})},[z(j(((Za=(Qa=e.item)==null?void 0:Qa.Correctief)==null?void 0:Za.Oplossing)||Y.$t("verbeterplein.showItem.placeholders.no_solution"))+" ",1),b.value&&!F.value?(T(),q("div",Q1)):X("",!0)],36)])]),c(vt,{thickness:"2",class:"mt-4"}),c(Bo,{item:e.item,title:"Correctieve acties",id:(en=(Xa=e.item)==null?void 0:Xa.Correctief)==null?void 0:en.id,type:"correctief"},null,8,["item","id"]),p("div",Z1,[p("div",X1,[p("div",ey,[c(oe,{color:"primary",size:"24",class:"mr-2"},{default:h(()=>Q[30]||(Q[30]=[z("mdi-paperclip")])),_:1,__:[30]}),p("div",ty,j(Y.$t("verbeterplein.showItem.fields.attachments")),1)]),c(ge,{color:"primary",variant:"tonal",size:"small","prepend-icon":"mdi-plus",onClick:_t,class:"attachment-add-btn"},{default:h(()=>Q[31]||(Q[31]=[z(" Bijlage toevoegen ")])),_:1,__:[31]})]),c(Oo,{clickedItem:e.item,PDCA:!1,onOpenImageGallery:ot,onUpdate:Q[6]||(Q[6]=St=>Y.$emit("update",[!0,!0]))},null,8,["clickedItem"])])]}),_:1})]),_:1})]),_:1})):X("",!0),c(qe,{cols:"12",md:(ue=e.item)!=null&&ue.Correctief?6:8,class:we(["d-flex",{"mx-auto":!((xe=e.item)!=null&&xe.Correctief)}])},{default:h(()=>{var Me,Tt,Ut,zt;return[c(Te,{variant:"outlined",class:we(["card-hover-border flex-grow-1",{"bg-simplePDCA":((Tt=(Me=e.item)==null?void 0:Me.Preventief)==null?void 0:Tt.rootCauseLevel)===1,"bg-lightsecondary":((zt=(Ut=e.item)==null?void 0:Ut.Preventief)==null?void 0:zt.rootCauseLevel)!==1}])},{default:h(()=>[c(Re,{class:"d-flex flex-column justify-space-between"},{default:h(()=>{var Lt,Ht,Gt,Wt,xt,la,Ba,Ua,za,La,Ha,Ga,Wa,Ja,qa,Ka,Ya,Qa,Za,Xa,en,St,tn,an,Wn,Cs,xs,Ss,Ds,ks,As,Ps,Is;return[p("div",null,[p("div",ay,[p("div",ny,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>Q[32]||(Q[32]=[z("mdi-shield")])),_:1,__:[32]}),p("h3",null,"PREVENTIEF "+j((Ht=(Lt=e.item)==null?void 0:Lt.Preventief)!=null&&Ht.VolgNummer?`- (${(Wt=(Gt=e.item)==null?void 0:Gt.Preventief)==null?void 0:Wt.VolgNummer})`:""),1)]),(la=(xt=e.item)==null?void 0:xt.Preventief)!=null&&la.id?(T(),q("div",ry,[c(ge,{size:"medium",variant:"text",onClick:Ye},{default:h(()=>[c(oe,null,{default:h(()=>Q[33]||(Q[33]=[z("mdi-pencil")])),_:1,__:[33]})]),_:1})])):X("",!0)]),c(vt,{class:"mt-4 mb-0",thickness:"2"}),(Ua=(Ba=e.item)==null?void 0:Ba.Preventief)!=null&&Ua.id?(T(),q("section",oy,[p("div",sy,[p("div",iy,[p("div",ly,j(Y.$t("verbeterplein.showItem.fields.action_holder")),1),p("div",uy,j(((Ha=(La=(za=e.item)==null?void 0:za.Preventief)==null?void 0:La.User)==null?void 0:Ha.Name)||"N/A"),1)]),(Ja=(Wa=(Ga=e.item)==null?void 0:Ga.Preventief)==null?void 0:Wa.Status)!=null&&Ja.StatusNaam?(T(),ie(et,{key:0,class:"mt-0",color:((Ya=(Ka=(qa=e.item)==null?void 0:qa.Preventief)==null?void 0:Ka.Status)==null?void 0:Ya.StatusColor)??"grey",dark:"",elevation:"1",density:"comfortable"},{default:h(()=>{var Ft,co,Ts;return[p("p",{class:we({blacktext:!N.value,whitetext:N.value})},j((Ts=(co=(Ft=e.item)==null?void 0:Ft.Preventief)==null?void 0:co.Status)==null?void 0:Ts.StatusNaam),3)]}),_:1},8,["color"])):(T(),ie(et,{key:1,color:"grey",dark:"",density:"comfortable"},{default:h(()=>Q[34]||(Q[34]=[z("N/A")])),_:1,__:[34]}))]),p("div",dy,[p("div",cy,[p("div",fy,j(Y.$t("verbeterplein.showItem.fields.title")),1),p("div",my,j(((Za=(Qa=e.item)==null?void 0:Qa.Preventief)==null?void 0:Za.Title)||Y.$t("verbeterplein.showItem.placeholders.na")),1)])]),p("div",py,[p("div",vy,[p("div",hy,j(Y.$t("verbeterplein.showItem.fields.deadline")),1),p("div",gy,j((en=(Xa=e.item)==null?void 0:Xa.Preventief)!=null&&en.Deadline?se(aa)((tn=(St=e.item)==null?void 0:St.Preventief)==null?void 0:tn.Deadline):"N/A"),1)]),D.value.length>0?(T(),q("div",yy,[p("div",by,j(Y.$t("verbeterplein.showItem.fields.team_members")),1),p("div",wy,[(T(!0),q(Ae,null,We(D.value,Ft=>(T(),ie(et,{dark:"",size:"small",class:"mr-1",primary:""},{default:h(()=>[p("span",{class:we({blacktext:!N.value,whitetext:N.value})},j(Ft!=null&&Ft.Name?Ft==null?void 0:Ft.Name:(Ft==null?void 0:Ft.name)||"Error"),3)]),_:2},1024))),256))])])):X("",!0)]),((Wn=(an=e.item)==null?void 0:an.Preventief)==null?void 0:Wn.rootCauseLevel)!==1?(T(),q("div",_y,[p("div",Cy,j(Y.$t("verbeterplein.showItem.fields.cause")),1),p("div",xy,j(((xs=(Cs=e.item)==null?void 0:Cs.Preventief)==null?void 0:xs.Kernoorzaak)||"N/A"),1)])):X("",!0),((Ds=(Ss=e.item)==null?void 0:Ss.Preventief)==null?void 0:Ds.rootCauseLevel)!==1?(T(),q("div",Sy,[p("div",Dy,j(Y.$t("verbeterplein.showItem.fields.linked_reports"))+" ("+j(V.value.length)+") ",1),p("div",ky,[(T(!0),q(Ae,null,We(V.value,Ft=>(T(),ie(et,{class:"mr-1",color:"primary",link:"",onClick:co=>Ct(Ft.VolgNummer,!1)},{default:h(()=>[p("span",{class:we({blacktext:!N.value,whitetext:N.value})},j(Ft.VolgNummer),3)]),_:2},1032,["onClick"]))),256))])])):X("",!0),c(vt,{thickness:"2",class:"mt-4"}),c(Bo,{item:e.item,title:"Preventieve acties",id:(As=(ks=e.item)==null?void 0:ks.Preventief)==null?void 0:As.id,type:"preventief",onTaskCreated:lt},null,8,["item","id"]),((Is=(Ps=e.item)==null?void 0:Ps.Preventief)==null?void 0:Is.rootCauseLevel)===1?(T(),ie(ge,{key:2,color:"secondary",variant:"tonal",size:"small","prepend-icon":"mdi-check",onClick:K,class:"mb-4"},{default:h(()=>Q[35]||(Q[35]=[z(" Markeer PD klaar ")])),_:1,__:[35]})):X("",!0),c(vt,{thickness:"2",class:"mt-4"}),Q[38]||(Q[38]=p("br",null,null,-1)),p("div",Ay,[p("div",Py,[p("div",Iy,[c(oe,{color:"primary",size:"24",class:"mr-2"},{default:h(()=>Q[36]||(Q[36]=[z("mdi-paperclip")])),_:1,__:[36]}),p("div",Ty,j(Y.$t("verbeterplein.showItem.fields.attachments")),1)]),c(ge,{color:"primary",variant:"tonal",size:"small","prepend-icon":"mdi-plus",onClick:Ge,class:"attachment-add-btn"},{default:h(()=>Q[37]||(Q[37]=[z(" Bijlage toevoegen ")])),_:1,__:[37]})]),c(Oo,{clickedItem:e.item,PDCA:!0,onOpenImageGallery:ot,onUpdate:Q[7]||(Q[7]=Ft=>Y.$emit("update",[!0,!0]))},null,8,["clickedItem"])])])):(T(),q("div",$y,[p("div",Fy,[p("div",Ey,[p("div",Ny,[c(oe,{size:"64",color:"primary"},{default:h(()=>Q[39]||(Q[39]=[z("mdi-shield-outline")])),_:1,__:[39]})]),p("h3",null,j(Y.$t("verbeterplein.showItem.preventief.empty_title")),1),p("p",Ry,j(Y.$t("verbeterplein.showItem.preventief.empty_description")),1),c(ge,{color:"primary",onClick:ze,class:"start-pdca-btn",elevation:"2","prepend-icon":"mdi-plus"},{default:h(()=>[z(j(Y.$t("verbeterplein.showItem.actions.start_pdca")),1)]),_:1})])])]))])]}),_:1})]),_:1},8,["class"])]}),_:1},8,["md","class"])]}),_:1}),c(Nt,null,{default:h(()=>[e.showQuestions?(T(),ie(ge,{key:0,text:Y.$t("verbeterplein.showItem.buttons.questions"),variant:"tonal",color:"secondary",onClick:rt},null,8,["text"])):X("",!0)]),_:1})])]),_:1}),c(sa,{value:"pdca"},{default:h(()=>[p("div",jy,[c($g)])]),_:1}),c(sa,{value:"communicatie"},{default:h(()=>[p("div",My,[c(cc)])]),_:1}),c(sa,{value:"historie"},{default:h(()=>[p("div",Oy,[c(jm,{item:e.item},null,8,["item"])])]),_:1}),c(sa,{value:"engagement"},{default:h(()=>[p("div",Vy,[c(ip,{item:e.item},null,8,["item"])])]),_:1})]),_:1},8,["modelValue"])])]}),_:1},8,["modelValue","editingButton"]))}}),Uy=dt(By,[["__scopeId","data-v-1ba242bf"]]),zy={class:"d-flex flex-column gap-4"},Ly={class:"d-flex flex-column"},Hy={class:"d-flex align-center gap-4"},Gy={class:"d-flex flex-column"},Wy={class:"d-flex align-center gap-4"},Jy={class:"datepicker-container flex-grow-1"},qy={class:"d-flex flex-column"},Ky={class:"d-flex align-center gap-4"},Yy={class:"d-flex flex-column"},Qy={class:"d-flex align-center gap-4"},Zy={class:"d-flex flex-column"},Xy={class:"d-flex align-center gap-4"},e0=Se({__name:"addCorrectief",props:{modelValue:{type:Boolean}},emits:["update"],setup(e,{emit:t}){const{t:a}=kt(),n=es(),r=ga(),o=ha(),s=Kt(),i=ct(),d=t,g=e,f=W(g.modelValue),l=W(!1),u=W({}),m=W({}),x=W({}),F=W({}),C=W({}),D=W({}),L=W(null);wt(async()=>{var y,M,E,R,I,P,A,v,b,V,B;await o.fetchStatussen("reparatieloop"),await r.fetchActiehouders();const w=s.getReportById(s.selectedFormId);w!=null&&w.Correctief&&((y=w==null?void 0:w.Correctief)!=null&&y.id)&&(u.value.Faalkosten=(M=w==null?void 0:w.Correctief)==null?void 0:M.Faalkosten,u.value.Status=(E=w==null?void 0:w.Correctief)==null?void 0:E.Status,u.value.Oplossing=(R=w==null?void 0:w.Correctief)==null?void 0:R.Oplossing,u.value.Actiehouder=(I=w==null?void 0:w.Correctief)==null?void 0:I.User,u.value.Deadline=(P=w==null?void 0:w.Correctief)==null?void 0:P.Deadline,D.value=(A=w==null?void 0:w.Correctief)==null?void 0:A.Deadline,F.value=(v=w==null?void 0:w.Correctief)==null?void 0:v.Faalkosten,C.value=(b=w==null?void 0:w.Correctief)==null?void 0:b.Oplossing,x.value=(V=w==null?void 0:w.Correctief)==null?void 0:V.Status,m.value=(B=w==null?void 0:w.Correctief)==null?void 0:B.User)});const $=W(null),_=te(()=>r.actiehouders),S=te(()=>o.statussen),k=W(!1),O=async()=>{var w,y,M,E,R,I,P;if(k.value=!0,i.promise({message:a("notifications.saving_correctief")}),l.value===!0)try{const A=s.getReportById(s.selectedFormId);if(A!=null&&A.Correctief&&((w=A==null?void 0:A.Correctief)!=null&&w.id))await n.updateCorrectief((y=A==null?void 0:A.Correctief)==null?void 0:y.id,{...F.value>=0&&F.value!==((M=A==null?void 0:A.Correctief)==null?void 0:M.Faalkosten)&&F.value>=0&&{Faalkosten:Number(F.value)},...C.value&&C.value!==((E=A==null?void 0:A.Correctief)==null?void 0:E.Oplossing)&&{Oplossing:C.value},...D.value&&D.value!==((R=A==null?void 0:A.Correctief)==null?void 0:R.Deadline)&&{Deadline:new Date(D.value)},...x.value&&x.value!==((I=A==null?void 0:A.Correctief)==null?void 0:I.Status)&&{StatusID:x.value.id},...m.value&&m.value!==((P=A==null?void 0:A.Correctief)==null?void 0:P.Actiehouder)&&{UserID:m.value.id}}),await Promise.all([n.fetchCorrectief(),s.fetchReports(!0)]),s.selectedFormId=A.id,d("update",[!0,!0]),i.resolvePromise({message:a("notifications.correctief_saved")});else throw new Error(a("errors.correctief_correctief_not_found"))}catch(A){i.rejectPromise({message:a("errors.correctief_error",{error:A})})}finally{k.value=!1}else{i.promise({message:a("notifications.creating_correctief")});try{if(u.value.Faalkosten>=0){const A=u.value.Status?u.value.Status.id:o.statussen.find(v=>v.StatusNaam==="Open");n.createCorrectief({...u.value,Status:A}),d("update",[!0,!0]),i.resolvePromise({message:a("notifications.correctief_created")})}else throw new Error(a("errors.correctief_error_faalkosten"))}catch(A){i.rejectPromise({message:a("errors.correctief_error",{error:A})})}finally{k.value=!1}}};return be(()=>g.modelValue,w=>{var y,M,E,R,I,P,A,v,b,V,B;if(f.value=w,k.value=!0,w){const J=s.getReportById(s.selectedFormId);J!=null&&J.Correctief&&((y=J==null?void 0:J.Correctief)!=null&&y.id)?(u.value=J==null?void 0:J.Correctief,L.value=u.value.Deadline,u.value.Faalkosten=(M=J==null?void 0:J.Correctief)==null?void 0:M.Faalkosten,u.value.Status=(E=J==null?void 0:J.Correctief)==null?void 0:E.Status,u.value.Oplossing=(R=J==null?void 0:J.Correctief)==null?void 0:R.Oplossing,u.value.Actiehouder=(I=J==null?void 0:J.Correctief)==null?void 0:I.User,u.value.Deadline=(P=J==null?void 0:J.Correctief)==null?void 0:P.Deadline,D.value=(A=J==null?void 0:J.Correctief)==null?void 0:A.Deadline,F.value=(v=J==null?void 0:J.Correctief)==null?void 0:v.Faalkosten,C.value=(b=J==null?void 0:J.Correctief)==null?void 0:b.Oplossing,x.value=(V=J==null?void 0:J.Correctief)==null?void 0:V.Status,m.value=(B=J==null?void 0:J.Correctief)==null?void 0:B.User,l.value=!0,$.value={to:new Date(Date.now()-24*60*60*1e3)},k.value=!1):($.value={to:new Date(Date.now()-24*60*60*1e3)},l.value=!1,k.value=!1)}}),(w,y)=>(T(),ie(va,{modelValue:f.value,"onUpdate:modelValue":y[6]||(y[6]=M=>f.value=M),"max-width":800,"retain-focus":!1},{default:h(()=>[c(Te,null,{default:h(()=>[c(Pt,{class:"bg-secondary text-white pa-4"},{default:h(()=>[z(j(l.value?"Bijwerken Correctief":"Voeg Correctief Toe"),1)]),_:1}),c(Re,{class:"pa-4"},{default:h(()=>[p("div",zy,[p("div",Ly,[p("div",Hy,[c(oe,{color:"primary",size:"24"},{default:h(()=>y[7]||(y[7]=[z("mdi-account-outline")])),_:1,__:[7]}),c(it,{items:_.value,modelValue:m.value,"onUpdate:modelValue":y[0]||(y[0]=M=>m.value=M),label:"Actiehouder","item-title":"Name","item-value":"id","return-object":"",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["items","modelValue"])])]),p("div",Gy,[p("div",Wy,[c(oe,{color:"primary",size:"24"},{default:h(()=>y[8]||(y[8]=[z("mdi-calendar-outline")])),_:1,__:[8]}),p("div",Jy,[k.value?X("",!0):(T(),ie(se(vr),{key:0,"disabled-dates":$.value,modelValue:D.value,"onUpdate:modelValue":y[1]||(y[1]=M=>D.value=M),"open-date":new Date(D.value),"monday-first":!0,"prevent-disable-date-selection":!0,format:"dd-MM-yyyy",class:"flex-grow-1"},{default:h(({inputValue:M,toggleDatepicker:E})=>[c(Ot,{"model-value":M,onClick:E,variant:"outlined",density:"comfortable","hide-details":"",readonly:"",label:"Deadline",placeholder:"Kies een deadline",class:"flex-grow-1"},null,8,["model-value","onClick"])]),_:1},8,["disabled-dates","modelValue","open-date"]))])])]),p("div",qy,[p("div",Ky,[c(oe,{color:"primary",size:"24"},{default:h(()=>y[9]||(y[9]=[z("mdi-text-box-outline")])),_:1,__:[9]}),c(gt,{modelValue:C.value,"onUpdate:modelValue":y[2]||(y[2]=M=>C.value=M),label:"Oplossing","auto-grow":"",rows:"3",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["modelValue"])])]),p("div",Yy,[p("div",Qy,[c(oe,{color:"primary",size:"24"},{default:h(()=>y[10]||(y[10]=[z("mdi-currency-eur")])),_:1,__:[10]}),c(Ot,{modelValue:F.value,"onUpdate:modelValue":y[3]||(y[3]=M=>F.value=M),label:"Faalkosten",type:"number",variant:"outlined",density:"comfortable","hide-details":"",prefix:"â‚¬",class:"flex-grow-1"},null,8,["modelValue"])])]),p("div",Zy,[p("div",Xy,[c(oe,{color:"primary",size:"24"},{default:h(()=>y[11]||(y[11]=[z("mdi-flag-outline")])),_:1,__:[11]}),c(it,{items:S.value,modelValue:x.value,"onUpdate:modelValue":y[4]||(y[4]=M=>x.value=M),label:"Status","item-title":"StatusNaam","item-value":"Name","return-object":"",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["items","modelValue"])])])])]),_:1}),c(Nt,{class:"pa-4 pt-0"},{default:h(()=>[c(Dt),c(ge,{variant:"text",onClick:y[5]||(y[5]=M=>f.value=!1),disabled:k.value},{default:h(()=>y[12]||(y[12]=[z("Annuleren")])),_:1,__:[12]},8,["disabled"]),c(ge,{color:l.value?"secondary":"primary",variant:"flat",onClick:O,loading:k.value},{default:h(()=>[z(j(l.value?"Bijwerken":"Opslaan"),1)]),_:1},8,["color","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),t0=dt(e0,[["__scopeId","data-v-98edac3e"]]),a0=e=>typeof e=="function",ft=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):a=>t(a,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(a,n){return arguments.length>=2?t(a,n):function(r){return t(r,a)}};case 3:return function(a,n,r){return arguments.length>=3?t(a,n,r):function(o){return t(o,a,n)}};case 4:return function(a,n,r,o){return arguments.length>=4?t(a,n,r,o):function(s){return t(s,a,n,r)}};case 5:return function(a,n,r,o,s){return arguments.length>=5?t(a,n,r,o,s):function(i){return t(i,a,n,r,o)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const a=arguments;return function(n){return t(n,...a)}}}},sn=e=>e,Hi=sn,n0=e=>()=>e,r0=n0(void 0),o0=r0;function s0(e,t,a,n,r,o,s,i,d){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return a(t(e));case 4:return n(a(t(e)));case 5:return r(n(a(t(e))));case 6:return o(r(n(a(t(e)))));case 7:return s(o(r(n(a(t(e))))));case 8:return i(s(o(r(n(a(t(e)))))));case 9:return d(i(s(o(r(n(a(t(e))))))));default:{let g=arguments[0];for(let f=1;f<arguments.length;f++)g=arguments[f](g);return g}}}let i0="3.14.21";const Gi=()=>i0,Pr=`effect/GlobalValue/globalStoreId/${Gi()}`;let Yn;const hr=(e,t)=>(Yn||(globalThis[Pr]??(globalThis[Pr]=new Map),Yn=globalThis[Pr]),Yn.has(e)||Yn.set(e,t()),Yn.get(e)),Xs=e=>typeof e=="string",l0=e=>typeof e=="number",Wi=a0,Ji=e=>typeof e=="object"&&e!==null,u0=e=>Ji(e)||Wi(e),fn=ft(2,(e,t)=>u0(e)&&t in e),d0=ft(2,(e,t)=>fn(e,"_tag")&&e._tag===t),ns=e=>Ji(e)&&!Array.isArray(e),c0=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;class oo{constructor(t){Oe(this,"self");Oe(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new oo(this.self)}}const Uo=Symbol.for("effect/Utils/YieldWrap");var mr;class qi{constructor(t){$a(this,mr);In(this,mr,t)}[Uo](){return Ne(this,mr)}}mr=new WeakMap;function f0(e){if(typeof e=="object"&&e!==null&&Uo in e)return e[Uo]();throw new Error(c0("yieldWrapGet"))}const ra=hr("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),yo=hr(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),un=Symbol.for("effect/Hash"),On=e=>{if(ra.enabled===!0)return 0;switch(typeof e){case"number":return os(e);case"bigint":return nn(e.toString(10));case"boolean":return nn(String(e));case"symbol":return nn(String(e));case"string":return nn(e);case"undefined":return nn("undefined");case"function":case"object":return e===null?nn("null"):e instanceof Date?On(e.toISOString()):e instanceof URL?On(e.href):m0(e)?e[un]():Ki(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Ki=e=>(yo.has(e)||yo.set(e,os(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),yo.get(e)),Yi=e=>t=>t*53^e,rs=e=>e&3221225471|e>>>1&1073741824,m0=e=>fn(e,un),os=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return rs(t)},nn=e=>{let t=5381,a=e.length;for(;a;)t=t*33^e.charCodeAt(--a);return rs(t)},p0=(e,t)=>{let a=12289;for(let n=0;n<t.length;n++)a^=s0(nn(t[n]),Yi(On(e[t[n]])));return rs(a)},v0=e=>p0(e,Object.keys(e)),so=function(){if(arguments.length===1){const a=arguments[0];return function(n){return Object.defineProperty(a,un,{value(){return n},enumerable:!1}),n}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,un,{value(){return t},enumerable:!1}),t},zn=Symbol.for("effect/Equal");function ss(){return arguments.length===1?e=>Vr(e,arguments[0]):Vr(arguments[0],arguments[1])}function Vr(e,t){if(e===t)return!0;const a=typeof e;if(a!==typeof t)return!1;if(a==="object"||a==="function"){if(e!==null&&t!==null){if(ei(e)&&ei(t))return On(e)===On(t)&&e[zn](t)?!0:ra.enabled&&ra.tester?ra.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString();if(e instanceof URL&&t instanceof URL)return e.href===t.href}if(ra.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((n,r)=>Vr(n,t[r]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e),r=Object.keys(t);if(n.length===r.length){for(const o of n)if(!(o in t&&Vr(e[o],t[o])))return ra.tester?ra.tester(e,t):!1;return!0}}return ra.tester?ra.tester(e,t):!1}}return ra.enabled&&ra.tester?ra.tester(e,t):!1}const ei=e=>fn(e,zn),gr=Symbol.for("nodejs.util.inspect.custom"),Qi=e=>{try{if(fn(e,"toJSON")&&Wi(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(Qi)}catch{return{}}return y0(e)},Br=e=>JSON.stringify(e,null,2),h0=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?g0(e,t):String(e)}catch{return String(e)}},g0=(e,t)=>{let a=[];const n=JSON.stringify(e,(r,o)=>typeof o=="object"&&o!==null?a.includes(o)?void 0:a.push(o)&&(Ur.fiberRefs!==void 0&&Zi(o)?o[is](Ur.fiberRefs):o):o,t);return a=void 0,n},is=Symbol.for("effect/Inspectable/Redactable"),Zi=e=>typeof e=="object"&&e!==null&&is in e,Ur=hr("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),y0=e=>Zi(e)&&Ur.fiberRefs!==void 0?e[is](Ur.fiberRefs):e,io=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let a=e;for(let n=0,r=t.length;n<r;n++)a=t[n](a);return a}}},b0=Symbol.for("effect/Effect"),w0=Symbol.for("effect/Stream"),_0=Symbol.for("effect/Sink"),C0=Symbol.for("effect/Channel"),zo={_R:e=>e,_E:e=>e,_A:e=>e,_V:Gi()},x0={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},S0={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Xi={[b0]:zo,[w0]:zo,[_0]:x0,[C0]:S0,[zn](e){return this===e},[un](){return so(this,Ki(this))},[Symbol.iterator](){return new oo(new qi(this))},pipe(){return io(this,arguments)}},el={[un](){return so(this,v0(this))},[zn](e){const t=Object.keys(this),a=Object.keys(e);if(t.length!==a.length)return!1;for(const n of t)if(!(n in e&&ss(this[n],e[n])))return!1;return!0}};({...el});const D0=e=>Array.isArray(e)?e:Array.from(e),bo=e=>Array.isArray(e)?e:[e],k0=Symbol.for("effect/Context/Tag"),Lo=Symbol.for("effect/Context/Reference"),A0="effect/STM",P0=Symbol.for(A0),tl={...Xi,_op:"Tag",[P0]:zo,[k0]:{_Service:e=>e,_Identifier:e=>e},toString(){return Br(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[gr](){return this.toJSON()},of(e){return e},context(e){return R0(this,e)}},I0={...tl,[Lo]:Lo},T0=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const a=new Error;Error.stackTraceLimit=t;function n(){}return Object.setPrototypeOf(n,tl),n.key=e,Object.defineProperty(n,"stack",{get(){return a.stack}}),n},$0=()=>(e,t)=>{const a=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=a;function r(){}return Object.setPrototypeOf(r,I0),r.key=e,r.defaultValue=t.defaultValue,Object.defineProperty(r,"stack",{get(){return n.stack}}),r},al=Symbol.for("effect/Context"),F0={[al]:{_Services:e=>e},[zn](e){if(N0(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!ss(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[un](){return so(this,os(this.unsafeMap.size))},pipe(){return io(this,arguments)},toString(){return Br(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Qi)}},[gr](){return this.toJSON()}},nl=e=>{const t=Object.create(F0);return t.unsafeMap=e,t},E0=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const a=e.stack.split(`
`);if(a.length>2){const n=a[2].match(/at (.*)/);n&&(t.message=t.message+` (defined at ${n[1]})`)}}if(t.stack){const a=t.stack.split(`
`);a.splice(1,3),t.stack=a.join(`
`)}return t},N0=e=>fn(e,al),R0=(e,t)=>nl(new Map([[e.key,t]])),j0=ft(3,(e,t,a)=>{const n=new Map(e.unsafeMap);return n.set(t.key,a),nl(n)}),wo=hr("effect/Context/defaultValueCache",()=>new Map),rl=e=>{if(wo.has(e.key))return wo.get(e.key);const t=e.defaultValue();return wo.set(e.key,t),t},M0=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):rl(t),O0=ft(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(Lo in t)return rl(t);throw E0(t)}return e.unsafeMap.get(t.key)}),V0=j0,B0=O0,U0=T0,ol=$0,z0=Xi,sl=Symbol.for("effect/Micro"),zr=Symbol.for("effect/Micro/MicroExit"),lr=e=>typeof e=="object"&&e!==null&&sl in e,ti=Symbol.for("effect/Micro/MicroCause"),L0={_E:sn};var bi;class ls extends globalThis.Error{constructor(a,n,r){const o=`MicroCause.${a}`;let s,i,d;if(n instanceof globalThis.Error){s=`(${o}) ${n.name}`,i=n.message;const g=i.split(`
`).length;d=n.stack?`(${o}) ${n.stack.split(`
`).slice(0,g+3).join(`
`)}`:`${s}: ${i}`}else s=o,i=h0(n,0),d=`${s}: ${i}`;r.length>0&&(d+=`
    ${r.join(`
    `)}`);super(i);Oe(this,"_tag");Oe(this,"traces");Oe(this,bi);this._tag=a,this.traces=r,this[ti]=L0,this.name=s,this.stack=d}pipe(){return io(this,arguments)}toString(){return this.stack}[(bi=ti,gr)](){return this.stack}}class H0 extends ls{constructor(a,n=[]){super("Fail",a,n);Oe(this,"error");this.error=a}}const il=(e,t=[])=>new H0(e,t);class G0 extends ls{constructor(a,n=[]){super("Die",a,n);Oe(this,"defect");this.defect=a}}const ll=(e,t=[])=>new G0(e,t);class W0 extends ls{constructor(t=[]){super("Interrupt","interrupted",t)}}const ul=(e=[])=>new W0(e),dl=e=>e._tag==="Fail",cl=e=>e._tag==="Interrupt",_o=e=>e._tag==="Fail"?e.error:e._tag==="Die"?e.defect:e,J0=ft(2,(e,t)=>{const a=[...e.traces,t];switch(e._tag){case"Die":return ll(e.defect,a);case"Interrupt":return ul(a);case"Fail":return il(e.error,a)}}),ai=Symbol.for("effect/Micro/MicroFiber"),q0={_A:sn,_E:sn};var wi;wi=ai;class fl{constructor(t,a=!0){Oe(this,"context");Oe(this,"interruptible");Oe(this,wi);Oe(this,"_stack",[]);Oe(this,"_observers",[]);Oe(this,"_exit");Oe(this,"_children");Oe(this,"currentOpCount",0);Oe(this,"_interrupted",!1);Oe(this,"_yielded");this.context=t,this.interruptible=a,this[ai]=q0}getRef(t){return M0(this.context,t)}addObserver(t){return this._exit?(t(this._exit),o0):(this._observers.push(t),()=>{const a=this._observers.indexOf(t);a>=0&&this._observers.splice(a,1)})}unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(vs))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){const r=this._yielded;this._yielded=void 0,r()}const a=this.runLoop(t);if(a===Fn)return;const n=ni.interruptChildren&&ni.interruptChildren(this);if(n!==void 0)return this.evaluate(na(n,()=>a));this._exit=a;for(let r=0;r<this._observers.length;r++)this._observers[r](a);this._observers.length=0}runLoop(t){let a=!1,n=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!a&&this.getRef(lo).shouldYield(this)){a=!0;const r=n;n=na(X0,()=>r)}if(n=n[Lr](this),n===Fn){const r=this._yielded;return zr in r?(this._yielded=void 0,r):Fn}}}catch(r){return fn(n,Lr)?Vn(r):Vn(`MicroFiber.runLoop: Not a valid effect: ${String(n)}`)}}getCont(t){for(;;){const a=this._stack.pop();if(!a)return;const n=a[Hr]&&a[Hr](this);if(n)return{[t]:n};if(a[t])return a}}yieldWith(t){return this._yielded=t,Fn}children(){return this._children??(this._children=new Set)}}const ni=hr("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),K0=e=>ur(()=>{for(const n of e)n.unsafeInterrupt();const t=e[Symbol.iterator](),a=ur(()=>{let n=t.next();for(;!n.done;){if(n.value.unsafePoll()){n=t.next();continue}const r=n.value;return fs(o=>{r.addObserver(s=>{o(a)})})}return Bn});return a}),us=Symbol.for("effect/Micro/identifier"),Je=Symbol.for("effect/Micro/args"),Lr=Symbol.for("effect/Micro/evaluate"),Oa=Symbol.for("effect/Micro/successCont"),_n=Symbol.for("effect/Micro/failureCont"),Hr=Symbol.for("effect/Micro/ensureCont"),Fn=Symbol.for("effect/Micro/Yield"),Y0={_A:sn,_E:sn,_R:sn},ml={...z0,_op:"Micro",[sl]:Y0,pipe(){return io(this,arguments)},[Symbol.iterator](){return new oo(new qi(this))},toJSON(){return{_id:"Micro",op:this[us],...Je in this?{args:this[Je]}:void 0}},toString(){return Br(this)},[gr](){return Br(this)}};function Q0(e){return Vn("Micro.evaluate: Not implemented")}const yr=e=>({...ml,[us]:e.op,[Lr]:e.eval??Q0,[Oa]:e.contA,[_n]:e.contE,[Hr]:e.ensure}),Va=e=>{const t=yr(e);return function(){const a=Object.create(t);return a[Je]=e.single===!1?arguments:arguments[0],a}},pl=e=>{const t={...yr(e),[zr]:zr,_tag:e.op,get[e.prop](){return this[Je]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[Je]}},[zn](a){return ib(a)&&a._tag===e.op&&ss(this[Je],a[Je])},[un](){return so(this,Yi(nn(e.op))(On(this[Je])))}};return function(a){const n=Object.create(t);return n[Je]=a,n[Oa]=void 0,n[_n]=void 0,n[Hr]=void 0,n}},Vt=pl({op:"Success",prop:"value",eval(e){const t=e.getCont(Oa);return t?t[Oa](this[Je],e):e.yieldWith(this)}}),dn=pl({op:"Failure",prop:"cause",eval(e){let t=e.getCont(_n);for(;cl(this[Je])&&t&&e.interruptible;)t=e.getCont(_n);return t?t[_n](this[Je],e):e.yieldWith(this)}}),ln=e=>dn(il(e)),ds=Va({op:"Sync",eval(e){const t=this[Je](),a=e.getCont(Oa);return a?a[Oa](t,e):e.yieldWith(ms(t))}}),ur=Va({op:"Suspend",eval(e){return this[Je]()}}),Z0=Va({op:"Yield",eval(e){let t=!1;return e.getRef(lo).scheduleTask(()=>{t||e.evaluate(Bn)},this[Je]??0),e.yieldWith(()=>{t=!0})}}),X0=Z0(0),eb=e=>Vn(e),vl=Vt(void 0),tb=e=>ur(()=>{try{return Vt(e.try())}catch(t){return ln(e.catch(t))}}),ab=e=>cs(function(t,a){e(a).then(n=>t(Vt(n)),n=>t(eb(n)))},e.length!==0),hl=e=>cs(function(t,a){try{e.try(a).then(n=>t(Vt(n)),n=>t(ln(e.catch(n))))}catch(n){t(ln(e.catch(n)))}},e.try.length!==0),br=Va({op:"WithMicroFiber",eval(e){return this[Je](e)}}),cs=Va({op:"Async",single:!1,eval(e){const t=this[Je][0];let a=!1,n=!1;const r=this[Je][1]?new AbortController:void 0,o=t(s=>{a||(a=!0,n?e.evaluate(s):n=s)},r==null?void 0:r.signal);return n!==!1?n:(n=!0,e._yielded=()=>{a=!0},r===void 0&&o===void 0||e._stack.push(nb(()=>(a=!0,r==null||r.abort(),o??Bn))),Fn)}}),nb=Va({op:"AsyncFinalizer",ensure(e){e.interruptible&&(e.interruptible=!1,e._stack.push(gs(!0)))},contE(e,t){return cl(e)?na(this[Je](),()=>dn(e)):dn(e)}}),fs=e=>cs(e,e.length>=2),gl=(...e)=>ur(()=>rb(e.length===1?e[0]():e[1].call(e[0]))),rb=Va({op:"Iterator",contA(e,t){const a=this[Je].next(e);return a.done?Vt(a.value):(t._stack.push(this),f0(a.value))},eval(e){return this[Oa](void 0,e)}}),yl=ft(2,(e,t)=>Cn(e,a=>t)),bl=ft(2,(e,t)=>na(e,a=>{const n=lr(t)?t:typeof t=="function"?t(a):t;return lr(n)?n:Vt(n)})),ob=ft(2,(e,t)=>na(e,a=>{const n=lr(t)?t:typeof t=="function"?t(a):t;return lr(n)?yl(n,a):Vt(a)})),na=ft(2,(e,t)=>{const a=Object.create(sb);return a[Je]=e,a[Oa]=t,a}),sb=yr({op:"OnSuccess",eval(e){return e._stack.push(this),this[Je]}}),Cn=ft(2,(e,t)=>na(e,a=>Vt(t(a)))),ib=e=>fn(e,zr),ms=Vt,ps=dn,vs=ps(ul()),Vn=e=>ps(ll(e)),lb=e=>e._tag==="Failure",Bn=ms(void 0),ub="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class hs{constructor(){Oe(this,"tasks",[]);Oe(this,"running",!1);Oe(this,"afterScheduled",()=>{this.running=!1,this.runTasks()})}scheduleTask(t,a){this.tasks.push(t),this.running||(this.running=!0,ub(this.afterScheduled))}runTasks(){const t=this.tasks;this.tasks=[];for(let a=0,n=t.length;a<n;a++)t[a]()}shouldYield(t){return t.currentOpCount>=t.getRef(fb)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const db=e=>br(t=>Vt(B0(t.context,e))),cb=ft(2,(e,t)=>br(a=>{const n=a.context;return a.context=t(n),Cl(e,()=>(a.context=n,vl))})),Co=ft(3,(e,t,a)=>cb(e,V0(t,a)));class fb extends ol()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class lo extends ol()("effect/Micro/currentScheduler",{defaultValue:()=>new hs}){}const mb=ft(e=>lr(e[0]),(e,t,a)=>na(e,n=>t(n)?Vt(n):ln(a(n)))),pb=ft(2,(e,t)=>{const a=Object.create(vb);return a[Je]=e,a[_n]=t,a}),vb=yr({op:"OnFailure",eval(e){return e._stack.push(this),this[Je]}}),wl=ft(3,(e,t,a)=>pb(e,n=>t(n)?a(n):dn(n))),hb=ft(3,(e,t,a)=>wl(e,t,n=>bl(a(n),dn(n)))),gb=ft(2,(e,t)=>hb(e,dl,a=>t(a.error))),yb=ft(3,(e,t,a)=>wl(e,n=>dl(n)&&t(n.error),n=>a(n.error))),xo=ft(3,(e,t,a)=>yb(e,d0(t),a)),_l=function(){const e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;const t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;function a(r,o){var g;const s=t.stack;if(!s)return o;const i=(g=s.split(`
`)[2])==null?void 0:g.trim().replace(/^at /,"");if(!i)return o;const d=i.match(/\((.*)\)$/);return J0(o,`at ${r} (${d?d[1]:i})`)}const n=r=>o=>Cb(o,s=>dn(a(r,s)));return arguments.length===2?n(arguments[1])(arguments[0]):n(arguments[0])},bb=ft(2,(e,t)=>{const a=Object.create(wb);return a[Je]=e,a[Oa]=t.onSuccess,a[_n]=t.onFailure,a}),wb=yr({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[Je]}}),Cl=ft(2,(e,t)=>Sb(a=>bb(a(e),{onFailure:n=>na(t(ps(n)),()=>dn(n)),onSuccess:n=>na(t(ms(n)),()=>Vt(n))}))),_b=ft(3,(e,t,a)=>Cl(e,n=>t(n)?a(n):Bn)),Cb=ft(2,(e,t)=>_b(e,lb,a=>t(a.cause))),gs=Va({op:"SetInterruptible",ensure(e){if(e.interruptible=this[Je],e._interrupted&&e.interruptible)return()=>vs}}),xb=e=>br(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(gs(!1)),t._interrupted?vs:e)),Sb=e=>br(t=>t.interruptible?(t.interruptible=!1,t._stack.push(gs(!0)),e(xb)):e(sn)),Db=Va({op:"While",contA(e,t){return this[Je].step(e),this[Je].while()?(t._stack.push(this),this[Je].body()):Bn},eval(e){return this[Je].while()?(e._stack.push(this),this[Je].body()):Bn}}),kb=(e,t,a)=>br(n=>{const r=a==null?void 0:a.concurrency,o=Math.max(1,r),s=D0(e);let i=s.length;if(i===0)return a!=null&&a.discard?vl:Vt([]);const d=a!=null&&a.discard?void 0:new Array(i);let g=0;return o===1?yl(Db({while:()=>g<s.length,body:()=>t(s[g],g),step:d?f=>d[g++]=f:f=>g++}),d):fs(f=>{const l=new Set;let u,m=0,x=0,F=!1,C=!1;function D(){for(F=!0;m<o&&g<i;){const L=g,$=s[L];g++,m++;try{const _=Ab(n,t($,L),!0,!0);l.add(_),_.addObserver(S=>{l.delete(_),!C&&(S._tag==="Failure"?u===void 0&&(u=S,i=g,l.forEach(k=>k.unsafeInterrupt())):d!==void 0&&(d[L]=S.value),x++,m--,x===i?f(u??Vt(d)):!F&&m<o&&D())})}catch(_){u=Vn(_),i=g,l.forEach(S=>S.unsafeInterrupt())}}F=!1}return D(),ur(()=>(C=!0,g=i,K0(l)))})}),Ab=(e,t,a=!1,n=!1)=>{const r=new fl(e.context,e.interruptible);return n||(e.children().add(r),r.addObserver(()=>e.children().delete(r))),a?r.evaluate(t):e.getRef(lo).scheduleTask(()=>r.evaluate(t),0),r},xl=(e,t)=>{const a=new fl(lo.context((t==null?void 0:t.scheduler)??new hs));if(a.evaluate(e),t!=null&&t.signal)if(t.signal.aborted)a.unsafeInterrupt();else{const n=()=>a.unsafeInterrupt();t.signal.addEventListener("abort",n,{once:!0}),a.addObserver(()=>t.signal.removeEventListener("abort",n))}return a},Fr=(e,t)=>new Promise((a,n)=>{xl(e,t).addObserver(a)}),Pb=(e,t)=>Fr(e,t).then(a=>{if(a._tag==="Failure")throw a.cause;return a.value}),Ib=e=>{const t=new hs,a=xl(e,{scheduler:t});return t.flush(),a._exit??Vn(a)},Tb=e=>{const t=Ib(e);if(t._tag==="Failure")throw t.cause;return t.value},$b=function(){class e extends globalThis.Error{}return Object.assign(e.prototype,ml,el,{[us]:"Failure",[Lr](){return ln(this)},toString(){return this.message?`${this.name}: ${this.message}`:this.name},toJSON(){return{...this}},[gr](){const t=this.stack;return t?`${this.toString()}
${t.split(`
`).slice(1).join(`
`)}`:this.toString()}}),e}(),Sl=function(){return class extends $b{constructor(e){super(),e&&Object.assign(this,e)}}}(),Ln=e=>{class t extends Sl{constructor(){super(...arguments);Oe(this,"_tag",e)}}return t.prototype.name=e,t},Fb={"audio/3gpp":{source:"iana",extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/basic":{source:"iana",extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp4":{source:"iana",extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/webm":{source:"apache",extensions:["weba"]},"audio/x-aac":{source:"apache",extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/x-gsm":{source:"apache",extensions:["gsm"]},"audio/xm":{source:"apache",extensions:["xm"]}},Eb={"image/aces":{source:"iana",extensions:["exr"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",extensions:["avif"]},"image/bmp":{source:"iana",extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",extensions:["jpm"]},"image/jpx":{source:"iana",extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/png":{source:"iana",extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]}},Nb={"text/cache-manifest":{source:"iana",extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/css":{source:"iana",charset:"UTF-8",extensions:["css"]},"text/csv":{source:"iana",extensions:["csv"]},"text/html":{source:"iana",extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/n3":{source:"iana",charset:"UTF-8",extensions:["n3"]},"text/plain":{source:"iana",extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/richtext":{source:"iana",extensions:["rtx"]},"text/rtf":{source:"iana",extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{source:"iana",extensions:["shex"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/tab-separated-values":{source:"iana",extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/uri-list":{source:"iana",extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",extensions:["xml"]}},Rb={"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h264":{source:"iana",extensions:["h264"]},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",extensions:["ogv"]},"video/quicktime":{source:"iana",extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/webm":{source:"apache",extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]}};var ri={};class jb extends Ln("InvalidURL"){constructor(t){super({reason:`Failed to parse '${t}' as a URL.`})}}class Mb extends Ln("FetchError"){}class Ob extends Ln("InvalidJson"){}class Vb extends Ln("BadRequestError"){getMessage(){return ns(this.json)&&typeof this.json.message=="string"?this.json.message:this.message}}class Ir extends Ln("UploadAborted"){}class dr extends Ln("UploadAborted"){}function vn(e){return Object.keys(e)}function Bb(e,t){const a=/(\d+)\.?(\d+)?\.?(\d+)?/,n=a.exec(e);if(!(n!=null&&n[0]))throw new Error(`Invalid semver requirement: ${e}`);const r=a.exec(t);if(!(r!=null&&r[0]))throw new Error(`Invalid semver to check: ${t}`);const[o,s,i,d]=n,[g,f,l,u]=r;return e.startsWith("^")?!(s!==f||i&&l&&i>l):e.startsWith("~")?!(s!==f||i!==l):s===f&&i===l&&d===u}function Ub(e,t,a){Bb(t,a)||console.warn(`!!!WARNING::: ${e} requires "uploadthing@${t}", but version "${a}" is installed`)}const zb=e=>gl(function*(){const t=typeof window<"u"?window.location.origin:ri.VERCEL_URL?`https://${ri.VERCEL_URL}`:"http://localhost:3000",a=yield*tb({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new jb(e??"/api/uploadthing")});return a.pathname==="/"&&(a.pathname="/api/uploadthing"),a}),cr=e=>e instanceof URL?e:Tb(zb(e));function Ho(){}function Lb(){return new Proxy(Ho,{get:(e,t)=>t})}function Hb(e,...t){return typeof e=="function"?e(...t):e}const Gb={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,INVALID_SERVER_CONFIG:500,FILE_LIMIT_EXCEEDED:500};function Wb(e,t){return typeof e=="string"?e:e instanceof Error||e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:t??"An unknown error occurred"}class Ia extends Sl{constructor(t){const a=typeof t=="string"?{code:"INTERNAL_SERVER_ERROR",message:t}:t,n=a.message??Wb(a.cause,a.code);super({message:n}),this._tag="UploadThingError",this.name="UploadThingError",this.code=a.code,this.data=a.data,a.cause instanceof Error?this.cause=a.cause:ns(a.cause)&&l0(a.cause.status)&&Xs(a.cause.statusText)?this.cause=new Error(`Response ${a.cause.status} ${a.cause.statusText}`):Xs(a.cause)?this.cause=new Error(a.cause):this.cause=a.cause}static toObject(t){return{code:t.code,message:t.message,data:t.data}}static serialize(t){return JSON.stringify(Ia.toObject(t))}}function Jb(e){for(const[t,a]of Object.entries(Gb))if(a===e)return t;return"INTERNAL_SERVER_ERROR"}const qb=e=>new Ia({code:"INTERNAL_CLIENT_ERROR",message:"Something went wrong. Please report this to UploadThing.",cause:e});class Er extends U0("uploadthing/Fetch")(){}const Dl=(e,t)=>na(db(Er),a=>{const n=new Headers((t==null?void 0:t.headers)??[]),r={url:e.toString(),method:t==null?void 0:t.method,body:t==null?void 0:t.body,headers:Object.fromEntries(n)};return hl({try:o=>a(e,{...t,headers:n,signal:o}),catch:o=>new Mb({error:o instanceof Error?{...o,name:o.name,message:o.message,stack:o.stack}:o,input:r})}).pipe(gb(o=>ds(()=>console.error(o.input))),Cn(o=>Object.assign(o,{requestUrl:r.url})),_l("fetch"))}),Kb=e=>hl({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new Ob({error:t,input:e.requestUrl})}).pipe(mb(({ok:t})=>t,({json:t,status:a})=>new Vb({status:a,message:`Request to ${e.requestUrl} failed with status ${a}`,json:t})),Cn(({json:t})=>t),_l("parseJson")),Yb=(e,t)=>t==="all"?e:t==="fine"?Math.round(e):Math.floor(e/10)*10,kl=e=>{const t=Array.isArray(e)?e:vn(e);return t.includes("blob")?[]:t.map(a=>a==="pdf"?"application/pdf":a.includes("/")?a:a==="audio"?["audio/*",...vn(Fb)].join(", "):a==="image"?["image/*",...vn(Eb)].join(", "):a==="text"?["text/*",...vn(Nb)].join(", "):a==="video"?["video/*",...vn(Rb)].join(", "):`${a}/*`)},Qb=e=>{const t=kl(e);return Object.fromEntries(t.map(a=>[a,[]]))};function Al(e){var n;const t=(n=e.clipboardData)==null?void 0:n.items;return t?Array.from(t).reduce((r,o)=>{const s=o.getAsFile();return s?[...r,s]:r},[]):void 0}const Pl=e=>{const t=e?vn(e):[],a=e?Object.values(e).map(n=>n.maxFileCount):[];return{fileTypes:t,multiple:a.some(n=>n&&n>1)}},Zb=e=>e.charAt(0).toUpperCase()+e.slice(1),Xb=e=>{if(!e)return"";const t=vn(e),a=t.map(d=>d==="blob"?"file":d);if(a.length>1){const d=a.pop();return`${a.join("s, ")} and ${d}s`}const n=t[0],r=a[0];if(!n||!r)return"";const{maxFileSize:o,maxFileCount:s,minFileCount:i}=e[n];return s&&s>1?i>1?`${i} - ${s} ${r}s up to ${o}`:`${r}s up to ${o}, max ${s}`:`${r} (${o})`},Il=e=>Zb(Xb(e)),Na=(e,t)=>{if(typeof e=="string")return e;if(typeof e=="function"){const a=e(t);if(typeof a=="string")return a}return""},Ra=(e,t)=>{if(typeof e=="object")return e;if(typeof e=="function"){const a=e(t);if(typeof a=="object")return a}return{}},gn=(e,t)=>{if(!e)return null;if(typeof e!="function")return e;if(typeof e=="function")return e(t)},Tl=(...e)=>e.filter(Boolean).join(" ");new TextEncoder;function ew(e,t){if(t){const a=Array.isArray(t)?t:t.split(","),n=e.name,r=e.type.toLowerCase(),o=r.replace(/\/.*$/,"");return a.some(s=>{const i=s.trim().toLowerCase();return i.startsWith(".")?n.toLowerCase().endsWith(i):i.endsWith("/*")?o===i.replace(/\/.*$/,""):r===i})}return!0}const oi=e=>typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1;function $l(e,t){return e.type==="application/x-moz-file"||ew(e,t)}function tw(e){return"key"in e&&(e.key===" "||e.key==="Enter")||"keyCode"in e&&(e.keyCode===32||e.keyCode===13)}const $n=e=>e!=null;function Fl(e,t,a){return $n(e.size)?$n(t)&&$n(a)?e.size>=t&&e.size<=a:!($n(t)&&e.size<t||$n(a)&&e.size>a):!0}function El(e,t,a){return!(!t&&e.length>1||t&&a>=1&&e.length>a)}function aw({files:e,accept:t,minSize:a,maxSize:n,multiple:r,maxFiles:o}){return El(e,r,o)?e.every(s=>$l(s,t)&&Fl(s,a,n)):!1}function So(e){var t;return"dataTransfer"in e&&e.dataTransfer!==null?Array.prototype.some.call((t=e.dataTransfer)==null?void 0:t.types,a=>a==="Files"||a==="application/x-moz-file"):!!e.target&&"files"in e.target&&!!e.target.files}function nw(e=window.navigator.userAgent){return e.includes("MSIE ")||e.includes("Trident/")||e.includes("Edge/")}function rw(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function ow(e){return/^.*\.[\w]+$/.test(e)}function sw(e){if($n(e))return Object.entries(e).reduce((t,[a,n])=>[...t,a,...n],[]).filter(t=>rw(t)||ow(t)).join(",")}const si={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[]};function Nl(e){return Su()?(Du(e),!0):!1}function Do(){const e=new Set,t=r=>{e.delete(r)};return{on:r=>{e.add(r);const o=()=>t(r);return Nl(o),{off:o}},off:t,trigger:(...r)=>Promise.all(Array.from(e).map(o=>o(...r)))}}function rn(e){return typeof e=="function"?e():se(e)}const Rl=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const iw=()=>{};function ii(e,t=!1,a="Timeout"){return new Promise((n,r)=>{setTimeout(t?()=>r(a):n,e)})}function lw(e,...t){return t.some(a=>a in e)}function ko(...e){if(e.length!==1)return Cu(...e);const t=e[0];return typeof t=="function"?jr(xu(()=>({get:t,set:iw}))):W(t)}function Go(e,t=!1){function a(l,{flush:u="sync",deep:m=!1,timeout:x,throwOnTimeout:F}={}){let C=null;const L=[new Promise($=>{C=be(e,_=>{l(_)!==t&&(C==null||C(),$(_))},{flush:u,deep:m,immediate:!0})})];return x!=null&&L.push(ii(x,F).then(()=>rn(e)).finally(()=>C==null?void 0:C())),Promise.race(L)}function n(l,u){if(!Qo(l))return a(_=>_===l,u);const{flush:m="sync",deep:x=!1,timeout:F,throwOnTimeout:C}=u??{};let D=null;const $=[new Promise(_=>{D=be([e,l],([S,k])=>{t!==(S===k)&&(D==null||D(),_(S))},{flush:m,deep:x,immediate:!0})})];return F!=null&&$.push(ii(F,C).then(()=>rn(e)).finally(()=>(D==null||D(),rn(e)))),Promise.race($)}function r(l){return a(u=>!!u,l)}function o(l){return n(null,l)}function s(l){return n(void 0,l)}function i(l){return a(Number.isNaN,l)}function d(l,u){return a(m=>{const x=Array.from(m);return x.includes(l)||x.includes(rn(l))},u)}function g(l){return f(1,l)}function f(l=1,u){let m=-1;return a(()=>(m+=1,m>=l),u)}return Array.isArray(rn(e))?{toMatch:a,toContains:d,changed:g,changedTimes:f,get not(){return Go(e,!t)}}:{toMatch:a,toBe:n,toBeTruthy:r,toBeNull:o,toBeNaN:i,toBeUndefined:s,changed:g,changedTimes:f,get not(){return Go(e,!t)}}}function uw(e){return Go(e)}function dw(e,t,a={}){const{immediate:n=!0}=a,r=W(!1);let o=null;function s(){o&&(clearTimeout(o),o=null)}function i(){r.value=!1,s()}function d(...g){s(),r.value=!0,o=setTimeout(()=>{r.value=!1,o=null,e(...g)},rn(t))}return n&&(r.value=!0,Rl&&d()),Nl(i),{isPending:jr(r),start:d,stop:i}}const cw=Rl?window:void 0,fw={json:"application/json",text:"text/plain"};function li(e){return e&&lw(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}function Ao(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries(e.entries()):e}function mw(e,...t){var a;const n=typeof AbortController=="function";let r={},o={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const s={method:"GET",type:"text",payload:void 0};t.length>0&&(li(t[0])?o={...o,...t[0]}:r=t[0]),t.length>1&&li(t[1])&&(o={...o,...t[1]});const{fetch:i=(a=cw)==null?void 0:a.fetch,initialData:d,timeout:g}=o,f=Do(),l=Do(),u=Do(),m=W(!1),x=W(!1),F=W(!1),C=W(null),D=po(null),L=po(null),$=po(d||null),_=te(()=>n&&x.value);let S,k;const O=()=>{n&&(S==null||S.abort(),S=new AbortController,S.signal.onabort=()=>F.value=!0,r={...r,signal:S.signal})},w=v=>{x.value=v,m.value=!v};g&&(k=dw(O,g,{immediate:!1}));let y=0;const M=async(v=!1)=>{var b,V;O(),w(!0),L.value=null,C.value=null,F.value=!1,y+=1;const B=y,J={method:s.method,headers:{}};if(s.payload){const K=Ao(J.headers),Z=rn(s.payload);!s.payloadType&&Z&&Object.getPrototypeOf(Z)===Object.prototype&&!(Z instanceof FormData)&&(s.payloadType="json"),s.payloadType&&(K["Content-Type"]=(b=fw[s.payloadType])!=null?b:s.payloadType),J.body=s.payloadType==="json"?JSON.stringify(Z):Z}let H=!1;const N={url:rn(e),options:{...J,...r},cancel:()=>{H=!0}};if(o.beforeFetch&&Object.assign(N,await o.beforeFetch(N)),H||!i)return w(!1),Promise.resolve(null);let G=null;return k&&k.start(),i(N.url,{...J,...N.options,headers:{...Ao(J.headers),...Ao((V=N.options)==null?void 0:V.headers)}}).then(async K=>{if(D.value=K,C.value=K.status,G=await K.clone()[s.type](),!K.ok)throw $.value=d||null,new Error(K.statusText);return o.afterFetch&&({data:G}=await o.afterFetch({data:G,response:K})),$.value=G,f.trigger(K),K}).catch(async K=>{let Z=K.message||K.name;if(o.onFetchError&&({error:Z,data:G}=await o.onFetchError({data:G,error:K,response:D.value})),L.value=Z,o.updateDataOnError&&($.value=G),l.trigger(K),v)throw K;return null}).finally(()=>{B===y&&w(!1),k&&k.stop(),u.trigger(null)})},E=ko(o.refetch);be([E,ko(e)],([v])=>v&&M(),{deep:!0});const R={isFinished:jr(m),isFetching:jr(x),statusCode:C,response:D,error:L,data:$,canAbort:_,aborted:F,abort:O,execute:M,onFetchResponse:f.on,onFetchError:l.on,onFetchFinally:u.on,get:I("GET"),put:I("PUT"),post:I("POST"),delete:I("DELETE"),patch:I("PATCH"),head:I("HEAD"),options:I("OPTIONS"),json:A("json"),text:A("text"),blob:A("blob"),arrayBuffer:A("arrayBuffer"),formData:A("formData")};function I(v){return(b,V)=>{if(!x.value)return s.method=v,s.payload=b,s.payloadType=V,Qo(s.payload)&&be([E,ko(s.payload)],([B])=>B&&M(),{deep:!0}),{...R,then(B,J){return P().then(B,J)}}}}function P(){return new Promise((v,b)=>{uw(m).toBe(!0).then(()=>v(R)).catch(V=>b(V))})}function A(v){return()=>{if(!x.value)return s.type=v,{...R,then(b,V){return P().then(b,V)}}}}return o.immediate&&Promise.resolve().then(()=>M()),{...R,then(v,b){return P().then(v,b)}}}const pw=()=>{let e,t;const a=new AbortController;return{promise:new Promise((r,o)=>{e=r,t=o}),ac:a,resolve:e,reject:t}},ui=e=>{console.warn(`âš ï¸ [uploadthing][deprecated] ${e}`)};var vw="7.7.2";const hw=e=>{const t=new URL(e.url),a=new URLSearchParams(t.search);return a.set("actionType",e.actionType),a.set("slug",e.slug),t.search=a.toString(),t},jl=e=>(t,a)=>gl(function*(){const n=hw({url:e.url,slug:e.endpoint,actionType:t}),r=new Headers(yield*ab(async()=>typeof e.headers=="function"?await e.headers():e.headers));return e.package&&r.set("x-uploadthing-package",e.package),r.set("x-uploadthing-version",vw),r.set("Content-Type","application/json"),yield*Dl(n,{method:"POST",body:JSON.stringify(a),headers:r}).pipe(bl(Kb),Cn(Hi),xo("FetchError",s=>ln(new Ia({code:"INTERNAL_CLIENT_ERROR",message:`Failed to report event "${t}" to UploadThing server`,cause:s}))),xo("BadRequestError",s=>ln(new Ia({code:Jb(s.status),message:s.getMessage(),cause:s.json}))),xo("InvalidJson",s=>ln(new Ia({code:"INTERNAL_CLIENT_ERROR",message:"Failed to parse response from UploadThing server",cause:s}))))});var gw="7.7.2";const yw=(e,t,a,n)=>fs(r=>{const o=new XMLHttpRequest;o.open("PUT",a.url,!0),o.setRequestHeader("Range",`bytes=${t}-`),o.setRequestHeader("x-uploadthing-version",gw),o.responseType="json";let s=0;o.upload.addEventListener("progress",({loaded:d})=>{const g=d-s;n==null||n({loaded:d,delta:g}),s=d}),o.addEventListener("load",()=>{o.status>=200&&o.status<300&&ns(o.response)?fn(o.response,"error")?r(new Ia({code:"UPLOAD_FAILED",message:String(o.response.error),data:o.response})):r(Vt(o.response)):r(new Ia({code:"UPLOAD_FAILED",message:`XHR failed ${o.status} ${o.statusText}`,data:o.response}))}),o.addEventListener("error",()=>{r(new Ia({code:"UPLOAD_FAILED"}))});const i=new FormData;return"uri"in e?i.append("file",{uri:e.uri,type:e.type,name:e.name,...t>0&&{range:t}}):i.append("file",t>0?e.slice(t):e),o.send(i),ds(()=>o.abort())}),Ml=(e,t,a)=>Dl(t.url,{method:"HEAD"}).pipe(Cn(({headers:n})=>parseInt(n.get("x-ut-range-start")??"0",10)),ob(n=>{var r;return(r=a.onUploadProgress)==null?void 0:r.call(a,{delta:n,loaded:n})}),na(n=>yw(e,n,t,r=>{var o;return(o=a.onUploadProgress)==null?void 0:o.call(a,{delta:r.delta,loaded:r.loaded+n})})),Cn(Hi),Cn(n=>({name:e.name,size:e.size,key:t.key,lastModified:e.lastModified,serverData:n.serverData,get url(){return ui("`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),n.url},get appUrl(){return ui("`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),n.appUrl},ufsUrl:n.ufsUrl,customId:t.customId,type:e.type,fileHash:n.fileHash}))),bw=(e,t)=>{const a=jl({endpoint:String(e),package:t.package,url:t.url,headers:t.headers}),n=t.files.reduce((o,s)=>o+s.size,0);let r=0;return na(a("upload",{input:"input"in t?t.input:null,files:t.files.map(o=>({name:o.name,size:o.size,type:o.type,lastModified:o.lastModified}))}),o=>kb(o,(s,i)=>na(ds(()=>{var d;return(d=t.onUploadBegin)==null?void 0:d.call(t,{file:t.files[i].name})}),()=>Ml(t.files[i],s,{onUploadProgress:d=>{var g;r+=d.delta,(g=t.onUploadProgress)==null||g.call(t,{file:t.files[i],progress:d.loaded/t.files[i].size*100,loaded:d.loaded,delta:d.delta,totalLoaded:r,totalProgress:r/n})}})),{concurrency:6}))};var ww="7.7.2";const _w=ww,Ol=e=>{const t=Lb();return{uploadFiles:(r,o)=>{const s=typeof r=="function"?r(t):r,i=(e==null?void 0:e.fetch)??window.fetch;return bw(s,{...o,skipPolling:{},url:cr(e==null?void 0:e.url),package:(e==null?void 0:e.package)??"uploadthing/client",input:o.input}).pipe(Co(Er,i),d=>Fr(d,o.signal&&{signal:o.signal})).then(d=>{if(d._tag==="Success")return d.value;throw d.cause._tag==="Interrupt"?new dr:_o(d.cause)})},createUpload:async(r,o)=>{const s=new Map,i=typeof r=="function"?r(t):r,d=jl({endpoint:String(i),package:(e==null?void 0:e.package)??"uploadthing/client",url:cr(e==null?void 0:e.url),headers:o.headers}),g=(e==null?void 0:e.fetch)??window.fetch,f=await Pb(d("upload",{input:"input"in o?o.input:null,files:o.files.map(D=>({name:D.name,size:D.size,type:D.type,lastModified:D.lastModified}))}).pipe(Co(Er,g))),l=o.files.reduce((D,L)=>D+L.size,0);let u=0;const m=(D,L)=>Ml(D,L,{onUploadProgress:$=>{var _;u+=$.delta,(_=o.onUploadProgress)==null||_.call(o,{...$,file:D,progress:Math.round($.loaded/D.size*100),totalLoaded:u,totalProgress:Math.round(u/l*100)})}}).pipe(Co(Er,g));for(const[D,L]of f.entries()){const $=o.files[D];if(!$)continue;const _=pw();s.set($,{deferred:_,presigned:L}),Fr(m($,L),{signal:_.ac.signal}).then(S=>{if(S._tag==="Success")return _.resolve(S.value);throw S.cause._tag==="Interrupt"?new Ir:_o(S.cause)}).catch(S=>{S instanceof Ir||_.reject(S)})}return{pauseUpload:D=>{const L=bo(D??o.files);for(const $ of L){const _=s.get($);if(!_)return;if(_.deferred.ac.signal.aborted)throw new dr;_.deferred.ac.abort()}},resumeUpload:D=>{const L=bo(D??o.files);for(const $ of L){const _=s.get($);if(!_)throw"No upload found";_.deferred.ac=new AbortController,Fr(m($,_.presigned),{signal:_.deferred.ac.signal}).then(S=>{if(S._tag==="Success")return _.deferred.resolve(S.value);throw S.cause._tag==="Interrupt"?new Ir:_o(S.cause)}).catch(S=>{S instanceof Ir||_.deferred.reject(S)})}},done:async D=>{const L=[],$=bo(D??o.files);for(const S of $){const k=s.get(S);if(!k)throw"No upload found";L.push(k.deferred.promise)}const _=await Promise.all(L);return D?_[0]:_}}},routeRegistry:t}};function Hn(e,t,a,n){function r(o){return o instanceof a?o:new a(function(s){s(o)})}return new(a||(a=Promise))(function(o,s){function i(f){try{g(n.next(f))}catch(l){s(l)}}function d(f){try{g(n.throw(f))}catch(l){s(l)}}function g(f){f.done?o(f.value):r(f.value).then(i,d)}g((n=n.apply(e,t||[])).next())})}function Gn(e,t){var a={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function i(g){return function(f){return d([g,f])}}function d(g){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,g[0]&&(a=0)),a;)try{if(n=1,r&&(o=g[0]&2?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,r=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){a.label=g[1];break}if(g[0]===6&&a.label<o[1]){a.label=o[1],o=g;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(g);break}o[2]&&a.ops.pop(),a.trys.pop();continue}g=t.call(e,a)}catch(f){g=[6,f],r=0}finally{n=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function di(e,t){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var n=a.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(i){s={error:i}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return o}function ci(e,t,a){if(a||arguments.length===2)for(var n=0,r=t.length,o;n<r;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var Cw=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function wr(e,t){var a=xw(e);if(typeof a.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(a,"path",{value:typeof t=="string"?t:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return a}function xw(e){var t=e.name,a=t&&t.lastIndexOf(".")!==-1;if(a&&!e.type){var n=t.split(".").pop().toLowerCase(),r=Cw.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}var Sw=[".DS_Store","Thumbs.db"];function fi(e){return Hn(this,void 0,void 0,function(){return Gn(this,function(t){return Gr(e)&&Dw(e.dataTransfer)?[2,Iw(e.dataTransfer,e.type)]:kw(e)?[2,Aw(e)]:Array.isArray(e)&&e.every(function(a){return"getFile"in a&&typeof a.getFile=="function"})?[2,Pw(e)]:[2,[]]})})}function Dw(e){return Gr(e)}function kw(e){return Gr(e)&&Gr(e.target)}function Gr(e){return typeof e=="object"&&e!==null}function Aw(e){return Wo(e.target.files).map(function(t){return wr(t)})}function Pw(e){return Hn(this,void 0,void 0,function(){var t;return Gn(this,function(a){switch(a.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return t=a.sent(),[2,t.map(function(n){return wr(n)})]}})})}function Iw(e,t){return Hn(this,void 0,void 0,function(){var a,n;return Gn(this,function(r){switch(r.label){case 0:return e.items?(a=Wo(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,a]:[4,Promise.all(a.map(Tw))]):[3,2];case 1:return n=r.sent(),[2,mi(Vl(n))];case 2:return[2,mi(Wo(e.files).map(function(o){return wr(o)}))]}})})}function mi(e){return e.filter(function(t){return Sw.indexOf(t.name)===-1})}function Wo(e){if(e===null)return[];for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push(n)}return t}function Tw(e){if(typeof e.webkitGetAsEntry!="function")return pi(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Bl(t):pi(e)}function Vl(e){return e.reduce(function(t,a){return ci(ci([],di(t),!1),di(Array.isArray(a)?Vl(a):[a]),!1)},[])}function pi(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var a=wr(t);return Promise.resolve(a)}function $w(e){return Hn(this,void 0,void 0,function(){return Gn(this,function(t){return[2,e.isDirectory?Bl(e):Fw(e)]})})}function Bl(e){var t=e.createReader();return new Promise(function(a,n){var r=[];function o(){var s=this;t.readEntries(function(i){return Hn(s,void 0,void 0,function(){var d,g,f;return Gn(this,function(l){switch(l.label){case 0:if(i.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return d=l.sent(),a(d),[3,4];case 3:return g=l.sent(),n(g),[3,4];case 4:return[3,6];case 5:f=Promise.all(i.map($w)),r.push(f),o(),l.label=6;case 6:return[2]}})})},function(i){n(i)})}o()})}function Fw(e){return Hn(this,void 0,void 0,function(){return Gn(this,function(t){return[2,new Promise(function(a,n){e.file(function(r){var o=wr(r,e.fullPath);a(o)},function(r){n(r)})})]})})}var Ew={uploadthing:"^7.2.0"};function Nw(e){const t=W(e);return be(t,()=>{}),t.value}const Rw=(e,t,a)=>{const{data:n}=mw(t.href,{fetch:e});return te(()=>{var o;return n.value?(o=(typeof n.value=="string"?JSON.parse(n.value):n.value).find(s=>s.slug===a))==null?void 0:o.config:void 0})};function ys(e,t,a,n){const r=(n==null?void 0:n.uploadProgressGranularity)??"coarse",{uploadFiles:o,routeRegistry:s}=Ol({fetch:a,url:e,package:"@uploadthing/vue"}),i=W(!1),d=W(0),g=W(new Map),f=Nw(async(...m)=>{var C,D,L,$;const x=await((C=n==null?void 0:n.onBeforeUploadBegin)==null?void 0:C.call(n,m[0]))??m[0],F=m[1];i.value=!0,(D=n==null?void 0:n.onUploadProgress)==null||D.call(n,0),x.forEach(_=>g.value.set(_,0));try{const _=await o(t,{signal:n==null?void 0:n.signal,headers:n==null?void 0:n.headers,files:x,onUploadProgress:S=>{if(!(n!=null&&n.onUploadProgress))return;g.value.set(S.file,S.progress);let k=0;g.value.forEach(w=>{k+=w});const O=Yb(Math.min(100,k/g.value.size),r);O!==d.value&&(n.onUploadProgress(O),d.value=O)},onUploadBegin({file:S}){n!=null&&n.onUploadBegin&&n.onUploadBegin(S)},input:F});return await((L=n==null?void 0:n.onClientUploadComplete)==null?void 0:L.call(n,_)),_}catch(_){if(_ instanceof dr)throw _;let S;_ instanceof Ia?S=_:(S=qb(_),console.error("Something went wrong. Please contact UploadThing and provide the following cause:",S.cause instanceof Error?S.cause.toString():S.cause)),await(($=n==null?void 0:n.onUploadError)==null?void 0:$.call(n,S))}finally{i.value=!1,g.value=new Map,d.value=0}}),l=te(()=>Hb(t,s)),u=Rw(a,e,l.value);return{startUpload:f,isUploading:i,routeConfig:u,permittedFileInfo:u.value?{slug:l.value,config:u.value}:void 0}}const jw=e=>{Ub("@uploadthing/vue",Ew.uploadthing,_w);const t=(e==null?void 0:e.fetch)??globalThis.fetch,a=cr(e==null?void 0:e.url),n=Ol({fetch:t,url:a,package:"@uploadthing/vue"});function r(o,s){return ys(a,o,t,s)}return{useUploadThing:r,...n}},Ul=e=>{const t=new AbortController;wt(()=>{document.addEventListener("paste",e,{signal:t.signal})}),Mn(()=>{t.abort()})},zl=Se(()=>()=>st("svg",{class:"z-10 block h-5 w-5 animate-spin align-middle text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 576 512"},st("path",{fill:"currentColor",d:"M256 32C256 14.33 270.3 0 288 0C429.4 0 544 114.6 544 256C544 302.6 531.5 346.4 509.7 384C500.9 399.3 481.3 404.6 465.1 395.7C450.7 386.9 445.5 367.3 454.3 351.1C470.6 323.8 480 291 480 255.1C480 149.1 394 63.1 288 63.1C270.3 63.1 256 49.67 256 31.1V32z"}))),Ll=Se(e=>()=>st("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","stroke-linecap":"round","stroke-linejoin":"round",class:e.cn("fill-none stroke-current stroke-2","hidden size-4 group-hover:block")},st("circle",{cx:"12",cy:"12",r:"10"}),st("path",{d:"m4.9 4.9 14.2 14.2"})),{props:["cn"]}),Mw=e=>Se(t=>{const a=t.config,{mode:n="auto",appendOnPaste:r=!1,cn:o=Tl}=a.config??{},s=W(new AbortController),i=W(null),d=W(0),g=W([]),f=or({signal:s.value.signal,headers:a.headers,onClientUploadComplete:E=>{var R;i.value&&(i.value.value=""),g.value=[],(R=a.onClientUploadComplete)==null||R.call(a,E),d.value=0},uploadProgressGranularity:a.uploadProgressGranularity,onUploadProgress:E=>{var R;d.value=E,(R=a.onUploadProgress)==null||R.call(a,E)},onUploadError:a.onUploadError,onUploadBegin:a.onUploadBegin,onBeforeUploadBegin:a.onBeforeUploadBegin}),{startUpload:l,isUploading:u,routeConfig:m}=ys(cr(e==null?void 0:e.url),a.endpoint,a.fetch??(e==null?void 0:e.fetch)??globalThis.fetch,f),x=te(()=>Pl(m.value)),F=te(()=>{const E=x.value.fileTypes.length>0;return L.value.disabled?"disabled":E?u.value?"uploading":"ready":"readying"}),C=E=>{const R="input"in a?a.input:void 0;l(E,R).catch(I=>{var P;if(I instanceof dr)(P=a.onUploadAborted)==null||P.call(a);else throw I})},D=E=>{if(F.value==="uploading"){E.preventDefault(),E.stopPropagation(),s.value.abort(),s.value=new AbortController;return}n==="manual"&&g.value.length>0&&(E.preventDefault(),E.stopPropagation(),C(g.value))},L=te(()=>({type:"file",ref:i,multiple:x.value.multiple,accept:kl(x.value.fileTypes).join(", "),disabled:a.disabled??x.value.fileTypes.length===0,tabindex:x.value.fileTypes.length===0?-1:0,onChange:E=>{var I;if(!E.target||!("files"in E.target))return;const R=Array.from(E.target.files);if((I=a.onChange)==null||I.call(a,R),n==="manual"){g.value=R;return}C(R)}}));Ul(E=>{var I;if(!r||document.activeElement!==i.value)return;const R=Al(E);R&&(g.value=[...g.value,...R],(I=a.onChange)==null||I.call(a,g.value),n==="auto"&&C(g.value))});const $=te(()=>({ready:F.value!=="readying",isUploading:F.value==="uploading",uploadProgress:d.value,fileTypes:x.value.fileTypes,files:g.value})),_=()=>{var R;const E=gn((R=a.content)==null?void 0:R.button,$.value);return E||(F.value==="uploading"?d.value>=100?st(zl,null):st("span",{class:"z-50"},st("span",{class:"block group-hover:hidden"},Math.round(d.value),"%"),st(Ll,{cn:o,class:"hidden size-4 group-hover:block"})):n==="manual"&&g.value.length>0?`Upload ${g.value.length} file${g.value.length===1?"":"s"}`:`Choose File${L.value.multiple?"(s)":""}`)},S=()=>{var E,R,I;return st("button",{onClick:()=>{var P;g.value=[],i.value&&(i.value.value=""),(P=a.onChange)==null||P.call(a,[])},class:o("h-[1.25rem] cursor-pointer rounded border-none bg-transparent text-gray-500 transition-colors hover:bg-slate-200 hover:text-gray-600",Na((E=a.appearance)==null?void 0:E.clearBtn,$.value)),style:Ra((R=a.appearance)==null?void 0:R.clearBtn,$.value),"data-state":F.value,"data-ut-element":"clear-btn"},gn((I=a.content)==null?void 0:I.clearBtn,$.value)??"Clear")},k=()=>{var E,R,I;return st("div",{class:o("h-[1.25rem] text-xs leading-5 text-gray-600",Na((E=a.appearance)==null?void 0:E.allowedContent,$.value)),style:Ra((R=a.appearance)==null?void 0:R.allowedContent,$.value),"data-state":F,"data-ut-element":"allowed-content"},gn((I=a.content)==null?void 0:I.allowedContent,$.value)??Il(m.value))},O=te(()=>{var E;return o("group relative flex h-10 w-36 cursor-pointer items-center justify-center overflow-hidden rounded-md text-white after:transition-[width] after:duration-500 focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","disabled:pointer-events-none","data-[state=disabled]:cursor-not-allowed data-[state=readying]:cursor-not-allowed","data-[state=disabled]:bg-blue-400 data-[state=ready]:bg-blue-600 data-[state=readying]:bg-blue-400 data-[state=uploading]:bg-blue-400","after:absolute after:left-0 after:h-full after:w-[var(--progress-width)] after:content-[''] data-[state=uploading]:after:bg-blue-600",Na((E=a.appearance)==null?void 0:E.button,$.value))}),w=te(()=>{var E;return o("flex flex-col items-center justify-center gap-1",a.class,Na((E=a.appearance)==null?void 0:E.container,$.value))}),y=te(()=>{var E;return{"--progress-width":`${d.value}%`,...Ra((E=a.appearance)==null?void 0:E.container,$.value)}}),M=te(()=>{var E;return Ra((E=a.appearance)==null?void 0:E.button,$.value)});return()=>st("div",{class:w.value,style:y.value,"data-state":F.value},st("label",{class:O.value,style:M.value??{},"data-state":F.value,"data-ut-element":"button",onClick:D},st("input",{class:"sr-only",...L.value}),_()),n==="manual"&&g.value.length>0?S():k())},{props:["config"]}),Ow=e=>Se(t=>{const a=t.config,{mode:n="auto",appendOnPaste:r=!1,cn:o=Tl}=a.config??{},s=W(new AbortController),i=W([]),d=W(0),g=or({signal:s.value.signal,headers:a.headers,onClientUploadComplete:H=>{var N;i.value=[],(N=a.onClientUploadComplete)==null||N.call(a,H),d.value=0},uploadProgressGranularity:a.uploadProgressGranularity,onUploadProgress:H=>{var N;d.value=H,(N=a.onUploadProgress)==null||N.call(a,H)},onUploadError:a.onUploadError,onUploadBegin:a.onUploadBegin,onBeforeUploadBegin:a.onBeforeUploadBegin}),{startUpload:f,isUploading:l,routeConfig:u}=ys(cr(e==null?void 0:e.url),a.endpoint,a.fetch??(e==null?void 0:e.fetch)??globalThis.fetch,g),m=te(()=>Pl(u.value)),x=te(()=>Qb(m.value.fileTypes)),F=te(()=>{const H=m.value.fileTypes.length>0;return $.disabled?"disabled":H?l.value?"uploading":"ready":"readying"}),C=H=>{const N="input"in a?a.input:void 0;f(H,N).catch(G=>{var K;if(G instanceof dr)(K=a.onUploadAborted)==null||K.call(a);else throw G})},D=H=>{if(F.value==="uploading"){H.preventDefault(),H.stopPropagation(),s.value.abort(),s.value=new AbortController;return}n==="manual"&&i.value.length>0&&(H.preventDefault(),H.stopPropagation(),C(i.value))},$=or({onDrop:H=>{var N,G;(N=a.onDrop)==null||N.call(a,H),(G=a.onChange)==null||G.call(a,H),i.value=H,n==="auto"&&C(H)},accept:x.value,multiple:m.value.multiple,disabled:a.disabled??m.value.fileTypes.length===0});be(()=>x.value,H=>{$.accept=H}),be(()=>m.value,H=>{$.multiple=H.multiple,$.disabled=a.disabled??H.fileTypes.length===0});const{getRootProps:_,getInputProps:S,isDragActive:k,rootRef:O}=Vw($);Ul(H=>{var G;if(!r||document.activeElement!==O.value)return;const N=Al(H);N&&(i.value=[...i.value,...N],(G=a.onChange)==null||G.call(a,i.value),n==="auto"&&C(i.value))});const w=te(()=>({ready:F.value!=="readying",isUploading:F.value==="uploading",uploadProgress:d.value,fileTypes:m.value.fileTypes,isDragActive:k.value,files:i.value})),y=()=>{var N,G,K;const H=gn((N=a.content)==null?void 0:N.uploadIcon,w.value);return H||st("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",class:o("mx-auto block h-12 w-12 align-middle text-gray-400",Na((G=a.appearance)==null?void 0:G.uploadIcon,w.value)),style:Ra((K=a.appearance)==null?void 0:K.uploadIcon,w.value),"data-ut-element":"upload-icon","data-state":F.value},st("path",{fill:"currentColor","fill-rule":"evenodd",d:"M5.5 17a4.5 4.5 0 0 1-1.44-8.765a4.5 4.5 0 0 1 8.302-3.046a3.5 3.5 0 0 1 4.504 4.272A4 4 0 0 1 15 17H5.5Zm3.75-2.75a.75.75 0 0 0 1.5 0V9.66l1.95 2.1a.75.75 0 1 0 1.1-1.02l-3.25-3.5a.75.75 0 0 0-1.1 0l-3.25 3.5a.75.75 0 1 0 1.1 1.02l1.95-2.1v4.59Z","clip-rule":"evenodd"}))},M=te(()=>{var N;const H=gn((N=a.content)==null?void 0:N.label,w.value);return H||`Choose ${$.multiple?"file(s)":"a file"} or drag and drop`}),E=()=>{var N;const H=gn((N=a.content)==null?void 0:N.allowedContent,w.value);return H||Il(u.value)||" "},R=()=>{var N;const H=gn((N=a.content)==null?void 0:N.button,w.value);return H||(F.value==="uploading"?d.value===100?st(zl,null):st("span",{class:"z-50"},st("span",{class:"block group-hover:hidden"},Math.round(d.value),"%"),st(Ll,{cn:o,class:"hidden size-4 group-hover:block"})):n==="manual"&&i.value.length>0?`Upload ${i.value.length} file${i.value.length===1?"":"s"}`:`Choose File${S().multiple?"(s)":""}`)},I=te(()=>{var H;return o("mt-2 flex flex-col items-center justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 text-center",k.value&&"bg-blue-600/10",a.class,Na((H=a.appearance)==null?void 0:H.container,w.value))}),P=te(()=>{var H;return o("relative mt-4 flex w-64 cursor-pointer items-center justify-center text-sm font-semibold leading-6 text-gray-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2 hover:text-blue-500",F.value==="ready"?"text-blue-600":"text-gray-500",Na((H=a.appearance)==null?void 0:H.label,w.value))}),A=te(()=>{var H;return o("m-0 h-[1.25rem] text-xs leading-5 text-gray-600",Na((H=a.appearance)==null?void 0:H.allowedContent,w.value))}),v=te(()=>{var H;return o("group relative mt-4 flex h-10 w-36 items-center justify-center overflow-hidden rounded-md border-none text-base text-white","after:absolute after:left-0 after:h-full after:w-[var(--progress-width)] after:bg-blue-600 after:transition-[width] after:duration-500 after:content-['']","focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","disabled:pointer-events-none","data-[state=disabled]:cursor-not-allowed data-[state=readying]:cursor-not-allowed","data-[state=disabled]:bg-blue-400 data-[state=ready]:bg-blue-600 data-[state=readying]:bg-blue-400 data-[state=uploading]:bg-blue-400",Na((H=a.appearance)==null?void 0:H.button,w.value))}),b=te(()=>{var H;return Ra((H=a.appearance)==null?void 0:H.container,w.value)}),V=te(()=>{var H;return Ra((H=a.appearance)==null?void 0:H.label,w.value)}),B=te(()=>{var H;return Ra((H=a.appearance)==null?void 0:H.allowedContent,w.value)}),J=te(()=>{var H;return{"--progress-width":`${d.value}%`,...Ra((H=a.appearance)==null?void 0:H.button,w.value)}});return()=>st("div",{..._(),class:I.value,style:b.value,"data-state":F.value},y(),st("label",{class:P.value,style:V.value,"data-ut-element":"label","data-state":F.value},st("input",{class:"sr-only",...S()}),M.value),st("div",{class:A.value,style:B.value,"data-ut-element":"allowed-content","data-state":F.value},E()),st("button",{class:v.value,style:J.value,onClick:D,"data-ut-element":"button","data-state":F.value,type:"button",disabled:i.value.length===0||F.value==="disabled"},R()))},{props:["config"]});function Vw(e){const t=new AbortController,a=W({disabled:!1,maxSize:Number.POSITIVE_INFINITY,minSize:0,multiple:!0,maxFiles:0,...e});be(()=>({...e}),w=>{a.value={...a.value,...w}});const n=te(()=>sw(a.value.accept)),r=W(),o=W(),s=W([]),i=or(si),d=()=>{i.isFileDialogActive&&setTimeout(()=>{if(o.value){const{files:w}=o.value;w!=null&&w.length||(i.isFileDialogActive=!1)}},300)},g=w=>{var y;(y=r.value)!=null&&y.contains(w.target)||(w.preventDefault(),s.value=[])},f=w=>{w.preventDefault()};wt(()=>{window.addEventListener("focus",d,{capture:!1,signal:t.signal}),document.addEventListener("dragover",f,{capture:!1,signal:t.signal}),document.addEventListener("drop",g,{capture:!1,signal:t.signal})}),Mn(()=>{t.abort()});const l=w=>{w.preventDefault(),s.value=[...s.value,w.target],So(w)&&Promise.resolve(fi(w)).then(y=>{if(oi(w))return;const M=y.length,E=M>0&&aw({files:y,accept:n.value,minSize:a.value.minSize,maxSize:a.value.maxSize,multiple:a.value.multiple,maxFiles:a.value.maxFiles}),R=M>0&&!E;i.isDragAccept=E,i.isDragReject=R,i.isDragActive=!0}).catch(Ho)},u=w=>{if(w.preventDefault(),w.stopPropagation(),So(w)&&w.dataTransfer)try{w.dataTransfer.dropEffect="copy"}catch{}return!1},m=w=>{w.preventDefault(),w.stopPropagation();const y=s.value.filter(E=>{var R;return(R=r.value)==null?void 0:R.contains(E)}),M=y.indexOf(w.target);M!==-1&&y.splice(M,1),s.value=y,!(y.length>0)&&(i.isDragActive=!1,i.isDragAccept=!1,i.isDragReject=!1)},x=w=>{const y=[];w.forEach(M=>{const E=$l(M,n.value),R=Fl(M,a.value.minSize,a.value.maxSize);E&&R&&y.push(M)}),El(y,a.value.multiple,a.value.maxFiles)||y.splice(0),i.acceptedFiles=y,i.isFileDialogActive=!1,a.value.onDrop(y)},F=w=>{w.preventDefault(),s.value=[],So(w)&&Promise.resolve(fi(w)).then(y=>{oi(w)||x(y)}).catch(Ho),Object.assign(i,si)},C=()=>{o.value&&(o.value.value="",o.value.click(),i.isFileDialogActive=!0)},D=w=>{var y;(y=r.value)!=null&&y.isEqualNode(w.target)&&tw(w)&&(w.preventDefault(),C())},L=w=>{w.stopPropagation(),i.isFileDialogActive&&w.preventDefault()},$=()=>i.isFocused=!0,_=()=>i.isFocused=!1,S=()=>{nw()?setTimeout(C,0):C()},k=()=>({ref:r,role:"presentation",...a.value.disabled?{}:{tabindex:0,onKeydown:D,onFocus:$,onBlur:_,onClick:S,onDragenter:l,onDragover:u,onDragleave:m,onDrop:F}}),O=()=>({ref:o,type:"file",style:"display: none",accept:n.value??"",multiple:a.value.multiple,tabindex:-1,...a.value.disabled?{}:{onChange:F,onClick:L}});return{...Di(i),getInputProps:O,getRootProps:k,rootRef:r,inputRef:o}}const Bw=void 0,bs={url:Bw},Uw=Mw(bs),zw=Ow(bs);jw(bs);function Lw(e,t){return t.forEach(function(a){a&&typeof a!="string"&&!Array.isArray(a)&&Object.keys(a).forEach(function(n){if(n!=="default"&&!(n in e)){var r=Object.getOwnPropertyDescriptor(a,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return a[n]}})}})}),Object.freeze(e)}function Hl(e,t){return new Promise(function(a,n){let r;return Hw(e).then(function(o){try{return r=o,a(new Blob([t.slice(0,2),r,t.slice(2)],{type:"image/jpeg"}))}catch(s){return n(s)}},n)})}const Hw=e=>new Promise((t,a)=>{const n=new FileReader;n.addEventListener("load",({target:{result:r}})=>{const o=new DataView(r);let s=0;if(o.getUint16(s)!==65496)return a("not a valid JPEG");for(s+=2;;){const i=o.getUint16(s);if(i===65498)break;const d=o.getUint16(s+2);if(i===65505&&o.getUint32(s+4)===1165519206){const g=s+10;let f;switch(o.getUint16(g)){case 18761:f=!0;break;case 19789:f=!1;break;default:return a("TIFF header contains invalid endian")}if(o.getUint16(g+2,f)!==42)return a("TIFF header contains invalid version");const l=o.getUint32(g+4,f),u=g+l+2+12*o.getUint16(g+l,f);for(let m=g+l+2;m<u;m+=12)if(o.getUint16(m,f)==274){if(o.getUint16(m+2,f)!==3)return a("Orientation data type is invalid");if(o.getUint32(m+4,f)!==1)return a("Orientation data count is invalid");o.setUint16(m+8,1,f);break}return t(r.slice(s,s+2+d))}s+=2+d}return t(new Blob)}),n.readAsArrayBuffer(e)});var Wr={},Gw={get exports(){return Wr},set exports(e){Wr=e}};(function(e){var t,a,n={};Gw.exports=n,n.parse=function(r,o){for(var s=n.bin.readUshort,i=n.bin.readUint,d=0,g={},f=new Uint8Array(r),l=f.length-4;i(f,l)!=101010256;)l--;d=l,d+=4;var u=s(f,d+=4);s(f,d+=2);var m=i(f,d+=2),x=i(f,d+=4);d+=4,d=x;for(var F=0;F<u;F++){i(f,d),d+=4,d+=4,d+=4,i(f,d+=4),m=i(f,d+=4);var C=i(f,d+=4),D=s(f,d+=4),L=s(f,d+2),$=s(f,d+4);d+=6;var _=i(f,d+=8);d+=4,d+=D+L+$,n._readLocal(f,_,g,m,C,o)}return g},n._readLocal=function(r,o,s,i,d,g){var f=n.bin.readUshort,l=n.bin.readUint;l(r,o),f(r,o+=4),f(r,o+=2);var u=f(r,o+=2);l(r,o+=2),l(r,o+=4),o+=4;var m=f(r,o+=8),x=f(r,o+=2);o+=2;var F=n.bin.readUTF8(r,o,m);if(o+=m,o+=x,g)s[F]={size:d,csize:i};else{var C=new Uint8Array(r.buffer,o);if(u==0)s[F]=new Uint8Array(C.buffer.slice(o,o+i));else{if(u!=8)throw"unknown compression method: "+u;var D=new Uint8Array(d);n.inflateRaw(C,D),s[F]=D}}},n.inflateRaw=function(r,o){return n.F.inflate(r,o)},n.inflate=function(r,o){return r[0],r[1],n.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),o)},n.deflate=function(r,o){o==null&&(o={level:6});var s=0,i=new Uint8Array(50+Math.floor(1.1*r.length));i[s]=120,i[s+1]=156,s+=2,s=n.F.deflateRaw(r,i,s,o.level);var d=n.adler(r,0,r.length);return i[s+0]=d>>>24&255,i[s+1]=d>>>16&255,i[s+2]=d>>>8&255,i[s+3]=d>>>0&255,new Uint8Array(i.buffer,0,s+4)},n.deflateRaw=function(r,o){o==null&&(o={level:6});var s=new Uint8Array(50+Math.floor(1.1*r.length)),i=n.F.deflateRaw(r,s,i,o.level);return new Uint8Array(s.buffer,0,i)},n.encode=function(r,o){o==null&&(o=!1);var s=0,i=n.bin.writeUint,d=n.bin.writeUshort,g={};for(var f in r){var l=!n._noNeed(f)&&!o,u=r[f],m=n.crc.crc(u,0,u.length);g[f]={cpr:l,usize:u.length,crc:m,file:l?n.deflateRaw(u):u}}for(var f in g)s+=g[f].file.length+30+46+2*n.bin.sizeUTF8(f);s+=22;var x=new Uint8Array(s),F=0,C=[];for(var f in g){var D=g[f];C.push(F),F=n._writeHeader(x,F,f,D,0)}var L=0,$=F;for(var f in g)D=g[f],C.push(F),F=n._writeHeader(x,F,f,D,1,C[L++]);var _=F-$;return i(x,F,101010256),F+=4,d(x,F+=4,L),d(x,F+=2,L),i(x,F+=2,_),i(x,F+=4,$),F+=4,F+=2,x.buffer},n._noNeed=function(r){var o=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},n._writeHeader=function(r,o,s,i,d,g){var f=n.bin.writeUint,l=n.bin.writeUshort,u=i.file;return f(r,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),l(r,o,20),l(r,o+=2,0),l(r,o+=2,i.cpr?8:0),f(r,o+=2,0),f(r,o+=4,i.crc),f(r,o+=4,u.length),f(r,o+=4,i.usize),l(r,o+=4,n.bin.sizeUTF8(s)),l(r,o+=2,0),o+=2,d==1&&(o+=2,o+=2,f(r,o+=6,g),o+=4),o+=n.bin.writeUTF8(r,o,s),d==0&&(r.set(u,o),o+=u.length),o},n.crc={table:function(){for(var r=new Uint32Array(256),o=0;o<256;o++){for(var s=o,i=0;i<8;i++)1&s?s=3988292384^s>>>1:s>>>=1;r[o]=s}return r}(),update:function(r,o,s,i){for(var d=0;d<i;d++)r=n.crc.table[255&(r^o[s+d])]^r>>>8;return r},crc:function(r,o,s){return 4294967295^n.crc.update(4294967295,r,o,s)}},n.adler=function(r,o,s){for(var i=1,d=0,g=o,f=o+s;g<f;){for(var l=Math.min(g+5552,f);g<l;)d+=i+=r[g++];i%=65521,d%=65521}return d<<16|i},n.bin={readUshort:function(r,o){return r[o]|r[o+1]<<8},writeUshort:function(r,o,s){r[o]=255&s,r[o+1]=s>>8&255},readUint:function(r,o){return 16777216*r[o+3]+(r[o+2]<<16|r[o+1]<<8|r[o])},writeUint:function(r,o,s){r[o]=255&s,r[o+1]=s>>8&255,r[o+2]=s>>16&255,r[o+3]=s>>24&255},readASCII:function(r,o,s){for(var i="",d=0;d<s;d++)i+=String.fromCharCode(r[o+d]);return i},writeASCII:function(r,o,s){for(var i=0;i<s.length;i++)r[o+i]=s.charCodeAt(i)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,o,s){for(var i,d="",g=0;g<s;g++)d+="%"+n.bin.pad(r[o+g].toString(16));try{i=decodeURIComponent(d)}catch{return n.bin.readASCII(r,o,s)}return i},writeUTF8:function(r,o,s){for(var i=s.length,d=0,g=0;g<i;g++){var f=s.charCodeAt(g);if((4294967168&f)==0)r[o+d]=f,d++;else if((4294965248&f)==0)r[o+d]=192|f>>6,r[o+d+1]=128|f>>0&63,d+=2;else if((4294901760&f)==0)r[o+d]=224|f>>12,r[o+d+1]=128|f>>6&63,r[o+d+2]=128|f>>0&63,d+=3;else{if((4292870144&f)!=0)throw"e";r[o+d]=240|f>>18,r[o+d+1]=128|f>>12&63,r[o+d+2]=128|f>>6&63,r[o+d+3]=128|f>>0&63,d+=4}}return d},sizeUTF8:function(r){for(var o=r.length,s=0,i=0;i<o;i++){var d=r.charCodeAt(i);if((4294967168&d)==0)s++;else if((4294965248&d)==0)s+=2;else if((4294901760&d)==0)s+=3;else{if((4292870144&d)!=0)throw"e";s+=4}}return s}},n.F={},n.F.deflateRaw=function(r,o,s,i){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],g=n.F.U,f=n.F._goodIndex;n.F._hash;var l=n.F._putsE,u=0,m=s<<3,x=0,F=r.length;if(i==0){for(;u<F;)l(o,m,u+(E=Math.min(65535,F-u))==F?1:0),m=n.F._copyExact(r,u,E,o,m+8),u+=E;return m>>>3}var C=g.lits,D=g.strt,L=g.prev,$=0,_=0,S=0,k=0,O=0,w=0;for(F>2&&(D[w=n.F._hash(r,0)]=0),u=0;u<F;u++){if(O=w,u+1<F-2){w=n.F._hash(r,u+1);var y=u+1&32767;L[y]=D[w],D[w]=y}if(x<=u){($>14e3||_>26697)&&F-u>100&&(x<u&&(C[$]=u-x,$+=2,x=u),m=n.F._writeBlock(u==F-1||x==F?1:0,C,$,k,r,S,u-S,o,m),$=_=k=0,S=u);var M=0;u<F-2&&(M=n.F._bestMatch(r,u,L,O,Math.min(d[2],F-u),d[3]));var E=M>>>16,R=65535&M;if(M!=0){R=65535&M;var I=f(E=M>>>16,g.of0);g.lhst[257+I]++;var P=f(R,g.df0);g.dhst[P]++,k+=g.exb[I]+g.dxb[P],C[$]=E<<23|u-x,C[$+1]=R<<16|I<<8|P,$+=2,x=u+E}else g.lhst[r[u]]++;_++}}for(S==u&&r.length!=0||(x<u&&(C[$]=u-x,$+=2,x=u),m=n.F._writeBlock(1,C,$,k,r,S,u-S,o,m),$=0,_=0,$=_=k=0,S=u);(7&m)!=0;)m++;return m>>>3},n.F._bestMatch=function(r,o,s,i,d,g){var f=32767&o,l=s[f],u=f-l+32768&32767;if(l==f||i!=n.F._hash(r,o-u))return 0;for(var m=0,x=0,F=Math.min(32767,o);u<=F&&--g!=0&&l!=f;){if(m==0||r[o+m]==r[o+m-u]){var C=n.F._howLong(r,o,u);if(C>m){if(x=u,(m=C)>=d)break;u+2<C&&(C=u+2);for(var D=0,L=0;L<C-2;L++){var $=o-u+L+32768&32767,_=$-s[$]+32768&32767;_>D&&(D=_,l=$)}}}u+=(f=l)-(l=s[f])+32768&32767}return m<<16|x},n.F._howLong=function(r,o,s){if(r[o]!=r[o-s]||r[o+1]!=r[o+1-s]||r[o+2]!=r[o+2-s])return 0;var i=o,d=Math.min(r.length,o+258);for(o+=3;o<d&&r[o]==r[o-s];)o++;return o-i},n.F._hash=function(r,o){return(r[o]<<8|r[o+1])+(r[o+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(r,o,s,i,d,g,f,l,u){var m,x,F,C,D,L,$,_,S,k=n.F.U,O=n.F._putsF,w=n.F._putsE;k.lhst[256]++,x=(m=n.F.getTrees())[0],F=m[1],C=m[2],D=m[3],L=m[4],$=m[5],_=m[6],S=m[7];var y=32+((u+3&7)==0?0:8-(u+3&7))+(f<<3),M=i+n.F.contSize(k.fltree,k.lhst)+n.F.contSize(k.fdtree,k.dhst),E=i+n.F.contSize(k.ltree,k.lhst)+n.F.contSize(k.dtree,k.dhst);E+=14+3*$+n.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var R=0;R<286;R++)k.lhst[R]=0;for(R=0;R<30;R++)k.dhst[R]=0;for(R=0;R<19;R++)k.ihst[R]=0;var I=y<M&&y<E?0:M<E?1:2;if(O(l,u,r),O(l,u+1,I),u+=3,I==0){for(;(7&u)!=0;)u++;u=n.F._copyExact(d,g,f,l,u)}else{var P,A;if(I==1&&(P=k.fltree,A=k.fdtree),I==2){n.F.makeCodes(k.ltree,x),n.F.revCodes(k.ltree,x),n.F.makeCodes(k.dtree,F),n.F.revCodes(k.dtree,F),n.F.makeCodes(k.itree,C),n.F.revCodes(k.itree,C),P=k.ltree,A=k.dtree,w(l,u,D-257),w(l,u+=5,L-1),w(l,u+=5,$-4),u+=4;for(var v=0;v<$;v++)w(l,u+3*v,k.itree[1+(k.ordr[v]<<1)]);u+=3*$,u=n.F._codeTiny(_,k.itree,l,u),u=n.F._codeTiny(S,k.itree,l,u)}for(var b=g,V=0;V<s;V+=2){for(var B=o[V],J=B>>>23,H=b+(8388607&B);b<H;)u=n.F._writeLit(d[b++],P,l,u);if(J!=0){var N=o[V+1],G=N>>16,K=N>>8&255,Z=255&N;w(l,u=n.F._writeLit(257+K,P,l,u),J-k.of0[K]),u+=k.exb[K],O(l,u=n.F._writeLit(Z,A,l,u),G-k.df0[Z]),u+=k.dxb[Z],b+=J}}u=n.F._writeLit(256,P,l,u)}return u},n.F._copyExact=function(r,o,s,i,d){var g=d>>>3;return i[g]=s,i[g+1]=s>>>8,i[g+2]=255-i[g],i[g+3]=255-i[g+1],g+=4,i.set(new Uint8Array(r.buffer,o,s),g),d+(s+4<<3)},n.F.getTrees=function(){for(var r=n.F.U,o=n.F._hufTree(r.lhst,r.ltree,15),s=n.F._hufTree(r.dhst,r.dtree,15),i=[],d=n.F._lenCodes(r.ltree,i),g=[],f=n.F._lenCodes(r.dtree,g),l=0;l<i.length;l+=2)r.ihst[i[l]]++;for(l=0;l<g.length;l+=2)r.ihst[g[l]]++;for(var u=n.F._hufTree(r.ihst,r.itree,7),m=19;m>4&&r.itree[1+(r.ordr[m-1]<<1)]==0;)m--;return[o,s,u,d,f,m,i,g]},n.F.getSecond=function(r){for(var o=[],s=0;s<r.length;s+=2)o.push(r[s+1]);return o},n.F.nonZero=function(r){for(var o="",s=0;s<r.length;s+=2)r[s+1]!=0&&(o+=(s>>1)+",");return o},n.F.contSize=function(r,o){for(var s=0,i=0;i<o.length;i++)s+=o[i]*r[1+(i<<1)];return s},n.F._codeTiny=function(r,o,s,i){for(var d=0;d<r.length;d+=2){var g=r[d],f=r[d+1];i=n.F._writeLit(g,o,s,i);var l=g==16?2:g==17?3:7;g>15&&(n.F._putsE(s,i,f,l),i+=l)}return i},n.F._lenCodes=function(r,o){for(var s=r.length;s!=2&&r[s-1]==0;)s-=2;for(var i=0;i<s;i+=2){var d=r[i+1],g=i+3<s?r[i+3]:-1,f=i+5<s?r[i+5]:-1,l=i==0?-1:r[i-1];if(d==0&&g==d&&f==d){for(var u=i+5;u+2<s&&r[u+2]==d;)u+=2;(m=Math.min(u+1-i>>>1,138))<11?o.push(17,m-3):o.push(18,m-11),i+=2*m-2}else if(d==l&&g==d&&f==d){for(u=i+5;u+2<s&&r[u+2]==d;)u+=2;var m=Math.min(u+1-i>>>1,6);o.push(16,m-3),i+=2*m-2}else o.push(d,0)}return s>>>1},n.F._hufTree=function(r,o,s){var i=[],d=r.length,g=o.length,f=0;for(f=0;f<g;f+=2)o[f]=0,o[f+1]=0;for(f=0;f<d;f++)r[f]!=0&&i.push({lit:f,f:r[f]});var l=i.length,u=i.slice(0);if(l==0)return 0;if(l==1){var m=i[0].lit;return u=m==0?1:0,o[1+(m<<1)]=1,o[1+(u<<1)]=1,1}i.sort(function(_,S){return _.f-S.f});var x=i[0],F=i[1],C=0,D=1,L=2;for(i[0]={lit:-1,f:x.f+F.f,l:x,r:F,d:0};D!=l-1;)x=C!=D&&(L==l||i[C].f<i[L].f)?i[C++]:i[L++],F=C!=D&&(L==l||i[C].f<i[L].f)?i[C++]:i[L++],i[D++]={lit:-1,f:x.f+F.f,l:x,r:F};var $=n.F.setDepth(i[D-1],0);for($>s&&(n.F.restrictDepth(u,s,$),$=s),f=0;f<l;f++)o[1+(u[f].lit<<1)]=u[f].d;return $},n.F.setDepth=function(r,o){return r.lit!=-1?(r.d=o,o):Math.max(n.F.setDepth(r.l,o+1),n.F.setDepth(r.r,o+1))},n.F.restrictDepth=function(r,o,s){var i=0,d=1<<s-o,g=0;for(r.sort(function(l,u){return u.d==l.d?l.f-u.f:u.d-l.d}),i=0;i<r.length&&r[i].d>o;i++){var f=r[i].d;r[i].d=o,g+=d-(1<<s-f)}for(g>>>=s-o;g>0;)(f=r[i].d)<o?(r[i].d++,g-=1<<o-f-1):i++;for(;i>=0;i--)r[i].d==o&&g<0&&(r[i].d--,g++);g!=0&&console.log("debt left")},n.F._goodIndex=function(r,o){var s=0;return o[16|s]<=r&&(s|=16),o[8|s]<=r&&(s|=8),o[4|s]<=r&&(s|=4),o[2|s]<=r&&(s|=2),o[1|s]<=r&&(s|=1),s},n.F._writeLit=function(r,o,s,i){return n.F._putsF(s,i,o[r<<1]),i+o[1+(r<<1)]},n.F.inflate=function(r,o){var s=Uint8Array;if(r[0]==3&&r[1]==0)return o||new s(0);var i=n.F,d=i._bitsF,g=i._bitsE,f=i._decodeTiny,l=i.makeCodes,u=i.codes2map,m=i._get17,x=i.U,F=o==null;F&&(o=new s(r.length>>>2<<3));for(var C,D,L=0,$=0,_=0,S=0,k=0,O=0,w=0,y=0,M=0;L==0;)if(L=d(r,M,1),$=d(r,M+1,2),M+=3,$!=0){if(F&&(o=n.F._check(o,y+(1<<17))),$==1&&(C=x.flmap,D=x.fdmap,O=511,w=31),$==2){_=g(r,M,5)+257,S=g(r,M+5,5)+1,k=g(r,M+10,4)+4,M+=14;for(var E=0;E<38;E+=2)x.itree[E]=0,x.itree[E+1]=0;var R=1;for(E=0;E<k;E++){var I=g(r,M+3*E,3);x.itree[1+(x.ordr[E]<<1)]=I,I>R&&(R=I)}M+=3*k,l(x.itree,R),u(x.itree,R,x.imap),C=x.lmap,D=x.dmap,M=f(x.imap,(1<<R)-1,_+S,r,M,x.ttree);var P=i._copyOut(x.ttree,0,_,x.ltree);O=(1<<P)-1;var A=i._copyOut(x.ttree,_,S,x.dtree);w=(1<<A)-1,l(x.ltree,P),u(x.ltree,P,C),l(x.dtree,A),u(x.dtree,A,D)}for(;;){var v=C[m(r,M)&O];M+=15&v;var b=v>>>4;if(!(b>>>8))o[y++]=b;else{if(b==256)break;var V=y+b-254;if(b>264){var B=x.ldef[b-257];V=y+(B>>>3)+g(r,M,7&B),M+=7&B}var J=D[m(r,M)&w];M+=15&J;var H=J>>>4,N=x.ddef[H],G=(N>>>4)+d(r,M,15&N);for(M+=15&N,F&&(o=n.F._check(o,y+(1<<17)));y<V;)o[y]=o[y++-G],o[y]=o[y++-G],o[y]=o[y++-G],o[y]=o[y++-G];y=V}}}else{(7&M)!=0&&(M+=8-(7&M));var K=4+(M>>>3),Z=r[K-4]|r[K-3]<<8;F&&(o=n.F._check(o,y+Z)),o.set(new s(r.buffer,r.byteOffset+K,Z),y),M=K+Z<<3,y+=Z}return o.length==y?o:o.slice(0,y)},n.F._check=function(r,o){var s=r.length;if(o<=s)return r;var i=new Uint8Array(Math.max(s<<1,o));return i.set(r,0),i},n.F._decodeTiny=function(r,o,s,i,d,g){for(var f=n.F._bitsE,l=n.F._get17,u=0;u<s;){var m=r[l(i,d)&o];d+=15&m;var x=m>>>4;if(x<=15)g[u]=x,u++;else{var F=0,C=0;x==16?(C=3+f(i,d,2),d+=2,F=g[u-1]):x==17?(C=3+f(i,d,3),d+=3):x==18&&(C=11+f(i,d,7),d+=7);for(var D=u+C;u<D;)g[u]=F,u++}}return d},n.F._copyOut=function(r,o,s,i){for(var d=0,g=0,f=i.length>>>1;g<s;){var l=r[g+o];i[g<<1]=0,i[1+(g<<1)]=l,l>d&&(d=l),g++}for(;g<f;)i[g<<1]=0,i[1+(g<<1)]=0,g++;return d},n.F.makeCodes=function(r,o){for(var s,i,d,g,f=n.F.U,l=r.length,u=f.bl_count,m=0;m<=o;m++)u[m]=0;for(m=1;m<l;m+=2)u[r[m]]++;var x=f.next_code;for(s=0,u[0]=0,i=1;i<=o;i++)s=s+u[i-1]<<1,x[i]=s;for(d=0;d<l;d+=2)(g=r[d+1])!=0&&(r[d]=x[g],x[g]++)},n.F.codes2map=function(r,o,s){for(var i=r.length,d=n.F.U.rev15,g=0;g<i;g+=2)if(r[g+1]!=0)for(var f=g>>1,l=r[g+1],u=f<<4|l,m=o-l,x=r[g]<<m,F=x+(1<<m);x!=F;)s[d[x]>>>15-o]=u,x++},n.F.revCodes=function(r,o){for(var s=n.F.U.rev15,i=15-o,d=0;d<r.length;d+=2){var g=r[d]<<o-r[d+1];r[d]=s[g]>>>i}},n.F._putsE=function(r,o,s){s<<=7&o;var i=o>>>3;r[i]|=s,r[i+1]|=s>>>8},n.F._putsF=function(r,o,s){s<<=7&o;var i=o>>>3;r[i]|=s,r[i+1]|=s>>>8,r[i+2]|=s>>>16},n.F._bitsE=function(r,o,s){return(r[o>>>3]|r[1+(o>>>3)]<<8)>>>(7&o)&(1<<s)-1},n.F._bitsF=function(r,o,s){return(r[o>>>3]|r[1+(o>>>3)]<<8|r[2+(o>>>3)]<<16)>>>(7&o)&(1<<s)-1},n.F._get17=function(r,o){return(r[o>>>3]|r[1+(o>>>3)]<<8|r[2+(o>>>3)]<<16)>>>(7&o)},n.F._get25=function(r,o){return(r[o>>>3]|r[1+(o>>>3)]<<8|r[2+(o>>>3)]<<16|r[3+(o>>>3)]<<24)>>>(7&o)},n.F.U=(t=Uint16Array,a=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new a(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new a(286),dhst:new a(30),ihst:new a(19),lits:new a(15e3),strt:new t(65536),prev:new t(32768)}),function(){for(var r=n.F.U,o=0;o<32768;o++){var s=o;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,r.rev15[o]=(s>>>16|s<<16)>>>17}function i(d,g,f){for(;g--!=0;)d.push(0,f)}for(o=0;o<32;o++)r.ldef[o]=r.of0[o]<<3|r.exb[o],r.ddef[o]=r.df0[o]<<4|r.dxb[o];i(r.fltree,144,8),i(r.fltree,112,9),i(r.fltree,24,7),i(r.fltree,8,8),n.F.makeCodes(r.fltree,9),n.F.codes2map(r.fltree,9,r.flmap),n.F.revCodes(r.fltree,9),i(r.fdtree,32,5),n.F.makeCodes(r.fdtree,5),n.F.codes2map(r.fdtree,5,r.fdmap),n.F.revCodes(r.fdtree,5),i(r.itree,19,0),i(r.ltree,286,0),i(r.dtree,30,0),i(r.ttree,320,0)}()})();var Ww=Lw({__proto__:null,default:Wr},[Wr]);const ma=function(){var e={nextZero(f,l){for(;f[l]!=0;)l++;return l},readUshort:(f,l)=>f[l]<<8|f[l+1],writeUshort(f,l,u){f[l]=u>>8&255,f[l+1]=255&u},readUint:(f,l)=>16777216*f[l]+(f[l+1]<<16|f[l+2]<<8|f[l+3]),writeUint(f,l,u){f[l]=u>>24&255,f[l+1]=u>>16&255,f[l+2]=u>>8&255,f[l+3]=255&u},readASCII(f,l,u){let m="";for(let x=0;x<u;x++)m+=String.fromCharCode(f[l+x]);return m},writeASCII(f,l,u){for(let m=0;m<u.length;m++)f[l+m]=u.charCodeAt(m)},readBytes(f,l,u){const m=[];for(let x=0;x<u;x++)m.push(f[l+x]);return m},pad:f=>f.length<2?`0${f}`:f,readUTF8(f,l,u){let m,x="";for(let F=0;F<u;F++)x+=`%${e.pad(f[l+F].toString(16))}`;try{m=decodeURIComponent(x)}catch{return e.readASCII(f,l,u)}return m}};function t(f,l,u,m){const x=l*u,F=o(m),C=Math.ceil(l*F/8),D=new Uint8Array(4*x),L=new Uint32Array(D.buffer),{ctype:$}=m,{depth:_}=m,S=e.readUshort;if($==6){const B=x<<2;if(_==8)for(var k=0;k<B;k+=4)D[k]=f[k],D[k+1]=f[k+1],D[k+2]=f[k+2],D[k+3]=f[k+3];if(_==16)for(k=0;k<B;k++)D[k]=f[k<<1]}else if($==2){const B=m.tabs.tRNS;if(B==null){if(_==8)for(k=0;k<x;k++){var O=3*k;L[k]=255<<24|f[O+2]<<16|f[O+1]<<8|f[O]}if(_==16)for(k=0;k<x;k++)O=6*k,L[k]=255<<24|f[O+4]<<16|f[O+2]<<8|f[O]}else{var w=B[0];const J=B[1],H=B[2];if(_==8)for(k=0;k<x;k++){var y=k<<2;O=3*k,L[k]=255<<24|f[O+2]<<16|f[O+1]<<8|f[O],f[O]==w&&f[O+1]==J&&f[O+2]==H&&(D[y+3]=0)}if(_==16)for(k=0;k<x;k++)y=k<<2,O=6*k,L[k]=255<<24|f[O+4]<<16|f[O+2]<<8|f[O],S(f,O)==w&&S(f,O+2)==J&&S(f,O+4)==H&&(D[y+3]=0)}}else if($==3){const B=m.tabs.PLTE,J=m.tabs.tRNS,H=J?J.length:0;if(_==1)for(var M=0;M<u;M++){var E=M*C,R=M*l;for(k=0;k<l;k++){y=R+k<<2;var I=3*(P=f[E+(k>>3)]>>7-((7&k)<<0)&1);D[y]=B[I],D[y+1]=B[I+1],D[y+2]=B[I+2],D[y+3]=P<H?J[P]:255}}if(_==2)for(M=0;M<u;M++)for(E=M*C,R=M*l,k=0;k<l;k++)y=R+k<<2,I=3*(P=f[E+(k>>2)]>>6-((3&k)<<1)&3),D[y]=B[I],D[y+1]=B[I+1],D[y+2]=B[I+2],D[y+3]=P<H?J[P]:255;if(_==4)for(M=0;M<u;M++)for(E=M*C,R=M*l,k=0;k<l;k++)y=R+k<<2,I=3*(P=f[E+(k>>1)]>>4-((1&k)<<2)&15),D[y]=B[I],D[y+1]=B[I+1],D[y+2]=B[I+2],D[y+3]=P<H?J[P]:255;if(_==8)for(k=0;k<x;k++){var P;y=k<<2,I=3*(P=f[k]),D[y]=B[I],D[y+1]=B[I+1],D[y+2]=B[I+2],D[y+3]=P<H?J[P]:255}}else if($==4){if(_==8)for(k=0;k<x;k++){y=k<<2;var A=f[v=k<<1];D[y]=A,D[y+1]=A,D[y+2]=A,D[y+3]=f[v+1]}if(_==16)for(k=0;k<x;k++){var v;y=k<<2,A=f[v=k<<2],D[y]=A,D[y+1]=A,D[y+2]=A,D[y+3]=f[v+2]}}else if($==0)for(w=m.tabs.tRNS?m.tabs.tRNS:-1,M=0;M<u;M++){const B=M*C,J=M*l;if(_==1)for(var b=0;b<l;b++){var V=(A=255*(f[B+(b>>>3)]>>>7-(7&b)&1))==255*w?0:255;L[J+b]=V<<24|A<<16|A<<8|A}else if(_==2)for(b=0;b<l;b++)V=(A=85*(f[B+(b>>>2)]>>>6-((3&b)<<1)&3))==85*w?0:255,L[J+b]=V<<24|A<<16|A<<8|A;else if(_==4)for(b=0;b<l;b++)V=(A=17*(f[B+(b>>>1)]>>>4-((1&b)<<2)&15))==17*w?0:255,L[J+b]=V<<24|A<<16|A<<8|A;else if(_==8)for(b=0;b<l;b++)V=(A=f[B+b])==w?0:255,L[J+b]=V<<24|A<<16|A<<8|A;else if(_==16)for(b=0;b<l;b++)A=f[B+(b<<1)],V=S(f,B+(b<<1))==w?0:255,L[J+b]=V<<24|A<<16|A<<8|A}return D}function a(f,l,u,m){const x=o(f),F=Math.ceil(u*x/8),C=new Uint8Array((F+1+f.interlace)*m);return l=f.tabs.CgBI?r(l,C):n(l,C),f.interlace==0?l=s(l,f,0,u,m):f.interlace==1&&(l=function(L,$){const _=$.width,S=$.height,k=o($),O=k>>3,w=Math.ceil(_*k/8),y=new Uint8Array(S*w);let M=0;const E=[0,0,4,0,2,0,1],R=[0,4,0,2,0,1,0],I=[8,8,8,4,4,2,2],P=[8,8,4,4,2,2,1];let A=0;for(;A<7;){const b=I[A],V=P[A];let B=0,J=0,H=E[A];for(;H<S;)H+=b,J++;let N=R[A];for(;N<_;)N+=V,B++;const G=Math.ceil(B*k/8);s(L,$,M,B,J);let K=0,Z=E[A];for(;Z<S;){let le=R[A],ye=M+K*G<<3;for(;le<_;){var v;if(k==1&&(v=(v=L[ye>>3])>>7-(7&ye)&1,y[Z*w+(le>>3)]|=v<<7-((7&le)<<0)),k==2&&(v=(v=L[ye>>3])>>6-(7&ye)&3,y[Z*w+(le>>2)]|=v<<6-((3&le)<<1)),k==4&&(v=(v=L[ye>>3])>>4-(7&ye)&15,y[Z*w+(le>>1)]|=v<<4-((1&le)<<2)),k>=8){const Ce=Z*w+le*O;for(let Ie=0;Ie<O;Ie++)y[Ce+Ie]=L[(ye>>3)+Ie]}ye+=k,le+=V}K++,Z+=b}B*J!=0&&(M+=J*(1+G)),A+=1}return y}(l,f)),l}function n(f,l){return r(new Uint8Array(f.buffer,2,f.length-6),l)}var r=function(){const f={H:{}};return f.H.N=function(l,u){const m=Uint8Array;let x,F,C=0,D=0,L=0,$=0,_=0,S=0,k=0,O=0,w=0;if(l[0]==3&&l[1]==0)return u||new m(0);const y=f.H,M=y.b,E=y.e,R=y.R,I=y.n,P=y.A,A=y.Z,v=y.m,b=u==null;for(b&&(u=new m(l.length>>>2<<5));C==0;)if(C=M(l,w,1),D=M(l,w+1,2),w+=3,D!=0){if(b&&(u=f.H.W(u,O+(1<<17))),D==1&&(x=v.J,F=v.h,S=511,k=31),D==2){L=E(l,w,5)+257,$=E(l,w+5,5)+1,_=E(l,w+10,4)+4,w+=14;let B=1;for(var V=0;V<38;V+=2)v.Q[V]=0,v.Q[V+1]=0;for(V=0;V<_;V++){const N=E(l,w+3*V,3);v.Q[1+(v.X[V]<<1)]=N,N>B&&(B=N)}w+=3*_,I(v.Q,B),P(v.Q,B,v.u),x=v.w,F=v.d,w=R(v.u,(1<<B)-1,L+$,l,w,v.v);const J=y.V(v.v,0,L,v.C);S=(1<<J)-1;const H=y.V(v.v,L,$,v.D);k=(1<<H)-1,I(v.C,J),P(v.C,J,x),I(v.D,H),P(v.D,H,F)}for(;;){const B=x[A(l,w)&S];w+=15&B;const J=B>>>4;if(!(J>>>8))u[O++]=J;else{if(J==256)break;{let H=O+J-254;if(J>264){const le=v.q[J-257];H=O+(le>>>3)+E(l,w,7&le),w+=7&le}const N=F[A(l,w)&k];w+=15&N;const G=N>>>4,K=v.c[G],Z=(K>>>4)+M(l,w,15&K);for(w+=15&K;O<H;)u[O]=u[O++-Z],u[O]=u[O++-Z],u[O]=u[O++-Z],u[O]=u[O++-Z];O=H}}}}else{(7&w)!=0&&(w+=8-(7&w));const B=4+(w>>>3),J=l[B-4]|l[B-3]<<8;b&&(u=f.H.W(u,O+J)),u.set(new m(l.buffer,l.byteOffset+B,J),O),w=B+J<<3,O+=J}return u.length==O?u:u.slice(0,O)},f.H.W=function(l,u){const m=l.length;if(u<=m)return l;const x=new Uint8Array(m<<1);return x.set(l,0),x},f.H.R=function(l,u,m,x,F,C){const D=f.H.e,L=f.H.Z;let $=0;for(;$<m;){const _=l[L(x,F)&u];F+=15&_;const S=_>>>4;if(S<=15)C[$]=S,$++;else{let k=0,O=0;S==16?(O=3+D(x,F,2),F+=2,k=C[$-1]):S==17?(O=3+D(x,F,3),F+=3):S==18&&(O=11+D(x,F,7),F+=7);const w=$+O;for(;$<w;)C[$]=k,$++}}return F},f.H.V=function(l,u,m,x){let F=0,C=0;const D=x.length>>>1;for(;C<m;){const L=l[C+u];x[C<<1]=0,x[1+(C<<1)]=L,L>F&&(F=L),C++}for(;C<D;)x[C<<1]=0,x[1+(C<<1)]=0,C++;return F},f.H.n=function(l,u){const m=f.H.m,x=l.length;let F,C,D,L;const $=m.j;for(var _=0;_<=u;_++)$[_]=0;for(_=1;_<x;_+=2)$[l[_]]++;const S=m.K;for(F=0,$[0]=0,C=1;C<=u;C++)F=F+$[C-1]<<1,S[C]=F;for(D=0;D<x;D+=2)L=l[D+1],L!=0&&(l[D]=S[L],S[L]++)},f.H.A=function(l,u,m){const x=l.length,F=f.H.m.r;for(let C=0;C<x;C+=2)if(l[C+1]!=0){const D=C>>1,L=l[C+1],$=D<<4|L,_=u-L;let S=l[C]<<_;const k=S+(1<<_);for(;S!=k;)m[F[S]>>>15-u]=$,S++}},f.H.l=function(l,u){const m=f.H.m.r,x=15-u;for(let F=0;F<l.length;F+=2){const C=l[F]<<u-l[F+1];l[F]=m[C]>>>x}},f.H.M=function(l,u,m){m<<=7&u;const x=u>>>3;l[x]|=m,l[x+1]|=m>>>8},f.H.I=function(l,u,m){m<<=7&u;const x=u>>>3;l[x]|=m,l[x+1]|=m>>>8,l[x+2]|=m>>>16},f.H.e=function(l,u,m){return(l[u>>>3]|l[1+(u>>>3)]<<8)>>>(7&u)&(1<<m)-1},f.H.b=function(l,u,m){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)&(1<<m)-1},f.H.Z=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)},f.H.i=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16|l[3+(u>>>3)]<<24)>>>(7&u)},f.H.m=function(){const l=Uint16Array,u=Uint32Array;return{K:new l(16),j:new l(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new l(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new u(32),J:new l(512),_:[],h:new l(32),$:[],w:new l(32768),C:[],v:[],d:new l(32768),D:[],u:new l(512),Q:[],r:new l(32768),s:new u(286),Y:new u(30),a:new u(19),t:new u(15e3),k:new l(65536),g:new l(32768)}}(),function(){const l=f.H.m;for(var u=0;u<32768;u++){let x=u;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,l.r[u]=(x>>>16|x<<16)>>>17}function m(x,F,C){for(;F--!=0;)x.push(0,C)}for(u=0;u<32;u++)l.q[u]=l.S[u]<<3|l.T[u],l.c[u]=l.p[u]<<4|l.z[u];m(l._,144,8),m(l._,112,9),m(l._,24,7),m(l._,8,8),f.H.n(l._,9),f.H.A(l._,9,l.J),f.H.l(l._,9),m(l.$,32,5),f.H.n(l.$,5),f.H.A(l.$,5,l.h),f.H.l(l.$,5),m(l.Q,19,0),m(l.C,286,0),m(l.D,30,0),m(l.v,320,0)}(),f.H.N}();function o(f){return[1,null,3,1,2,null,4][f.ctype]*f.depth}function s(f,l,u,m,x){let F=o(l);const C=Math.ceil(m*F/8);let D,L;F=Math.ceil(F/8);let $=f[u],_=0;if($>1&&(f[u]=[0,0,1][$-2]),$==3)for(_=F;_<C;_++)f[_+1]=f[_+1]+(f[_+1-F]>>>1)&255;for(let S=0;S<x;S++)if(D=u+S*C,L=D+S+1,$=f[L-1],_=0,$==0)for(;_<C;_++)f[D+_]=f[L+_];else if($==1){for(;_<F;_++)f[D+_]=f[L+_];for(;_<C;_++)f[D+_]=f[L+_]+f[D+_-F]}else if($==2)for(;_<C;_++)f[D+_]=f[L+_]+f[D+_-C];else if($==3){for(;_<F;_++)f[D+_]=f[L+_]+(f[D+_-C]>>>1);for(;_<C;_++)f[D+_]=f[L+_]+(f[D+_-C]+f[D+_-F]>>>1)}else{for(;_<F;_++)f[D+_]=f[L+_]+i(0,f[D+_-C],0);for(;_<C;_++)f[D+_]=f[L+_]+i(f[D+_-F],f[D+_-C],f[D+_-F-C])}return f}function i(f,l,u){const m=f+l-u,x=m-f,F=m-l,C=m-u;return x*x<=F*F&&x*x<=C*C?f:F*F<=C*C?l:u}function d(f,l,u){u.width=e.readUint(f,l),l+=4,u.height=e.readUint(f,l),l+=4,u.depth=f[l],l++,u.ctype=f[l],l++,u.compress=f[l],l++,u.filter=f[l],l++,u.interlace=f[l],l++}function g(f,l,u,m,x,F,C,D,L){const $=Math.min(l,x),_=Math.min(u,F);let S=0,k=0;for(let A=0;A<_;A++)for(let v=0;v<$;v++)if(C>=0&&D>=0?(S=A*l+v<<2,k=(D+A)*x+C+v<<2):(S=(-D+A)*l-C+v<<2,k=A*x+v<<2),L==0)m[k]=f[S],m[k+1]=f[S+1],m[k+2]=f[S+2],m[k+3]=f[S+3];else if(L==1){var O=f[S+3]*.00392156862745098,w=f[S]*O,y=f[S+1]*O,M=f[S+2]*O,E=m[k+3]*(1/255),R=m[k]*E,I=m[k+1]*E,P=m[k+2]*E;const b=1-O,V=O+E*b,B=V==0?0:1/V;m[k+3]=255*V,m[k+0]=(w+R*b)*B,m[k+1]=(y+I*b)*B,m[k+2]=(M+P*b)*B}else if(L==2)O=f[S+3],w=f[S],y=f[S+1],M=f[S+2],E=m[k+3],R=m[k],I=m[k+1],P=m[k+2],O==E&&w==R&&y==I&&M==P?(m[k]=0,m[k+1]=0,m[k+2]=0,m[k+3]=0):(m[k]=w,m[k+1]=y,m[k+2]=M,m[k+3]=O);else if(L==3){if(O=f[S+3],w=f[S],y=f[S+1],M=f[S+2],E=m[k+3],R=m[k],I=m[k+1],P=m[k+2],O==E&&w==R&&y==I&&M==P)continue;if(O<220&&E>20)return!1}return!0}return{decode:function(l){const u=new Uint8Array(l);let m=8;const x=e,F=x.readUshort,C=x.readUint,D={tabs:{},frames:[]},L=new Uint8Array(u.length);let $,_=0,S=0;const k=[137,80,78,71,13,10,26,10];for(var O=0;O<8;O++)if(u[O]!=k[O])throw"The input is not a PNG file!";for(;m<u.length;){const A=x.readUint(u,m);m+=4;const v=x.readASCII(u,m,4);if(m+=4,v=="IHDR")d(u,m,D);else if(v=="iCCP"){for(var w=m;u[w]!=0;)w++;x.readASCII(u,m,w-m),u[w+1];const b=u.slice(w+2,m+A);let V=null;try{V=n(b)}catch{V=r(b)}D.tabs[v]=V}else if(v=="CgBI")D.tabs[v]=u.slice(m,m+4);else if(v=="IDAT"){for(O=0;O<A;O++)L[_+O]=u[m+O];_+=A}else if(v=="acTL")D.tabs[v]={num_frames:C(u,m),num_plays:C(u,m+4)},$=new Uint8Array(u.length);else if(v=="fcTL"){S!=0&&((P=D.frames[D.frames.length-1]).data=a(D,$.slice(0,S),P.rect.width,P.rect.height),S=0);const b={x:C(u,m+12),y:C(u,m+16),width:C(u,m+4),height:C(u,m+8)};let V=F(u,m+22);V=F(u,m+20)/(V==0?100:V);const B={rect:b,delay:Math.round(1e3*V),dispose:u[m+24],blend:u[m+25]};D.frames.push(B)}else if(v=="fdAT"){for(O=0;O<A-4;O++)$[S+O]=u[m+O+4];S+=A-4}else if(v=="pHYs")D.tabs[v]=[x.readUint(u,m),x.readUint(u,m+4),u[m+8]];else if(v=="cHRM")for(D.tabs[v]=[],O=0;O<8;O++)D.tabs[v].push(x.readUint(u,m+4*O));else if(v=="tEXt"||v=="zTXt"){D.tabs[v]==null&&(D.tabs[v]={});var y=x.nextZero(u,m),M=x.readASCII(u,m,y-m),E=m+A-y-1;if(v=="tEXt")I=x.readASCII(u,y+1,E);else{var R=n(u.slice(y+2,y+2+E));I=x.readUTF8(R,0,R.length)}D.tabs[v][M]=I}else if(v=="iTXt"){D.tabs[v]==null&&(D.tabs[v]={}),y=0,w=m,y=x.nextZero(u,w),M=x.readASCII(u,w,y-w);const b=u[w=y+1];var I;u[w+1],w+=2,y=x.nextZero(u,w),x.readASCII(u,w,y-w),w=y+1,y=x.nextZero(u,w),x.readUTF8(u,w,y-w),E=A-((w=y+1)-m),b==0?I=x.readUTF8(u,w,E):(R=n(u.slice(w,w+E)),I=x.readUTF8(R,0,R.length)),D.tabs[v][M]=I}else if(v=="PLTE")D.tabs[v]=x.readBytes(u,m,A);else if(v=="hIST"){const b=D.tabs.PLTE.length/3;for(D.tabs[v]=[],O=0;O<b;O++)D.tabs[v].push(F(u,m+2*O))}else if(v=="tRNS")D.ctype==3?D.tabs[v]=x.readBytes(u,m,A):D.ctype==0?D.tabs[v]=F(u,m):D.ctype==2&&(D.tabs[v]=[F(u,m),F(u,m+2),F(u,m+4)]);else if(v=="gAMA")D.tabs[v]=x.readUint(u,m)/1e5;else if(v=="sRGB")D.tabs[v]=u[m];else if(v=="bKGD")D.ctype==0||D.ctype==4?D.tabs[v]=[F(u,m)]:D.ctype==2||D.ctype==6?D.tabs[v]=[F(u,m),F(u,m+2),F(u,m+4)]:D.ctype==3&&(D.tabs[v]=u[m]);else if(v=="IEND")break;m+=A,x.readUint(u,m),m+=4}var P;return S!=0&&((P=D.frames[D.frames.length-1]).data=a(D,$.slice(0,S),P.rect.width,P.rect.height)),D.data=a(D,L,D.width,D.height),delete D.compress,delete D.interlace,delete D.filter,D},toRGBA8:function(l){const u=l.width,m=l.height;if(l.tabs.acTL==null)return[t(l.data,u,m,l).buffer];const x=[];l.frames[0].data==null&&(l.frames[0].data=l.data);const F=u*m*4,C=new Uint8Array(F),D=new Uint8Array(F),L=new Uint8Array(F);for(let _=0;_<l.frames.length;_++){const S=l.frames[_],k=S.rect.x,O=S.rect.y,w=S.rect.width,y=S.rect.height,M=t(S.data,w,y,l);if(_!=0)for(var $=0;$<F;$++)L[$]=C[$];if(S.blend==0?g(M,w,y,C,u,m,k,O,0):S.blend==1&&g(M,w,y,C,u,m,k,O,1),x.push(C.buffer.slice(0)),S.dispose!=0){if(S.dispose==1)g(D,w,y,C,u,m,k,O,0);else if(S.dispose==2)for($=0;$<F;$++)C[$]=L[$]}}return x},_paeth:i,_copyTile:g,_bin:e}}();(function(){const{_copyTile:e}=ma,{_bin:t}=ma,a=ma._paeth;var n={table:function(){const w=new Uint32Array(256);for(let y=0;y<256;y++){let M=y;for(let E=0;E<8;E++)1&M?M=3988292384^M>>>1:M>>>=1;w[y]=M}return w}(),update(w,y,M,E){for(let R=0;R<E;R++)w=n.table[255&(w^y[M+R])]^w>>>8;return w},crc:(w,y,M)=>4294967295^n.update(4294967295,w,y,M)};function r(w,y,M,E){y[M]+=w[0]*E>>4,y[M+1]+=w[1]*E>>4,y[M+2]+=w[2]*E>>4,y[M+3]+=w[3]*E>>4}function o(w){return Math.max(0,Math.min(255,w))}function s(w,y){const M=w[0]-y[0],E=w[1]-y[1],R=w[2]-y[2],I=w[3]-y[3];return M*M+E*E+R*R+I*I}function i(w,y,M,E,R,I,P){P==null&&(P=1);const A=E.length,v=[];for(var b=0;b<A;b++){const Z=E[b];v.push([Z>>>0&255,Z>>>8&255,Z>>>16&255,Z>>>24&255])}for(b=0;b<A;b++){let Z=4294967295;for(var V=0,B=0;B<A;B++){var J=s(v[b],v[B]);B!=b&&J<Z&&(Z=J,V=B)}}const H=new Uint32Array(R.buffer),N=new Int16Array(y*M*4),G=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(b=0;b<G.length;b++)G[b]=255*((G[b]+.5)/16-.5);for(let Z=0;Z<M;Z++)for(let le=0;le<y;le++){var K;b=4*(Z*y+le),P!=2?K=[o(w[b]+N[b]),o(w[b+1]+N[b+1]),o(w[b+2]+N[b+2]),o(w[b+3]+N[b+3])]:(J=G[4*(3&Z)+(3&le)],K=[o(w[b]+J),o(w[b+1]+J),o(w[b+2]+J),o(w[b+3]+J)]),V=0;let ye=16777215;for(B=0;B<A;B++){const Ve=s(K,v[B]);Ve<ye&&(ye=Ve,V=B)}const Ce=v[V],Ie=[K[0]-Ce[0],K[1]-Ce[1],K[2]-Ce[2],K[3]-Ce[3]];P==1&&(le!=y-1&&r(Ie,N,b+4,7),Z!=M-1&&(le!=0&&r(Ie,N,b+4*y-4,3),r(Ie,N,b+4*y,5),le!=y-1&&r(Ie,N,b+4*y+4,1))),I[b>>2]=V,H[b>>2]=E[V]}}function d(w,y,M,E,R){R==null&&(R={});const{crc:I}=n,P=t.writeUint,A=t.writeUshort,v=t.writeASCII;let b=8;const V=w.frames.length>1;let B,J=!1,H=33+(V?20:0);if(R.sRGB!=null&&(H+=13),R.pHYs!=null&&(H+=21),R.iCCP!=null&&(B=pako.deflate(R.iCCP),H+=21+B.length+4),w.ctype==3){for(var N=w.plte.length,G=0;G<N;G++)w.plte[G]>>>24!=255&&(J=!0);H+=8+3*N+4+(J?8+1*N+4:0)}for(var K=0;K<w.frames.length;K++)V&&(H+=38),H+=(Ce=w.frames[K]).cimg.length+12,K!=0&&(H+=4);H+=12;const Z=new Uint8Array(H),le=[137,80,78,71,13,10,26,10];for(G=0;G<8;G++)Z[G]=le[G];if(P(Z,b,13),b+=4,v(Z,b,"IHDR"),b+=4,P(Z,b,y),b+=4,P(Z,b,M),b+=4,Z[b]=w.depth,b++,Z[b]=w.ctype,b++,Z[b]=0,b++,Z[b]=0,b++,Z[b]=0,b++,P(Z,b,I(Z,b-17,17)),b+=4,R.sRGB!=null&&(P(Z,b,1),b+=4,v(Z,b,"sRGB"),b+=4,Z[b]=R.sRGB,b++,P(Z,b,I(Z,b-5,5)),b+=4),R.iCCP!=null){const Ie=13+B.length;P(Z,b,Ie),b+=4,v(Z,b,"iCCP"),b+=4,v(Z,b,"ICC profile"),b+=11,b+=2,Z.set(B,b),b+=B.length,P(Z,b,I(Z,b-(Ie+4),Ie+4)),b+=4}if(R.pHYs!=null&&(P(Z,b,9),b+=4,v(Z,b,"pHYs"),b+=4,P(Z,b,R.pHYs[0]),b+=4,P(Z,b,R.pHYs[1]),b+=4,Z[b]=R.pHYs[2],b++,P(Z,b,I(Z,b-13,13)),b+=4),V&&(P(Z,b,8),b+=4,v(Z,b,"acTL"),b+=4,P(Z,b,w.frames.length),b+=4,P(Z,b,R.loop!=null?R.loop:0),b+=4,P(Z,b,I(Z,b-12,12)),b+=4),w.ctype==3){for(P(Z,b,3*(N=w.plte.length)),b+=4,v(Z,b,"PLTE"),b+=4,G=0;G<N;G++){const Ie=3*G,Ve=w.plte[G],Ke=255&Ve,He=Ve>>>8&255,It=Ve>>>16&255;Z[b+Ie+0]=Ke,Z[b+Ie+1]=He,Z[b+Ie+2]=It}if(b+=3*N,P(Z,b,I(Z,b-3*N-4,3*N+4)),b+=4,J){for(P(Z,b,N),b+=4,v(Z,b,"tRNS"),b+=4,G=0;G<N;G++)Z[b+G]=w.plte[G]>>>24&255;b+=N,P(Z,b,I(Z,b-N-4,N+4)),b+=4}}let ye=0;for(K=0;K<w.frames.length;K++){var Ce=w.frames[K];V&&(P(Z,b,26),b+=4,v(Z,b,"fcTL"),b+=4,P(Z,b,ye++),b+=4,P(Z,b,Ce.rect.width),b+=4,P(Z,b,Ce.rect.height),b+=4,P(Z,b,Ce.rect.x),b+=4,P(Z,b,Ce.rect.y),b+=4,A(Z,b,E[K]),b+=2,A(Z,b,1e3),b+=2,Z[b]=Ce.dispose,b++,Z[b]=Ce.blend,b++,P(Z,b,I(Z,b-30,30)),b+=4);const Ie=Ce.cimg;P(Z,b,(N=Ie.length)+(K==0?0:4)),b+=4;const Ve=b;v(Z,b,K==0?"IDAT":"fdAT"),b+=4,K!=0&&(P(Z,b,ye++),b+=4),Z.set(Ie,b),b+=N,P(Z,b,I(Z,Ve,b-Ve)),b+=4}return P(Z,b,0),b+=4,v(Z,b,"IEND"),b+=4,P(Z,b,I(Z,b-4,4)),b+=4,Z.buffer}function g(w,y,M){for(let E=0;E<w.frames.length;E++){const R=w.frames[E];R.rect.width;const I=R.rect.height,P=new Uint8Array(I*R.bpl+I);R.cimg=m(R.img,I,R.bpp,R.bpl,P,y,M)}}function f(w,y,M,E,R){const I=R[0],P=R[1],A=R[2],v=R[3],b=R[4],V=R[5];let B=6,J=8,H=255;for(var N=0;N<w.length;N++){const rt=new Uint8Array(w[N]);for(var G=rt.length,K=0;K<G;K+=4)H&=rt[K+3]}const Z=H!=255,le=function(Ue,Be,Ye,ot,Qe,Ct){const Fe=[];for(var ze=0;ze<Ue.length;ze++){const pt=new Uint8Array(Ue[ze]),Y=new Uint32Array(pt.buffer);var mt;let Q=0,ne=0,re=Be,ae=Ye,me=ot?1:0;if(ze!=0){const De=Ct||ot||ze==1||Fe[ze-2].dispose!=0?1:2;let Ee=0,Ze=1e9;for(let ee=0;ee<De;ee++){var Bt=new Uint8Array(Ue[ze-1-ee]);const U=new Uint32Array(Ue[ze-1-ee]);let de=Be,ce=Ye,fe=-1,ve=-1;for(let pe=0;pe<Ye;pe++)for(let ke=0;ke<Be;ke++)Y[lt=pe*Be+ke]!=U[lt]&&(ke<de&&(de=ke),ke>fe&&(fe=ke),pe<ce&&(ce=pe),pe>ve&&(ve=pe));fe==-1&&(de=ce=fe=ve=0),Qe&&((1&de)==1&&de--,(1&ce)==1&&ce--);const _e=(fe-de+1)*(ve-ce+1);_e<Ze&&(Ze=_e,Ee=ee,Q=de,ne=ce,re=fe-de+1,ae=ve-ce+1)}Bt=new Uint8Array(Ue[ze-1-Ee]),Ee==1&&(Fe[ze-1].dispose=2),mt=new Uint8Array(re*ae*4),e(Bt,Be,Ye,mt,re,ae,-Q,-ne,0),me=e(pt,Be,Ye,mt,re,ae,-Q,-ne,3)?1:0,me==1?u(pt,Be,Ye,mt,{x:Q,y:ne,width:re,height:ae}):e(pt,Be,Ye,mt,re,ae,-Q,-ne,0)}else mt=pt.slice(0);Fe.push({rect:{x:Q,y:ne,width:re,height:ae},img:mt,blend:me,dispose:0})}if(ot)for(ze=0;ze<Fe.length;ze++){if((tt=Fe[ze]).blend==1)continue;const pt=tt.rect,Y=Fe[ze-1].rect,Q=Math.min(pt.x,Y.x),ne=Math.min(pt.y,Y.y),re={x:Q,y:ne,width:Math.max(pt.x+pt.width,Y.x+Y.width)-Q,height:Math.max(pt.y+pt.height,Y.y+Y.height)-ne};Fe[ze-1].dispose=1,ze-1!=0&&l(Ue,Be,Ye,Fe,ze-1,re,Qe),l(Ue,Be,Ye,Fe,ze,re,Qe)}let ya=0;if(Ue.length!=1)for(var lt=0;lt<Fe.length;lt++){var tt;ya+=(tt=Fe[lt]).rect.width*tt.rect.height}return Fe}(w,y,M,I,P,A),ye={},Ce=[],Ie=[];if(E!=0){const rt=[];for(K=0;K<le.length;K++)rt.push(le[K].img.buffer);const Ue=function(Qe){let Ct=0;for(var Fe=0;Fe<Qe.length;Fe++)Ct+=Qe[Fe].byteLength;const ze=new Uint8Array(Ct);let mt=0;for(Fe=0;Fe<Qe.length;Fe++){const Bt=new Uint8Array(Qe[Fe]),ya=Bt.length;for(let lt=0;lt<ya;lt+=4){let tt=Bt[lt],pt=Bt[lt+1],Y=Bt[lt+2];const Q=Bt[lt+3];Q==0&&(tt=pt=Y=0),ze[mt+lt]=tt,ze[mt+lt+1]=pt,ze[mt+lt+2]=Y,ze[mt+lt+3]=Q}mt+=ya}return ze.buffer}(rt),Be=F(Ue,E);for(K=0;K<Be.plte.length;K++)Ce.push(Be.plte[K].est.rgba);let Ye=0;for(K=0;K<le.length;K++){const ot=(Ke=le[K]).img.length;var Ve=new Uint8Array(Be.inds.buffer,Ye>>2,ot>>2);Ie.push(Ve);const Qe=new Uint8Array(Be.abuf,Ye,ot);V&&i(Ke.img,Ke.rect.width,Ke.rect.height,Ce,Qe,Ve),Ke.img.set(Qe),Ye+=ot}}else for(N=0;N<le.length;N++){var Ke=le[N];const rt=new Uint32Array(Ke.img.buffer);var He=Ke.rect.width;for(G=rt.length,Ve=new Uint8Array(G),Ie.push(Ve),K=0;K<G;K++){const Ue=rt[K];if(K!=0&&Ue==rt[K-1])Ve[K]=Ve[K-1];else if(K>He&&Ue==rt[K-He])Ve[K]=Ve[K-He];else{let Be=ye[Ue];if(Be==null&&(ye[Ue]=Be=Ce.length,Ce.push(Ue),Ce.length>=300))break;Ve[K]=Be}}}const It=Ce.length;for(It<=256&&b==0&&(J=It<=2?1:It<=4?2:It<=16?4:8,J=Math.max(J,v)),N=0;N<le.length;N++){(Ke=le[N]).rect.x,Ke.rect.y,He=Ke.rect.width;const rt=Ke.rect.height;let Ue=Ke.img;new Uint32Array(Ue.buffer);let Be=4*He,Ye=4;if(It<=256&&b==0){Be=Math.ceil(J*He/8);var _t=new Uint8Array(Be*rt);const ot=Ie[N];for(let Qe=0;Qe<rt;Qe++){K=Qe*Be;const Ct=Qe*He;if(J==8)for(var Ge=0;Ge<He;Ge++)_t[K+Ge]=ot[Ct+Ge];else if(J==4)for(Ge=0;Ge<He;Ge++)_t[K+(Ge>>1)]|=ot[Ct+Ge]<<4-4*(1&Ge);else if(J==2)for(Ge=0;Ge<He;Ge++)_t[K+(Ge>>2)]|=ot[Ct+Ge]<<6-2*(3&Ge);else if(J==1)for(Ge=0;Ge<He;Ge++)_t[K+(Ge>>3)]|=ot[Ct+Ge]<<7-1*(7&Ge)}Ue=_t,B=3,Ye=1}else if(Z==0&&le.length==1){_t=new Uint8Array(He*rt*3);const ot=He*rt;for(K=0;K<ot;K++){const Qe=3*K,Ct=4*K;_t[Qe]=Ue[Ct],_t[Qe+1]=Ue[Ct+1],_t[Qe+2]=Ue[Ct+2]}Ue=_t,B=2,Ye=3,Be=3*He}Ke.img=Ue,Ke.bpl=Be,Ke.bpp=Ye}return{ctype:B,depth:J,plte:Ce,frames:le}}function l(w,y,M,E,R,I,P){const A=Uint8Array,v=Uint32Array,b=new A(w[R-1]),V=new v(w[R-1]),B=R+1<w.length?new A(w[R+1]):null,J=new A(w[R]),H=new v(J.buffer);let N=y,G=M,K=-1,Z=-1;for(let ye=0;ye<I.height;ye++)for(let Ce=0;Ce<I.width;Ce++){const Ie=I.x+Ce,Ve=I.y+ye,Ke=Ve*y+Ie,He=H[Ke];He==0||E[R-1].dispose==0&&V[Ke]==He&&(B==null||B[4*Ke+3]!=0)||(Ie<N&&(N=Ie),Ie>K&&(K=Ie),Ve<G&&(G=Ve),Ve>Z&&(Z=Ve))}K==-1&&(N=G=K=Z=0),P&&((1&N)==1&&N--,(1&G)==1&&G--),I={x:N,y:G,width:K-N+1,height:Z-G+1};const le=E[R];le.rect=I,le.blend=1,le.img=new Uint8Array(I.width*I.height*4),E[R-1].dispose==0?(e(b,y,M,le.img,I.width,I.height,-I.x,-I.y,0),u(J,y,M,le.img,I)):e(J,y,M,le.img,I.width,I.height,-I.x,-I.y,0)}function u(w,y,M,E,R){e(w,y,M,E,R.width,R.height,-R.x,-R.y,2)}function m(w,y,M,E,R,I,P){const A=[];let v,b=[0,1,2,3,4];I!=-1?b=[I]:(y*E>5e5||M==1)&&(b=[0]),P&&(v={level:0});const V=Ww;for(var B=0;B<b.length;B++){for(let N=0;N<y;N++)x(R,w,N,E,M,b[B]);A.push(V.deflate(R,v))}let J,H=1e9;for(B=0;B<A.length;B++)A[B].length<H&&(J=B,H=A[B].length);return A[J]}function x(w,y,M,E,R,I){const P=M*E;let A=P+M;if(w[A]=I,A++,I==0)if(E<500)for(var v=0;v<E;v++)w[A+v]=y[P+v];else w.set(new Uint8Array(y.buffer,P,E),A);else if(I==1){for(v=0;v<R;v++)w[A+v]=y[P+v];for(v=R;v<E;v++)w[A+v]=y[P+v]-y[P+v-R]+256&255}else if(M==0){for(v=0;v<R;v++)w[A+v]=y[P+v];if(I==2)for(v=R;v<E;v++)w[A+v]=y[P+v];if(I==3)for(v=R;v<E;v++)w[A+v]=y[P+v]-(y[P+v-R]>>1)+256&255;if(I==4)for(v=R;v<E;v++)w[A+v]=y[P+v]-a(y[P+v-R],0,0)+256&255}else{if(I==2)for(v=0;v<E;v++)w[A+v]=y[P+v]+256-y[P+v-E]&255;if(I==3){for(v=0;v<R;v++)w[A+v]=y[P+v]+256-(y[P+v-E]>>1)&255;for(v=R;v<E;v++)w[A+v]=y[P+v]+256-(y[P+v-E]+y[P+v-R]>>1)&255}if(I==4){for(v=0;v<R;v++)w[A+v]=y[P+v]+256-a(0,y[P+v-E],0)&255;for(v=R;v<E;v++)w[A+v]=y[P+v]+256-a(y[P+v-R],y[P+v-E],y[P+v-R-E])&255}}}function F(w,y){const M=new Uint8Array(w),E=M.slice(0),R=new Uint32Array(E.buffer),I=C(E,y),P=I[0],A=I[1],v=M.length,b=new Uint8Array(v>>2);let V;if(M.length<2e7)for(var B=0;B<v;B+=4)V=D(P,J=M[B]*(1/255),H=M[B+1]*(1/255),N=M[B+2]*(1/255),G=M[B+3]*(1/255)),b[B>>2]=V.ind,R[B>>2]=V.est.rgba;else for(B=0;B<v;B+=4){var J=M[B]*.00392156862745098,H=M[B+1]*(1/255),N=M[B+2]*(1/255),G=M[B+3]*(1/255);for(V=P;V.left;)V=L(V.est,J,H,N,G)<=0?V.left:V.right;b[B>>2]=V.ind,R[B>>2]=V.est.rgba}return{abuf:E.buffer,inds:b,plte:A}}function C(w,y,M){M==null&&(M=1e-4);const E=new Uint32Array(w.buffer),R={i0:0,i1:w.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=S(w,R.i0,R.i1),R.est=k(R.bst);const I=[R];for(;I.length<y;){let A=0,v=0;for(var P=0;P<I.length;P++)I[P].est.L>A&&(A=I[P].est.L,v=P);if(A<M)break;const b=I[v],V=$(w,E,b.i0,b.i1,b.est.e,b.est.eMq255);if(b.i0>=V||b.i1<=V){b.est.L=0;continue}const B={i0:b.i0,i1:V,bst:null,est:null,tdst:0,left:null,right:null};B.bst=S(w,B.i0,B.i1),B.est=k(B.bst);const J={i0:V,i1:b.i1,bst:null,est:null,tdst:0,left:null,right:null};for(J.bst={R:[],m:[],N:b.bst.N-B.bst.N},P=0;P<16;P++)J.bst.R[P]=b.bst.R[P]-B.bst.R[P];for(P=0;P<4;P++)J.bst.m[P]=b.bst.m[P]-B.bst.m[P];J.est=k(J.bst),b.left=B,b.right=J,I[v]=B,I.push(J)}for(I.sort((A,v)=>v.bst.N-A.bst.N),P=0;P<I.length;P++)I[P].ind=P;return[R,I]}function D(w,y,M,E,R){if(w.left==null)return w.tdst=function(B,J,H,N,G){const K=J-B[0],Z=H-B[1],le=N-B[2],ye=G-B[3];return K*K+Z*Z+le*le+ye*ye}(w.est.q,y,M,E,R),w;const I=L(w.est,y,M,E,R);let P=w.left,A=w.right;I>0&&(P=w.right,A=w.left);const v=D(P,y,M,E,R);if(v.tdst<=I*I)return v;const b=D(A,y,M,E,R);return b.tdst<v.tdst?b:v}function L(w,y,M,E,R){const{e:I}=w;return I[0]*y+I[1]*M+I[2]*E+I[3]*R-w.eMq}function $(w,y,M,E,R,I){for(E-=4;M<E;){for(;_(w,M,R)<=I;)M+=4;for(;_(w,E,R)>I;)E-=4;if(M>=E)break;const P=y[M>>2];y[M>>2]=y[E>>2],y[E>>2]=P,M+=4,E-=4}for(;_(w,M,R)>I;)M-=4;return M+4}function _(w,y,M){return w[y]*M[0]+w[y+1]*M[1]+w[y+2]*M[2]+w[y+3]*M[3]}function S(w,y,M){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0],I=M-y>>2;for(let P=y;P<M;P+=4){const A=w[P]*.00392156862745098,v=w[P+1]*(1/255),b=w[P+2]*(1/255),V=w[P+3]*(1/255);R[0]+=A,R[1]+=v,R[2]+=b,R[3]+=V,E[0]+=A*A,E[1]+=A*v,E[2]+=A*b,E[3]+=A*V,E[5]+=v*v,E[6]+=v*b,E[7]+=v*V,E[10]+=b*b,E[11]+=b*V,E[15]+=V*V}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:R,N:I}}function k(w){const{R:y}=w,{m:M}=w,{N:E}=w,R=M[0],I=M[1],P=M[2],A=M[3],v=E==0?0:1/E,b=[y[0]-R*R*v,y[1]-R*I*v,y[2]-R*P*v,y[3]-R*A*v,y[4]-I*R*v,y[5]-I*I*v,y[6]-I*P*v,y[7]-I*A*v,y[8]-P*R*v,y[9]-P*I*v,y[10]-P*P*v,y[11]-P*A*v,y[12]-A*R*v,y[13]-A*I*v,y[14]-A*P*v,y[15]-A*A*v],V=b,B=O;let J=[Math.random(),Math.random(),Math.random(),Math.random()],H=0,N=0;if(E!=0)for(let K=0;K<16&&(J=B.multVec(V,J),N=Math.sqrt(B.dot(J,J)),J=B.sml(1/N,J),!(K!=0&&Math.abs(N-H)<1e-9));K++)H=N;const G=[R*v,I*v,P*v,A*v];return{Cov:b,q:G,e:J,L:H,eMq255:B.dot(B.sml(255,G),J),eMq:B.dot(J,G),rgba:(Math.round(255*G[3])<<24|Math.round(255*G[2])<<16|Math.round(255*G[1])<<8|Math.round(255*G[0])<<0)>>>0}}var O={multVec:(w,y)=>[w[0]*y[0]+w[1]*y[1]+w[2]*y[2]+w[3]*y[3],w[4]*y[0]+w[5]*y[1]+w[6]*y[2]+w[7]*y[3],w[8]*y[0]+w[9]*y[1]+w[10]*y[2]+w[11]*y[3],w[12]*y[0]+w[13]*y[1]+w[14]*y[2]+w[15]*y[3]],dot:(w,y)=>w[0]*y[0]+w[1]*y[1]+w[2]*y[2]+w[3]*y[3],sml:(w,y)=>[w*y[0],w*y[1],w*y[2],w*y[3]]};ma.encode=function(y,M,E,R,I,P,A){R==null&&(R=0),A==null&&(A=!1);const v=f(y,M,E,R,[!1,!1,!1,0,A,!1]);return g(v,-1),d(v,M,E,I,P)},ma.encodeLL=function(y,M,E,R,I,P,A,v){const b={ctype:0+(R==1?0:2)+(I==0?0:4),depth:P,frames:[]},V=(R+I)*P,B=V*M;for(let J=0;J<y.length;J++)b.frames.push({rect:{x:0,y:0,width:M,height:E},img:new Uint8Array(y[J]),blend:0,dispose:1,bpp:Math.ceil(V/8),bpl:Math.ceil(B/8)});return g(b,0,!0),d(b,M,E,A,v)},ma.encode.compress=f,ma.encode.dither=i,ma.quantize=F,ma.quantize.getKDtree=C,ma.quantize.getNearest=D})();const Gl={toArrayBuffer(e,t){const a=e.width,n=e.height,r=a<<2,o=e.getContext("2d").getImageData(0,0,a,n),s=new Uint32Array(o.data.buffer),i=(32*a+31)/32<<2,d=i*n,g=122+d,f=new ArrayBuffer(g),l=new DataView(f),u=1<<20;let m,x,F,C,D=u,L=0,$=0,_=0;function S(w){l.setUint16($,w,!0),$+=2}function k(w){l.setUint32($,w,!0),$+=4}function O(w){$+=w}S(19778),k(g),O(4),k(122),k(108),k(a),k(-n>>>0),S(1),S(32),k(3),k(d),k(2835),k(2835),O(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),function w(){for(;L<n&&D>0;){for(C=122+L*i,m=0;m<r;)D--,x=s[_++],F=x>>>24,l.setUint32(C+m,x<<8|F),m+=4;L++}_<s.length?(D=u,setTimeout(w,Gl._dly)):t(f)}()},toBlob(e,t){this.toArrayBuffer(e,a=>{t(new Blob([a],{type:"image/bmp"}))})},_dly:9};var Jt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Jw={[Jt.CHROME]:16384,[Jt.FIREFOX]:11180,[Jt.DESKTOP_SAFARI]:16384,[Jt.IE]:8192,[Jt.IOS]:4096,[Jt.ETC]:8192};const ws=typeof window<"u",Wl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Jr=ws&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),qw=(ws||Wl)&&(Jr&&Jr.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Jl=(ws||Wl)&&(Jr&&Jr.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function _s(e,t,a=Date.now()){return new Promise(n=>{const r=e.split(","),o=r[0].match(/:(.*?);/)[1],s=globalThis.atob(r[1]);let i=s.length;const d=new Uint8Array(i);for(;i--;)d[i]=s.charCodeAt(i);const g=new Blob([d],{type:o});g.name=t,g.lastModified=a,n(g)})}function ql(e){return new Promise((t,a)=>{const n=new Jl;n.onload=()=>t(n.result),n.onerror=r=>a(r),n.readAsDataURL(e)})}function Kl(e){return new Promise((t,a)=>{const n=new Image;n.onload=()=>t(n),n.onerror=r=>a(r),n.src=e})}function yn(){if(yn.cachedResult!==void 0)return yn.cachedResult;let e=Jt.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=Jt.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=Jt.IOS:/Safari/i.test(t)?e=Jt.DESKTOP_SAFARI:/Firefox/i.test(t)?e=Jt.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=Jt.IE),yn.cachedResult=e,yn.cachedResult}function Yl(e,t){const a=yn(),n=Jw[a];let r=e,o=t,s=r*o;const i=r>o?o/r:r/o;for(;s>n*n;){const d=(n+r)/2,g=(n+o)/2;d<g?(o=g,r=g*i):(o=d*i,r=d),s=r*o}return{width:r,height:o}}function uo(e,t){let a,n;try{if(a=new OffscreenCanvas(e,t),n=a.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{a=document.createElement("canvas"),n=a.getContext("2d")}return a.width=e,a.height=t,[a,n]}function Ql(e,t){const{width:a,height:n}=Yl(e.width,e.height),[r,o]=uo(a,n);return t&&/jpe?g/.test(t)&&(o.fillStyle="white",o.fillRect(0,0,r.width,r.height)),o.drawImage(e,0,0,r.width,r.height),r}function Nr(){return Nr.cachedResult!==void 0||(Nr.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Nr.cachedResult}function qr(e,t={}){return new Promise(function(a,n){let r,o;var s=function(){try{return o=Ql(r,t.fileType||e.type),a([r,o])}catch(d){return n(d)}},i=function(d){try{var g=function(f){try{throw f}catch(l){return n(l)}};try{let f;return ql(e).then(function(l){try{return f=l,Kl(f).then(function(u){try{return r=u,function(){try{return s()}catch(m){return n(m)}}()}catch(m){return g(m)}},g)}catch(u){return g(u)}},g)}catch(f){g(f)}}catch(f){return n(f)}};try{if(Nr()||[Jt.DESKTOP_SAFARI,Jt.MOBILE_SAFARI].includes(yn()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(d){try{return r=d,s()}catch{return i()}},i)}catch{i()}})}function Kr(e,t,a,n,r=1){return new Promise(function(o,s){let i;if(t==="image/png"){let g,f,l;return g=e.getContext("2d"),{data:f}=g.getImageData(0,0,e.width,e.height),l=ma.encode([f.buffer],e.width,e.height,4096*r),i=new Blob([l],{type:t}),i.name=a,i.lastModified=n,d.call(this)}{let g=function(){return d.call(this)};if(t==="image/bmp")return new Promise(f=>Gl.toBlob(e,f)).then((function(f){try{return i=f,i.name=a,i.lastModified=n,g.call(this)}catch(l){return s(l)}}).bind(this),s);{let f=function(){return g.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:r}).then((function(l){try{return i=l,i.name=a,i.lastModified=n,f.call(this)}catch(u){return s(u)}}).bind(this),s);{let l;return l=e.toDataURL(t,r),_s(l,a,n).then((function(u){try{return i=u,f.call(this)}catch(m){return s(m)}}).bind(this),s)}}}function d(){return o(i)}})}function Sa(e){e.width=0,e.height=0}function En(){return new Promise(function(e,t){let a,n,r,o;return En.cachedResult!==void 0?e(En.cachedResult):_s("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return a=s,qr(a).then(function(i){try{return n=i[1],Kr(n,a.type,a.name,a.lastModified).then(function(d){try{return r=d,Sa(n),qr(r).then(function(g){try{return o=g[0],En.cachedResult=o.width===1&&o.height===2,e(En.cachedResult)}catch(f){return t(f)}},t)}catch(g){return t(g)}},t)}catch(d){return t(d)}},t)}catch(i){return t(i)}},t)})}function Zl(e){return new Promise((t,a)=>{const n=new Jl;n.onload=r=>{const o=new DataView(r.target.result);if(o.getUint16(0,!1)!=65496)return t(-2);const s=o.byteLength;let i=2;for(;i<s;){if(o.getUint16(i+2,!1)<=8)return t(-1);const d=o.getUint16(i,!1);if(i+=2,d==65505){if(o.getUint32(i+=2,!1)!=1165519206)return t(-1);const g=o.getUint16(i+=6,!1)==18761;i+=o.getUint32(i+4,g);const f=o.getUint16(i,g);i+=2;for(let l=0;l<f;l++)if(o.getUint16(i+12*l,g)==274)return t(o.getUint16(i+12*l+8,g))}else{if((65280&d)!=65280)break;i+=o.getUint16(i,!1)}}return t(-1)},n.onerror=r=>a(r),n.readAsArrayBuffer(e)})}function Xl(e,t){const{width:a}=e,{height:n}=e,{maxWidthOrHeight:r}=t;let o,s=e;return isFinite(r)&&(a>r||n>r)&&([s,o]=uo(a,n),a>n?(s.width=r,s.height=n/a*r):(s.width=a/n*r,s.height=r),o.drawImage(e,0,0,s.width,s.height),Sa(e)),s}function eu(e,t){const{width:a}=e,{height:n}=e,[r,o]=uo(a,n);switch(t>4&&t<9?(r.width=n,r.height=a):(r.width=a,r.height=n),t){case 2:o.transform(-1,0,0,1,a,0);break;case 3:o.transform(-1,0,0,-1,a,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,a);break;case 8:o.transform(0,-1,1,0,0,a)}return o.drawImage(e,0,0,a,n),Sa(e),r}function vi(e,t,a=0){return new Promise(function(n,r){let o,s,i,d,g,f,l,u,m,x,F,C,D,L,$,_,S,k,O,w;function y(E=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;o+=E,t.onProgress(Math.min(o,100))}function M(E){if(t.signal&&t.signal.aborted)throw t.signal.reason;o=Math.min(Math.max(E,o),100),t.onProgress(o)}return o=a,s=t.maxIteration||10,i=1024*t.maxSizeMB*1024,y(),qr(e,t).then((function(E){try{return[,d]=E,y(),g=Xl(d,t),y(),new Promise(function(R,I){var P;if(!(P=t.exifOrientation))return Zl(e).then((function(v){try{return P=v,A.call(this)}catch(b){return I(b)}}).bind(this),I);function A(){return R(P)}return A.call(this)}).then((function(R){try{return f=R,y(),En().then((function(I){try{return l=I?g:eu(g,f),y(),u=t.initialQuality||1,m=t.fileType||e.type,Kr(l,m,e.name,e.lastModified,u).then((function(P){try{{let v=function(){if(s--&&($>i||$>D)){let V,B;return V=w?.95*O.width:O.width,B=w?.95*O.height:O.height,[S,k]=uo(V,B),k.drawImage(O,0,0,V,B),u*=m==="image/png"?.85:.95,Kr(S,m,e.name,e.lastModified,u).then(function(J){try{return _=J,Sa(O),O=S,$=_.size,M(Math.min(99,Math.floor((L-$)/(L-i)*100))),v}catch(H){return r(H)}},r)}return[1]},b=function(){return Sa(O),Sa(S),Sa(g),Sa(l),Sa(d),M(100),n(_)};if(x=P,y(),F=x.size>i,C=x.size>e.size,!F&&!C)return M(100),n(x);var A;return D=e.size,L=x.size,$=L,O=l,w=!t.alwaysKeepResolution&&F,(A=(function(V){for(;V;){if(V.then)return void V.then(A,r);try{if(V.pop){if(V.length)return V.pop()?b.call(this):V;V=v}else V=V.call(this)}catch(B){return r(B)}}}).bind(this))(v)}}catch(v){return r(v)}}).bind(this),r)}catch(P){return r(P)}}).bind(this),r)}catch(I){return r(I)}}).bind(this),r)}catch(R){return r(R)}}).bind(this),r)})}const Kw=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Po;function Yw(e,t){return new Promise((a,n)=>{Po||(Po=function(s){const i=[];return i.push(s),URL.createObjectURL(new Blob(i))}(Kw));const r=new Worker(Po);r.addEventListener("message",function(s){if(t.signal&&t.signal.aborted)r.terminate();else if(s.data.progress===void 0){if(s.data.error)return n(new Error(s.data.error)),void r.terminate();a(s.data.file),r.terminate()}else t.onProgress(s.data.progress)}),r.addEventListener("error",n),t.signal&&t.signal.addEventListener("abort",()=>{n(t.signal.reason),r.terminate()}),r.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})})}function Et(e,t){return new Promise(function(a,n){let r,o,s,i,d,g;if(r={...t},s=0,{onProgress:i}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=m=>{s=m,typeof i=="function"&&i(s)},!(e instanceof Blob||e instanceof qw))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return n(new Error("The file given is not an image"));if(g=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||g)return vi(e,r).then((function(m){try{return o=m,u.call(this)}catch(x){return n(x)}}).bind(this),n);var f=(function(){try{return u.call(this)}catch(m){return n(m)}}).bind(this),l=function(m){try{return vi(e,r).then(function(x){try{return o=x,f()}catch(F){return n(F)}},n)}catch(x){return n(x)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Yw(e,r).then(function(m){try{return o=m,f()}catch{return l()}},l)}catch{l()}function u(){try{o.name=e.name,o.lastModified=e.lastModified}catch{}try{r.preserveExif&&e.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===e.type)&&(o=Hl(e,o))}catch{}return a(o)}})}Et.getDataUrlFromFile=ql,Et.getFilefromDataUrl=_s,Et.loadImage=Kl,Et.drawImageInCanvas=Ql,Et.drawFileInCanvas=qr,Et.canvasToFile=Kr,Et.getExifOrientation=Zl,Et.handleMaxWidthOrHeight=Xl,Et.followExifOrientation=eu,Et.cleanupCanvasMemory=Sa,Et.isAutoOrientationInBrowser=En,Et.approximateBelowMaximumCanvasSizeOfBrowser=Yl,Et.copyExifWithoutOrientation=Hl,Et.getBrowserName=yn,Et.version="2.0.2";var Xe;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(Xe||(Xe={}));const Qw=(()=>{let e=0;return()=>e++})(),Zw=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Xw=new Error("called FFmpeg.terminate()");var Zt,on,Ea,bn,wn,Yr,jt;class e2{constructor(){$a(this,Zt,null);$a(this,on,{});$a(this,Ea,{});$a(this,bn,[]);$a(this,wn,[]);Oe(this,"loaded",!1);$a(this,Yr,()=>{Ne(this,Zt)&&(Ne(this,Zt).onmessage=({data:{id:t,type:a,data:n}})=>{switch(a){case Xe.LOAD:this.loaded=!0,Ne(this,on)[t](n);break;case Xe.MOUNT:case Xe.UNMOUNT:case Xe.EXEC:case Xe.FFPROBE:case Xe.WRITE_FILE:case Xe.READ_FILE:case Xe.DELETE_FILE:case Xe.RENAME:case Xe.CREATE_DIR:case Xe.LIST_DIR:case Xe.DELETE_DIR:Ne(this,on)[t](n);break;case Xe.LOG:Ne(this,bn).forEach(r=>r(n));break;case Xe.PROGRESS:Ne(this,wn).forEach(r=>r(n));break;case Xe.ERROR:Ne(this,Ea)[t](n);break}delete Ne(this,on)[t],delete Ne(this,Ea)[t]})});$a(this,jt,({type:t,data:a},n=[],r)=>Ne(this,Zt)?new Promise((o,s)=>{const i=Qw();Ne(this,Zt)&&Ne(this,Zt).postMessage({id:i,type:t,data:a},n),Ne(this,on)[i]=o,Ne(this,Ea)[i]=s,r==null||r.addEventListener("abort",()=>{s(new DOMException(`Message # ${i} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(Zw));Oe(this,"load",({classWorkerURL:t,...a}={},{signal:n}={})=>(Ne(this,Zt)||(In(this,Zt,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),Ne(this,Yr).call(this)),Ne(this,jt).call(this,{type:Xe.LOAD,data:a},void 0,n)));Oe(this,"exec",(t,a=-1,{signal:n}={})=>Ne(this,jt).call(this,{type:Xe.EXEC,data:{args:t,timeout:a}},void 0,n));Oe(this,"ffprobe",(t,a=-1,{signal:n}={})=>Ne(this,jt).call(this,{type:Xe.FFPROBE,data:{args:t,timeout:a}},void 0,n));Oe(this,"terminate",()=>{const t=Object.keys(Ne(this,Ea));for(const a of t)Ne(this,Ea)[a](Xw),delete Ne(this,Ea)[a],delete Ne(this,on)[a];Ne(this,Zt)&&(Ne(this,Zt).terminate(),In(this,Zt,null),this.loaded=!1)});Oe(this,"writeFile",(t,a,{signal:n}={})=>{const r=[];return a instanceof Uint8Array&&r.push(a.buffer),Ne(this,jt).call(this,{type:Xe.WRITE_FILE,data:{path:t,data:a}},r,n)});Oe(this,"mount",(t,a,n)=>{const r=[];return Ne(this,jt).call(this,{type:Xe.MOUNT,data:{fsType:t,options:a,mountPoint:n}},r)});Oe(this,"unmount",t=>{const a=[];return Ne(this,jt).call(this,{type:Xe.UNMOUNT,data:{mountPoint:t}},a)});Oe(this,"readFile",(t,a="binary",{signal:n}={})=>Ne(this,jt).call(this,{type:Xe.READ_FILE,data:{path:t,encoding:a}},void 0,n));Oe(this,"deleteFile",(t,{signal:a}={})=>Ne(this,jt).call(this,{type:Xe.DELETE_FILE,data:{path:t}},void 0,a));Oe(this,"rename",(t,a,{signal:n}={})=>Ne(this,jt).call(this,{type:Xe.RENAME,data:{oldPath:t,newPath:a}},void 0,n));Oe(this,"createDir",(t,{signal:a}={})=>Ne(this,jt).call(this,{type:Xe.CREATE_DIR,data:{path:t}},void 0,a));Oe(this,"listDir",(t,{signal:a}={})=>Ne(this,jt).call(this,{type:Xe.LIST_DIR,data:{path:t}},void 0,a));Oe(this,"deleteDir",(t,{signal:a}={})=>Ne(this,jt).call(this,{type:Xe.DELETE_DIR,data:{path:t}},void 0,a))}on(t,a){t==="log"?Ne(this,bn).push(a):t==="progress"&&Ne(this,wn).push(a)}off(t,a){t==="log"?In(this,bn,Ne(this,bn).filter(n=>n!==a)):t==="progress"&&In(this,wn,Ne(this,wn).filter(n=>n!==a))}}Zt=new WeakMap,on=new WeakMap,Ea=new WeakMap,bn=new WeakMap,wn=new WeakMap,Yr=new WeakMap,jt=new WeakMap;var hi;(function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"})(hi||(hi={}));const t2=new Error("failed to get response body reader"),a2=new Error("failed to complete download"),n2="Content-Length",r2=e=>new Promise((t,a)=>{const n=new FileReader;n.onload=()=>{const{result:r}=n;r instanceof ArrayBuffer?t(new Uint8Array(r)):t(new Uint8Array)},n.onerror=r=>{var o,s;a(Error(`File could not be read! Code=${((s=(o=r==null?void 0:r.target)==null?void 0:o.error)==null?void 0:s.code)||-1}`))},n.readAsArrayBuffer(e)}),o2=async e=>{let t;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(a=>a.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)t=await r2(e);else return new Uint8Array;return new Uint8Array(t)},s2=async(e,t)=>{var r;const a=await fetch(e);let n;try{const o=parseInt(a.headers.get(n2)||"-1"),s=(r=a.body)==null?void 0:r.getReader();if(!s)throw t2;const i=[];let d=0;for(;;){const{done:l,value:u}=await s.read(),m=u?u.length:0;if(l){if(o!=-1&&o!==d)throw a2;t&&t({url:e,total:o,received:d,delta:m,done:l});break}i.push(u),d+=m,t&&t({url:e,total:o,received:d,delta:m,done:l})}const g=new Uint8Array(d);let f=0;for(const l of i)g.set(l,f),f+=l.length;n=g.buffer}catch(o){console.log("failed to send download progress event: ",o),n=await a.arrayBuffer()}return n},Io=async(e,t,a=!1,n)=>{const r=a?await s2(e,n):await(await fetch(e)).arrayBuffer(),o=new Blob([r],{type:t});return URL.createObjectURL(o)},i2=Ta.global.t,l2=ct();let Qn=null;async function u2(){return Qn||(Qn=new e2,await Qn.load({coreURL:await Io("https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm/ffmpeg-core.js","text/javascript"),wasmURL:await Io("https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm/ffmpeg-core.wasm","application/wasm"),workerURL:await Io("https://unpkg.com/@ffmpeg/ffmpeg@0.12.6/dist/esm/worker.js","text/javascript")}),Qn)}async function d2(e){const{inputFile:t,format:a,videoBitrate:n="10000k",audioBitrate:r="128k",width:o,height:s}=e,i=await u2();try{await i.writeFile("input",await o2(t));let d=["-i","input","-c:v","libx264","-preset","ultrafast","-b:v",n,"-c:a","aac","-b:a",r];o&&s&&(d=[...d,"-vf",`scale=${o}:${s}`]),d=[...d,"-f",a,`output.${a}`],await i.exec(d);const g=await i.readFile(`output.${a}`);return{outputFile:new File([g],`output.${a}`,{type:`video/${a}`})}}catch(d){throw l2.error({message:i2("errors.transcoding_error",{error:d})}),d}}const c2={key:0},f2={key:0},tu=Se({__name:"components",emits:["uploaded","error"],setup(e,{emit:t}){const{t:a}=kt(),n=ct(),r=t,o=W(!1),s=W(!1),i=W(0),d=W(0),{mobile:g}=ki(),f=te(()=>g.value),l={image:{maxSize:16,maxFiles:100},video:{maxSize:64,maxFiles:4},pdf:{maxSize:16,maxFiles:100},default:{maxSize:16,maxFiles:100}};async function u(x){var C,D;n.promise({message:a("notifications.uploading_files")});const F=[];if(x.length>0){s.value=!0,d.value=1;const L={};x.forEach($=>{if($.type){const _=$.type.split("/")[0];L[_]||(L[_]=[]),L[_].push($)}});for(const[$,_]of Object.entries(L)){const S=l[$]||l.default;if(setTimeout(()=>{d.value=d.value/Object.keys(L).length*50},125),_.length>S.maxFiles)return n.rejectPromise({message:a("errors.upload_error_max_files",{maxFiles:S.maxFiles})}),s.value=!1,[];if(_.filter(O=>(d.value=d.value/Object.keys(L).length*50,O.size>S.maxSize*1024*1024)).length>0)return n.rejectPromise({message:a("errors.upload_error_max_size",{maxSize:S.maxSize})}),s.value=!1,[]}for(let $=0;$<x.length;$++)if(i.value=$/x.length*100,(C=x[$].type)!=null&&C.startsWith("image")){const _=await Et(x[$],{maxSizeMB:16,useWebWorker:!0});F.push(_)}else(D=x[$].type)!=null&&D.startsWith("video")?await d2({inputFile:x[$],format:"mp4"}).then(_=>{const S=new File([_.outputFile],x[$].name,{type:"video/mp4"});F.push(S)}).catch(_=>{n.rejectPromise({message:a("errors.transcoding_error",{error:_.message})})}):F.push(x[$]);i.value=100,d.value=100,n.resolvePromise({message:a("notifications.upload_success")})}return s.value=!1,o.value=!1,F}function m(x,F){r(x,F)}return(x,F)=>(T(),q("div",null,[c(yt,{align:"center"},{default:h(()=>[c(qe,{cols:"auto"},{default:h(()=>[o.value&&i.value<100?(T(),q("h4",c2,"Compressing...")):X("",!0)]),_:1}),c(qe,{cols:"auto"},{default:h(()=>[o.value?(T(),ie(ia,{key:0,rounded:"",color:"primary",height:"20",class:"mt-2",indeterminate:""})):X("",!0)]),_:1})]),_:1}),o.value&&i.value<100?(T(),q("span",f2,"Please wait while we compress your files. You should not exit this page.")):X("",!0),o.value?(T(),ie(ku,{key:1,rounded:"",color:"secondary",height:"20",class:"mt-2","model-value":i.value},{default:h(({value:C})=>[p("strong",null,j(Math.round(C))+"%",1)]),_:1},8,["model-value"])):X("",!0),F[0]||(F[0]=p("br",null,null,-1)),f.value?(T(),ie(se(Uw),{key:2,config:{config:{mode:"auto",appendOnPaste:!0},disabled:s.value,endpoint:"videoImgPDF",onBeforeUploadBegin:C=>(o.value=!0,u(C)),onClientUploadComplete:C=>{m("uploaded",C),o.value=!1},onUploadError:C=>{m("error",C),o.value=!1}}},null,8,["config"])):X("",!0),f.value?X("",!0):(T(),ie(se(zw),{key:3,config:{config:{mode:"auto",appendOnPaste:!0},disabled:s.value,endpoint:"videoImgPDF",onBeforeUploadBegin:C=>(o.value=!0,u(C)),onClientUploadComplete:C=>{m("uploaded",C),o.value=!1},onUploadError:C=>{m("error",C),o.value=!1}}},null,8,["config"]))]))}}),gi=Se({__name:"addCorrespondence",props:{isPDCA:{type:Boolean}},emits:["close","update"],setup(e,{emit:t}){const a=e,n=t,r=Kt(),o=kn(),s=ct(),{t:i}=kt(),d=W(!1),g=W([]),f=W([]),l=W(!1),u=C=>{g.value.push(...C)},m=C=>{f.value=C},x=()=>{d.value=!1,g.value=[],f.value=[],n("close")},F=async()=>{var C;l.value=!0,s.promise({message:i("notifications.saving_correspondence")});try{const D=g.value,L=r.selectedFormId,$=a.isPDCA;console.log("clickedItemId",L),console.log("isPDCA",$);let _;if($){const S=r.getReportById(L);(C=S==null?void 0:S.Preventief)!=null&&C.id?_=await o.addCorrespondence(S.Preventief.id,D):s.rejectPromise({message:i("errors.correctief_not_saved")})}else _=await r.addCorrespondence(L,D);_?(s.resolvePromise({message:i("notifications.correspondence_saved")}),x(),n("update",[!0,!0])):s.rejectPromise({message:i("errors.correspondence_error",{error:i("errors.wrong_status")})})}catch(D){s.rejectPromise({message:i("errors.correspondence_error",{error:D})})}finally{l.value=!1}};return(C,D)=>(T(),ie(pr,{modelValue:d.value,"onUpdate:modelValue":D[0]||(D[0]=L=>d.value=L),title:"Voeg Bijlagen Toe","show-actions":!1},{default:h(()=>[c(Re,null,{default:h(()=>[c(tu,{onUploaded:u,onError:m}),f.value.length>0?(T(),ie(To,{key:0,type:"error",class:"mt-4"},{default:h(()=>[D[1]||(D[1]=z(" Er zijn fouten opgetreden tijdens het uploaden: ")),p("ul",null,[(T(!0),q(Ae,null,We(f.value,L=>(T(),q("li",{key:L},j(L),1))),128))])]),_:1,__:[1]})):X("",!0),c(yt,null,{default:h(()=>[c(qe,{cols:"12"},{default:h(()=>[D[2]||(D[2]=p("strong",null,"Bestanden toegevoegd: ",-1)),z(" "+j(g.value.length)+" ",1),D[3]||(D[3]=p("br",null,null,-1)),(T(!0),q(Ae,null,We(g.value,L=>(T(),ie(et,{key:L.name,color:"success",dark:""},{default:h(()=>[z(j(L.name),1)]),_:2},1024))),128))]),_:1,__:[2,3]})]),_:1})]),_:1}),c(Nt,null,{default:h(()=>[c(ge,{text:"Annuleer",onClick:x},{default:h(()=>D[4]||(D[4]=[z("Annuleer")])),_:1,__:[4]}),c(Dt),c(ge,{onClick:Aa(F,["prevent"]),loading:l.value,disabled:g.value.length===0,variant:"tonal",color:"primary"},{default:h(()=>D[5]||(D[5]=[z(" Opslaan ")])),_:1,__:[5]},8,["loading","disabled"])]),_:1})]),_:1},8,["modelValue"]))}}),m2=["width","height"],p2=["stroke"],v2=["stroke"],h2=["stroke"],g2=["stroke"],y2=["stroke"],b2={x:"50",y:"60","font-size":"40","text-anchor":"middle",fill:"#333"},au=Se({__name:"PDCACircle",props:{step:{type:Number,default:0},size:{type:Number,default:40}},setup(e){return(t,a)=>(T(),q("svg",{width:e.size,height:e.size,viewBox:"0 0 100 100"},[a[0]||(a[0]=p("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e0e0e0","stroke-width":"10"},null,-1)),p("path",{d:"M50 5 A45 45 0 0 1 86.7 27.3",fill:"none",stroke:e.step>=1?"#800080":"#e0e0e0","stroke-width":"10","stroke-linecap":"round"},null,8,p2),p("path",{d:"M86.7 27.3 A45 45 0 0 1 86.7 72.7",fill:"none",stroke:e.step>=2?"#4CAF50":"#e0e0e0","stroke-width":"10","stroke-linecap":"round"},null,8,v2),p("path",{d:"M86.7 72.7 A45 45 0 0 1 13.3 72.7",fill:"none",stroke:e.step>=3?"#2196F3":"#e0e0e0","stroke-width":"10","stroke-linecap":"round"},null,8,h2),p("path",{d:"M13.3 72.7 A45 45 0 0 1 13.3 27.3",fill:"none",stroke:e.step>=4?"#FFC107":"#e0e0e0","stroke-width":"10","stroke-linecap":"round"},null,8,g2),p("path",{d:"M13.3 27.3 A45 45 0 0 1 50 5",fill:"none",stroke:e.step>=5?"#FF5722":"#e0e0e0","stroke-width":"10","stroke-linecap":"round"},null,8,y2),p("text",b2,j(["O","P","D","C","A"][e.step-1]||""),1)],8,m2))}}),w2={class:"mode-toggle-container mb-6"},_2={class:"panel-content panel-active"},C2={class:"existing-pdcas-list"},x2={key:0,class:"d-flex justify-center align-center pa-8"},S2={key:1,class:"empty-state"},D2={class:"d-flex align-center justify-space-between"},k2={class:"text-medium-emphasis"},A2={class:"text-caption text-medium-emphasis"},P2={class:"panel-content panel-active"},I2={class:"d-flex align-center mb-6"},T2={class:"mb-4"},$2={class:"d-flex align-center mb-6"},F2={class:"flex-grow-1"},E2={class:"text-h3 mb-2"},N2={class:"ml-4"},R2=Se({__name:"AddPDCA",props:{modelValue:{type:Boolean,required:!0},clickedItem:{type:Object,required:!1},actiehouders:{type:Array,default:()=>[]}},emits:["update:model-value","update","close"],setup(e,{emit:t}){const{t:a}=kt(),n=ct(),r=W(2),o=e,s=t,i=kn(),d=Kt(),g=ga(),f=ha(),l=W(!1),u=W(!1),m=te(()=>f.statussen.find(N=>N.StatusNaam.toLowerCase()==="open")),x=W(null),F=W(null),C=W([]),D=W(""),L=W({to:new Date(Date.now()-864e5)}),$=W([]),_=W("link"),S=W(""),k=W([]),O=W(null),w=W(!1),y=W(null),M=N=>N instanceof Date&&!isNaN(N.getTime()),E=te(()=>F.value?C.value.filter(N=>N.id!==F.value.id):C.value),R=te(()=>{if(!S.value)return k.value;const N=S.value.toLowerCase();return[...new Set(k.value)].filter(G=>{var K,Z,le;return G.rootCauseLevel===0&&G.Melding[0].Archived===!1&&(((K=G.Title)==null?void 0:K.toLowerCase().includes(N))||((le=(Z=G.User)==null?void 0:Z.Name)==null?void 0:le.toLowerCase().includes(N)))})}),I=async()=>{u.value=!0;try{const N=await i.getAllPreventief();(N==null?void 0:N.status)===200&&(k.value=N.data)}catch{n.error({message:a("errors.fetch_pdcas_failed")})}finally{u.value=!1}};be(F,N=>{N&&$.value&&($.value=$.value.filter(G=>G.id!==N.id))}),be(_,(N,G)=>{N==="create_pdca"?(r.value=2,O.value=null):N==="create_pd"?(r.value=1,O.value=null):N==="link"&&G!=="link"&&I()},{immediate:!0});const P=()=>{},A=N=>{y.value=N,w.value=!0},v=()=>{w.value=!1,y.value=null},b=async()=>{y.value&&(await V(y.value),w.value=!1,y.value=null)},V=async N=>{var G;n.info({message:a("notifications.linking_pdca",{title:N.Title})}),O.value=N,n.promise({message:a("notifications.linking_to_pdca")}),l.value=!0;try{await d.updateReport((G=o.clickedItem)==null?void 0:G.id,{PDCA:!0,PreventiefID:N.id}),await Promise.all([d.fetchReports(!0),d.updateCurrentForm(!0)]),d.$patch({reports:[...d.reports]}),s("close"),n.resolvePromise({message:a("notifications.link_pdca_success")}),s("update",[!0,!0])}catch(K){n.rejectPromise({message:a("notifications.link_pdca_failed",{error:K})})}finally{l.value=!1}},B=async()=>{var N,G,K;if(n.promise({message:a("notifications.create_pdca")}),l.value=!0,!x.value||!F.value||!D.value){n.rejectPromise({message:a("errors.required_parameters")}),l.value=!1;return}try{const Z=r.value;console.log("testroot"),console.log(Z);const le={Title:D.value,Deadline:x.value,ActiehouderID:F.value.id,MeldingID:(N=o==null?void 0:o.clickedItem)==null?void 0:N.id,RootCauseLevel:r.value,...m.value&&{StatusID:(G=m.value)==null?void 0:G.id},...$.value.length>0&&_.value==="create_pdca"&&{Teamleden:{IDs:$.value}}};console.log("prevInputData"),console.log(le);const ye=await i.createPreventief(le);if(console.log("newPreventief"),console.log(ye),(ye==null?void 0:ye.status)===201)await d.updateReport((K=o==null?void 0:o.clickedItem)==null?void 0:K.id,{PDCA:!0}),await Promise.all([d.fetchReports(!0),d.updateCurrentForm(!0)]),d.$patch({reports:[...d.reports]}),D.value="",x.value=null,F.value=null,$.value=[],s("close"),n.resolvePromise({message:a("notifications.create_pdca_success")}),s("update",[!0,!0]);else throw new Error(a("errors.wrong_status"))}catch(Z){n.rejectPromise({message:a("notifications.create_pdca_failed",{error:Z})})}finally{l.value=!1}},J=N=>{var K,Z,le,ye,Ce,Ie;if(!(N!=null&&N.Steps))return 1;const G=N.Steps;return(K=G.Finished)!=null&&K.Finished||(Z=G.Act)!=null&&Z.Finished?5:(le=G.Check)!=null&&le.Finished?4:(ye=G.Do)!=null&&ye.Finished?3:(Ce=G.Plan)!=null&&Ce.Finished?2:((Ie=G.Obstakel)!=null&&Ie.Finished,1)},H=N=>{const G=C.value.find(K=>K.id===N);return(G==null?void 0:G.Name)||"N/A"};return wt(async()=>{var N,G;D.value="",x.value=null,F.value=null,$.value=[],await g.fetchActiehouders(),await f.fetchStatussen(),C.value=g.actiehouders,(G=(N=o.clickedItem)==null?void 0:N.Actiehouder)!=null&&G.Name&&(F.value=o.clickedItem.Actiehouder),_.value==="link"&&I()}),(N,G)=>(T(),q("div",null,[c(va,{"model-value":e.modelValue,"onUpdate:modelValue":G[8]||(G[8]=K=>N.$emit("update:model-value",K)),"max-width":"700"},{default:h(()=>[c(Te,null,{default:h(()=>[c(Pt,{class:"bg-secondary text-white pa-4 d-flex align-center"},{default:h(()=>[G[10]||(G[10]=z(" PDCA Toewijzen ")),c(Dt),c(ge,{icon:"mdi-close",variant:"text",color:"white",density:"comfortable",onClick:G[0]||(G[0]=K=>s("close"))})]),_:1,__:[10]}),c(Re,{class:"pa-6 dialog-content"},{default:h(()=>[G[24]||(G[24]=p("div",{class:"text-h3 text-primary text-center mb-2"},"Kies:",-1)),p("div",w2,[c(Ai,{modelValue:_.value,"onUpdate:modelValue":G[1]||(G[1]=K=>_.value=K),mandatory:"",color:"primary",class:"mode-toggle"},{default:h(()=>[c(ge,{value:"link"},{default:h(()=>[c(oe,{start:""},{default:h(()=>G[11]||(G[11]=[z("mdi-link-variant")])),_:1,__:[11]}),G[12]||(G[12]=z(" Koppel bestaande PDCA "))]),_:1,__:[12]}),c(ge,{value:"create_pdca"},{default:h(()=>[c(oe,{start:""},{default:h(()=>G[13]||(G[13]=[z("mdi-rotate-360")])),_:1,__:[13]}),G[14]||(G[14]=z(" Maak PDCA "))]),_:1,__:[14]}),c(ge,{value:"create_pd"},{default:h(()=>[c(oe,{start:""},{default:h(()=>G[15]||(G[15]=[z("mdi-lightning-bolt")])),_:1,__:[15]}),G[16]||(G[16]=z(" Maak PD "))]),_:1,__:[16]})]),_:1},8,["modelValue"])]),c(yt,{class:"content-row"},{default:h(()=>[ja(c(qe,{cols:12,class:"panel-container"},{default:h(()=>[p("div",_2,[c(Ot,{modelValue:S.value,"onUpdate:modelValue":[G[2]||(G[2]=K=>S.value=K),P],label:"Zoek bestaande PDCAs...",variant:"outlined",density:"comfortable",class:"mb-2","prepend-inner-icon":"mdi-magnify",clearable:""},null,8,["modelValue"]),p("div",C2,[u.value?(T(),q("div",x2,[c(ia,{indeterminate:"",color:"primary"})])):R.value.length===0?(T(),q("div",S2,[c(oe,{size:"48",color:"medium-emphasis",class:"mb-2"},{default:h(()=>G[17]||(G[17]=[z("mdi-alert")])),_:1,__:[17]}),G[20]||(G[20]=p("div",{class:"text-medium-emphasis mb-4"},"Geen PDCAs gevonden",-1)),c(ge,{color:"primary",onClick:G[3]||(G[3]=K=>_.value="create_pdca")},{default:h(()=>[c(oe,{start:""},{default:h(()=>G[18]||(G[18]=[z("mdi-plus-circle")])),_:1,__:[18]}),G[19]||(G[19]=z(" Maak nieuwe PDCA "))]),_:1,__:[19]})])):(T(),ie($o,{key:2,lines:"two",class:"existing-pdcas-container"},{default:h(()=>[(T(!0),q(Ae,null,We(R.value,K=>{var Z,le;return T(),ie(er,{key:K.id,active:((Z=O.value)==null?void 0:Z.id)===K.id,onClick:ye=>A(K),class:we({"selected-pdca":((le=O.value)==null?void 0:le.id)===K.id})},{default:h(()=>[c(tr,{class:"text-subtitle-1 mb-1"},{default:h(()=>[z(j(K.Title),1)]),_:2},1024),c(Tn,null,{default:h(()=>{var ye;return[p("div",D2,[p("span",k2,j((ye=K.User)==null?void 0:ye.Name),1),p("span",A2,j(K.Deadline?se(aa)(K.Deadline):"Geen deadline"),1)])]}),_:2},1024)]),_:2},1032,["active","onClick","class"])}),128))]),_:1}))])])]),_:1},512),[[Rn,_.value==="link"]]),ja(c(qe,{cols:12,class:"panel-container"},{default:h(()=>[p("div",P2,[p("div",I2,[c(oe,{color:"primary",size:"24",class:"mr-2"},{default:h(()=>G[21]||(G[21]=[z("mdi-information-outline")])),_:1,__:[21]}),G[22]||(G[22]=p("h3",{class:"text-h6 mb-0"},"Gegevens",-1))]),c(Ot,{modelValue:D.value,"onUpdate:modelValue":G[4]||(G[4]=K=>D.value=K),label:"Type onderzoekstitel...",variant:"outlined",density:"comfortable",class:"mb-4"},null,8,["modelValue"]),c(it,{modelValue:F.value,"onUpdate:modelValue":G[5]||(G[5]=K=>F.value=K),items:C.value,"item-title":"Name",label:"Selecteer actiehouder",variant:"outlined",density:"comfortable","return-object":"",class:"mb-4"},null,8,["modelValue","items"]),p("div",T2,[G[23]||(G[23]=p("label",{class:"text-subtitle-1 font-weight-medium mb-2 d-block"},"Deadline:",-1)),c(se(vr),{modelValue:x.value,"onUpdate:modelValue":G[6]||(G[6]=K=>x.value=K),"disabled-dates":L.value,openDate:M(x.value)?x.value:new Date,mondayFirst:!0,name:"Deadline",class:"date-picker"},null,8,["modelValue","disabled-dates","openDate"])]),_.value==="create_pdca"?(T(),ie(it,{key:0,modelValue:$.value,"onUpdate:modelValue":G[7]||(G[7]=K=>$.value=K),items:E.value,"item-title":"Name","item-value":"id",label:"Selecteer teamleden (optioneel)",variant:"outlined",density:"comfortable",multiple:"",chips:"",disabled:!F.value,hint:F.value?"":"Selecteer eerst een actiehouder","persistent-hint":""},null,8,["modelValue","items","disabled","hint"])):X("",!0)])]),_:1},512),[[Rn,_.value!=="link"]])]),_:1})]),_:1,__:[24]}),c(vt),c(Nt,{class:"pa-4"},{default:h(()=>[c(Dt),_.value!=="link"?(T(),ie(ge,{key:0,onClick:B,color:"secondary",loading:l.value,size:"large",class:"px-6",variant:"elevated"},{default:h(()=>G[25]||(G[25]=[z(" Voltooien ")])),_:1,__:[25]},8,["loading"])):X("",!0)]),_:1})]),_:1})]),_:1},8,["model-value"]),c(va,{modelValue:w.value,"onUpdate:modelValue":G[9]||(G[9]=K=>w.value=K),"max-width":"400"},{default:h(()=>[c(Te,null,{default:h(()=>[c(Pt,{class:"bg-secondary text-white pa-4 d-flex align-center"},{default:h(()=>[G[26]||(G[26]=z(" Bevestig PDCA-koppeling ")),c(Dt),c(ge,{icon:"mdi-close",variant:"text",color:"white",density:"comfortable",onClick:v})]),_:1,__:[26]}),c(Re,{class:"pa-6"},{default:h(()=>{var K;return[p("div",$2,[p("div",F2,[p("div",E2,j((K=y.value)==null?void 0:K.Title),1)]),p("div",N2,[c(au,{step:J(y.value),size:48},null,8,["step"])])]),c($o,{density:"compact",class:"pa-0 mb-4 bg-grey-lighten-4 rounded-lg"},{default:h(()=>{var Z;return[c(er,null,{prepend:h(()=>[c(oe,{color:"primary",size:"small"},{default:h(()=>G[27]||(G[27]=[z("mdi-calendar")])),_:1,__:[27]})]),default:h(()=>[c(tr,null,{default:h(()=>{var le;return[z(j((le=y.value)!=null&&le.Deadline?se(aa)(y.value.Deadline):"Geen deadline"),1)]}),_:1})]),_:1}),c(er,null,{prepend:h(()=>[c(oe,{color:"primary",size:"small"},{default:h(()=>G[28]||(G[28]=[z("mdi-account-group")])),_:1,__:[28]})]),default:h(()=>[c(tr,{class:"d-flex align-center flex-wrap gap-1"},{default:h(()=>{var le,ye;return[c(et,{size:"x-small",color:"primary",variant:"flat"},{default:h(()=>{var Ce,Ie;return[z(j((Ie=(Ce=y.value)==null?void 0:Ce.User)==null?void 0:Ie.Name),1)]}),_:1}),(T(!0),q(Ae,null,We(((ye=(le=y.value)==null?void 0:le.Teamleden)==null?void 0:ye.IDs)||[],Ce=>(T(),ie(et,{key:Ce,size:"x-small",color:"primary",variant:"flat"},{default:h(()=>[z(j(H(Ce)),1)]),_:2},1024))),128))]}),_:1})]),_:1}),(Z=y.value)!=null&&Z.Status?(T(),ie(er,{key:0},{prepend:h(()=>[c(oe,{color:"primary",size:"small"},{default:h(()=>G[29]||(G[29]=[z("mdi-flag")])),_:1,__:[29]})]),default:h(()=>[c(tr,null,{default:h(()=>[c(et,{size:"small",color:y.value.Status.StatusColor},{default:h(()=>[z(j(y.value.Status.StatusNaam),1)]),_:1},8,["color"])]),_:1})]),_:1})):X("",!0)]}),_:1})]}),_:1}),c(vt),c(Nt,{class:"pa-4"},{default:h(()=>[c(Dt),c(ge,{color:"grey",variant:"text",onClick:v},{default:h(()=>G[30]||(G[30]=[z("Annuleren")])),_:1,__:[30]}),c(ge,{color:"secondary",onClick:b,loading:l.value,variant:"elevated"},{default:h(()=>G[31]||(G[31]=[z(" Koppelen ")])),_:1,__:[31]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),j2=dt(R2,[["__scopeId","data-v-39a0bc16"]]),M2={class:"d-flex flex-column gap-4 mt-4"},O2={class:"d-flex flex-column"},V2={class:"d-flex align-center gap-4"},B2={class:"d-flex flex-column"},U2={class:"d-flex align-center gap-4"},z2={class:"datepicker-container flex-grow-1"},L2={key:0,class:"d-flex flex-column"},H2={class:"d-flex align-center gap-4"},G2={class:"d-flex flex-column"},W2={class:"d-flex align-center gap-4"},J2={class:"d-flex flex-column"},q2={class:"d-flex align-center gap-4"},K2=Se({__name:"editPDCA",props:["clickedItem","statussen","rawStatussen"],emits:["update","close"],setup(e,{emit:t}){const a=e,n=t,r=ct(),o=ga(),s=kn(),i=W(!1),d=W({}),g=W([]),f=W({Oorzaak:""}),l=W(null),u=W({}),m=W(!1),x=W({}),F=W(!1),C=W(""),{t:D}=kt();wt(async()=>{o.actiehouders.length===0&&await o.fetchActiehouders()}),be(d,()=>{g.value=g.value.filter(_=>{var S;return(_==null?void 0:_.id)!==((S=d.value)==null?void 0:S.id)})}),be(()=>a.clickedItem,()=>{var _,S,k,O,w,y,M,E;a.clickedItem&&(d.value=o.getActiehouderById((S=(_=a.clickedItem.Preventief)==null?void 0:_.User)==null?void 0:S.id)||{},(O=(k=a.clickedItem.Preventief)==null?void 0:k.Teamleden)!=null&&O.IDs&&(g.value=a.clickedItem.Preventief.Teamleden.IDs.map(R=>o.getActiehouderById(R))),f.value.Oorzaak=((w=a.clickedItem.Preventief)==null?void 0:w.Oorzaak)||"",l.value=((y=a.clickedItem.Preventief)==null?void 0:y.Deadline)||null,u.value=((M=a.clickedItem.Preventief)==null?void 0:M.Status)||"",C.value=((E=a.clickedItem.Preventief)==null?void 0:E.Title)||"")},{immediate:!0,deep:!0});const L=()=>{n("close")},$=async()=>{var O,w,y,M,E,R,I,P;m.value=!0,r.promise({title:D("notifications.saving"),message:D("notifications.saving")});let _={},S=g.value.map(A=>A.id);if(u.value.StatusNaam!==((w=(O=a.clickedItem.Preventief)==null?void 0:O.Status)==null?void 0:w.StatusNaam)){const A=await s.linkStatus(a.clickedItem.Preventief.id,u.value.id);(A==null?void 0:A.status)!==200&&r.rejectPromise({title:D("notifications.update_failed"),message:D("notifications.update_failed")})}if((!((y=a.clickedItem.Preventief)!=null&&y.Teamleden)||((E=(M=a.clickedItem.Preventief)==null?void 0:M.Teamleden)==null?void 0:E.length)!==S.length||S!==((R=a.clickedItem.Preventief)==null?void 0:R.Teamleden)&&S.length>0&&S!==void 0&&S!==null)&&(_={Teamleden:{IDs:S}}),d.value.Name!==((I=a.clickedItem.Preventief.Actiehouder)==null?void 0:I.Name)){if(!d.value||d.value.length===0){r.rejectPromise({title:D("notifications.empty_field",{field:"Actiehouder"}),message:D("notifications.empty_field",{field:"Actiehouder"})}),m.value=!1;return}const A=await s.linkActiehouder(a.clickedItem.Preventief.id,d.value.id);(A==null?void 0:A.status)!==200&&r.rejectPromise({title:D("notifications.update_failed"),message:D("notifications.update_failed")})}if(l.value!==a.clickedItem.Preventief.Deadline&&Js(l.value)&&l.value!==void 0&&l.value!==null&&(_={..._,Deadline:l.value}),C.value!==((P=a.clickedItem.Preventief)==null?void 0:P.Title)&&(_={..._,Title:C.value}),Object.keys(_).length===0){m.value=!1,r.rejectPromise({title:D("notifications.no_changes"),message:D("notifications.no_changes")});return}const k=await s.updatePreventief(a.clickedItem.Preventief.id,_);(k==null?void 0:k.status)===200?(n("update",[!0,!0]),r.resolvePromise({title:D("notifications.update_success"),message:D("notifications.update_success")})):(n("update",[!0,!0]),r.rejectPromise({title:D("notifications.update_failed"),message:D("notifications.update_failed")})),m.value=!1,L(),n("update",[!0,!0])};return(_,S)=>(T(),ie(va,{modelValue:i.value,"onUpdate:modelValue":S[5]||(S[5]=k=>i.value=k),"max-width":800,"retain-focus":!1},{default:h(()=>[c(Te,null,{default:h(()=>[c(Pt,{class:"bg-secondary text-white pa-4"},{default:h(()=>[z(j(se(D)("verbeterplein.edit_pdca.title")),1)]),_:1}),c(Re,{class:"pa-4"},{default:h(()=>{var k,O;return[p("div",M2,[p("div",O2,[p("div",V2,[c(oe,{color:"primary",size:"24"},{default:h(()=>S[6]||(S[6]=[z("mdi-account-outline")])),_:1,__:[6]}),c(it,{modelValue:d.value,"onUpdate:modelValue":S[0]||(S[0]=w=>d.value=w),items:se(o).actiehouders,label:se(D)("verbeterplein.edit_pdca.labels.action_holder"),"item-title":"Name","return-object":"",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","items","label"])])]),p("div",B2,[p("div",U2,[c(oe,{color:"primary",size:"24"},{default:h(()=>S[7]||(S[7]=[z("mdi-calendar-outline")])),_:1,__:[7]}),p("div",z2,[F.value?X("",!0):(T(),ie(se(vr),{key:0,"disabled-dates":x.value,modelValue:l.value,"onUpdate:modelValue":S[1]||(S[1]=w=>l.value=w),"open-date":new Date(se(Js)(e.clickedItem.Preventief.Deadline)?e.clickedItem.Preventief.Deadline:new Date),"monday-first":!0,enableTimePicker:!1,format:"dd-MM-yyyy",class:"flex-grow-1"},{default:h(({inputValue:w,toggleDatepicker:y})=>[c(Ot,{"model-value":w,onClick:y,label:se(D)("verbeterplein.edit_pdca.labels.deadline"),variant:"outlined",density:"comfortable","hide-details":"",readonly:"",placeholder:"Kies een deadline",class:"flex-grow-1"},null,8,["model-value","onClick","label"])]),_:1},8,["disabled-dates","modelValue","open-date"]))])])]),((O=(k=a.clickedItem)==null?void 0:k.Preventief)==null?void 0:O.rootCauseLevel)!==1?(T(),q("div",L2,[p("div",H2,[c(oe,{color:"primary",size:"24"},{default:h(()=>S[8]||(S[8]=[z("mdi-account-group-outline")])),_:1,__:[8]}),c(it,{modelValue:g.value,"onUpdate:modelValue":S[2]||(S[2]=w=>g.value=w),items:se(o).actiehouders.filter(w=>{var y;return(w==null?void 0:w.id)!==((y=d.value)==null?void 0:y.id)}),label:se(D)("verbeterplein.edit_pdca.labels.team_members"),"item-title":"Name",multiple:"",chips:"",clearable:"",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1","return-object":""},null,8,["modelValue","items","label"])])])):X("",!0),p("div",G2,[p("div",W2,[c(oe,{color:"primary",size:"24"},{default:h(()=>S[9]||(S[9]=[z("mdi-text-box-outline")])),_:1,__:[9]}),c(Ot,{modelValue:C.value,"onUpdate:modelValue":S[3]||(S[3]=w=>C.value=w),label:se(D)("verbeterplein.edit_pdca.labels.title"),variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","label"])])]),p("div",J2,[p("div",q2,[c(oe,{color:"primary",size:"24"},{default:h(()=>S[10]||(S[10]=[z("mdi-flag-outline")])),_:1,__:[10]}),c(it,{modelValue:u.value,"onUpdate:modelValue":S[4]||(S[4]=w=>u.value=w),items:e.statussen,label:se(D)("verbeterplein.edit_pdca.labels.status"),"item-title":"StatusNaam","return-object":"",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","items","label"])])])])]}),_:1}),c(Nt,{class:"pa-4 pt-0"},{default:h(()=>[c(Dt),c(ge,{variant:"text",onClick:L,disabled:m.value},{default:h(()=>[z(j(se(D)("cancel")),1)]),_:1},8,["disabled"]),c(ge,{color:"secondary",variant:"flat",onClick:$,loading:m.value},{default:h(()=>[z(j(se(D)("save")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Y2=dt(K2,[["__scopeId","data-v-c14ee0db"]]),Q2={class:"d-flex flex-column gap-4"},Z2={class:"d-flex flex-column mt-4"},X2={class:"d-flex align-center gap-4"},e_={class:"d-flex flex-column"},t_={class:"d-flex align-center gap-4"},a_={class:"d-flex flex-column"},n_={class:"d-flex align-center gap-4"},r_={class:"d-flex flex-column"},o_={class:"d-flex align-center gap-4"},s_=Se({__name:"editOPS",props:{modelValue:{type:Boolean,default:!1}},emits:["save"],setup(e,{emit:t}){const{t:a}=kt(),n=Kt(),r=ga(),o=ha(),s=Dn(),i=eo(),d=W([]),g=W([]),f=W([]),l=W([]),u=W([]),m=W(null),x=W(null),F=W(null),C=W(null),D=e,L=async()=>{var M,E;await n.fetchReports(),await s.fetchProjects(),await i.fetchProjectleiders(),await r.fetchActiehouders(),await o.fetchStatussen();const w=n.selectedFormId,y=n.getReportById(w);C.value=(y==null?void 0:y.Obstakel)||"",m.value=y==null?void 0:y.Project,s.currentProject=m.value,x.value=y==null?void 0:y.Deelorder,F.value=(M=s.currentProject)==null?void 0:M.ProjectLeider,d.value=r.actiehouders,g.value=o.statussen,f.value=s.projects,l.value=((E=s.currentProject)==null?void 0:E.Deelorders)||[],u.value=i.projectleiders,setTimeout(()=>{x.value=y==null?void 0:y.Deelorder},100)},$=t;be(()=>D.modelValue,async w=>{await L(),_.value=w}),be(m,()=>{var w,y;s.currentProject=m.value,l.value=((w=s.currentProject)==null?void 0:w.Deelorders)||[],x.value=null,(y=m.value)!=null&&y.ProjectLeider&&m.value.ProjectLeider!==F.value&&(F.value=m.value.ProjectLeider)});const _=W(D.modelValue),S=W(!1),k=()=>{_.value=!1},O=async()=>{var w;S.value=!0;try{$("save",{project:m.value?{id:m.value.NumberID||m.value.id,...m.value}:null,deelorder:x.value,projectleider:F.value?{id:F.value.id,...F.value}:null,obstakel:((w=C.value)==null?void 0:w.trim())||""})}finally{S.value=!1}};return(w,y)=>(T(),ie(va,{modelValue:_.value,"onUpdate:modelValue":y[4]||(y[4]=M=>_.value=M),"max-width":800,"retain-focus":!1},{default:h(()=>[c(Te,null,{default:h(()=>[c(Pt,{class:"bg-secondary text-white pa-4"},{default:h(()=>[z(j(se(a)("verbeterplein.edit_ops.title")),1)]),_:1}),c(Re,{class:"pa-4"},{default:h(()=>[p("div",Q2,[p("div",Z2,[p("div",X2,[c(oe,{color:"primary",size:"24"},{default:h(()=>y[5]||(y[5]=[z("mdi-folder-outline")])),_:1,__:[5]}),c(sr,{clearable:"",modelValue:m.value,"onUpdate:modelValue":y[0]||(y[0]=M=>m.value=M),items:f.value,label:se(a)("verbeterplein.edit_ops.labels.project"),type:"number","item-title":"NumberID","return-object":"",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","items","label"])])]),p("div",e_,[p("div",t_,[c(oe,{color:"primary",size:"24"},{default:h(()=>y[6]||(y[6]=[z("mdi-file-document-outline")])),_:1,__:[6]}),c(sr,{modelValue:x.value,"onUpdate:modelValue":y[1]||(y[1]=M=>x.value=M),items:l.value,label:se(a)("verbeterplein.edit_ops.labels.part_order"),type:"number","item-title":"NumberID","return-object":"",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","items","label"])])]),p("div",a_,[p("div",n_,[c(oe,{color:"primary",size:"24"},{default:h(()=>y[7]||(y[7]=[z("mdi-account-group-outline")])),_:1,__:[7]}),c(it,{modelValue:F.value,"onUpdate:modelValue":y[2]||(y[2]=M=>F.value=M),items:u.value,label:se(a)("verbeterplein.edit_ops.labels.project_team"),type:"text","item-title":"Name","return-object":"",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","items","label"])])]),p("div",r_,[p("div",o_,[c(oe,{color:"primary",size:"24"},{default:h(()=>y[8]||(y[8]=[z("mdi-alert-circle-outline")])),_:1,__:[8]}),c(gt,{modelValue:C.value,"onUpdate:modelValue":y[3]||(y[3]=M=>C.value=M),label:se(a)("verbeterplein.edit_ops.labels.obstacle"),"auto-grow":"",rows:"3",variant:"outlined",density:"comfortable","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","label"])])])])]),_:1}),c(Nt,{class:"pa-4 pt-0"},{default:h(()=>[c(Dt),c(ge,{variant:"text",onClick:k,disabled:S.value},{default:h(()=>y[9]||(y[9]=[z("Annuleren")])),_:1,__:[9]},8,["disabled"]),c(ge,{color:"secondary",variant:"flat",onClick:O,loading:S.value},{default:h(()=>y[10]||(y[10]=[z(" Opslaan ")])),_:1,__:[10]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),i_=dt(s_,[["__scopeId","data-v-4acbadc5"]]),l_={class:"mb-4"},u_=Se({__name:"archiving",props:{modelValue:{type:Boolean},selectedItems:{},archiveMode:{type:Boolean}},emits:["update:modelValue","archive"],setup(e,{emit:t}){const a=e,n=t,r=W(new Set),o=W(a.modelValue),s=te(()=>a.archiveMode?a.selectedItems.length>1?"Archiveer Items":"Archiveer Item":a.selectedItems.length>1?"Herstel Items":"Herstel Item"),i=()=>{window.confirm("Weet je zeker dat je deze items wilt "+(a.archiveMode?"archiveren":"herstellen")+"? Als een melding een Preventief heeft, worden alle meldingen "+(a.archiveMode?"gearchiveerd":"hersteld")+" die hieraan gekoppeld zijn. Ontkoppel deze, of "+(a.archiveMode?"archiveer":"herstel")+" ze.")&&(n("archive",{itemIdsToArchive:Array.from(r.value),archive:a.archiveMode}),n("update:modelValue",!1),o.value=!1)},d=g=>{g||(n("update:modelValue",!1),o.value=!1)};return be(()=>a.modelValue,g=>{if(g){r.value=new Set;try{a.selectedItems.forEach(f=>{if(!f||typeof f.id>"u"){console.error("[ArchivingDialog] Invalid item structure in selectedItems:",f);return}r.value.add(f.id),f.Preventief&&Array.isArray(f.Preventief.Melding)&&f.Preventief.Melding.forEach(l=>{if(!l||typeof l.id>"u"){console.error("[ArchivingDialog] Invalid melding structure in item.Preventief.Melding:",l,"for item:",f.id);return}r.value.add(l.id)})})}catch(f){console.error("[ArchivingDialog] Error during itemsToArchive population:",f)}}o.value=g},{immediate:!0}),(g,f)=>(T(),ie(pr,{modelValue:o.value,"onUpdate:modelValue":[f[0]||(f[0]=l=>o.value=l),d],title:s.value,"show-actions":!0,"confirm-text":g.archiveMode?"Archiveer":"Herstellen","cancel-text":"Annuleer","close-on-confirm":!1,persistent:!0,onConfirm:i},{default:h(()=>[c(Re,null,{default:h(()=>[p("h3",l_,"Weet je zeker dat je "+j(g.selectedItems.length>1?"deze items":"dit item")+" wilt "+j(g.archiveMode?"archiveren":"herstellen")+"?",1),p("span",null,"Als een melding een Preventief heeft, worden alle meldingen "+j(g.archiveMode?"gearchiveerd":"hersteld")+" die hieraan gekoppeld zijn. Ontkoppel deze, of "+j(g.archiveMode?"archiveer":"herstel")+" ze.",1),c($o,{lines:"three",class:"overflow-y-auto",style:{"max-height":"400px"}},{default:h(()=>[(T(!0),q(Ae,null,We(g.selectedItems,l=>(T(),ie(er,{key:l.id,class:"mb-2 elevation-1"},{default:h(()=>[c(tr,null,{default:h(()=>[p("b",null,"#"+j(l.VolgNummer),1),z(" - "+j(l.Obstakel)+" (",1),p("i",null,"Type: "+j(l.Type),1),f[1]||(f[1]=z(") "))]),_:2,__:[1]},1024),c(Tn,null,{default:h(()=>{var u,m;return[z(" Project: "+j((u=l.Project)==null?void 0:u.NumberID)+" - "+j((m=l.Project)==null?void 0:m.ProjectNaam),1)]}),_:2},1024),c(Tn,null,{default:h(()=>[z(" Deelorder: "+j(l.Deelorder),1)]),_:2},1024),c(Tn,null,{default:h(()=>{var u,m;return[z(" Status: "+j(((m=(u=l.Correctief)==null?void 0:u.Status)==null?void 0:m.StatusNaam)??"N/A"),1)]}),_:2},1024),c(Tn,null,{default:h(()=>{var u,m;return[z(" Actiehouder: "+j(((m=(u=l.Correctief)==null?void 0:u.User)==null?void 0:m.Name)??"N/A"),1)]}),_:2},1024),c(Tn,null,{default:h(()=>{var u,m;return[z(" Preventief gekoppeld aan "+j(((m=(u=l.Preventief)==null?void 0:u.Melding)==null?void 0:m.length)??"N/A")+" meldingen ",1)]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","title","confirm-text"]))}}),d_=Se({__name:"AskPDCA",emits:["response"],setup(e,{expose:t,emit:a}){const n=W(!1),r=a,o=s=>{n.value=!1,r("response",s)};return t({open:()=>{n.value=!0}}),(s,i)=>(T(),ie(pr,{persistent:"",modelValue:n.value,"onUpdate:modelValue":i[2]||(i[2]=d=>n.value=d),title:"Start PDCA?","show-actions":!1,"max-width":"500"},{default:h(()=>[c(Re,null,{default:h(()=>i[3]||(i[3]=[p("p",null,[z(" Wil je nu een PDCA starten voor deze melding? "),p("br"),z(" Er zijn twee opties: "),p("br"),z(" - Ja, start de PDCA nu "),p("br"),z(" - Nee, start de PDCA over maximaal een week, je krijgt dan een melding zodra de week voorbij is. ")],-1)])),_:1,__:[3]}),c(Nt,null,{default:h(()=>[c(ge,{onClick:i[0]||(i[0]=d=>o(!1)),color:"primary"},{default:h(()=>i[4]||(i[4]=[z(" Nee ")])),_:1,__:[4]}),c(Dt),c(ge,{onClick:i[1]||(i[1]=d=>o(!0)),variant:"tonal",color:"primary"},{default:h(()=>i[5]||(i[5]=[z(" Ja ")])),_:1,__:[5]})]),_:1})]),_:1},8,["modelValue"]))}}),c_=Se({__name:"AddMeldingToPDCA",emits:["close","update"],setup(e,{emit:t}){const a=ct(),n=kn(),r=Kt(),o=kt().t,s=W(!1),i=W(null),d=W([]),g=W(!1),f=t,l=async()=>{if(!i.value){a.error({message:o("errors.required")});return}g.value=!0,a.promise({message:o("notifications.linking_pdca")});try{const u=await r.addMeldingToPDCA(i.value.id);if(!u){a.rejectPromise({message:o("errors.wrong_status")});return}if(u.status===200&&u.data)await r.updateReport(r.selectedFormId,{PDCA:!0,Archived:!0,ClonedTo:u.data.id,PreventiefID:i.value.id}),await r.addCloneID(u.data.id,r.selectedFormId),a.resolvePromise({message:o("notifications.linking_pdca_success")}),f("close"),f("update",[!0,!0]);else throw new Error(o("errors.wrong_status"))}catch(u){a.rejectPromise({message:o("errors.fetch_error",{error:u})})}finally{g.value=!1}};return wt(async()=>{try{await n.getAllPreventief(),d.value=n.preventieven.filter(u=>u.Title).map(u=>({title:`${u.Title.length>20?u.Title.substring(0,20)+"...":u.Title}`,id:u.id}))}catch(u){a.rejectPromise({message:o("errors.fetch_error",{error:u})})}}),(u,m)=>(T(),ie(pr,{persistent:"",modelValue:s.value,"onUpdate:modelValue":m[2]||(m[2]=x=>s.value=x),title:"Start PDCA?","show-actions":!1,"max-width":"500"},{default:h(()=>[c(Re,null,{default:h(()=>[m[3]||(m[3]=p("p",null,[z(" Hier kan je een melding toevoegen aan een bestaande PDCA. "),p("br"),p("br"),z(" LET OP: WIP ")],-1)),m[4]||(m[4]=p("br",null,null,-1)),m[5]||(m[5]=p("br",null,null,-1)),c(it,{rounded:"none","return-object":"",modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=x=>i.value=x),items:d.value,"item-title":"title","item-value":"id",label:"Selecteer een PDCA","max-width":"400"},null,8,["modelValue","items"])]),_:1,__:[3,4,5]}),c(Nt,null,{default:h(()=>[c(ge,{onClick:m[1]||(m[1]=x=>u.$emit("close")),color:"gray"},{default:h(()=>m[6]||(m[6]=[z(" Cancel ")])),_:1,__:[6]}),c(Dt),c(ge,{onClick:l,color:"primary",variant:"tonal",loading:g.value},{default:h(()=>m[7]||(m[7]=[z(" Add ")])),_:1,__:[7]},8,["loading"])]),_:1})]),_:1},8,["modelValue"]))}});var f_=Object.defineProperty,m_=(e,t,a)=>t in e?f_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Nn=(e,t,a)=>m_(e,typeof t!="symbol"?t+"":t,a);class fr{static getComponentDefinition(t,a){let n;return typeof t=="string"?n=this.searchForComponentInstance(a,t):n={extends:Se({...t})},n||Vs(114,{component:t}),n.extends?(n.extends.setup&&(n.setup=n.extends.setup),n.extends.props=this.addParamsToProps(n.extends.props)):n.props=this.addParamsToProps(n.props),n}static addParamsToProps(t){return!t||Array.isArray(t)&&t.indexOf("params")===-1?t=["params",...t||[]]:typeof t=="object"&&!t.params&&(t.params={type:Object}),t}static createAndMountComponent(t,a,n,r){const o=fr.getComponentDefinition(t,n);if(!o)return;const{vNode:s,destroy:i,el:d}=this.mount(o,{params:Object.freeze(a)},n,r||{});return{componentInstance:s.component.proxy,element:d,destroy:i}}static mount(t,a,n,r){let o=c(t,a);o.appContext={...n.appContext,provides:r};let s=document.createElement("div");return Bs(o,s),{vNode:o,destroy:()=>{s&&Bs(null,s),s=null,o=null},el:s}}static searchForComponentInstance(t,a,n=10,r=!1){let o=null,s=0,i=t.parent;for(;!o&&i&&i.components&&++s<n;)i.components&&i.components[a]&&(o=i.components[a]),i=i.parent;for(s=0,i=t.parent;!o&&i&&i.$options&&++s<n;){const d=i;d.$options&&d.$options.components&&d.$options.components[a]?o=d.$options.components[a]:d[a]&&(o=d[a]),i=i.parent}for(s=0,i=t.parent;!o&&i&&++s<n;){if(i.exposed){const d=i;d.exposed&&d.exposed[a]?o=d.exposed[a]:d[a]&&(o=d[a])}i=i.parent}if(!o){const d=t.appContext.components;d&&d[a]&&(o=d[a])}return!o&&!r?(Vs(114,{component:a}),null):o}}class p_ extends ju{constructor(t,a){super(),Nn(this,"parent"),Nn(this,"provides"),this.parent=t,this.provides=a}createWrapper(t){const a=this;class n extends v_{init(s){super.init(s)}hasMethod(s){var i,d;const g=r.getFrameworkComponentInstance();return g[s]?!0:((i=g.$.exposed)==null?void 0:i[s])!=null||((d=g.exposed)==null?void 0:d[s])!=null||g.$.setupState[s]!=null}callMethod(s,i){var d,g;const f=this.getFrameworkComponentInstance(),l=r.getFrameworkComponentInstance();if(l[s])return l[s].apply(f,i);{const u=((d=f.$.exposed)==null?void 0:d[s])||((g=f.exposed)==null?void 0:g[s])||f.$.setupState[s];return u==null?void 0:u.apply(f,i)}}addMethod(s,i){r[s]=i}processMethod(s,i){return s==="refresh"&&(this.getFrameworkComponentInstance().params=i[0]),this.hasMethod(s)?this.callMethod(s,i):s==="refresh"}createComponent(s){return a.createComponent(t,s)}}const r=new n;return r}createComponent(t,a){return fr.createAndMountComponent(t,a,this.parent,this.provides)}createMethodProxy(t,a,n){return function(){return t.hasMethod(a)?t.callMethod(a,arguments):(n&&Mu(233,{methodName:a}),null)}}destroy(){this.parent=null}}class v_{constructor(){Nn(this,"componentInstance"),Nn(this,"element"),Nn(this,"unmount")}getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(t){const{componentInstance:a,element:n,destroy:r}=this.createComponent(t);this.componentInstance=a,this.unmount=r,this.element=n.firstElementChild??n}}class h_ extends Ou{constructor(t){super("vue"),Nn(this,"parent"),this.parent=t}frameworkComponent(t,a){let n=fr.searchForComponentInstance(this.parent,t,10,!0)?t:null;if(!n&&a&&a[t]){const r=a[t];n=fr.searchForComponentInstance(this.parent,r,10,!0)?r:null}return n}isFrameworkComponent(t){return typeof t=="object"}}function g_(){return{gridOptions:{},modules:[],statusBar:void 0,sideBar:void 0,suppressContextMenu:void 0,preventDefaultOnContextMenu:void 0,allowContextMenuWithControlKey:void 0,columnMenu:void 0,suppressMenuHide:void 0,enableBrowserTooltips:void 0,tooltipTrigger:void 0,tooltipShowDelay:void 0,tooltipHideDelay:void 0,tooltipMouseTrack:void 0,tooltipShowMode:void 0,tooltipInteraction:void 0,popupParent:void 0,copyHeadersToClipboard:void 0,copyGroupHeadersToClipboard:void 0,clipboardDelimiter:void 0,suppressCopyRowsToClipboard:void 0,suppressCopySingleCellRanges:void 0,suppressLastEmptyLineOnPaste:void 0,suppressClipboardPaste:void 0,suppressClipboardApi:void 0,suppressCutToClipboard:void 0,columnDefs:void 0,defaultColDef:void 0,defaultColGroupDef:void 0,columnTypes:void 0,dataTypeDefinitions:void 0,maintainColumnOrder:void 0,enableStrictPivotColumnOrder:void 0,suppressFieldDotNotation:void 0,headerHeight:void 0,groupHeaderHeight:void 0,floatingFiltersHeight:void 0,pivotHeaderHeight:void 0,pivotGroupHeaderHeight:void 0,allowDragFromColumnsToolPanel:void 0,suppressMovableColumns:void 0,suppressColumnMoveAnimation:void 0,suppressMoveWhenColumnDragging:void 0,suppressDragLeaveHidesColumns:void 0,suppressGroupChangesColumnVisibility:void 0,suppressMakeColumnVisibleAfterUnGroup:void 0,suppressRowGroupHidesColumns:void 0,colResizeDefault:void 0,suppressAutoSize:void 0,autoSizePadding:void 0,skipHeaderOnAutoSize:void 0,autoSizeStrategy:void 0,components:void 0,editType:void 0,singleClickEdit:void 0,suppressClickEdit:void 0,readOnlyEdit:void 0,stopEditingWhenCellsLoseFocus:void 0,enterNavigatesVertically:void 0,enterNavigatesVerticallyAfterEdit:void 0,enableCellEditingOnBackspace:void 0,undoRedoCellEditing:void 0,undoRedoCellEditingLimit:void 0,defaultCsvExportParams:void 0,suppressCsvExport:void 0,defaultExcelExportParams:void 0,suppressExcelExport:void 0,excelStyles:void 0,findSearchValue:void 0,findOptions:void 0,quickFilterText:void 0,cacheQuickFilter:void 0,includeHiddenColumnsInQuickFilter:void 0,quickFilterParser:void 0,quickFilterMatcher:void 0,applyQuickFilterBeforePivotOrAgg:void 0,excludeChildrenWhenTreeDataFiltering:void 0,enableAdvancedFilter:void 0,alwaysPassFilter:void 0,includeHiddenColumnsInAdvancedFilter:void 0,advancedFilterParent:void 0,advancedFilterBuilderParams:void 0,suppressAdvancedFilterEval:void 0,suppressSetFilterByDefault:void 0,enableCharts:void 0,chartThemes:void 0,customChartThemes:void 0,chartThemeOverrides:void 0,chartToolPanelsDef:void 0,chartMenuItems:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,localeText:void 0,masterDetail:void 0,keepDetailRows:void 0,keepDetailRowsCount:void 0,detailCellRenderer:void 0,detailCellRendererParams:void 0,detailRowHeight:void 0,detailRowAutoHeight:void 0,context:void 0,alignedGrids:void 0,tabIndex:void 0,rowBuffer:void 0,valueCache:void 0,valueCacheNeverExpires:void 0,enableCellExpressions:void 0,suppressTouch:void 0,suppressFocusAfterRefresh:void 0,suppressBrowserResizeObserver:void 0,suppressPropertyNamesCheck:void 0,suppressChangeDetection:void 0,debug:void 0,loading:void 0,overlayLoadingTemplate:void 0,loadingOverlayComponent:void 0,loadingOverlayComponentParams:void 0,suppressLoadingOverlay:void 0,overlayNoRowsTemplate:void 0,noRowsOverlayComponent:void 0,noRowsOverlayComponentParams:void 0,suppressNoRowsOverlay:void 0,pagination:void 0,paginationPageSize:void 0,paginationPageSizeSelector:void 0,paginationAutoPageSize:void 0,paginateChildRows:void 0,suppressPaginationPanel:void 0,pivotMode:void 0,pivotPanelShow:void 0,pivotMaxGeneratedColumns:void 0,pivotDefaultExpanded:void 0,pivotColumnGroupTotals:void 0,pivotRowTotals:void 0,pivotSuppressAutoColumn:void 0,suppressExpandablePivotGroups:void 0,functionsReadOnly:void 0,aggFuncs:void 0,suppressAggFuncInHeader:void 0,alwaysAggregateAtRootLevel:void 0,aggregateOnlyChangedColumns:void 0,suppressAggFilteredOnly:void 0,removePivotHeaderRowWhenSingleValueColumn:void 0,animateRows:void 0,cellFlashDuration:void 0,cellFadeDuration:void 0,allowShowChangeAfterFilter:void 0,domLayout:void 0,ensureDomOrder:void 0,enableCellSpan:void 0,enableRtl:void 0,suppressColumnVirtualisation:void 0,suppressMaxRenderedRowRestriction:void 0,suppressRowVirtualisation:void 0,rowDragManaged:void 0,suppressRowDrag:void 0,suppressMoveWhenRowDragging:void 0,rowDragEntireRow:void 0,rowDragMultiRow:void 0,rowDragText:void 0,dragAndDropImageComponent:void 0,dragAndDropImageComponentParams:void 0,fullWidthCellRenderer:void 0,fullWidthCellRendererParams:void 0,embedFullWidthRows:void 0,groupDisplayType:void 0,groupDefaultExpanded:void 0,autoGroupColumnDef:void 0,groupMaintainOrder:void 0,groupSelectsChildren:void 0,groupLockGroupColumns:void 0,groupAggFiltering:void 0,groupTotalRow:void 0,grandTotalRow:void 0,suppressStickyTotalRow:void 0,groupSuppressBlankHeader:void 0,groupSelectsFiltered:void 0,showOpenedGroup:void 0,groupHideParentOfSingleChild:void 0,groupRemoveSingleChildren:void 0,groupRemoveLowestSingleChildren:void 0,groupHideOpenParents:void 0,groupAllowUnbalanced:void 0,rowGroupPanelShow:void 0,groupRowRenderer:void 0,groupRowRendererParams:void 0,treeData:void 0,treeDataChildrenField:void 0,treeDataParentIdField:void 0,rowGroupPanelSuppressSort:void 0,suppressGroupRowsSticky:void 0,pinnedTopRowData:void 0,pinnedBottomRowData:void 0,enableRowPinning:void 0,isRowPinnable:void 0,isRowPinned:void 0,rowModelType:void 0,rowData:void 0,asyncTransactionWaitMillis:void 0,suppressModelUpdateAfterUpdateTransaction:void 0,datasource:void 0,cacheOverflowSize:void 0,infiniteInitialRowCount:void 0,serverSideInitialRowCount:void 0,suppressServerSideFullWidthLoadingRow:void 0,cacheBlockSize:void 0,maxBlocksInCache:void 0,maxConcurrentDatasourceRequests:void 0,blockLoadDebounceMillis:void 0,purgeClosedRowNodes:void 0,serverSideDatasource:void 0,serverSideSortAllLevels:void 0,serverSideEnableClientSideSort:void 0,serverSideOnlyRefreshFilteredGroups:void 0,serverSidePivotResultFieldSeparator:void 0,viewportDatasource:void 0,viewportRowModelPageSize:void 0,viewportRowModelBufferSize:void 0,alwaysShowHorizontalScroll:void 0,alwaysShowVerticalScroll:void 0,debounceVerticalScrollbar:void 0,suppressHorizontalScroll:void 0,suppressScrollOnNewData:void 0,suppressScrollWhenPopupsAreOpen:void 0,suppressAnimationFrame:void 0,suppressMiddleClickScrolls:void 0,suppressPreventDefaultOnMouseWheel:void 0,scrollbarWidth:void 0,rowSelection:void 0,cellSelection:void 0,rowMultiSelectWithClick:void 0,suppressRowDeselection:void 0,suppressRowClickSelection:void 0,suppressCellFocus:void 0,suppressHeaderFocus:void 0,selectionColumnDef:void 0,rowNumbers:void 0,suppressMultiRangeSelection:void 0,enableCellTextSelection:void 0,enableRangeSelection:void 0,enableRangeHandle:void 0,enableFillHandle:void 0,fillHandleDirection:void 0,suppressClearOnFillReduction:void 0,sortingOrder:void 0,accentedSort:void 0,unSortIcon:void 0,suppressMultiSort:void 0,alwaysMultiSort:void 0,multiSortKey:void 0,suppressMaintainUnsortedOrder:void 0,icons:void 0,rowHeight:void 0,rowStyle:void 0,rowClass:void 0,rowClassRules:void 0,suppressRowHoverHighlight:void 0,suppressRowTransform:void 0,columnHoverHighlight:void 0,gridId:void 0,deltaSort:void 0,treeDataDisplayType:void 0,enableGroupEdit:void 0,initialState:void 0,theme:void 0,loadThemeGoogleFonts:void 0,themeCssLayer:void 0,styleNonce:void 0,themeStyleContainer:void 0,getContextMenuItems:void 0,getMainMenuItems:void 0,postProcessPopup:void 0,processUnpinnedColumns:void 0,processCellForClipboard:void 0,processHeaderForClipboard:void 0,processGroupHeaderForClipboard:void 0,processCellFromClipboard:void 0,sendToClipboard:void 0,processDataFromClipboard:void 0,isExternalFilterPresent:void 0,doesExternalFilterPass:void 0,getChartToolbarItems:void 0,createChartContainer:void 0,focusGridInnerElement:void 0,navigateToNextHeader:void 0,tabToNextHeader:void 0,navigateToNextCell:void 0,tabToNextCell:void 0,getLocaleText:void 0,getDocument:void 0,paginationNumberFormatter:void 0,getGroupRowAgg:void 0,isGroupOpenByDefault:void 0,initialGroupOrderComparator:void 0,processPivotResultColDef:void 0,processPivotResultColGroupDef:void 0,getDataPath:void 0,getChildCount:void 0,getServerSideGroupLevelParams:void 0,isServerSideGroupOpenByDefault:void 0,isApplyServerSideTransaction:void 0,isServerSideGroup:void 0,getServerSideGroupKey:void 0,getBusinessKeyForNode:void 0,getRowId:void 0,resetRowDataOnUpdate:void 0,processRowPostCreate:void 0,isRowSelectable:void 0,isRowMaster:void 0,fillOperation:void 0,postSortRows:void 0,getRowStyle:void 0,getRowClass:void 0,getRowHeight:void 0,isFullWidthRow:void 0,"onColumn-everything-changed":void 0,"onNew-columns-loaded":void 0,"onColumn-pivot-mode-changed":void 0,"onPivot-max-columns-exceeded":void 0,"onColumn-row-group-changed":void 0,"onExpand-or-collapse-all":void 0,"onColumn-pivot-changed":void 0,"onGrid-columns-changed":void 0,"onColumn-value-changed":void 0,"onColumn-moved":void 0,"onColumn-visible":void 0,"onColumn-pinned":void 0,"onColumn-group-opened":void 0,"onColumn-resized":void 0,"onDisplayed-columns-changed":void 0,"onVirtual-columns-changed":void 0,"onColumn-header-mouse-over":void 0,"onColumn-header-mouse-leave":void 0,"onColumn-header-clicked":void 0,"onColumn-header-context-menu":void 0,"onAsync-transactions-flushed":void 0,"onRow-group-opened":void 0,"onRow-data-updated":void 0,"onPinned-row-data-changed":void 0,"onPinned-rows-changed":void 0,"onRange-selection-changed":void 0,"onCell-selection-changed":void 0,"onChart-created":void 0,"onChart-range-selection-changed":void 0,"onChart-options-changed":void 0,"onChart-destroyed":void 0,"onTool-panel-visible-changed":void 0,"onTool-panel-size-changed":void 0,"onModel-updated":void 0,"onCut-start":void 0,"onCut-end":void 0,"onPaste-start":void 0,"onPaste-end":void 0,"onFill-start":void 0,"onFill-end":void 0,"onCell-selection-delete-start":void 0,"onCell-selection-delete-end":void 0,"onRange-delete-start":void 0,"onRange-delete-end":void 0,"onUndo-started":void 0,"onUndo-ended":void 0,"onRedo-started":void 0,"onRedo-ended":void 0,"onCell-clicked":void 0,"onCell-double-clicked":void 0,"onCell-mouse-down":void 0,"onCell-context-menu":void 0,"onCell-value-changed":void 0,"onCell-edit-request":void 0,"onRow-value-changed":void 0,"onHeader-focused":void 0,"onCell-focused":void 0,"onRow-selected":void 0,"onSelection-changed":void 0,"onTooltip-show":void 0,"onTooltip-hide":void 0,"onCell-key-down":void 0,"onCell-mouse-over":void 0,"onCell-mouse-out":void 0,"onFilter-changed":void 0,"onFilter-modified":void 0,"onFilter-opened":void 0,"onAdvanced-filter-builder-visible-changed":void 0,"onSort-changed":void 0,"onVirtual-row-removed":void 0,"onRow-clicked":void 0,"onRow-double-clicked":void 0,"onGrid-ready":void 0,"onGrid-pre-destroyed":void 0,"onGrid-size-changed":void 0,"onViewport-changed":void 0,"onFirst-data-rendered":void 0,"onDrag-started":void 0,"onDrag-stopped":void 0,"onDrag-cancelled":void 0,"onRow-editing-started":void 0,"onRow-editing-stopped":void 0,"onCell-editing-started":void 0,"onCell-editing-stopped":void 0,"onBody-scroll":void 0,"onBody-scroll-end":void 0,"onPagination-changed":void 0,"onComponent-state-changed":void 0,"onStore-refreshed":void 0,"onState-updated":void 0,"onColumn-menu-visible-changed":void 0,"onContext-menu-visible-changed":void 0,"onRow-drag-enter":void 0,"onRow-drag-move":void 0,"onRow-drag-leave":void 0,"onRow-drag-end":void 0,"onRow-drag-cancel":void 0,"onFind-changed":void 0,"onRow-resize-started":void 0,"onRow-resize-ended":void 0}}const y_=(e,t)=>{let a;return()=>{const n=function(){e()};window.clearTimeout(a),a=window.setTimeout(n,t)}};function b_(e){return e&&e.constructor&&e.constructor.toString().substring(0,5)==="class"}function Zn(e){const t=a=>b_(a)?Os(a):Array.isArray(a)?a.map(n=>t(n)):Qo(a)||Vu(a)||Bu(a)?t(Os(a)):a;return t(e)}const w_={ref:"root"},__=Se({__name:"AgGridVue",props:js(Uu({gridOptions:{},modules:{},statusBar:{},sideBar:{type:[Object,String,Array,Boolean,null]},suppressContextMenu:{type:Boolean},preventDefaultOnContextMenu:{type:Boolean},allowContextMenuWithControlKey:{type:Boolean},columnMenu:{},suppressMenuHide:{type:Boolean},enableBrowserTooltips:{type:Boolean},tooltipTrigger:{},tooltipShowDelay:{},tooltipHideDelay:{},tooltipMouseTrack:{type:Boolean},tooltipShowMode:{},tooltipInteraction:{type:Boolean},popupParent:{},copyHeadersToClipboard:{type:Boolean},copyGroupHeadersToClipboard:{type:Boolean},clipboardDelimiter:{},suppressCopyRowsToClipboard:{type:Boolean},suppressCopySingleCellRanges:{type:Boolean},suppressLastEmptyLineOnPaste:{type:Boolean},suppressClipboardPaste:{type:Boolean},suppressClipboardApi:{type:Boolean},suppressCutToClipboard:{type:Boolean},columnDefs:{},defaultColDef:{},defaultColGroupDef:{},columnTypes:{},dataTypeDefinitions:{},maintainColumnOrder:{type:Boolean},enableStrictPivotColumnOrder:{type:Boolean},suppressFieldDotNotation:{type:Boolean},headerHeight:{},groupHeaderHeight:{},floatingFiltersHeight:{},pivotHeaderHeight:{},pivotGroupHeaderHeight:{},allowDragFromColumnsToolPanel:{type:Boolean},suppressMovableColumns:{type:Boolean},suppressColumnMoveAnimation:{type:Boolean},suppressMoveWhenColumnDragging:{type:Boolean},suppressDragLeaveHidesColumns:{type:Boolean},suppressGroupChangesColumnVisibility:{type:[Boolean,String]},suppressMakeColumnVisibleAfterUnGroup:{type:Boolean},suppressRowGroupHidesColumns:{type:Boolean},colResizeDefault:{},suppressAutoSize:{type:Boolean},autoSizePadding:{},skipHeaderOnAutoSize:{type:Boolean},autoSizeStrategy:{},components:{},editType:{},singleClickEdit:{type:Boolean},suppressClickEdit:{type:Boolean},readOnlyEdit:{type:Boolean},stopEditingWhenCellsLoseFocus:{type:Boolean},enterNavigatesVertically:{type:Boolean},enterNavigatesVerticallyAfterEdit:{type:Boolean},enableCellEditingOnBackspace:{type:Boolean},undoRedoCellEditing:{type:Boolean},undoRedoCellEditingLimit:{},defaultCsvExportParams:{},suppressCsvExport:{type:Boolean},defaultExcelExportParams:{},suppressExcelExport:{type:Boolean},excelStyles:{},findSearchValue:{},findOptions:{},quickFilterText:{},cacheQuickFilter:{type:Boolean},includeHiddenColumnsInQuickFilter:{type:Boolean},quickFilterParser:{type:Function},quickFilterMatcher:{type:Function},applyQuickFilterBeforePivotOrAgg:{type:Boolean},excludeChildrenWhenTreeDataFiltering:{type:Boolean},enableAdvancedFilter:{type:Boolean},alwaysPassFilter:{type:Function},includeHiddenColumnsInAdvancedFilter:{type:Boolean},advancedFilterParent:{},advancedFilterBuilderParams:{},suppressAdvancedFilterEval:{type:Boolean},suppressSetFilterByDefault:{type:Boolean},enableCharts:{type:Boolean},chartThemes:{},customChartThemes:{},chartThemeOverrides:{},chartToolPanelsDef:{},chartMenuItems:{type:[Array,Function]},loadingCellRenderer:{},loadingCellRendererParams:{},loadingCellRendererSelector:{type:Function},localeText:{},masterDetail:{type:Boolean},keepDetailRows:{type:Boolean},keepDetailRowsCount:{},detailCellRenderer:{},detailCellRendererParams:{},detailRowHeight:{},detailRowAutoHeight:{type:Boolean},context:{},alignedGrids:{type:[Array,Function]},tabIndex:{},rowBuffer:{},valueCache:{type:Boolean},valueCacheNeverExpires:{type:Boolean},enableCellExpressions:{type:Boolean},suppressTouch:{type:Boolean},suppressFocusAfterRefresh:{type:Boolean},suppressBrowserResizeObserver:{type:Boolean},suppressPropertyNamesCheck:{type:Boolean},suppressChangeDetection:{type:Boolean},debug:{type:Boolean},loading:{type:Boolean},overlayLoadingTemplate:{},loadingOverlayComponent:{},loadingOverlayComponentParams:{},suppressLoadingOverlay:{type:Boolean},overlayNoRowsTemplate:{},noRowsOverlayComponent:{},noRowsOverlayComponentParams:{},suppressNoRowsOverlay:{type:Boolean},pagination:{type:Boolean},paginationPageSize:{},paginationPageSizeSelector:{type:[Array,Boolean]},paginationAutoPageSize:{type:Boolean},paginateChildRows:{type:Boolean},suppressPaginationPanel:{type:Boolean},pivotMode:{type:Boolean},pivotPanelShow:{},pivotMaxGeneratedColumns:{},pivotDefaultExpanded:{},pivotColumnGroupTotals:{},pivotRowTotals:{},pivotSuppressAutoColumn:{type:Boolean},suppressExpandablePivotGroups:{type:Boolean},functionsReadOnly:{type:Boolean},aggFuncs:{},suppressAggFuncInHeader:{type:Boolean},alwaysAggregateAtRootLevel:{type:Boolean},aggregateOnlyChangedColumns:{type:Boolean},suppressAggFilteredOnly:{type:Boolean},removePivotHeaderRowWhenSingleValueColumn:{type:Boolean},animateRows:{type:Boolean},cellFlashDuration:{},cellFadeDuration:{},allowShowChangeAfterFilter:{type:Boolean},domLayout:{},ensureDomOrder:{type:Boolean},enableCellSpan:{type:Boolean},enableRtl:{type:Boolean},suppressColumnVirtualisation:{type:Boolean},suppressMaxRenderedRowRestriction:{type:Boolean},suppressRowVirtualisation:{type:Boolean},rowDragManaged:{type:Boolean},suppressRowDrag:{type:Boolean},suppressMoveWhenRowDragging:{type:Boolean},rowDragEntireRow:{type:Boolean},rowDragMultiRow:{type:Boolean},rowDragText:{type:Function},dragAndDropImageComponent:{},dragAndDropImageComponentParams:{},fullWidthCellRenderer:{},fullWidthCellRendererParams:{},embedFullWidthRows:{type:Boolean},groupDisplayType:{},groupDefaultExpanded:{},autoGroupColumnDef:{},groupMaintainOrder:{type:Boolean},groupSelectsChildren:{type:Boolean},groupLockGroupColumns:{},groupAggFiltering:{type:[Boolean,Function]},groupTotalRow:{type:[String,Function]},grandTotalRow:{},suppressStickyTotalRow:{type:[Boolean,String]},groupSuppressBlankHeader:{type:Boolean},groupSelectsFiltered:{type:Boolean},showOpenedGroup:{type:Boolean},groupHideParentOfSingleChild:{type:[Boolean,String]},groupRemoveSingleChildren:{type:Boolean},groupRemoveLowestSingleChildren:{type:Boolean},groupHideOpenParents:{type:Boolean},groupAllowUnbalanced:{type:Boolean},rowGroupPanelShow:{},groupRowRenderer:{},groupRowRendererParams:{},treeData:{type:Boolean},treeDataChildrenField:{},treeDataParentIdField:{},rowGroupPanelSuppressSort:{type:Boolean},suppressGroupRowsSticky:{type:Boolean},pinnedTopRowData:{},pinnedBottomRowData:{},enableRowPinning:{type:[Boolean,String]},isRowPinnable:{type:Function},isRowPinned:{type:Function},rowModelType:{},rowData:{},asyncTransactionWaitMillis:{},suppressModelUpdateAfterUpdateTransaction:{type:Boolean},datasource:{},cacheOverflowSize:{},infiniteInitialRowCount:{},serverSideInitialRowCount:{},suppressServerSideFullWidthLoadingRow:{type:Boolean},cacheBlockSize:{},maxBlocksInCache:{},maxConcurrentDatasourceRequests:{},blockLoadDebounceMillis:{},purgeClosedRowNodes:{type:Boolean},serverSideDatasource:{},serverSideSortAllLevels:{type:Boolean},serverSideEnableClientSideSort:{type:Boolean},serverSideOnlyRefreshFilteredGroups:{type:Boolean},serverSidePivotResultFieldSeparator:{},viewportDatasource:{},viewportRowModelPageSize:{},viewportRowModelBufferSize:{},alwaysShowHorizontalScroll:{type:Boolean},alwaysShowVerticalScroll:{type:Boolean},debounceVerticalScrollbar:{type:Boolean},suppressHorizontalScroll:{type:Boolean},suppressScrollOnNewData:{type:Boolean},suppressScrollWhenPopupsAreOpen:{type:Boolean},suppressAnimationFrame:{type:Boolean},suppressMiddleClickScrolls:{type:Boolean},suppressPreventDefaultOnMouseWheel:{type:Boolean},scrollbarWidth:{},rowSelection:{},cellSelection:{type:[Boolean,Object]},rowMultiSelectWithClick:{type:Boolean},suppressRowDeselection:{type:Boolean},suppressRowClickSelection:{type:Boolean},suppressCellFocus:{type:Boolean},suppressHeaderFocus:{type:Boolean},selectionColumnDef:{},rowNumbers:{type:[Boolean,Object]},suppressMultiRangeSelection:{type:Boolean},enableCellTextSelection:{type:Boolean},enableRangeSelection:{type:Boolean},enableRangeHandle:{type:Boolean},enableFillHandle:{type:Boolean},fillHandleDirection:{},suppressClearOnFillReduction:{type:Boolean},sortingOrder:{},accentedSort:{type:Boolean},unSortIcon:{type:Boolean},suppressMultiSort:{type:Boolean},alwaysMultiSort:{type:Boolean},multiSortKey:{},suppressMaintainUnsortedOrder:{type:Boolean},icons:{},rowHeight:{},rowStyle:{},rowClass:{},rowClassRules:{},suppressRowHoverHighlight:{type:Boolean},suppressRowTransform:{type:Boolean},columnHoverHighlight:{type:Boolean},gridId:{},deltaSort:{type:Boolean},treeDataDisplayType:{},enableGroupEdit:{type:Boolean},initialState:{},theme:{},loadThemeGoogleFonts:{type:Boolean},themeCssLayer:{},styleNonce:{},themeStyleContainer:{},getContextMenuItems:{type:Function},getMainMenuItems:{type:Function},postProcessPopup:{type:Function},processUnpinnedColumns:{type:Function},processCellForClipboard:{type:Function},processHeaderForClipboard:{type:Function},processGroupHeaderForClipboard:{type:Function},processCellFromClipboard:{type:Function},sendToClipboard:{type:Function},processDataFromClipboard:{type:Function},isExternalFilterPresent:{type:Function},doesExternalFilterPass:{type:Function},getChartToolbarItems:{type:Function},createChartContainer:{type:Function},focusGridInnerElement:{type:Function},navigateToNextHeader:{type:Function},tabToNextHeader:{type:Function},navigateToNextCell:{type:Function},tabToNextCell:{type:Function},getLocaleText:{type:Function},getDocument:{type:Function},paginationNumberFormatter:{type:Function},getGroupRowAgg:{type:Function},isGroupOpenByDefault:{type:Function},initialGroupOrderComparator:{type:Function},processPivotResultColDef:{type:Function},processPivotResultColGroupDef:{type:Function},getDataPath:{type:Function},getChildCount:{type:Function},getServerSideGroupLevelParams:{type:Function},isServerSideGroupOpenByDefault:{type:Function},isApplyServerSideTransaction:{type:Function},isServerSideGroup:{type:Function},getServerSideGroupKey:{type:Function},getBusinessKeyForNode:{type:Function},getRowId:{type:Function},resetRowDataOnUpdate:{type:Boolean},processRowPostCreate:{type:Function},isRowSelectable:{type:Function},isRowMaster:{type:Function},fillOperation:{type:Function},postSortRows:{type:Function},getRowStyle:{type:Function},getRowClass:{type:Function},getRowHeight:{type:Function},isFullWidthRow:{type:Function},"onTool-panel-visible-changed":{},"onTool-panel-size-changed":{},"onColumn-menu-visible-changed":{},"onContext-menu-visible-changed":{},"onCut-start":{},"onCut-end":{},"onPaste-start":{},"onPaste-end":{},"onColumn-visible":{},"onColumn-pinned":{},"onColumn-resized":{},"onColumn-moved":{},"onColumn-value-changed":{},"onColumn-pivot-mode-changed":{},"onColumn-pivot-changed":{},"onColumn-group-opened":{},"onNew-columns-loaded":{},"onGrid-columns-changed":{},"onDisplayed-columns-changed":{},"onVirtual-columns-changed":{},"onColumn-everything-changed":{},"onColumn-header-mouse-over":{},"onColumn-header-mouse-leave":{},"onColumn-header-clicked":{},"onColumn-header-context-menu":{},"onComponent-state-changed":{},"onCell-value-changed":{},"onCell-edit-request":{},"onRow-value-changed":{},"onCell-editing-started":{},"onCell-editing-stopped":{},"onRow-editing-started":{},"onRow-editing-stopped":{},"onUndo-started":{},"onUndo-ended":{},"onRedo-started":{},"onRedo-ended":{},"onCell-selection-delete-start":{},"onCell-selection-delete-end":{},"onRange-delete-start":{},"onRange-delete-end":{},"onFill-start":{},"onFill-end":{},"onFilter-opened":{},"onFilter-changed":{},"onFilter-modified":{},"onAdvanced-filter-builder-visible-changed":{},"onFind-changed":{},"onChart-created":{},"onChart-range-selection-changed":{},"onChart-options-changed":{},"onChart-destroyed":{},"onCell-key-down":{},"onGrid-ready":{},"onGrid-pre-destroyed":{},"onFirst-data-rendered":{},"onGrid-size-changed":{},"onModel-updated":{},"onVirtual-row-removed":{},"onViewport-changed":{},"onBody-scroll":{},"onBody-scroll-end":{},"onDrag-started":{},"onDrag-stopped":{},"onDrag-cancelled":{},"onState-updated":{},"onPagination-changed":{},"onRow-drag-enter":{},"onRow-drag-move":{},"onRow-drag-leave":{},"onRow-drag-end":{},"onRow-drag-cancel":{},"onRow-resize-started":{},"onRow-resize-ended":{},"onColumn-row-group-changed":{},"onRow-group-opened":{},"onExpand-or-collapse-all":{},"onPivot-max-columns-exceeded":{},"onPinned-row-data-changed":{},"onPinned-rows-changed":{},"onRow-data-updated":{},"onAsync-transactions-flushed":{},"onStore-refreshed":{},"onHeader-focused":{},"onCell-clicked":{},"onCell-double-clicked":{},"onCell-focused":{},"onCell-mouse-over":{},"onCell-mouse-out":{},"onCell-mouse-down":{},"onRow-clicked":{},"onRow-double-clicked":{},"onRow-selected":{},"onSelection-changed":{},"onCell-context-menu":{},"onRange-selection-changed":{},"onCell-selection-changed":{},"onTooltip-show":{},"onTooltip-hide":{},"onSort-changed":{}},g_()),{modelValue:{},modelModifiers:{}}),emits:js(["update:modelValue"],["update:modelValue"]),setup(e,{expose:t,emit:a}){const n=e,r=Au("root"),o=W(void 0),s=W(!1),i=W(!1),d=W(!1),g=W({}),f=W(null),l=Di(n);Ms().filter(y=>y!="gridOptions").forEach(y=>{be(()=>l[y],(M,E)=>{(y==="rowData"&&!F.value||y!=="rowData")&&O(y,M),F.value=!1},{deep:!0})});const u=new Set(["rowDataUpdated","cellValueChanged","rowValueChanged"]),m=Pu(e,"modelValue"),x=W(!1),F=W(!1),C=a;be(m,(y,M)=>{s.value&&(F.value||(x.value=!0,O("rowData",Zn(y),Zn(M))),F.value=!1)},{deep:!0});const D=y_(()=>{F.value=!0,C("update:modelValue",S())},10),L=Cr(),$=y=>{var M,E;d.value&&u.has(y)&&(E=(M=L==null?void 0:L.vnode)==null?void 0:M.props)!=null&&E["onUpdate:modelValue"]&&D()},_=()=>m.value||n.rowData||n.gridOptions.rowData,S=()=>{const y=[];return o==null||o.value.forEachLeafNode(M=>{y.push(M.data)}),y},k=y=>M=>{if(i.value)return;M==="gridReady"&&(d.value=!0);const E=zu.has(M);E&&!y||!E&&y||u.has(M)&&(x.value||$(M),x.value=!1)},O=(y,M,E)=>{if(s.value){let R=M.value||M;y==="rowData"&&R!=null&&(R=Zn(R)),g.value[y]=R,f.value==null&&(f.value=window.setTimeout(()=>{f.value=null,Lu(g.value,o.value),g.value={}},0))}},w=()=>Object.create(Cr().provides);return wt(()=>{Iu(Tu,void 0,!0);const y=new p_(Cr(),w()),M={globalListener:k(),globalSyncListener:k(!0),frameworkOverrides:new h_(Cr()),providedBeanInstances:{frameworkCompWrapper:y},modules:n.modules},E=$u(Fu(Zn(n.gridOptions),n,[...Ms(),...Eu().map(I=>Nu(I))])),R=_();R!==void 0&&(E.rowData=Zn(R)),o.value=Ru(r.value,E,M),s.value=!0}),Mn(()=>{var y;s.value&&((y=o==null?void 0:o.value)==null||y.destroy(),i.value=!0)}),t({api:o}),(y,M)=>(T(),q("div",w_,null,512))}});function C_(e,t){let a=null;return function(...r){const o=()=>{a=null,e(...r)};a!==null&&clearTimeout(a),a=setTimeout(o,t)}}const he=Ta.global.t,_r=Qr([{action:"manage",resourceType:"all"}]),je={buttons:["clear","cancel"],debounceMs:200},x_=[{headerName:he("verbeterplein.table.headers.id"),field:"VolgNummer",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.project"),field:"Project.NumberID",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.deelorder"),field:"Deelorder",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.project_name"),field:"Project.ProjectNaam",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.fail_costs"),field:"Correctief.Faalkosten",filter:!0,filterParams:je,valueFormatter:e=>e.value?`â‚¬ ${e.value}`:he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.akoordOPS"),field:"Correctief.AkoordOPS",filter:!0,filterParams:je,cellRenderer:"CheckmarkRenderer",valueFormatter:e=>e.value?he("verbeterplein.table.headers.yes"):he("verbeterplein.table.headers.no")},{headerName:he("verbeterplein.table.headers.pdca_started"),field:"PDCA",filter:!0,filterParams:je,cellRenderer:"CheckmarkRenderer",valueFormatter:e=>e.data.PDCA?he("verbeterplein.table.headers.yes"):he("verbeterplein.table.headers.no")},{headerName:he("verbeterplein.table.headers.created_at"),field:"CreatedAt",filter:!0,filterParams:je,valueFormatter:e=>aa(e.value)},..._r?[{headerName:he("verbeterplein.table.headers.action"),field:"action",cellRenderer:"ActionRenderer"}]:[]],S_=[{headerName:he("verbeterplein.table.headers.id"),field:"VolgNummer",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.project"),field:"Project.NumberID",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.deelorder"),field:"Deelorder",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.project_name"),field:"Project.ProjectNaam",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.action_holder_correctief"),field:"Correctief.User.Name",filter:!0,filterParams:je,valueFormatter:e=>e.value||he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.fail_costs"),field:"Correctief.Faalkosten",filter:!0,filterParams:je,valueFormatter:e=>e.value||e.value===0?`â‚¬ ${e.value}`:he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.deadline_correctief"),field:"Correctief.Deadline",filter:!0,filterParams:je,valueFormatter:e=>e.value?aa(e.value):he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.status_correctief"),field:"Correctief.Status",filter:!0,cellRenderer:"StatusRenderer",filterParams:je,valueFormatter:e=>e.value?e.value.Status:he("verbeterplein.table.na")},..._r?[{headerName:he("verbeterplein.table.headers.action"),field:"action",cellRenderer:"ActionRenderer"}]:[]],D_=[{headerName:he("verbeterplein.table.headers.id"),field:"Preventief.VolgNummer",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.title_pdca"),field:"Preventief.Title",filter:!0,filterParams:je,valueFormatter:e=>{const t=e.value;return t?t.length>40?t.substring(0,40)+"...":t:he("verbeterplein.table.na")}},{headerName:he("verbeterplein.table.headers.clones"),field:"Preventief",filter:!0,filterParams:je,valueFormatter:e=>e.value?e.value.Melding.length:he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.action_holder_pdca"),field:"Preventief.User.Name",filter:!0,filterParams:je,valueFormatter:e=>e.value||he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.processdeel"),field:"Preventief.User.Department.name",filter:!0,filterParams:je,valueFormatter:e=>e.value||he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.status_pdca"),field:"Preventief.Status",filter:!0,filterParams:je,valueFormatter:e=>e.value?e.value.Status:he("verbeterplein.table.na"),cellRenderer:"PDCACircleRenderer"},{headerName:he("verbeterplein.table.headers.deadline_preventief"),field:"Preventief.Deadline",filter:!0,filterParams:je,valueFormatter:e=>e.value?aa(e.value):he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.status_preventief"),field:"Preventief.Status",filter:!0,filterParams:je,cellRenderer:"StatusRenderer",valueFormatter:e=>e.value||he("verbeterplein.table.na")},..._r?[{headerName:he("verbeterplein.table.headers.action"),field:"action",cellRenderer:"ActionRenderer"}]:[]],k_=[{headerName:he("verbeterplein.table.headers.id"),field:"VolgNummer",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.project"),field:"Project.NumberID",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.deelorder"),field:"Deelorder",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.akoordOPS"),field:"Correctief.AkoordOPS",filter:!0,filterParams:je,cellRenderer:"CheckmarkRenderer",valueFormatter:e=>e.value?he("verbeterplein.table.headers.yes"):he("verbeterplein.table.headers.no")},{headerName:he("verbeterplein.table.headers.pdca_started"),field:"Preventief.id",filter:!0,filterParams:je,cellRenderer:"CheckmarkRenderer",valueFormatter:e=>e.value?he("verbeterplein.table.headers.yes"):he("verbeterplein.table.headers.no")},{headerName:he("verbeterplein.table.headers.status_correctief"),field:"Correctief.Status",filter:!0,filterParams:je,cellRenderer:"StatusRenderer",valueFormatter:e=>e.value||he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.status_preventief"),field:"Preventief.Status",filter:!0,filterParams:je,cellRenderer:"StatusRenderer",valueFormatter:e=>e.value||he("verbeterplein.table.na")},..._r?[{headerName:he("verbeterplein.table.headers.action"),field:"action",cellRenderer:"ActionRendererArchive"}]:[]],A_=[{headerName:he("verbeterplein.table.headers.id"),field:"VolgNummer",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.project"),field:"Project.NumberID",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.deelorder"),field:"Deelorder",filter:!0,filterParams:je},{headerName:he("verbeterplein.table.headers.created_at"),field:"CreatedAt",filter:!0,filterParams:je,valueFormatter:e=>aa(e.value)},{headerName:he("verbeterplein.table.headers.deadline_correctief"),field:"Correctief.Deadline",filter:!0,filterParams:je,valueFormatter:e=>e.value?aa(e.value):he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.status_correctief"),field:"Correctief.Status",filter:!0,filterParams:je,cellRenderer:"StatusRenderer",valueFormatter:e=>e.value||he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.status_preventief"),field:"Preventief.Status",filter:!0,filterParams:je,cellRenderer:"StatusRenderer",valueFormatter:e=>e.value||he("verbeterplein.table.na")},{headerName:he("verbeterplein.table.headers.deadline_preventief"),field:"Preventief.Deadline",filter:!0,filterParams:je,valueFormatter:e=>e.value?aa(e.value):he("verbeterplein.table.na")},..._r?[{headerName:he("verbeterplein.table.headers.action"),field:"action",cellRenderer:"ActionRenderer"}]:[]],P_={class:"d-flex justify-center align-center w-100 h-100"},I_=Se({__name:"CheckmarkRenderer",props:{params:{}},setup(e){const t=e,a=te(()=>!!t.params.value);return(n,r)=>(T(),q("div",P_,[c(oe,{color:a.value?"success":"error",icon:a.value?"mdi-check-circle":"mdi-close-circle",size:"24"},null,8,["color","icon"])]))}}),T_={class:"d-flex justify-center align-center h-100 w-100"},$_={class:"blacktext",style:{color:"black !important"}},F_=Se({__name:"StatusRenderer",props:{params:{}},setup(e){const t=e,a=te(()=>t.params.value),n=te(()=>{var o;return((o=a.value)==null?void 0:o.StatusColor)??"grey"}),r=te(()=>{var o;return((o=a.value)==null?void 0:o.StatusNaam)||"N/A"});return(o,s)=>(T(),q("div",T_,[c(et,{color:n.value,dark:""},{default:h(()=>[p("p",$_,j(r.value),1)]),_:1},8,["color"])]))}}),E_=dt(F_,[["__scopeId","data-v-cd669d7e"]]),N_={class:"w-100 h-100 d-flex align-center justify-center"},R_=Se({__name:"ActionRenderer",props:{params:{}},setup(e){const t=e,a=n=>{const r=n.api.getSelectedRows(),o=n.data,s=new Set([...r,o]);t.params.context&&typeof t.params.context.openArchivePreview=="function"?t.params.context.openArchivePreview(Array.from(s)):console.warn("AG-Grid context or openArchivePreview function not found!")};return(n,r)=>{const o=qo("permission");return T(),q("div",N_,[ja(c(se(Wv),{onClick:r[0]||(r[0]=s=>a(n.params)),size:"30",class:"cursor-pointer"},null,512),[[o,[{action:"manage",resourceType:"all"}]]])])}}}),j_={class:"ag-overlay-loading-center"},M_={"aria-live":"polite","aria-atomic":"true"},yi=Se({__name:"Customloading",props:{params:{type:Object,required:!0}},setup(e){return(t,a)=>(T(),q("div",j_,[c(ia,{indeterminate:"",color:"primary",size:"32"}),p("div",M_,j(e.params.loadingMessage),1)]))}}),O_={class:"w-100 h-100 d-flex align-center justify-center"},V_=Se({__name:"PDCACircleRenderer",props:{params:{type:Object,required:!0}},setup(e){const t=a=>{var o,s;const n=(o=a.Preventief)==null?void 0:o.Steps;if(!n)return 0;let r=0;for(const i in n)(s=n[i])!=null&&s.Finished&&r++;return r};return(a,n)=>{var r,o;return T(),q("div",O_,[((o=(r=e.params.data)==null?void 0:r.Preventief)==null?void 0:o.rootCauseLevel)!==1?(T(),ie(au,{key:0,step:t(e.params.data),size:30},null,8,["step"])):(T(),ie(se(Kv),{key:1,"stroke-width":"1.5",size:"22"}))])}}}),B_={class:"w-100 h-100 d-flex align-center justify-center"},U_=Se({__name:"ActionRendererArchive",props:{params:{}},setup(e){const t=e,a=n=>{const r=n.api.getSelectedRows(),o=n.data,s=new Set([...r,o]);t.params.context&&typeof t.params.context.openUnArchivePreview=="function"?t.params.context.openUnArchivePreview(Array.from(s)):console.warn("AG-Grid context or openUnArchivePreview function not found!")};return(n,r)=>{const o=qo("permission");return T(),q("div",B_,[ja(c(se(Jv),{onClick:r[0]||(r[0]=s=>a(n.params)),size:"30",class:"cursor-pointer"},null,512),[[o,[{action:"manage",resourceType:"all"}]]])])}}}),z_=Se({__name:"VerbeterItemTable",props:{mode:{type:String,required:!0},items:{type:Array,required:!0},handleArchive:{type:Function,required:!0},getPDCAStep:{type:Function,required:!1},RowClicked:{type:Function,required:!0},showArchiving:{type:Boolean,required:!1},pageSize:{type:Number,default:20}},emits:["update:selected"],setup(e,{emit:t}){const a=e,n=W({OPS:"#fff",CORRECTIEF:"#093f96",PDCA:"#87368b",ARCHIVE:"#fff",ALL:"#fff"}),r=W({OPS:"rgb(0,0,0)",CORRECTIEF:"#fff",PDCA:"#fff",ARCHIVE:"rgb(0,0,0)",ALL:"rgb(0,0,0)"}),o=Hu.withPart(Gu).withParams({headerTextColor:r.value[a.mode],headerBackgroundColor:n.value[a.mode],headerColumnResizeHandleColor:"rgb(0, 0, 0)",spacing:12}),s=W([10,20,50,100]),i=Kt(),d=Wu(),g=W(null),l=C_(()=>{g.value&&g.value.sizeColumnsToFit()},75),u=k=>{a.handleArchive({itemIdsToPreview:k,archive:!0})},m=k=>{a.handleArchive({itemIdsToPreview:k,archive:!1})},x={OPS:x_,CORRECTIEF:S_,PDCA:D_,ARCHIVE:k_,ALL:A_},F=W({loadingMessage:"Loading..."}),C=W({CheckmarkRenderer:I_,StatusRenderer:E_,ActionRenderer:R_,PDCACircleRenderer:V_,CustomLoading:yi,ActionRendererArchive:U_}),D=te(()=>({context:{openArchivePreview:u,openUnArchivePreview:m},components:C.value,loadingOverlayComponent:yi,loadingOverlayComponentParams:F.value,pagination:!0,paginationPageSize:a.pageSize,paginationPageSizeSelector:s.value,rowSelection:{mode:"multiRow",headerCheckbox:!0},headerHeight:50,autoSizeStrategy:{type:"fitGridWidth"}})),L=k=>{g.value=k.api,l()},$=t,_=W([]);be(_,k=>{$("update:selected",k)});const S=k=>{k.colDef.field!=="action"&&a.RowClicked(k)};return wt(()=>{window.addEventListener("resize",l)}),Mn(()=>{window.removeEventListener("resize",l)}),be(()=>d.mini_sidebar,()=>{setTimeout(l,50)}),be(()=>a.pageSize,k=>{g.value&&k&&g.value.setGridOption("paginationPageSize",Number(k))}),(k,O)=>(T(),ie(se(__),{style:{height:"100%",width:"100%"},loading:se(i).loading.all,rowData:e.items,columnDefs:x[e.mode],theme:se(o),gridOptions:D.value,onGridReady:L,onCellClicked:S},null,8,["loading","rowData","columnDefs","theme","gridOptions"]))}}),L_=dt(z_,[["__scopeId","data-v-eea88302"]]),H_={class:"headline"},G_=Se({__name:"showImage",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Image Gallery"},maxWidth:{type:[String,Number],default:800},images:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=W(a.modelValue),r=W(a.initialIndex);be(()=>a.modelValue,d=>{n.value=d});const o=()=>{n.value=!1},s=()=>{r.value<a.images.length-1?r.value++:r.value=0},i=()=>{r.value>0?r.value--:r.value=a.images.length-1};return(d,g)=>(T(),ie(va,{modelValue:n.value,"onUpdate:modelValue":g[1]||(g[1]=f=>n.value=f),"max-width":e.maxWidth},{default:h(()=>[c(Te,null,{default:h(()=>[c(Pt,null,{default:h(()=>[p("span",H_,j(e.title),1),c(Dt),c(ge,{icon:"",onClick:o},{default:h(()=>[c(oe,null,{default:h(()=>g[2]||(g[2]=[z("mdi-close")])),_:1,__:[2]})]),_:1})]),_:1}),c(Re,null,{default:h(()=>[c(Ju,{modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=f=>r.value=f),"hide-delimiters":""},{default:h(()=>[(T(!0),q(Ae,null,We(e.images,(f,l)=>(T(),ie(qu,{key:l},{default:h(()=>[c(Rr,{src:f==null?void 0:f.url,contain:"","max-height":"500"},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1}),c(Nt,null,{default:h(()=>[c(Dt),c(ge,{color:"primary",variant:"text",onClick:i},{default:h(()=>g[3]||(g[3]=[z("Previous")])),_:1,__:[3]}),c(ge,{color:"primary",variant:"text",onClick:s},{default:h(()=>g[4]||(g[4]=[z("Next")])),_:1,__:[4]})]),_:1})]),_:1})]),_:1},8,["modelValue","max-width"]))}}),W_={class:"filters"},J_={class:"d-flex align-center mb-2"},q_={class:"d-flex align-center mb-2"},K_={class:"d-flex align-center mb-2"},Y_={class:"d-flex align-center mb-2"},Q_=Se({__name:"VerbeterItemTableFilters",props:{page:{type:String,required:!0}},emits:["filter"],setup(e,{emit:t}){const a=Dn(),n=ga(),r=ha(),o=eo(),s=Oi(),i=Zu(),d=Ko(),g=te(()=>d.global.current.value.dark),f=W(["O","P","D","C","A"]),l=te({get:()=>({title:s.filters.filterMode==="AND"?"Alle":"Enkele",value:s.filters.filterMode||"OR",subtitle:s.filters.filterMode==="AND"?"Alle filters moeten overeenkomen":"Ã‰Ã©n of meer filters moeten overeenkomen"}),set:b=>s.setFilters({...s.filters,filterMode:b.value})});wt(async()=>{await o.initializeData(),await n.initializeData(),await r.initializeData(),await a.fetchProjects(),await i.fetchDepartments()});const u=t,m=te({get:()=>s.filters.project,set:b=>s.setFilters({...s.filters,project:b})}),x=te({get:()=>s.filters.deelorder,set:b=>s.setFilters({...s.filters,deelorder:b})}),F=te({get:()=>s.filters.akoord,set:b=>s.setFilters({...s.filters,akoord:b})}),C=te({get:()=>s.filters.actiehouderCorrectief,set:b=>s.setFilters({...s.filters,actiehouderCorrectief:b})}),D=te({get:()=>s.filters.actiehouderPreventief,set:b=>s.setFilters({...s.filters,actiehouderPreventief:b})}),L=te({get:()=>s.filters.projectleider,set:b=>s.setFilters({...s.filters,projectleider:b})}),$=te({get:()=>s.filters.department,set:b=>s.setFilters({...s.filters,department:b})}),_=te({get:()=>s.filters.statusCorrectief,set:b=>s.setFilters({...s.filters,statusCorrectief:b})}),S=te({get:()=>s.filters.statusPreventief,set:b=>s.setFilters({...s.filters,statusPreventief:b})}),k=te({get:()=>s.filters.projectNaam,set:b=>s.setFilters({...s.filters,projectNaam:b})}),O=te({get:()=>s.filters.volgNummer,set:b=>s.setFilters({...s.filters,volgNummer:b})}),w=te({get:()=>s.filters.title,set:b=>s.setFilters({...s.filters,title:b})}),y=te({get:()=>s.filters.PDCA_status,set:b=>s.setFilters({...s.filters,PDCA_status:b})}),M=te(()=>a.projects),E=te(()=>n.actiehouders),R=te(()=>o.projectleiders),I=te(()=>r.statussen),P=te(()=>r.statusListCorrectief),A=te(()=>i.departments),v=()=>{const b={project:m.value,projectNaam:k.value,volgNummer:O.value,deelorder:x.value,actiehouderCorrectief:C.value,actiehouderPreventief:D.value,projectleider:L.value,statusCorrectief:_.value,statusPreventief:S.value,akoord:F.value,title:w.value,PDCA_status:y.value,department:$.value,filterMode:l.value.value};u("filter",b)};return be([m,k,O,x,C,D,L,_,S,F,w,y,$],v),(b,V)=>(T(),q("div",W_,[c(yt,{dense:""},{default:h(()=>[c(qe,{cols:"12",sm:"6",md:"4",lg:"3"},{default:h(()=>[c(Te,{variant:"outlined",class:"filter-group pa-2",theme:g.value?"dark":"light"},{default:h(()=>[p("div",J_,[c(oe,{size:"small",color:"primary",class:"mr-1"},{default:h(()=>V[13]||(V[13]=[z("mdi-format-list-bulleted")])),_:1,__:[13]}),V[14]||(V[14]=p("span",{class:"text-caption font-weight-medium"},"Melding Details",-1))]),c(Ot,{modelValue:O.value,"onUpdate:modelValue":[V[0]||(V[0]=B=>O.value=B),v],label:"Volgnummer",density:"compact",variant:"outlined","hide-details":"",class:"mb-2",clearable:""},null,8,["modelValue"]),c(it,{modelValue:F.value,"onUpdate:modelValue":[V[1]||(V[1]=B=>F.value=B),v],items:[{text:"Ja",value:!0},{text:"Nee",value:!1}],label:"Akkoord",density:"compact",variant:"outlined","hide-details":"",class:"mb-2","item-title":"text","return-object":"",clearable:""},null,8,["modelValue"]),c(Ot,{modelValue:w.value,"onUpdate:modelValue":[V[2]||(V[2]=B=>w.value=B),v],label:"PDCA Titel",density:"compact",variant:"outlined","hide-details":"",class:"mb-2",clearable:""},null,8,["modelValue"])]),_:1},8,["theme"])]),_:1}),c(qe,{cols:"12",sm:"6",md:"4",lg:"3"},{default:h(()=>[c(Te,{variant:"outlined",class:"filter-group pa-2",theme:g.value?"dark":"light"},{default:h(()=>[p("div",q_,[c(oe,{size:"small",color:"primary",class:"mr-1"},{default:h(()=>V[15]||(V[15]=[z("mdi-folder-outline")])),_:1,__:[15]}),V[16]||(V[16]=p("span",{class:"text-caption font-weight-medium"},"Project Details",-1))]),c(sr,{modelValue:m.value,"onUpdate:modelValue":V[3]||(V[3]=B=>m.value=B),items:M.value,label:"Project","item-title":"NumberID","return-object":"",density:"compact",variant:"outlined","hide-details":"",class:"mb-2",clearable:"",onChange:v},null,8,["modelValue","items"]),c(Ot,{modelValue:k.value,"onUpdate:modelValue":[V[4]||(V[4]=B=>k.value=B),v],label:"Project Naam",density:"compact",variant:"outlined","hide-details":"",class:"mb-2",clearable:""},null,8,["modelValue"]),c(Ot,{modelValue:x.value,"onUpdate:modelValue":[V[5]||(V[5]=B=>x.value=B),v],label:"Deelorder",density:"compact",variant:"outlined","hide-details":"",class:"mb-2",clearable:""},null,8,["modelValue"]),c(it,{modelValue:L.value,"onUpdate:modelValue":V[6]||(V[6]=B=>L.value=B),items:R.value,label:"ProjectTeam",density:"compact",variant:"outlined","hide-details":"",class:"mb-2",clearable:"","item-title":"Name","return-object":"",onChange:v},null,8,["modelValue","items"])]),_:1},8,["theme"])]),_:1}),c(qe,{cols:"12",sm:"6",md:"4",lg:"3"},{default:h(()=>[c(Te,{variant:"outlined",class:"filter-group pa-2",theme:g.value?"dark":"light"},{default:h(()=>[p("div",K_,[c(oe,{size:"small",color:"primary",class:"mr-1"},{default:h(()=>V[17]||(V[17]=[z("mdi-account-outline")])),_:1,__:[17]}),V[18]||(V[18]=p("span",{class:"text-caption font-weight-medium"},"Actiehouders",-1))]),c(it,{modelValue:$.value,"onUpdate:modelValue":[V[7]||(V[7]=B=>$.value=B),v],items:A.value,label:"Afdeling","item-title":"name","return-object":"",density:"compact",variant:"outlined","hide-details":"",class:"mb-2",clearable:""},null,8,["modelValue","items"]),c(it,{modelValue:C.value,"onUpdate:modelValue":V[8]||(V[8]=B=>C.value=B),items:E.value,label:"Correctief",variant:"outlined","hide-details":"",class:"mb-2",clearable:"","item-title":"Name","return-object":"",onChange:v},null,8,["modelValue","items"]),c(it,{modelValue:D.value,"onUpdate:modelValue":V[9]||(V[9]=B=>D.value=B),items:E.value,label:"Preventief",variant:"outlined","hide-details":"",clearable:"","item-title":"Name","return-object":"",class:"mb-2",onChange:v},null,8,["modelValue","items"])]),_:1},8,["theme"])]),_:1}),c(qe,{cols:"12",sm:"6",md:"4",lg:"3"},{default:h(()=>[c(Te,{variant:"outlined",class:"filter-group pa-2",theme:g.value?"dark":"light"},{default:h(()=>[p("div",Y_,[c(oe,{size:"small",color:"primary",class:"mr-1"},{default:h(()=>V[19]||(V[19]=[z("mdi-flag-outline")])),_:1,__:[19]}),V[20]||(V[20]=p("span",{class:"text-caption font-weight-medium"},"Status",-1))]),c(it,{modelValue:_.value,"onUpdate:modelValue":V[10]||(V[10]=B=>_.value=B),items:P.value,label:"Correctief",density:"compact",variant:"outlined","hide-details":"",class:"mb-2","item-title":"StatusNaam",clearable:"","return-object":"",onChange:v},null,8,["modelValue","items"]),c(it,{modelValue:S.value,"onUpdate:modelValue":V[11]||(V[11]=B=>S.value=B),items:I.value,label:"Preventief",density:"compact",variant:"outlined","hide-details":"",clearable:"",class:"mb-2","item-title":"StatusNaam","return-object":"",onChange:v},null,8,["modelValue","items"]),c(it,{modelValue:y.value,"onUpdate:modelValue":V[12]||(V[12]=B=>y.value=B),items:f.value,label:"PDCA Status",density:"compact",variant:"outlined","hide-details":"",clearable:"",class:"mb-2","item-title":"StatusNaam","return-object":"",onChange:v},null,8,["modelValue","items"])]),_:1},8,["theme"])]),_:1})]),_:1})]))}}),Z_=dt(Q_,[["__scopeId","data-v-65220068"]]),X_={class:"page"},eC={class:"d-flex align-center justify-space-between w-100"},tC={class:"d-flex align-center"},aC={class:"text-subtitle-2"},nC={class:"d-flex align-center"},rC={class:"filters-container"},oC=Se({__name:"VerbeterTabView",props:{mode:{type:String,required:!0},openActiveItem:{type:Boolean,default:!1},openItem:{type:Boolean,default:!1}},emits:["update","remove:state","set:active:tab"],setup(e,{emit:t}){const{t:a}=kt(),n=Kt(),r=ha(),o=ga(),s=es(),i=Dn(),d=Oi(),g=eo(),f=Ci(),l=ct(),u=W([]),m=W(!1),x=W(!1),F=W(!1),C=W(!1),D=W(!1),L=W(!1),$=W(!1),_=W(!1),S=W(!1),k=W(!1),O=W([]),w=W([]),y=W(!1),M=W(0),E=W([]),R=W(!1),I=W(null),P=W(null),A=W(null),v=W("melding"),b=W(!0),V=t,B=e,J=Pi(),H=Xr(),N=!1,G=Ko(),K=te(()=>G.global.current.value.dark);wt(async()=>{await n.initializeData(),await Promise.all([r.initializeData(),o.initializeData(),s.fetchCorrectief(),i.fetchProjects(),g.initializeData()]),O.value=o.actiehouders,w.value=r.statussen,P.value=o.actiehouders.find(ne=>ne.id===f.user.id),A.value=g.projectleiders.find(ne=>ne.id===f.user.id),P.value||A.value?d.voorMijFilterActive=!0:d.voorMijFilterActive=!1}),be([()=>B.openItem,()=>J.params.id,()=>J.query.id],async([ne,re,ae])=>{if(ne&&(re||ae)){const me=re||ae,De=J.params.tab;let Ee=await n.fetchSingleReport(me);Ee?(n.setSelectedFormId(Ee.id),n.setSelectedForm(Ee),v.value=typeof De=="string"?De:"melding",await At(),m.value=!0):ea.error({message:a("errors.report_not_found",{volgnummer:me})}),await H.replace("/verbeterplein/overzicht"),n.initialized||n.initializeData()}},{immediate:!0}),be(()=>B.openActiveItem,ne=>{ne===!0&&(He(n.selectedFormId),V("remove:state"))}),be(()=>d.filters,async()=>{I.value&&clearTimeout(I.value),I.value=setTimeout(async()=>{await n.fetchReports(),await s.fetchCorrectief(),n.$patch({reports:[...n.reports]}),s.$patch({correctiefItems:[...s.correctiefItems]})},300)},{deep:!0});const Z=te(()=>{var ne,re,ae;return B.mode.toUpperCase()==="OPS"?(ne=n.reports)==null?void 0:ne.filter(me=>{var De,Ee,Ze;return((De=me.Correctief)==null?void 0:De.AkoordOPS)===!1&&me.Archived===!1&&me.PDCA===!1&&me.Type==="Melding"||((Ee=me.Correctief)==null?void 0:Ee.AkoordOPS)===!1&&me.Archived===!1&&me.PDCA===!0&&me.Type==="Melding"||((Ze=me.Correctief)==null?void 0:Ze.AkoordOPS)===!0&&me.Archived===!1&&me.PDCA===!1&&me.Type==="Melding"}):B.mode.toUpperCase()==="CORRECTIEF"?s.correctiefItems:B.mode.toUpperCase()==="PDCA"?n.pdcaReports:B.mode.toUpperCase()==="ARCHIVE"?(re=n.reports)==null?void 0:re.filter(me=>me.Archived===!0):B.mode.toUpperCase()==="ALL"?(ae=n.reports)==null?void 0:ae.filter(me=>me):[]}),le={includeScore:!0,threshold:.4,keys:["Preventief.Title","Project.ProjectNaam"]},ye=te(()=>{const ne=Z.value;return Object.values(d.filters).some(ae=>ae!==null&&ae!==""&&ae!==void 0&&ae!=="OR"&&ae!=="AND")?ne.filter(ae=>{var De,Ee,Ze,ee,U,de,ce,fe,ve,_e,pe,ke,Le,ht,$t,at,Yt,ut,ue,xe,Me,Tt,Ut,zt,Lt,Ht,Gt,Wt;const me=[];if(d.filters.projectNaam){const xt=new xn([ae],{...le,keys:["Project.ProjectNaam"]});me.push(xt.search(d.filters.projectNaam).length>0)}if(d.filters.volgNummer&&me.push(String(ae.VolgNummer||"").toLowerCase().includes(String(d.filters.volgNummer).toLowerCase())),d.filters.title){const xt=new xn([ae],{...le,keys:["Preventief.Title"]});me.push(xt.search(d.filters.title).length>0)}return d.filters.deelorder&&me.push(String(ae.Deelorder||"").toLowerCase().includes(String(d.filters.deelorder).toLowerCase())),d.filters.project&&me.push(Number((De=ae.Project)==null?void 0:De.NumberID)===Number(d.filters.project.NumberID)||String(((Ee=ae.Project)==null?void 0:Ee.NumberID)||"").toLowerCase().includes(String(d.filters.project.NumberID).toLowerCase())),d.filters.actiehouderCorrectief&&me.push(String(((ee=(Ze=ae.Correctief)==null?void 0:Ze.User)==null?void 0:ee.Name)||"").toLowerCase()===String(d.filters.actiehouderCorrectief.Name||"").toLowerCase()),d.filters.actiehouderPreventief&&me.push(String(((de=(U=ae.Preventief)==null?void 0:U.User)==null?void 0:de.Name)||"").toLowerCase()===String(d.filters.actiehouderPreventief.Name||"").toLowerCase()),d.filters.projectleider&&me.push(String((fe=(ce=ae.Project)==null?void 0:ce.ProjectLeider)==null?void 0:fe.Name.toLowerCase())===String(d.filters.projectleider.Name.toLowerCase())),d.filters.statusCorrectief&&me.push(String((_e=(ve=ae.Correctief)==null?void 0:ve.Status)==null?void 0:_e.StatusNaam)===String(d.filters.statusCorrectief.StatusNaam)),d.filters.statusPreventief&&me.push(String((ke=(pe=ae.Preventief)==null?void 0:pe.Status)==null?void 0:ke.StatusNaam)===String(d.filters.statusPreventief.StatusNaam)),d.filters.PDCA_status&&me.push(String(Ie(ae))===String(Ve(d.filters.PDCA_status))),d.filters.akoord!==void 0&&d.filters.akoord!==null&&me.push(((Le=ae.Correctief)==null?void 0:Le.AkoordOPS)===d.filters.akoord.value),d.filters.department&&(B.mode.toUpperCase()==="OPS"?me.push(String(((at=($t=(ht=ae.Correctief)==null?void 0:ht.User)==null?void 0:$t.Department)==null?void 0:at.id)||"").toLowerCase()===String(d.filters.department.id||"").toLowerCase()):B.mode.toUpperCase()==="CORRECTIEF"?me.push(String(((ue=(ut=(Yt=ae.Correctief)==null?void 0:Yt.User)==null?void 0:ut.Department)==null?void 0:ue.id)||"").toLowerCase()===String(d.filters.department.id||"").toLowerCase()):B.mode.toUpperCase()==="PDCA"?me.push(String(((Tt=(Me=(xe=ae.Preventief)==null?void 0:xe.User)==null?void 0:Me.Department)==null?void 0:Tt.id)||"").toLowerCase()===String(d.filters.department.id||"").toLowerCase()):B.mode.toUpperCase()==="ARCHIVE"&&me.push(String(((Lt=(zt=(Ut=ae.Correctief)==null?void 0:Ut.User)==null?void 0:zt.Department)==null?void 0:Lt.id)||"").toLowerCase()===String(d.filters.department.id||"").toLowerCase()||String(((Wt=(Gt=(Ht=ae.Preventief)==null?void 0:Ht.User)==null?void 0:Gt.Department)==null?void 0:Wt.id)||"").toLowerCase()===String(d.filters.department.id||"").toLowerCase())),d.filters.filterMode==="AND"?me.every(xt=>xt===!0):me.some(xt=>xt===!0)}):ne}),Ce=te(()=>B.mode.toUpperCase()!=="ARCHIVE"),Ie=ne=>{var me,De;if(!((me=ne==null?void 0:ne.Preventief)!=null&&me.Steps))return 0;const re=ne.Preventief.Steps,ae=["Obstakel","Plan","Do","Check","Act","Finished"];for(let Ee=0;Ee<ae.length;Ee++)if(!((De=re[ae[Ee]])!=null&&De.Finished))return Ee+1;return ae.length},Ve=ne=>{if(!ne)return 0;const ae=["O","P","D","C","A","F"].findIndex(me=>me.toLowerCase()===ne.toLowerCase());return ae===-1?0:ae},Ke=ne=>{_.value!==!0&&(L.value&&(L.value=!1),He(ne.data.id))},He=async ne=>{_.value!==!0&&(m.value&&(m.value=!1),n.setSelectedFormId(ne),n.setSelectedForm(n.getReportById(ne)),await At(),m.value=!0)},It=async(ne=!0)=>{k.value=!1,x.value=!1,F.value=!1,C.value=!1,D.value=!1,$.value=!1,S.value=!1,ne&&await Fe([!0,!0])},_t=async()=>{_.value||(x.value&&(x.value=!1),await At(),x.value=!0)},Ge=async()=>{_.value||(S.value&&(S.value=!1),await At(),S.value=!0)},rt=async ne=>{_.value||(y.value&&(y.value=!1),M.value=ne[0][0].value,E.value=ne[0][1].value,await At(),y.value=!0)},Ue=async()=>{_.value||(F.value&&(F.value=!1),await At(),F.value=!0)},Be=async()=>{_.value||(R.value&&(R.value=!1),await At(),R.value=!0)},Ye=async()=>{_.value||(C.value&&(C.value=!1),await At(),C.value=!0)},ot=async()=>{_.value||(D.value&&(D.value=!1),await At(),D.value=!0)},Qe=async()=>{_.value||(k.value&&(k.value=!1),await At(),k.value=!0)},Ct=async({itemIdsToPreview:ne,archive:re})=>{b.value=re,m.value=!1,k.value=!1,y.value=!1,x.value=!1,F.value=!1,R.value=!1,C.value=!1,D.value=!1,$.value=!1,S.value=!1,await At(),_.value=!0,u.value=ne,L.value=!0,b.value=re,setTimeout(()=>{_.value=!1},500)},Fe=async([ne=!0,re=!1])=>{try{if(n.loading.all||n.loading.single||s.isLoading)return;if(await Promise.all([n.fetchReports(),s.fetchCorrectief(),re?n.updateCurrentForm(!0):Promise.resolve()]),n.$patch({reports:[...n.reports]}),s.$patch({correctiefItems:[...s.correctiefItems]}),n.selectedFormId){const ae=await n.fetchReportById(n.selectedFormId);ae&&n.setSelectedForm(ae)}ne&&V("update"),await At()}catch(ae){console.error("Update failed:",ae),ea.error({message:a("errors.update_failed")})}},ze=async ne=>{var re;if(ne===!0)$.value=!1,Ye();else{ea.info({message:a("notifications.pdca_info")}),$.value=!1;const ae=n.selectedForm;if((re=ae==null?void 0:ae.Correctief)!=null&&re.id){const me=await s.schedulePDCA(ae.Correctief.id);return(me==null?void 0:me.status)===200&&(await Promise.all([n.fetchReports(!0),s.fetchCorrectief(),n.updateCurrentForm(!0)]),n.$patch({reports:[...n.reports]}),s.$patch({correctiefItems:[...s.correctiefItems]}),await At(),Fe([!0,!0])),me}else ea.error({message:a("errors.correctief_not_found")})}},mt=async ne=>{var re,ae,me,De,Ee,Ze,ee,U;try{l.promise({message:a("notifications.saving")});const de=n.selectedForm,ce={};let fe=!1,ve=!1;ne.obstakel!==void 0&&ne.obstakel!==(de==null?void 0:de.Obstakel)&&(ce.Obstakel=ne.obstakel),ne.deelorder&&ne.deelorder!==(de==null?void 0:de.Deelorder)&&(ce.Deelorder=ne.deelorder),(re=ne.project)!=null&&re.id&&ne.project.id!==((ae=de==null?void 0:de.Project)==null?void 0:ae.NumberID)&&(ce.ProjectID=ne.project.id,fe=!0),(me=ne.projectleider)!=null&&me.id&&ne.projectleider.id!==((Ee=(De=de==null?void 0:de.Project)==null?void 0:De.ProjectLeider)==null?void 0:Ee.id)&&(ve=!0);try{if(Object.keys(ce).length>0){const pe=await n.updateReport(n.selectedFormId,ce);if(!pe||pe.status!==200)throw new Error("Failed to update report")}if(ve&&((Ze=ne.project)!=null&&Ze.id)){const pe=await i.updateProject(ne.project.id,{ProjectleiderID:ne.projectleider.id});if(!pe||pe.status!==200)throw new Error("Failed to update project leader")}if(ne.deelorder&&((ee=ne.project)!=null&&ee.id)){const pe=i.getProjectById(ne.project.id);pe&&!((U=pe.Deelorders)!=null&&U.includes(ne.deelorder))&&await i.addDeelorder(ne.project.id,ne.deelorder)}await Promise.all([n.fetchReports(!0),i.fetchProjects(),n.updateCurrentForm(!0)]);const _e=n.getReportById(n.selectedFormId);_e&&(n.setSelectedForm(_e),await At(),await Fe([!0,!0]),l.resolvePromise({message:a("notifications.update_success")})),D.value=!1}catch(_e){throw console.error("Update failed:",_e),_e}}catch(de){l.rejectPromise({message:de.message||a("errors.ops_save_failed")})}},Bt=async({itemIdsToArchive:ne,archive:re})=>{try{l.promise({message:a("notifications.saving")}),u.value=[];const ae=Array.isArray(ne)?ne:[];if(ae.length===0){console.warn("No valid item IDs received for archiving.");return}const me=await n.archiveReport(ae,re);(me==null?void 0:me.status)===200&&(l.resolvePromise({message:a("notifications.archive_success")}),await(async()=>{await Promise.all([n.fetchReports(!0),s.fetchCorrectief()]),await At(),n.$patch({reports:[...n.reports]}),s.$patch({correctiefItems:[...s.correctiefItems]})})())}catch(ae){l.rejectPromise({message:ae||a("errors.archive_failed")})}finally{L.value=!1}},ya=ne=>{I.value&&clearTimeout(I.value),I.value=setTimeout(()=>{d.setFilters(ne)},300)},lt=te(()=>d.filters?Object.values(d.filters).filter(ne=>ne!==null&&ne!=="").length-1:0),tt=()=>{d.clearFilters()};be([()=>n.reports,()=>s.correctiefItems],async()=>{await At()},{deep:!0});const pt=ne=>{H.push(`/verbeterplein/melding/${ne}`)},Y=te(()=>{var Ze;const ne=((Ze=ye.value)==null?void 0:Ze.length)||0,re=70,ae=300,me=50;let De=re+(ae-re)*Math.min(ne,me)/me;const Ee=Math.max(re,Math.min(De,ae));return{minHeight:`${re}vh`,height:`${Ee}vh`,maxHeight:`${ae}vh`,overflowY:"auto"}}),Q=te(()=>{var de;const ne=((de=ye.value)==null?void 0:de.length)||0,re=80,ae=100,me=30,De=10,Ee=30;let Ze=re+(ae-re)*Math.min(ne,me)/me;const ee=Math.max(re,Math.min(Ze,ae));let U=De;return ee>re&&(U=De+(Ee-De)*(ee-re)/(ae-re)),Math.max(De,Math.min(Math.round(U),Ee))});return(ne,re)=>(T(),q("div",X_,[c(ar,{modelValue:se(d).expandedPanel,"onUpdate:modelValue":re[3]||(re[3]=ae=>se(d).expandedPanel=ae),class:"filter-panels"},{default:h(()=>[c(_a,{theme:K.value?"dark":"light"},{default:h(()=>[c(Ca,{class:"py-2"},{default:h(()=>[p("div",eC,[p("div",tC,[c(oe,{size:"small",class:"mr-2"},{default:h(()=>re[22]||(re[22]=[z("mdi-filter-variant")])),_:1,__:[22]}),re[25]||(re[25]=p("span",{class:"text-caption text-medium-emphasis mr-2"},"Match",-1)),c(Ai,{modelValue:se(d).filters.filterMode,"onUpdate:modelValue":re[0]||(re[0]=ae=>se(d).filters.filterMode=ae),mandatory:"",density:"comfortable",color:"primary",class:"filter-mode-toggle mr-2",onClick:re[1]||(re[1]=Aa(()=>{},["stop"]))},{default:h(()=>[c(ge,{value:"OR",size:"x-small",color:se(d).filters.filterMode==="OR"?"secondary":void 0},{default:h(()=>re[23]||(re[23]=[z(" Enkele ")])),_:1,__:[23]},8,["color"]),c(ge,{value:"AND",size:"x-small",color:se(d).filters.filterMode==="AND"?"primary":void 0},{default:h(()=>re[24]||(re[24]=[z(" Alle ")])),_:1,__:[24]},8,["color"])]),_:1},8,["modelValue"]),p("span",aC,j(ne.$t("verbeterplein.filters.title")),1)]),p("div",nC,[se(d).voorMijFilterActive?(T(),ie(et,{key:0,color:"secondary",size:"x-small",class:"mr-2",variant:"flat",onClick:re[2]||(re[2]=Aa(ae=>se(d).applyFilterLogin(P.value,A.value),["stop"])),disabled:!se(d).voorMijFilterActive&&N},{default:h(()=>re[26]||(re[26]=[z(" Voor mij ")])),_:1,__:[26]},8,["disabled"])):X("",!0),lt.value>0?(T(),ie(et,{key:1,color:"primary",size:"x-small",class:"mr-4",variant:"flat"},{default:h(()=>[z(j(ne.$t("verbeterplein.filters.active_count",{count:lt.value})),1)]),_:1})):X("",!0),lt.value>0?(T(),ie(ge,{key:2,color:"error",variant:"text",density:"compact",size:"small",onClick:Aa(tt,["stop"])},{default:h(()=>[c(oe,{size:"small",class:"mr-1"},{default:h(()=>re[27]||(re[27]=[z("mdi-close")])),_:1,__:[27]}),z(" "+j(ne.$t("verbeterplein.filters.clear")),1)]),_:1})):X("",!0)])])]),_:1}),c(xa,null,{default:h(()=>[p("div",rC,[c(Z_,{onFilter:ya,page:B.mode},null,8,["page"])])]),_:1})]),_:1},8,["theme"])]),_:1},8,["modelValue"]),p("div",{class:"mt-8 something",style:jn(Y.value)},[c(L_,{items:ye.value,handleArchive:Ct,RowClicked:Ke,getPDCAStep:Ie,mode:B.mode,showArchiving:Ce.value,"onUpdate:selected":re[4]||(re[4]=ae=>u.value=ae),"page-size":Q.value},null,8,["items","mode","showArchiving","page-size"])],4),_.value?X("",!0):(T(),ie(Uy,{key:0,modelValue:m.value,"onUpdate:modelValue":re[5]||(re[5]=ae=>m.value=ae),item:se(n).selectedForm,"show-correspondence":!0,"show-pdca":!0,"show-correctief-correspondence":!0,editingButton:!0,initialTab:v.value,openedFromMode:B.mode,onUpdate:Fe,"onOpen:correctiefEdit":_t,"onOpen:correspondence":Ue,"onOpen:correspondence:pdca":Be,"onOpen:pdca":Ye,"onOpen:openEditObstakel":ot,"onOpen:editPdca":Qe,"onOpen:imageGallery":rt,"onOpen:item":pt},null,8,["modelValue","item","initialTab","openedFromMode"])),_.value?X("",!0):(T(),ie(Y2,{key:1,modelValue:k.value,"onUpdate:modelValue":re[6]||(re[6]=ae=>k.value=ae),"clicked-item":se(n).selectedForm,actiehouders:O.value,statussen:w.value,onUpdate:Fe,onClose:It},null,8,["modelValue","clicked-item","actiehouders","statussen"])),_.value?X("",!0):(T(),ie(G_,{key:2,modelValue:y.value,"onUpdate:modelValue":re[7]||(re[7]=ae=>y.value=ae),"clicked-item":se(n).selectedForm,initialIndex:M.value,images:E.value},null,8,["modelValue","clicked-item","initialIndex","images"])),_.value?X("",!0):(T(),ie(t0,{key:3,modelValue:x.value,"onUpdate:modelValue":re[8]||(re[8]=ae=>x.value=ae),item:se(n).selectedForm,onUpdate:re[9]||(re[9]=ae=>{x.value=!1,Fe([!0,!0])})},null,8,["modelValue","item"])),_.value?X("",!0):(T(),ie(gi,{key:4,modelValue:F.value,"onUpdate:modelValue":re[10]||(re[10]=ae=>F.value=ae),item:se(n).selectedForm,isPDCA:!1,onUpdate:Fe,onClose:re[11]||(re[11]=ae=>F.value=!1)},null,8,["modelValue","item"])),_.value?X("",!0):(T(),ie(gi,{key:5,modelValue:R.value,"onUpdate:modelValue":re[12]||(re[12]=ae=>R.value=ae),item:se(n).selectedForm,isPDCA:!0,onUpdate:Fe,onClose:re[13]||(re[13]=ae=>R.value=!1)},null,8,["modelValue","item"])),_.value?X("",!0):(T(),ie(j2,{key:6,"model-value":C.value,"onUpdate:modelValue":re[14]||(re[14]=ae=>C.value=ae),"clicked-item":se(n).selectedForm,onUpdate:Fe,onClose:re[15]||(re[15]=ae=>C.value=!1),onOpenClone:Ge},null,8,["model-value","clicked-item"])),_.value?X("",!0):(T(),ie(i_,{key:7,modelValue:D.value,"onUpdate:modelValue":re[16]||(re[16]=ae=>D.value=ae),onSave:mt,onClose:re[17]||(re[17]=ae=>D.value=!1)},null,8,["modelValue"])),_.value?X("",!0):(T(),ie(d_,{key:8,modelValue:$.value,"onUpdate:modelValue":re[18]||(re[18]=ae=>$.value=ae),onResponse:ze},null,8,["modelValue"])),c(u_,{modelValue:L.value,"onUpdate:modelValue":re[19]||(re[19]=ae=>L.value=ae),selectedItems:u.value,onArchive:Bt,archiveMode:b.value},null,8,["modelValue","selectedItems","archiveMode"]),_.value?X("",!0):(T(),ie(c_,{key:9,modelValue:S.value,"onUpdate:modelValue":re[20]||(re[20]=ae=>S.value=ae),onUpdate:Fe,onClose:re[21]||(re[21]=ae=>{S.value=!1,D.value=!1,F.value=!1,x.value=!1,C.value=!1,$.value=!1,Fe([!0,!0])})},null,8,["modelValue"]))]))}}),Xn=dt(oC,[["__scopeId","data-v-ba9cdee4"]]),Pn=Sn("createMelding",{state:()=>({obstakel:null,project:{},rawproject:{},correctief:{},bijlagen:[],projectleider:null,correctiefSkipped:!1}),actions:{clear(){this.obstakel=null,this.project={},this.rawproject={},this.correctief={},this.bijlagen=[],this.projectleider=null,this.correctiefSkipped=!1}}}),sC={class:"step-form"},iC={class:"d-flex align-start mb-6"},lC={class:"d-flex align-center"},uC=Se({__name:"step1",props:{errors:{}},emits:["step-complete"],setup(e,{emit:t}){const a=Pn(),n=e,r=t,o=W(""),s=W(null);return wt(()=>{o.value=a.obstakel}),be(()=>o.value,i=>{(i==null?void 0:i.length)>10?setTimeout(()=>{s.value=null,r("step-complete",1,!0),a.obstakel=i},300):(r("step-complete",1,!1),a.obstakel=i)}),be(()=>n.errors,i=>{s.value=i}),(i,d)=>(T(),q("div",sC,[c(Te,{variant:"outlined",class:"card-hover-border"},{default:h(()=>[c(Re,null,{default:h(()=>[p("div",iC,[p("div",lC,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>d[1]||(d[1]=[z("mdi-alert-circle-outline")])),_:1,__:[1]}),d[2]||(d[2]=p("h3",null,"OBSTAKEL TOEVOEGEN",-1))])]),d[3]||(d[3]=p("p",{class:"text-subtitle-1 mb-6"},"Geef een korte omschrijving van de obstakel.",-1)),c(gt,{"error-messages":s.value===1?"Omschrijving is verplicht":"",rounded:"none",label:"Omschrijving",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=g=>o.value=g),counter:"1000",variant:"outlined",clearable:!0,"persistent-counter":"","persistent-hint":"","hide-details":"auto",rows:"5",class:"elevation-0"},null,8,["error-messages","modelValue"])]),_:1,__:[3]})]),_:1})]))}}),nu=dt(uC,[["__scopeId","data-v-428c135d"]]),dC={class:"d-flex align-start mb-6"},cC={class:"d-flex align-center"},fC={class:"form-fields-container"},mC={class:"field-group"},pC={key:0,class:"field-group"},vC={class:"field-group"},hC=Se({__name:"step2",props:{errors:{}},emits:["step-complete"],setup(e,{emit:t}){const a=Pn(),n=Dn(),r=eo(),o=W([]),s=W([]),i=W([]),d=W(null),g=W(null),f=W(null),l=W(null),u=e,m=t;wt(async()=>{await n.fetchProjects(),await r.fetchProjectleiders(),o.value=n.projects,i.value=r.projectleiders});const x=te(()=>{var _,S;if(((_=d.value)==null?void 0:_.NumberID)===void 0||((S=d.value)==null?void 0:S.NumberID)===null)return!1;const $=n.projects.find(k=>k.NumberID===d.value.NumberID);return!$||$&&!$.ProjectLeider}),F=$=>{if(!$)return;const _=n.projects.find(S=>(S==null?void 0:S.NumberID)===$.NumberID);n.currentProject=_||$,s.value=_?_.Deelorders||[]:[],f.value=_?_.ProjectLeider:null,L()},C=$=>{if(!$)return;const _=n.projects.find(S=>{var k;return((k=S.NumberID)==null?void 0:k.toString())===$});_?d.value=_:d.value={NumberID:parseInt($),ProjectNaam:`Project-${$}`,Deelorders:[],ProjectLeider:null},F(d.value)},D=$=>{$&&(g.value=$,L())},L=()=>{var O,w,y,M,E,R,I,P,A;a.project={projectnummer:(O=d.value)==null?void 0:O.NumberID,projectnaam:((w=d.value)==null?void 0:w.ProjectNaam)||`Project-${(y=d.value)==null?void 0:y.NumberID}`,deelorder:typeof g.value=="string"?g.value:(M=g.value)==null?void 0:M.toString(),ProjectLeider:((E=n.currentProject)==null?void 0:E.ProjectLeider)||f.value},a.projectleider=((R=n.currentProject)==null?void 0:R.ProjectLeider)||f.value,a.rawproject=d.value;const $=((I=d.value)==null?void 0:I.NumberID)!==void 0&&((P=d.value)==null?void 0:P.NumberID)!==null,_=g.value!==null&&g.value!==void 0&&g.value!=="";let S=!0;x.value&&(S=!!((A=n.currentProject)!=null&&A.ProjectLeider||f.value)),m("step-complete",2,$&&_&&S)};return be([d,g,f],()=>{L()}),be(()=>u.errors,$=>{l.value=$}),($,_)=>(T(),ie(Te,{variant:"outlined",class:"card-hover-border bg-gray100"},{default:h(()=>[c(Re,null,{default:h(()=>[p("div",dC,[p("div",cC,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>_[3]||(_[3]=[z("mdi-office-building")])),_:1,__:[3]}),_[4]||(_[4]=p("h3",null,"PROJECTGEGEVENS",-1))])]),_[8]||(_[8]=p("p",{class:"text-subtitle-1 mb-6"}," Selecteer het project waar het obstakel zich in bevindt. Als er geen projectleider is toegewezen, kun je er een selecteren. ",-1)),c(vt,{class:"mt-4 mb-6",thickness:"2"}),c(yt,null,{default:h(()=>[c(qe,{cols:"12"},{default:h(()=>[p("div",fC,[p("div",mC,[_[5]||(_[5]=p("div",{class:"text-h5"},"Project",-1)),c(sr,{modelValue:d.value,"onUpdate:modelValue":[_[0]||(_[0]=S=>d.value=S),F],items:o.value,"item-title":"NumberID","return-object":"",variant:"outlined",density:"comfortable",type:"number",class:"input-field",placeholder:"Selecteer project...","error-messages":l.value===2?"Project nummer is verplicht":"","onUpdate:search":C},null,8,["modelValue","items","error-messages"])]),x.value?(T(),q("div",pC,[_[6]||(_[6]=p("div",{class:"text-h5"},"Projectteam",-1)),c(it,{modelValue:f.value,"onUpdate:modelValue":_[1]||(_[1]=S=>f.value=S),items:i.value,"item-title":"Name","return-object":"",variant:"outlined",density:"comfortable",class:"input-field",placeholder:"Selecteer projectteam...","error-messages":l.value===4?"Projectteam is verplicht":""},null,8,["modelValue","items","error-messages"])])):X("",!0)])]),_:1}),c(qe,{cols:"12"},{default:h(()=>[p("div",vC,[_[7]||(_[7]=p("div",{class:"text-h5"},"Deelorder",-1)),c(sr,{modelValue:g.value,"onUpdate:modelValue":_[2]||(_[2]=S=>g.value=S),items:s.value,"item-title":"NumberID",type:"number","return-object":"",variant:"outlined",density:"comfortable",class:"input-field",placeholder:"Selecteer deelorder...","error-messages":l.value===3?"Deelorder is verplicht":"","onUpdate:search":D},null,8,["modelValue","items","error-messages"])])]),_:1})]),_:1})]),_:1,__:[8]})]),_:1}))}}),ru=dt(hC,[["__scopeId","data-v-337e6faf"]]),gC={class:"d-flex align-start mb-6"},yC={class:"d-flex align-center"},ou=Se({__name:"stepBijlagen",emits:["step-complete"],setup(e,{emit:t}){const a=kt().t,n=ct(),r=Pn(),o=t,s=W([]),i=f=>{s.value.push(...f),r.bijlagen=s.value,o("step-complete",3)},d=f=>{s.value=f,r.bijlagen=s.value},g=f=>{n.error({message:a("errors.upload_error",{error:f.message})})};return(f,l)=>(T(),ie(Te,{variant:"outlined",class:"card-hover-border"},{default:h(()=>[c(Re,null,{default:h(()=>[p("div",gC,[p("div",yC,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>l[0]||(l[0]=[z("mdi-paperclip")])),_:1,__:[0]}),l[1]||(l[1]=p("h3",null,"BIJLAGEN",-1))])]),l[2]||(l[2]=p("p",{class:"text-subtitle-1 mb-6"}," Voeg eventueel bestanden toe die het obstakel verduidelijken, zoals foto's, documenten of tekeningen. Dit is optioneel. ",-1)),c(Te,{flat:""},{default:h(()=>[c(Re,null,{default:h(()=>[c(tu,{onUploaded:i,onError:g}),s.value.length>0?(T(),ie(yt,{key:0,class:"mt-4"},{default:h(()=>[c(qe,{cols:"12"},{default:h(()=>[p("strong",null,"Bestanden toegevoegd: "+j(s.value.length),1),c(Oo,{files:s.value,setup:!0,onUpdateFiles:d},null,8,["files"])]),_:1})]),_:1})):X("",!0)]),_:1})]),_:1})]),_:1,__:[2]})]),_:1}))}}),bC=()=>te(()=>{const e=new Date;return e.setDate(e.getDate()-1),{to:e}}),wC={class:"d-flex align-start mb-4"},_C={class:"d-flex align-center"},CC={class:"form-fields-container"},xC={class:"field-group"},SC={class:"date-picker-wrapper"},DC={key:0,class:"error--text"},kC={class:"form-fields-container"},AC={class:"field-group"},PC=Se({__name:"stepCorrectief",props:{errors:{}},emits:["step-complete"],setup(e,{emit:t}){const a=Pn(),n=ga(),r=ha(),o=W([]),s=W([]),i=W(""),d=W(""),g=W(""),f=W(""),l=W(""),u=W(null),m=bC(),x=e,F=t;wt(async()=>{await n.fetchActiehouders(),await r.fetchStatussen("reparatieloop"),o.value=n.actiehouders,s.value=r.statussen,f.value=s.value.find(D=>D.StatusNaam.toLowerCase()==="open")}),be([i,d,g,f,l],()=>{a.correctief.user=i.value,a.correctief.deadline=d.value,a.correctief.oplossing=g.value,a.correctief.status=f.value,a.correctief.faalkosten=l.value,i.value&&d.value&&g.value&&f.value?F("step-complete",4,!0):F("step-complete",4,!1)}),be(()=>x.errors,D=>{u.value=D}),be(()=>i.value,D=>{(D==null?void 0:D.length)>0&&u.value===1&&(u.value=null)}),be(()=>d.value,D=>{(D==null?void 0:D.length)>0&&u.value===2&&(u.value=null)}),be(()=>g.value,D=>{(D==null?void 0:D.length)>0&&u.value===4&&(u.value=null)}),be(()=>f.value,D=>{(D==null?void 0:D.length)>0&&u.value===5&&(u.value=null)});const C=D=>{const L=Number(D);L<0&&(l.value="0"),L>1e6&&(l.value="1000000"),(isNaN(L)||/[a-zA-Z]/.test(D))&&(l.value="0")};return(D,L)=>(T(),ie(Te,{variant:"outlined",class:"card-hover-border bg-lightprimary"},{default:h(()=>[c(Re,null,{default:h(()=>[p("div",wC,[p("div",_C,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>L[5]||(L[5]=[z("mdi-flash")])),_:1,__:[5]}),L[6]||(L[6]=p("h3",null,"REPARATIELOOP",-1))])]),L[12]||(L[12]=p("div",{class:"text-body-2 text-medium-emphasis mb-4"}," Beschrijf hier de directe acties die ondernomen moeten worden om het obstakel op te lossen. Dit is de correctieve oplossing die ervoor zorgt dat het project door kan gaan. ",-1)),c(vt,{class:"mb-4",thickness:"2"}),c(yt,null,{default:h(()=>[c(qe,{cols:"12"},{default:h(()=>[p("div",CC,[p("div",xC,[L[7]||(L[7]=p("div",{class:"text-h5"},"Actiehouder",-1)),c(it,{modelValue:i.value,"onUpdate:modelValue":L[0]||(L[0]=$=>i.value=$),items:o.value,"item-title":"Name","return-object":"",variant:"outlined",density:"comfortable",class:"input-field",placeholder:"Selecteer wie verantwoordelijk is voor de reparatie","error-messages":u.value===5?"Actiehouder is verplicht":""},null,8,["modelValue","items","error-messages"]),L[8]||(L[8]=p("div",{class:"text-h5 mt-4"},"Deadline",-1)),p("div",SC,[c(se(vr),{class:"date-picker-field","disabled-dates":se(m),modelValue:d.value,"onUpdate:modelValue":L[1]||(L[1]=$=>d.value=$),format:"dd-MM-yyyy",error:u.value===6,placeholder:"                        "},null,8,["disabled-dates","modelValue","error"])]),u.value===6?(T(),q("small",DC,"Deadline is verplicht!")):X("",!0)])])]),_:1}),c(qe,{cols:"12"},{default:h(()=>[p("div",kC,[p("div",AC,[L[9]||(L[9]=p("div",{class:"text-h5"},"Status",-1)),c(it,{modelValue:f.value,"onUpdate:modelValue":L[2]||(L[2]=$=>f.value=$),items:s.value,"item-title":"StatusNaam","return-object":"",variant:"outlined",density:"comfortable",class:"input-field",placeholder:"Geef de huidige status van de reparatie aan","error-messages":u.value===8?"Status is verplicht":""},null,8,["modelValue","items","error-messages"]),L[10]||(L[10]=p("div",{class:"text-h5 mt-4"},"Faalkosten",-1)),c(Ot,{modelValue:l.value,"onUpdate:modelValue":[L[3]||(L[3]=$=>l.value=$),C],prefix:"â‚¬",type:"number",variant:"outlined",density:"comfortable",class:"input-field",max:1e6,min:0,placeholder:"Geschatte kosten"},null,8,["modelValue"])])])]),_:1})]),_:1}),c(yt,{class:"gap-8"},{default:h(()=>[L[11]||(L[11]=p("div",{class:"text-h5"},"Oplossing",-1)),c(gt,{modelValue:g.value,"onUpdate:modelValue":L[4]||(L[4]=$=>g.value=$),variant:"outlined",rows:"4","auto-grow":"",class:"input-field",placeholder:"Beschrijf de voorgestelde oplossing in detail","error-messages":u.value===7?"Oplossing is verplicht":""},null,8,["modelValue","error-messages"])]),_:1,__:[11]})]),_:1,__:[12]})]),_:1}))}}),su=dt(PC,[["__scopeId","data-v-07e75d9e"]]),IC={class:"d-flex align-center mb-6"},TC={class:"d-flex align-start"},$C={class:"d-flex align-center"},FC={class:"d-flex justify-space-between gap-8"},EC={class:"flex-grow-1"},NC={class:"d-flex flex-column mb-4"},RC={class:"text-body-2"},jC={class:"d-flex flex-column"},MC={class:"text-body-2"},OC={class:"flex-grow-1"},VC={class:"d-flex flex-column mb-4"},BC={class:"text-body-2"},UC={class:"d-flex flex-column"},zC={class:"text-body-2"},LC={class:"d-flex flex-column mt-6"},HC={class:"text-body-2 expandable-text"},GC={class:"d-flex align-start"},WC={class:"d-flex align-center"},JC={class:"d-flex justify-space-between gap-8"},qC={class:"flex-grow-1"},KC={class:"d-flex flex-column mb-4"},YC={class:"text-body-2"},QC={class:"d-flex flex-column"},ZC={class:"text-body-2"},XC={class:"flex-grow-1"},ex={class:"d-flex flex-column mb-4"},tx={class:"text-body-2"},ax={class:"d-flex flex-column"},nx={class:"text-body-2"},rx={class:"d-flex flex-column mt-6"},ox={class:"text-body-2 expandable-text"},sx={class:"d-flex align-start"},ix={class:"d-flex align-center"},lx={class:"bijlage-container"},ux={class:"d-flex align-center justify-center fill-height"},dx={key:1,class:"file-preview"},cx=Se({__name:"step5",setup(e){const t=Pn(),a=r=>(r==null?void 0:r.startsWith("image/"))||!1,n=r=>r?new Date(r).toLocaleDateString("nl-NL",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A";return(r,o)=>{var s,i;return T(),q("div",null,[p("div",IC,[c(oe,{color:"primary",class:"mr-2",style:{"font-size":"40px"}},{default:h(()=>o[0]||(o[0]=[z("mdi-clipboard-check-outline")])),_:1,__:[0]}),o[1]||(o[1]=p("div",null,[p("h3",{class:"text-h4 mb-0"},"Overzicht van je melding"),p("p",{class:"text-body-2 text-medium-emphasis"},"Controleer de gegevens voordat je de melding opslaat")],-1))]),c(yt,null,{default:h(()=>[c(qe,{cols:"12",md:"6"},{default:h(()=>[c(Te,{variant:"outlined",class:"card-hover-border bg-gray100 h-100"},{default:h(()=>[c(Re,null,{default:h(()=>{var d,g,f,l,u,m,x;return[p("div",TC,[p("div",$C,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>o[2]||(o[2]=[z("mdi-office-building")])),_:1,__:[2]}),o[3]||(o[3]=p("h3",{class:"text-subtitle-1 font-weight-bold"},"OBSTAKELGEGEVENS",-1))])]),c(vt,{class:"mt-4 mb-4",thickness:"2"}),p("div",FC,[p("div",EC,[p("div",NC,[o[4]||(o[4]=p("div",{class:"text-subtitle-2 font-weight-medium"},"Project nummer",-1)),p("div",RC,j(((d=se(t).project)==null?void 0:d.projectnummer)>=0&&((g=se(t).project)==null?void 0:g.projectnummer)<=99999999&&((f=se(t).project)==null?void 0:f.projectnummer)!==null?(l=se(t).project)==null?void 0:l.projectnummer:"N/A"),1)]),p("div",jC,[o[5]||(o[5]=p("div",{class:"text-subtitle-2 font-weight-medium"},"Project naam",-1)),p("div",MC,j(((u=se(t).project)==null?void 0:u.projectnaam)??"N/A"),1)])]),p("div",OC,[p("div",VC,[o[6]||(o[6]=p("div",{class:"text-subtitle-2 font-weight-medium"},"Deelorder",-1)),p("div",BC,j(((m=se(t).project)==null?void 0:m.deelorder)??"N/A"),1)]),p("div",UC,[o[7]||(o[7]=p("div",{class:"text-subtitle-2 font-weight-medium"},"Projectteam",-1)),p("div",zC,j(((x=se(t).projectleider)==null?void 0:x.Name)??"N/A"),1)])])]),p("div",LC,[o[8]||(o[8]=p("div",{class:"text-subtitle-2 font-weight-medium mb-2"},"Obstakel",-1)),p("div",HC,j(se(t).obstakel??"N/A"),1)])]}),_:1})]),_:1})]),_:1}),se(t).correctiefSkipped?X("",!0):(T(),ie(qe,{key:0,cols:"12",md:"6"},{default:h(()=>[c(Te,{variant:"outlined",class:"card-hover-border bg-lightprimary h-100"},{default:h(()=>[c(Re,null,{default:h(()=>{var d,g,f,l,u,m,x,F,C,D,L,$,_,S;return[p("div",GC,[p("div",WC,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>o[9]||(o[9]=[z("mdi-flash")])),_:1,__:[9]}),o[10]||(o[10]=p("h3",{class:"text-subtitle-1 font-weight-bold"},"CORRECTIEF",-1))])]),c(vt,{class:"mt-4 mb-4",thickness:"2"}),p("div",JC,[p("div",qC,[p("div",KC,[o[11]||(o[11]=p("div",{class:"text-subtitle-2 font-weight-medium"},"Actiehouder",-1)),p("div",YC,j(((f=(g=(d=se(t))==null?void 0:d.correctief)==null?void 0:g.user)==null?void 0:f.Name)??"N/A"),1)]),p("div",QC,[o[12]||(o[12]=p("div",{class:"text-subtitle-2 font-weight-medium"},"Status",-1)),p("div",ZC,j(((m=(u=(l=se(t))==null?void 0:l.correctief)==null?void 0:u.status)==null?void 0:m.StatusNaam)??"N/A"),1)])]),p("div",XC,[p("div",ex,[o[13]||(o[13]=p("div",{class:"text-subtitle-2 font-weight-medium"},"Deadline",-1)),p("div",tx,j(n((F=(x=se(t))==null?void 0:x.correctief)==null?void 0:F.deadline)),1)]),p("div",ax,[o[14]||(o[14]=p("div",{class:"text-subtitle-2 font-weight-medium"},"Faalkosten",-1)),p("div",nx,j((D=(C=se(t))==null?void 0:C.correctief)!=null&&D.faalkosten?`â‚¬ ${($=(L=se(t))==null?void 0:L.correctief)==null?void 0:$.faalkosten}`:"N/A"),1)])])]),p("div",rx,[o[15]||(o[15]=p("div",{class:"text-subtitle-2 font-weight-medium mb-2"},"Oplossing",-1)),p("div",ox,j(((S=(_=se(t))==null?void 0:_.correctief)==null?void 0:S.oplossing)??"N/A"),1)])]}),_:1})]),_:1})]),_:1}))]),_:1}),((i=(s=se(t))==null?void 0:s.bijlagen)==null?void 0:i.length)>0?(T(),ie(Te,{key:0,variant:"outlined",class:"h-100 card-hover-border mt-6"},{default:h(()=>[c(Re,null,{default:h(()=>[p("div",sx,[p("div",ix,[c(oe,{class:"mr-2",color:"primary"},{default:h(()=>o[16]||(o[16]=[z("mdi-paperclip")])),_:1,__:[16]}),o[17]||(o[17]=p("h3",{class:"text-subtitle-1 font-weight-bold"},"BIJLAGEN",-1))]),c(et,{color:"primary",size:"small",class:"ml-auto",variant:"flat"},{default:h(()=>{var d,g;return[z(j((g=(d=se(t))==null?void 0:d.bijlagen)==null?void 0:g.length)+" bestanden ",1)]}),_:1})]),c(vt,{class:"mt-4 mb-4",thickness:"2"}),p("div",lx,[(T(!0),q(Ae,null,We(se(t).bijlagen,d=>(T(),q("div",{key:d.id,class:"bijlage-preview"},[a(d.type)?(T(),ie(Rr,{key:0,src:d.url,alt:d.name,cover:"","aspect-ratio":1,class:"bijlage-image"},{placeholder:h(()=>[p("div",ux,[c(ia,{indeterminate:"",color:"primary"})])]),_:2},1032,["src","alt"])):(T(),q("span",dx,j(d.name),1))]))),128))])]),_:1})]),_:1})):X("",!0)])}}}),iu=dt(cx,[["__scopeId","data-v-93a51cba"]]),fx={class:"melding-stepper"},mx={class:"header-container mb-4"},px={class:"d-flex align-center"},vx={class:"header-icon"},hx={class:"header-content"},gx={class:"d-flex align-center"},yx={class:"d-flex stepper-container"},bx={class:"d-flex flex-column align-start"},wx={key:0,class:"text-caption text-medium-emphasis"},_x={class:"d-flex flex-column align-start"},Cx={key:0,class:"text-caption text-medium-emphasis"},xx={class:"stepper-navigation"},Sx=Se({__name:"MeldingStepper",emits:["closeDialog","update","goToStep"],setup(e,{emit:t}){const a=kt().t,n=Pn(),r=Kt(),o=Dn(),s=ha(),i=Xr(),d=ct(),g=W(1),f=W(new Set),l=W({}),u=W({}),m=W(!1),x=W(!1),F=W(null),C=[{value:1,title:a("verbeterplein.createReport.step1"),component:nu},{value:2,title:a("verbeterplein.createReport.step2"),component:ru},{value:3,title:a("verbeterplein.createReport.step3"),component:ou,subtitle:a("verbeterplein.createReport.step3_subtitle"),optional:!0},{value:4,title:a("verbeterplein.createReport.step4"),component:su},{value:5,title:a("verbeterplein.createReport.step5"),component:iu}],D=t,L=te(()=>{var H;return(H=u.value[3])==null?void 0:H.saveCorrespondence}),$=W(!1),_=(H,N)=>{H&&(u.value[N]=H)};wt(async()=>{await s.fetchStatussen(),F.value=s.statusListCorrectief.find(H=>{var N;return(N=H.StatusNaam)==null?void 0:N.toLowerCase().includes("afgerond")})});const S=(H,N)=>f.value.has(H)?"mdi-check-circle":`mdi-numeric-${H}-circle${N?"":"-outline"}`,k=H=>f.value.has(H),O=H=>{var N;return k(H)||!!((N=C[H-1])!=null&&N.optional)},w=()=>{g.value>1&&g.value--},y=()=>{g.value<C.length&&O(g.value)&&g.value++},M=(H=!1)=>{H?D("closeDialog",!0):m.value=!0},E=(H=!1)=>M(H),R=(H,N)=>{N===!0?f.value.add(H):f.value.delete(H)},I=H=>{const N=parseInt(H[0].replace("step",""));g.value=N,H[1]&&(l.value[N]=H[1])},P=H=>H==null||H===""||typeof H=="string"&&(H==null?void 0:H.trim())==="",A=async()=>{var K,Z;const H=[["obstakel","step1"],["project","step2"],["correctief","step4"]],N=[[n.obstakel,"Obstakel",1],[n.project.projectnummer,"Project nummer",2],[n.project.deelorder,"Project Deelorder",3],...$.value?[]:[n.correctief.user,"Actiehouder Correctief",5],...$.value?[]:[n.correctief.deadline,"Deadline Correctief",6],...$.value?[]:[n.correctief.oplossing,"Oplossing Correctief",7],...$.value?[]:[n.correctief.status,"Status Correctief",8]];let G=[];if(N.forEach(le=>{P(le[0])&&le[0]!==null&&le[0]!==void 0&&G.push(le[1]),typeof le[0]=="number"&&(le[0]<0||le[0]>99999999)&&G.push(le[1])}),G.length>0){for(const le of G)for(const ye of H)if(le!=null&&le.toLowerCase().includes((K=ye[0])==null?void 0:K.toLowerCase()))return D("goToStep",[ye[1],(Z=N.find(Ce=>Ce[1]===le))==null?void 0:Z[2]]),[!1,G];G=G.filter(le=>!!le)}return G.length>0?[!1,G]:[!0,[]]},v=()=>{R(4,!0),$.value=!0,g.value=5,n.correctiefSkipped=!0},b=async()=>{var G,K;x.value=!0;const[H,N]=await A();if(d.promise({message:a("notifications.start_melding")}),H===!0)try{const Z=o.projects.find(Ce=>Ce.NumberID===n.project.projectnummer),le={Type:"Melding",PDCA:!1,Obstakel:n.obstakel,Deelorder:n.project.deelorder,ProjectID:Z==null?void 0:Z.id,CorrespondenceIDs:{IDs:JSON.stringify(n.bijlagen)},Project:{ProjectNaam:n.project.projectnaam||`Project-${n.project.projectnummer}`,NumberID:n.project.projectnummer,ProjectleiderId:(G=n.projectleider)==null?void 0:G.id},...$.value?{Correctief:{Deadline:new Date().toISOString(),Oplossing:"afgerond",Faalkosten:0,StatusID:F.value.id,AkoordOPS:!0}}:{Correctief:{Deadline:n.correctief.deadline,Oplossing:n.correctief.oplossing,Faalkosten:n.correctief.faalkosten,ActiehouderID:n.correctief.user.id,StatusID:n.correctief.status.id}}},ye=await r.addReport(le);(ye==null?void 0:ye.status)===201&&(r.selectedFormId=ye.data.id,n.bijlagen.length>0&&((K=L.value)!=null&&K.call(L))&&await L.value(),d.resolvePromise({message:a("notifications.create_success"),duration:2500}),setTimeout(async()=>{n.clear(),x.value=!1,D("closeDialog",!0),D("update",[!0,!0]),await Promise.all([r.fetchReports(),o.fetchProjects()]),i.push("/verbeterplein/overzicht")},500))}catch(Z){x.value=!1,d.rejectPromise({message:a("errors.create_melding_failed",{error:Z})})}finally{x.value=!1}else x.value=!1,d.rejectPromise({message:a("errors.create_melding_failed_required",{error:N.join(", ")})})},V=H=>{var N,G;if(H===1||(N=C[H-1])!=null&&N.optional&&k(H-1))return!0;for(let K=1;K<H;K++)if(!((G=C[K-1])!=null&&G.optional)&&!k(K))return!1;return!0},B=H=>V(H.value)?"":"Vul eerst de vorige stappen in",J=()=>O(g.value)?"":"Vul eerst alle verplichte velden in";return(H,N)=>(T(),q("div",fx,[p("div",mx,[c(ge,{icon:"mdi-close",variant:"text",size:"small",class:"close-button",onClick:E}),p("div",px,[p("div",vx,[c(oe,{color:"primary",size:"x-large"},{default:h(()=>N[3]||(N[3]=[z("mdi-clipboard-edit-outline")])),_:1,__:[3]})]),p("div",hx,[N[7]||(N[7]=p("div",{class:"text-overline text-medium-emphasis mb-n1"},"Verbeterplein",-1)),p("div",gx,[N[6]||(N[6]=p("h2",{class:"text-h5 font-weight-medium"},[z("Nieuwe "),p("span",{class:"text-primary font-weight-bold"},"Melding")],-1)),c(et,{color:"primary",variant:"flat",size:"small",class:"ml-3",density:"comfortable"},{prepend:h(()=>[c(oe,{size:"x-small",start:""},{default:h(()=>N[4]||(N[4]=[z("mdi-pencil")])),_:1,__:[4]})]),default:h(()=>[N[5]||(N[5]=z(" Concept "))]),_:1,__:[5]})])])])]),p("div",yx,[c(Yo,{modelValue:g.value,"onUpdate:modelValue":N[0]||(N[0]=G=>g.value=G),direction:"vertical",class:"mr-6 steps-list"},{default:h(()=>[(T(),q(Ae,null,We(C,G=>(T(),q(Ae,{key:G.value},[V(G.value)?(T(),ie(oa,{key:1,value:G.value,class:"justify-start"},{default:h(()=>[c(oe,{start:"",class:"mr-2"},{default:h(()=>[z(j(S(G.value,g.value===G.value)),1)]),_:2},1024),p("div",_x,[z(j(G.title)+" ",1),G.subtitle?(T(),q("span",Cx,j(G.subtitle),1)):X("",!0)])]),_:2},1032,["value"])):(T(),ie(ka,{key:0,text:B(G),location:"right"},{activator:h(({props:K})=>[c(oa,pa({value:G.value,disabled:!V(G.value),class:"justify-start"},{ref_for:!0},K),{default:h(()=>[c(oe,{start:"",class:"mr-2"},{default:h(()=>[z(j(S(G.value,g.value===G.value)),1)]),_:2},1024),p("div",bx,[z(j(G.title)+" ",1),G.subtitle?(T(),q("span",wx,j(G.subtitle),1)):X("",!0)])]),_:2},1040,["value","disabled"])]),_:2},1032,["text"]))],64))),64))]),_:1},8,["modelValue"]),c(Zr,{modelValue:g.value,"onUpdate:modelValue":N[1]||(N[1]=G=>g.value=G),class:"flex-grow-1 step-body-container"},{default:h(()=>[(T(),q(Ae,null,We(C,G=>c(sa,{key:G.value,value:G.value},{default:h(()=>[(T(),ie(Zo(G.component),{ref_for:!0,ref:K=>_(K,G.value),errors:l.value,onStepComplete:R,onGoToStep:I,onCloseDialog:E,saveCorrespondence:G.value===5?L.value:void 0},null,40,["errors","saveCorrespondence"]))]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),p("div",xx,[g.value>1?(T(),ie(ge,{key:0,variant:"outlined",onClick:w},{default:h(()=>N[8]||(N[8]=[z(" Terug ")])),_:1,__:[8]})):X("",!0),c(Dt),g.value<C.length?(T(),q(Ae,{key:1},[g.value===4?(T(),ie(ge,{key:0,color:"secondary",class:"mr-2",onClick:N[2]||(N[2]=G=>v())},{default:h(()=>N[9]||(N[9]=[z("Overslaan")])),_:1,__:[9]})):X("",!0),O(g.value)?(T(),ie(ge,{key:2,color:"primary",onClick:y},{default:h(()=>N[11]||(N[11]=[z(" Volgende ")])),_:1,__:[11]})):(T(),ie(ka,{key:1,text:J(),location:"top"},{activator:h(({props:G})=>[c(ge,pa({color:"primary",onClick:y,disabled:!O(g.value)},G),{default:h(()=>N[10]||(N[10]=[z(" Volgende ")])),_:2,__:[10]},1040,["disabled"])]),_:1},8,["text"]))],64)):X("",!0),g.value===C.length?(T(),ie(ge,{key:2,color:"secondary",onClick:b,loading:x.value,"prepend-icon":"mdi-content-save"},{default:h(()=>N[12]||(N[12]=[z(" Indienen ")])),_:1,__:[12]},8,["loading"])):X("",!0)])]))}}),Dx=dt(Sx,[["__scopeId","data-v-08edad1e"]]),kx={class:"melding-stepper"},Ax={class:"header-container mb-4"},Px={class:"d-flex align-center"},Ix={class:"header-icon"},Tx={class:"header-content"},$x={class:"d-flex align-center"},Fx={class:"stepper-nav px-4 mb-6"},Ex={class:"stepper-steps"},Nx=["onClick"],Rx={class:"step-circle"},jx={key:1},Mx={class:"step-label"},Ox={key:0,class:"step-subtitle"},Vx={class:"step-content px-4"},Bx={class:"stepper-navigation px-4"},Ux=Se({__name:"MeldingStepperMobile",emits:["closeDialog","update","goToStep"],setup(e,{emit:t}){const a=kt().t,n=Pn(),r=Kt(),o=Dn(),s=Xr(),i=ct(),d=W(1),g=W(new Set),f=W({}),l=W({}),u=W(!1),m=W(!1),x=[{value:1,title:a("verbeterplein.createReport.step1"),component:nu},{value:2,title:a("verbeterplein.createReport.step2"),component:ru},{value:3,title:a("verbeterplein.createReport.step3"),component:ou,subtitle:a("verbeterplein.createReport.step3_subtitle"),optional:!0},{value:4,title:a("verbeterplein.createReport.step4"),component:su},{value:5,title:a("verbeterplein.createReport.step5"),component:iu}],F=t,C=te(()=>{var b;return(b=l.value[3])==null?void 0:b.saveCorrespondence}),D=(b,V)=>{b&&(l.value[V]=b)},L=b=>g.value.has(b),$=b=>{var V;return L(b)||!!((V=x[b-1])!=null&&V.optional)},_=()=>{d.value>1&&d.value--},S=()=>{d.value<x.length&&$(d.value)&&d.value++},k=(b=!1)=>{b?F("closeDialog",!0):u.value=!0},O=(b=!1)=>k(b),w=(b,V)=>{V===!0?g.value.add(b):g.value.delete(b)},y=b=>{F("update",b)},M=b=>{const V=parseInt(b[0].replace("step",""));d.value=V,b[1]&&(f.value[V]=b[1])},E=b=>b==null||b===""||typeof b=="string"&&(b==null?void 0:b.trim())==="",R=async()=>{var J;const b=[["obstakel","step1"],["project","step2"],["correctief","step4"]],V=[[n.obstakel,"Obstakel",1],[n.project.projectnummer,"Project nummer",2],[n.project.deelorder,"Project Deelorder",3],[n.correctief.user,"Actiehouder Correctief",5],[n.correctief.deadline,"Deadline Correctief",6],[n.correctief.oplossing,"Oplossing Correctief",7],[n.correctief.status,"Status Correctief",8]],B=[];if(V.forEach(H=>{E(H[0])&&B.push(H[1])}),B.length>0){for(const H of B)for(const N of b)if(H.toLowerCase().includes(N[0].toLowerCase()))return F("goToStep",[N[1],(J=V.find(G=>G[1]===H))==null?void 0:J[2]]),[!1,B];return[!1,B]}return[!0,[]]},I=async()=>{var B,J;m.value=!0;const[b,V]=await R();if(i.promise({message:a("notifications.start_melding"),duration:2500}),b===!0)try{const H=o.projects.find(K=>K.NumberID===n.project.projectnummer),N={Type:"Melding",PDCA:!1,Obstakel:n.obstakel,Deelorder:n.project.deelorder,ProjectID:H==null?void 0:H.id,CorrespondenceIDs:{IDs:JSON.stringify(n.bijlagen)},Project:{ProjectNaam:n.project.projectnaam,NumberID:n.project.projectnummer,Deelorders:[],ProjectleiderId:(B=n.projectleider)==null?void 0:B.id},Correctief:{Deadline:n.correctief.deadline,Oplossing:n.correctief.oplossing,Faalkosten:n.correctief.faalkosten,ActiehouderID:n.correctief.user.id,StatusID:n.correctief.status.id}},G=await r.addReport(N);(G==null?void 0:G.status)===201&&(r.selectedFormId=G.data.id,n.bijlagen.length>0&&((J=C.value)!=null&&J.call(C))&&await C.value(),i.resolvePromise({message:a("notifications.create_success"),duration:2500}),setTimeout(()=>{m.value=!1,F("closeDialog",!0),F("update",[!0,!0]),r.fetchReports(),s.push("/verbeterplein/overzicht")},500))}catch(H){m.value=!1,i.rejectPromise({message:a("errors.create_melding_failed",{error:H})})}finally{m.value=!1}else m.value=!1,i.rejectPromise({message:a("errors.create_melding_failed_required",{error:V.join(", ")})})},P=b=>{A(b.value)&&(d.value=b.value)},A=b=>{var V,B;if(b===1||(V=x[b-1])!=null&&V.optional&&L(b-1))return!0;for(let J=1;J<b;J++)if(!((B=x[J-1])!=null&&B.optional)&&!L(J))return!1;return!0},v=()=>$(d.value)?"":"Vul eerst alle verplichte velden in";return(b,V)=>(T(),q("div",kx,[p("div",Ax,[c(ge,{icon:"mdi-close",variant:"text",size:"small",class:"close-button",onClick:O}),p("div",Px,[p("div",Ix,[c(oe,{color:"primary",size:"x-large"},{default:h(()=>V[1]||(V[1]=[z("mdi-clipboard-edit-outline")])),_:1,__:[1]})]),p("div",Tx,[V[5]||(V[5]=p("div",{class:"text-overline text-medium-emphasis mb-n1"},"Verbeterplein",-1)),p("div",$x,[V[4]||(V[4]=p("h2",{class:"text-h5 font-weight-medium"},[z("Nieuwe "),p("span",{class:"text-primary font-weight-bold"},"Melding")],-1)),c(et,{color:"primary",variant:"flat",size:"small",class:"ml-3",density:"comfortable"},{prepend:h(()=>[c(oe,{size:"x-small",start:""},{default:h(()=>V[2]||(V[2]=[z("mdi-pencil")])),_:1,__:[2]})]),default:h(()=>[V[3]||(V[3]=z(" Concept "))]),_:1,__:[3]})])])])]),p("div",Fx,[p("div",Ex,[(T(),q(Ae,null,We(x,B=>p("div",{key:B.value,class:we(["step-item",{active:d.value===B.value,completed:L(B.value),disabled:!A(B.value)}]),onClick:J=>P(B)},[p("div",Rx,[L(B.value)?(T(),ie(oe,{key:0,size:"small"},{default:h(()=>V[6]||(V[6]=[z("mdi-check")])),_:1,__:[6]})):(T(),q("span",jx,j(B.value),1))]),p("div",Mx,[z(j(B.title)+" ",1),B.subtitle?(T(),q("span",Ox,j(B.subtitle),1)):X("",!0)])],10,Nx)),64))])]),p("div",Vx,[c(Zr,{modelValue:d.value,"onUpdate:modelValue":V[0]||(V[0]=B=>d.value=B)},{default:h(()=>[(T(),q(Ae,null,We(x,B=>c(sa,{key:B.value,value:B.value},{default:h(()=>[(T(),ie(Zo(B.component),{ref_for:!0,ref:J=>D(J,B.value),errors:f.value,onStepComplete:w,onGoToStep:M,onCloseDialog:O,onUpdate:y,saveCorrespondence:B.value===5?C.value:void 0},null,40,["errors","saveCorrespondence"]))]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),p("div",Bx,[d.value>1?(T(),ie(ge,{key:0,variant:"outlined",onClick:_,density:"comfortable"},{default:h(()=>V[7]||(V[7]=[z(" Terug ")])),_:1,__:[7]})):X("",!0),c(Dt),d.value<x.length?(T(),q(Ae,{key:1},[$(d.value)?(T(),ie(ge,{key:1,color:"primary",onClick:S,density:"comfortable"},{default:h(()=>V[9]||(V[9]=[z(" Volgende ")])),_:1,__:[9]})):(T(),ie(ka,{key:0,text:v(),location:"top"},{activator:h(({props:B})=>[c(ge,pa({color:"primary",onClick:S,disabled:!$(d.value)},B,{density:"comfortable"}),{default:h(()=>V[8]||(V[8]=[z(" Volgende ")])),_:2,__:[8]},1040,["disabled"])]),_:1},8,["text"]))],64)):X("",!0),d.value===x.length?(T(),ie(ge,{key:2,color:"secondary",onClick:I,loading:m.value,"prepend-icon":"mdi-content-save",density:"comfortable"},{default:h(()=>V[10]||(V[10]=[z(" Indienen ")])),_:1,__:[10]},8,["loading"])):X("",!0)])]))}}),zx=dt(Ux,[["__scopeId","data-v-e8a9b7ce"]]),Lx={key:0},Hx={key:0},Gx={key:0},Wx={key:0},Jx={key:0},qx=Se({__name:"Verbeterplein",setup(e){const t=Pi(),{t:a}=kt(),{mobile:n}=ki(),r=Xu(),o=Kt(),s=Dn(),i=ga(),d=ha(),g=W("melding"),f=W(!1),l=W("melding"),u=W(0),m=W(0),x=W(0),F=W(0),C=W(0),D=W(0),L=W(!0),$=W(!1),_=W(!1),S=W(!1),k=te(()=>n.value),O=te(()=>{switch(g.value){case"melding":return`- ${a("verbeterplein.tabs.ops")}`;case"correctief":return`- ${a("verbeterplein.tabs.correctief")}`;case"pdca":return`- ${a("verbeterplein.tabs.pdca")}`;case"archived":return`- ${a("verbeterplein.tabs.archived")}`;default:return""}}),w=()=>{f.value&&(f.value=!1),setTimeout(()=>{l.value="melding",f.value=!0},25)},y=(I=!1)=>{if(I){f.value=!1;return}f.value=!1,At(()=>{l.value="melding",L.value=!0})},M=async()=>{await E()};be(g,()=>{r.setPageInfo(`Verbeterplein ${O.value}`,[{title:a("verbeterplein.breadcrumbs.home"),href:"/"},{title:a("verbeterplein.breadcrumbs.verbeterplein"),href:"/verbeterplein/overzicht"}])}),be(()=>t.params,async I=>{I.id&&(S.value=!0)},{immediate:!0}),wt(async()=>{await E(),L.value=!0,r.setPageInfo(`Verbeterplein ${O.value}`,[{title:a("verbeterplein.breadcrumbs.home"),href:"/"},{title:a("verbeterplein.breadcrumbs.verbeterplein"),href:"/verbeterplein/overzicht"}]),setTimeout(()=>{const I=document.querySelector(".dialog-stepper");I==null||I.addEventListener("cancel",P=>{$.value=P.target!==I}),I==null||I.addEventListener("close",P=>{$.value&&(f.value=!0,$.value=!1)})},125)});async function E(I=!1){await o.initializeData(),R(),await s.fetchProjects(),await i.initializeData(),await d.initializeData(),I&&await o.fetchReports()}function R(){m.value=o.lengths.all,u.value=o.lengths.ops,x.value=o.lengths.correctief,F.value=o.lengths.pdca,C.value=o.lengths.financed,D.value=o.lengths.archived}return(I,P)=>(T(),q(Ae,null,[c(_i,{fluid:""},{default:h(()=>[c(Te,null,{default:h(()=>[c(qe,{cols:"12"},{default:h(()=>[k.value?(T(),ie(ge,{key:0,color:"primary",onClick:w,size:"large",elevation:"3",block:""},{default:h(()=>[c(oe,{start:"",icon:"mdi-plus"}),z(" "+j(I.$t("verbeterplein.buttons.new_report")),1)]),_:1})):X("",!0),c(Yo,{"fixed-tabs":"",modelValue:g.value,"onUpdate:modelValue":P[0]||(P[0]=A=>g.value=A),"background-color":"primary",outline:"",dark:""},{default:h(()=>[c(oa,null,{default:h(()=>[c(oe,{size:"20",class:"v-icon--start"},{default:h(()=>P[5]||(P[5]=[z("mdi-inbox-arrow-down-outline")])),_:1,__:[5]}),k.value?X("",!0):(T(),q("span",Lx,j(I.$t("verbeterplein.tabs.ops")),1)),c(Jn,{content:u.value,class:"mr-2 ml-2",color:"#d02d00",floating:""},null,8,["content"])]),_:1}),c(oa,null,{default:h(()=>[c(oe,{size:"20",class:"v-icon--start"},{default:h(()=>P[6]||(P[6]=[z("mdi-flash-outline")])),_:1,__:[6]}),k.value?X("",!0):(T(),q("span",Hx,j(I.$t("verbeterplein.tabs.correctief")),1)),c(Jn,{content:x.value,class:"mr-2 ml-2",color:"primary",floating:""},null,8,["content"])]),_:1}),c(oa,null,{default:h(()=>[c(oe,{class:"v-icon--start"},{default:h(()=>P[7]||(P[7]=[z("mdi-shield-outline")])),_:1,__:[7]}),k.value?X("",!0):(T(),q("span",Gx,j(I.$t("verbeterplein.tabs.pdca")),1)),c(Jn,{content:F.value,class:"mr-2 ml-2",color:"secondary",floating:""},null,8,["content"])]),_:1}),c(oa,null,{default:h(()=>[c(oe,{size:"20",class:"v-icon--start"},{default:h(()=>P[8]||(P[8]=[z("mdi-view-list")])),_:1,__:[8]}),k.value?X("",!0):(T(),q("span",Wx,j(I.$t("verbeterplein.tabs.all")),1)),c(Jn,{content:m.value,class:"mr-2 ml-2",color:"#d8d8d8",floating:""},null,8,["content"])]),_:1}),c(oa,null,{default:h(()=>[c(oe,{class:"v-icon--start"},{default:h(()=>P[9]||(P[9]=[z("mdi-archive-outline")])),_:1,__:[9]}),k.value?X("",!0):(T(),q("span",Jx,j(I.$t("verbeterplein.tabs.archived")),1)),c(Jn,{content:D.value,class:"mr-2 ml-2",color:"black",floating:""},null,8,["content"])]),_:1})]),_:1},8,["modelValue"]),c(Zr,{modelValue:g.value,"onUpdate:modelValue":P[3]||(P[3]=A=>g.value=A),disabled:"",touch:!1,class:"mt-5",transition:"fade-transition"},{default:h(()=>[c(sa,{value:0},{default:h(()=>[(T(),ie(qn,null,{fallback:h(()=>[z(j(I.$t("general.fallback.loading")),1)]),default:h(()=>[c(Xn,{openItem:S.value,mode:"OPS",onUpdate:R},null,8,["openItem"])]),_:1}))]),_:1}),c(sa,{value:1},{default:h(()=>[(T(),ie(qn,null,{fallback:h(()=>[z(j(I.$t("general.fallback.loading")),1)]),default:h(()=>[c(Xn,{openItem:S.value,mode:"CORRECTIEF",onUpdate:R},null,8,["openItem"])]),_:1}))]),_:1}),c(sa,{value:2},{default:h(()=>[(T(),ie(qn,null,{fallback:h(()=>[z(j(I.$t("general.fallback.loading")),1)]),default:h(()=>[c(Xn,{openItem:S.value,mode:"PDCA",onUpdate:R,openActiveItem:_.value,"onRemove:state":P[1]||(P[1]=A=>_.value=!1)},null,8,["openItem","openActiveItem"])]),_:1}))]),_:1}),c(sa,{value:3},{default:h(()=>[(T(),ie(qn,null,{fallback:h(()=>[z(j(I.$t("general.fallback.loading")),1)]),default:h(()=>[c(Xn,{openItem:S.value,mode:"ALL",onUpdate:R},null,8,["openItem"])]),_:1}))]),_:1}),c(sa,{value:4},{default:h(()=>[(T(),ie(qn,null,{fallback:h(()=>[z(j(I.$t("general.fallback.loading")),1)]),default:h(()=>[c(Xn,{openItem:S.value,mode:"ARCHIVE",openActiveItem:_.value,"onRemove:state":P[2]||(P[2]=A=>_.value=!1)},null,8,["openItem","openActiveItem"])]),_:1}))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),k.value?X("",!0):(T(),ie(ge,{key:0,color:"primary",onClick:w,class:"floating-btn",size:"large",elevation:"3"},{default:h(()=>[c(oe,{start:"",icon:"mdi-plus"}),z(" "+j(I.$t("verbeterplein.buttons.new_report")),1)]),_:1})),c(va,{modelValue:f.value,"onUpdate:modelValue":P[4]||(P[4]=A=>f.value=A),fullscreen:k.value,width:k.value?"100%":"80%",transition:k.value?"dialog-bottom-transition":"dialog-transition",class:"dialog-container"},{default:h(()=>[(T(),ie(Zo(k.value?zx:Dx),{onCloseDialog:y,onUpdate:M,class:"stepper-content"},null,32))]),_:1},8,["modelValue","fullscreen","width","transition"])]),_:1}),P[10]||(P[10]=p("br",null,null,-1)),P[11]||(P[11]=p("br",null,null,-1))],64))}}),oS=dt(qx,[["__scopeId","data-v-e2d10292"]]);export{oS as default};
