import{g as n,aZ as c,a1 as i,X as l,cH as u,a7 as m,N as g,a as h,am as d,o as p}from"./index-CRgOuqdl.js";const f={class:"flex justify-center items-center h-screen"},v=n({__name:"callback",setup(_){const a=m(),t=c(),r=i();return l(async()=>{var o;t.promise({message:"Logging in..."});try{if(!r.isAuthenticated||!((o=r.user)!=null&&o.id))throw new Error("Authentication failed");Promise.resolve().then(async()=>{try{await u.connect()}catch(s){console.warn("Security service connection failed (non-critical):",s)}}),t.resolvePromise({message:"You are now logged in.",duration:2e3});const e=localStorage.getItem("redirectPath")||"/verbeterplein/overzicht";localStorage.removeItem("redirectPath"),a.push(e)}catch(e){console.error("Login error:",e),r.logout(),t.rejectPromise({title:"Login Failed",message:"Please try again. If it happens again, please contact support."}),a.push("/auth/login")}}),(o,e)=>(p(),g("div",f,[h(d,{indeterminate:"",color:"primary"})]))}});export{v as default};
