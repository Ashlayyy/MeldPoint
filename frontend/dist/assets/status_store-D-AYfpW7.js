import{bt as r,aY as m,br as p,bw as C,bx as w,bq as P,aZ as A}from"./index-5wn-0GR-.js";async function n(){const t="filterUsers",e=r.get(t);if(e)return{status:200,data:e};const i=await m.get("undefined/user/filterUsers");return r.set(t,i.data.data,{ttl:2*60*1e3}),{status:i.status,data:i.data.data}}const l=P.global.t,h=A(),o=w(),d="ðŸ‘¤ [ActiehouderStore]",f={request:"color: #2196F3",cache:"color: #4CAF50",error:"color: #F44336",info:"color: #9C27B0"},$=p("actiehouder",{state:()=>({actiehouders:[],loading:{single:!1,all:!1},initialized:!1,actiehouderCache:new Map,initializationPromise:null}),getters:{actiehouderNames:t=>t.actiehouders.map(e=>e.Name),getActiehouderByName:t=>e=>{const i=Array.from(t.actiehouderCache.values()).find(s=>s.Name===e);if(i)return i;const a=t.actiehouders.find(s=>s.Name===e);return a!=null&&a.id&&t.actiehouderCache.set(a.id,a),a},getActiehouderById:t=>e=>{if(t.actiehouderCache.has(e))return t.actiehouderCache.get(e);const i=t.actiehouders.find(a=>a.id===e);return i&&t.actiehouderCache.set(e,i),i}},actions:{async initialize(){if(!this.initialized)return this.initializationPromise?this.initializationPromise:(this.initializationPromise=o.executeRequest("actiehouder","initialization",async()=>{this.loading.all=!0;try{const t=await n();t.status===200&&(this.actiehouders=t.data||[]),this.initialized=!0}catch(t){throw console.error(`${d} %c Initialization failed`,f.error,t),h.error({message:l("errors.fetch_error",{error:t})}),t}finally{this.initializationPromise=null,this.loading.all=!1}}),this.initializationPromise)},refreshData:C.debounce(async function(){return this.initialized?o.executeRequest("actiehouder","refresh",async()=>{const t=await n();t.status===200&&(this.actiehouders=t.data||[])}):this.initialize()},1e3),async fetchActiehouders(){return this.initialized?o.executeRequest("actiehouder","fetchActiehouders",async()=>{this.loading.all=!0;try{const t=await n();if(t.status===200)this.actiehouders=t.data||[];else throw new Error(JSON.stringify(t))}catch(t){console.error(`${d} %c Fetch failed`,f.error,t),h.error({message:l("errors.fetch_error",{error:t})})}finally{this.loading.all=!1}}):this.initialize()},async initializeData(){return this.initialize()},clearCache(){this.actiehouderCache.clear()}}});async function c(){const t="statuses",e=r.get(t);if(e)return{status:200,data:e};const i=await m.get("undefined/status");return r.set(t,i.data.data,{ttl:5*60*1e3}),{status:i.status,data:i.data.data}}const y=P.global.t,z=A(),u=w(),g="ðŸ”„ [StatusStore]",S={request:"color: #2196F3",cache:"color: #4CAF50",error:"color: #F44336",info:"color: #9C27B0"},x=p("status",{state:()=>({statussen:[],statusListCorrectief:[],loading:{single:!1,all:!1},initialized:!1,statusCache:new Map,initializationPromise:null}),getters:{allStatussen:t=>t.statussen.filter(i=>i.StatusType==="all").map(i=>i),correctiefStatussen:t=>t.statussen.filter(i=>i.StatusType==="all").map(i=>i),getStatusByName:t=>e=>{if(t.statusCache.has(e))return t.statusCache.get(e);const i=t.statussen.find(a=>a.StatusNaam===e);return i&&t.statusCache.set(e,i),i}},actions:{async initialize(){if(!this.initialized)return this.initializationPromise?this.initializationPromise:(this.initializationPromise=u.executeRequest("status","initialization",async()=>{var t;this.loading.all=!0;try{const e=await c();e.status===200&&(this.statussen=(t=e.data)==null?void 0:t.filter(i=>i.StatusType==="all"),this.statusListCorrectief=e.data),this.initialized=!0}catch(e){throw console.error(`${g} %c Initialization failed`,S.error,e),z.error({message:y("errors.fetch_error",{error:e})}),e}finally{this.initializationPromise=null,this.loading.all=!1}}),this.initializationPromise)},refreshData:C.debounce(async function(){return this.initialized?u.executeRequest("status","refresh",async()=>{var e;const t=await c();t.status===200&&(this.statussen=(e=t.data)==null?void 0:e.filter(i=>i.StatusType==="all"),this.statusListCorrectief=t.data)}):this.initialize()},1e3),async fetchStatussen(t){return!this.initialized&&!t?this.initialize():u.executeRequest("status","fetchStatussen",async()=>{var e,i;this.loading.all=!0;try{const a=await c();if(a.status===200)t==="reparatieloop"?this.statussen=(e=a.data)==null?void 0:e.filter(s=>s.StatusType==="all"):(this.statussen=(i=a.data)==null?void 0:i.filter(s=>s.StatusType==="all"),this.statusListCorrectief=a.data);else throw new Error(JSON.stringify(a))}catch(a){console.error(`${g} %c Fetch failed`,S.error,a),z.error({message:y("errors.fetch_error",{error:a})})}finally{this.loading.all=!1}})},async initializeData(){return this.initialize()},clearCache(){this.statusCache.clear()}}});export{x as a,$ as u};
