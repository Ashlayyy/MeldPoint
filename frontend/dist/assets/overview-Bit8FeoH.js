import{_ as S}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-BOmi3NWL.js";import{_ as V}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DQjgUtM8.js";import{g as C,a3 as A,aZ as O,W as o,X as x,N as I,a as i,w as e,V as B,O as N,aY as D,o as m,b as E,cn as R,f as _,an as u,e as l,t as d,c as v,J as T,Q as $}from"./index-5wn-0GR-.js";const M=C({__name:"overview",setup(z){const{t}=A(),g=O(),y=o({title:t("admin.email.overview")}),b=o([{title:t("admin.title"),disabled:!1,href:"#"},{title:t("admin.email.overview"),disabled:!0,href:"#"}]),r=o(!1),k=[{title:t("admin.email.table.date_sent"),key:"createdAt",align:"start"},{title:t("admin.email.table.status"),key:"deliveryStatus",align:"start"},{title:t("admin.email.table.recipient"),key:"messageId",align:"start"},{title:t("admin.email.table.opened"),key:"openedAt",align:"start"},{title:t("admin.email.table.opened_from"),key:"ipOpened",align:"start"},{title:t("admin.email.table.actions"),key:"actions",align:"end"}],c=o([]),f=async()=>{r.value=!0;try{const s=await D.get("/email/tracking/all");s.data.data?c.value=s.data.data:c.value=[]}catch(s){g.error({message:t("errors.fetch_error",{error:s||"Fetch error"})})}finally{r.value=!1}},h=s=>{switch(s){case"sent":return"info";case"delivered":return"success";case"opened":return"primary";case"bounced":return"error";default:return"warning"}};return x(()=>{f()}),(s,n)=>{const w=$("IconRefresh");return m(),I(N,null,[i(S,{title:y.value.title,breadcrumbs:b.value},null,8,["title","breadcrumbs"]),i(B,null,{default:e(()=>[i(E,{cols:"12"},{default:e(()=>[i(V,{title:"Email Tracking Overview"},{action:e(()=>[i(_,{color:"primary",onClick:f,loading:r.value},{default:e(()=>[i(w,{class:"mr-1"}),l(" "+d(s.$t("general.actions.refresh")),1)]),_:1},8,["loading"])]),default:e(()=>[i(R,{headers:k,items:c.value,loading:r.value,hover:""},{"item.createdAt":e(({item:a})=>[l(d(new Date(a.createdAt).toLocaleString()),1)]),"item.deliveryStatus":e(({item:a})=>[i(T,{color:h(a.deliveryStatus),size:"small"},{default:e(()=>[l(d(a.deliveryStatus),1)]),_:2},1032,["color"])]),"item.openedAt":e(({item:a})=>[a.openedAt?(m(),v(u,{key:0,color:"success"},{default:e(()=>n[0]||(n[0]=[l("mdi-check")])),_:1,__:[0]})):(m(),v(u,{key:1},{default:e(()=>n[1]||(n[1]=[l("mdi-minus")])),_:1,__:[1]}))]),"item.ipOpened":e(({item:a})=>{var p;return[l(d((p=a.ipOpened)!=null&&p.length?a.ipOpened[0]:"-"),1)]}),"item.actions":e(({item:a})=>[i(_,{icon:"",variant:"text",size:"small"},{default:e(()=>[i(u,null,{default:e(()=>n[2]||(n[2]=[l("mdi-information")])),_:1,__:[2]})]),_:1})]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1})],64)}}});export{M as default};
