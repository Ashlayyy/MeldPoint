import{u as R}from"./department_store-BcJv0kvu.js";import{g as $,S as g,W as f,X as j,c as z,w as t,b1 as k,o as F,a as e,b as c,d as _,f as i,e as o,an as V,ba as D,cn as L,u as W,V as b,aR as w,t as X,aS as y,b3 as G,b4 as H,bv as T,ae as N,bu as S}from"./index-CRgOuqdl.js";const J={class:"d-flex align-center justify-space-between mb-4"},K={class:"text-h5"},Z=$({__name:"DepartmentManager",setup(P){const d=R(),A=[{title:"Name",align:"start",key:"name"},{title:"Description",align:"start",key:"description"},{title:"Created At",align:"start",key:"createdAt"},{title:"Actions",key:"actions",sortable:!1,align:"center"}],p=g(()=>d.departments),r=f(!1),m=f(!1),u=f(-1),l=f({id:"",name:"",description:""}),v={id:"",name:"",description:""},I=g(()=>u.value===-1?"New Department":"Edit Department");j(async()=>{await d.initializeData()});function B(){u.value=-1,l.value={...v},r.value=!0}function U(s){u.value=p.value.indexOf(s),l.value={...s},r.value=!0}function x(){r.value=!1,l.value={...v},u.value=-1}async function M(){u.value>-1?await d.updateDepartment(l.value.id,{name:l.value.name,description:l.value.description}):await d.createDepartment({name:l.value.name,description:l.value.description}),x()}function q(s){u.value=p.value.indexOf(s),l.value={...s},m.value=!0}function C(){m.value=!1,l.value={...v},u.value=-1}async function E(){await d.deleteDepartment(l.value.id),C()}return(s,a)=>(F(),z(k,{fluid:""},{default:t(()=>[e(b,null,{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[_("div",J,[a[6]||(a[6]=_("h1",{class:"text-h4"},"Department Management",-1)),e(i,{color:"primary",onClick:B},{default:t(()=>[e(V,{left:""},{default:t(()=>a[4]||(a[4]=[o("mdi-plus")])),_:1,__:[4]}),a[5]||(a[5]=o(" Add Department "))]),_:1,__:[5]})]),e(D,null,{default:t(()=>[e(L,{headers:A,items:p.value,loading:W(d).isLoading,class:"elevation-1"},{"item.actions":t(({item:n})=>[e(i,{icon:"",variant:"text",color:"primary",onClick:O=>U(n)},{default:t(()=>[e(V,null,{default:t(()=>a[7]||(a[7]=[o("mdi-pencil")])),_:1,__:[7]})]),_:2},1032,["onClick"]),e(i,{icon:"",variant:"text",color:"error",onClick:O=>q(n)},{default:t(()=>[e(V,null,{default:t(()=>a[8]||(a[8]=[o("mdi-delete")])),_:1,__:[8]})]),_:2},1032,["onClick"])]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1}),e(S,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=n=>r.value=n),"max-width":"500px"},{default:t(()=>[e(D,null,{default:t(()=>[e(w,null,{default:t(()=>[_("span",K,X(I.value),1)]),_:1}),e(y,null,{default:t(()=>[e(k,null,{default:t(()=>[e(b,null,{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[e(G,{modelValue:l.value.name,"onUpdate:modelValue":a[0]||(a[0]=n=>l.value.name=n),label:"Department Name",rules:[n=>!!n||"Name is required"],required:""},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:t(()=>[e(H,{modelValue:l.value.description,"onUpdate:modelValue":a[1]||(a[1]=n=>l.value.description=n),label:"Description",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(N),e(i,{color:"blue-darken-1",variant:"text",onClick:x},{default:t(()=>a[9]||(a[9]=[o(" Cancel ")])),_:1,__:[9]}),e(i,{color:"blue-darken-1",variant:"text",onClick:M},{default:t(()=>a[10]||(a[10]=[o(" Save ")])),_:1,__:[10]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(S,{modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=n=>m.value=n),"max-width":"500px"},{default:t(()=>[e(D,null,{default:t(()=>[e(w,{class:"text-h5"},{default:t(()=>a[11]||(a[11]=[o("Delete Department")])),_:1,__:[11]}),e(y,null,{default:t(()=>a[12]||(a[12]=[o(" Are you sure you want to delete this department? This action cannot be undone. ")])),_:1,__:[12]}),e(T,null,{default:t(()=>[e(N),e(i,{color:"blue-darken-1",variant:"text",onClick:C},{default:t(()=>a[13]||(a[13]=[o("Cancel")])),_:1,__:[13]}),e(i,{color:"error",variant:"text",onClick:E},{default:t(()=>a[14]||(a[14]=[o("Delete")])),_:1,__:[14]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Z as default};
